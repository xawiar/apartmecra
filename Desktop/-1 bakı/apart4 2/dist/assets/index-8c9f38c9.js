var _M=Object.defineProperty;var EM=(t,e,r)=>e in t?_M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var cn=(t,e,r)=>(EM(t,typeof e!="symbol"?e+"":e,r),r);import{r as D,a as sd,R as BM}from"./vendor-06819936.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var AF={exports:{}},qv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CM=D,NM=Symbol.for("react.element"),SM=Symbol.for("react.fragment"),kM=Object.prototype.hasOwnProperty,TM=CM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IM={key:!0,ref:!0,__self:!0,__source:!0};function uF(t,e,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)kM.call(e,n)&&!IM.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:NM,type:t,key:a,ref:s,props:i,_owner:TM.current}}qv.Fragment=SM;qv.jsx=uF;qv.jsxs=uF;AF.exports=qv;var Jx=AF.exports;const kr=Jx.Fragment,c=Jx.jsx,m=Jx.jsxs;var c2={},DC=sd;c2.createRoot=DC.createRoot,c2.hydrateRoot=DC.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m0.apply(this,arguments)}var eA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(eA||(eA={}));const RC="popstate";function FM(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:s,hash:o}=n.location;return A2("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:hF(i)}return LM(e,r,null,t)}function Ti(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dF(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PM(){return Math.random().toString(36).substr(2,8)}function UC(t,e){return{usr:t.state,key:t.key,idx:e}}function A2(t,e,r,n){return r===void 0&&(r=null),m0({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?mf(e):e,{state:r,key:e&&e.key||n||PM()})}function hF(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function mf(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function LM(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o=eA.Pop,l=null,A=u();A==null&&(A=0,s.replaceState(m0({},s.state,{idx:A}),""));function u(){return(s.state||{idx:null}).idx}function d(){o=eA.Pop;let v=u(),C=v==null?null:v-A;A=v,l&&l({action:o,location:g.location,delta:C})}function h(v,C){o=eA.Push;let I=A2(g.location,v,C);r&&r(I,v),A=u()+1;let F=UC(I,A),E=g.createHref(I);try{s.pushState(F,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(E)}a&&l&&l({action:o,location:g.location,delta:1})}function f(v,C){o=eA.Replace;let I=A2(g.location,v,C);r&&r(I,v),A=u();let F=UC(I,A),E=g.createHref(I);s.replaceState(F,"",E),a&&l&&l({action:o,location:g.location,delta:0})}function p(v){let C=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof v=="string"?v:hF(v);return I=I.replace(/ $/,"%20"),Ti(C,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,C)}let g={get action(){return o},get location(){return t(i,s)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(RC,d),l=v,()=>{i.removeEventListener(RC,d),l=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let C=p(v);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:h,replace:f,go(v){return s.go(v)}};return g}var OC;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(OC||(OC={}));function DM(t,e,r){return r===void 0&&(r="/"),RM(t,e,r,!1)}function RM(t,e,r,n){let i=typeof e=="string"?mf(e):e,a=pF(i.pathname||"/",r);if(a==null)return null;let s=fF(t);UM(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let A=WM(a);o=$M(s[l],A,n)}return o}function fF(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(Ti(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let A=Eu([n,l.relativePath]),u=r.concat(l);a.children&&a.children.length>0&&(Ti(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+A+'".')),fF(a.children,e,u,A)),!(a.path==null&&!a.index)&&e.push({path:A,score:jM(A,a.index),routesMeta:u})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of mF(a.path))i(a,s,l)}),e}function mF(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=mF(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function UM(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:zM(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const OM=/^:[\w-]+$/,MM=3,QM=2,HM=1,VM=10,KM=-2,MC=t=>t==="*";function jM(t,e){let r=t.split("/"),n=r.length;return r.some(MC)&&(n+=KM),e&&(n+=QM),r.filter(i=>!MC(i)).reduce((i,a)=>i+(OM.test(a)?MM:a===""?HM:VM),n)}function zM(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function $M(t,e,r){r===void 0&&(r=!1);let{routesMeta:n}=t,i={},a="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],A=o===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",d=QC({path:l.relativePath,caseSensitive:l.caseSensitive,end:A},u),h=l.route;if(!d&&A&&r&&!n[n.length-1].route.index&&(d=QC({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Eu([a,d.pathname]),pathnameBase:JM(Eu([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=Eu([a,d.pathnameBase]))}return s}function QC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=GM(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((A,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=o[d]||"";s=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[d];return f&&!p?A[h]=void 0:A[h]=(p||"").replace(/%2F/g,"/"),A},{}),pathname:a,pathnameBase:s,pattern:t}}function GM(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),dF(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function WM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dF(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pF(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function qM(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?mf(t):t;return{pathname:r?r.startsWith("/")?r:XM(r,e):e,search:ZM(n),hash:eQ(i)}}function XM(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Bb(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YM(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function gF(t,e){let r=YM(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function vF(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=mf(t):(i=m0({},t),Ti(!i.pathname||!i.pathname.includes("?"),Bb("?","pathname","search",i)),Ti(!i.pathname||!i.pathname.includes("#"),Bb("#","pathname","hash",i)),Ti(!i.search||!i.search.includes("#"),Bb("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let d=e.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=qM(i,o),A=s&&s!=="/"&&s.endsWith("/"),u=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(A||u)&&(l.pathname+="/"),l}const Eu=t=>t.join("/").replace(/\/\/+/g,"/"),JM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wF=["post","put","patch","delete"];new Set(wF);const rQ=["get",...wF];new Set(rQ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p0(){return p0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p0.apply(this,arguments)}const Zx=D.createContext(null),nQ=D.createContext(null),ap=D.createContext(null),Xv=D.createContext(null),od=D.createContext({outlet:null,matches:[],isDataRoute:!1}),bF=D.createContext(null);function sp(){return D.useContext(Xv)!=null}function Yv(){return sp()||Ti(!1),D.useContext(Xv).location}function yF(t){D.useContext(ap).static||D.useLayoutEffect(t)}function DA(){let{isDataRoute:t}=D.useContext(od);return t?pQ():iQ()}function iQ(){sp()||Ti(!1);let t=D.useContext(Zx),{basename:e,future:r,navigator:n}=D.useContext(ap),{matches:i}=D.useContext(od),{pathname:a}=Yv(),s=JSON.stringify(gF(i,r.v7_relativeSplatPath)),o=D.useRef(!1);return yF(()=>{o.current=!0}),D.useCallback(function(A,u){if(u===void 0&&(u={}),!o.current)return;if(typeof A=="number"){n.go(A);return}let d=vF(A,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Eu([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,s,a,t])}function aQ(t,e){return sQ(t,e)}function sQ(t,e,r,n){sp()||Ti(!1);let{navigator:i}=D.useContext(ap),{matches:a}=D.useContext(od),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let A=Yv(),u;if(e){var d;let v=typeof e=="string"?mf(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||Ti(!1),u=v}else u=A;let h=u.pathname||"/",f=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=DM(t,{pathname:f}),g=uQ(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Eu([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Eu([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return e&&g?D.createElement(Xv.Provider,{value:{location:p0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:eA.Pop}},g):g}function oQ(){let t=mQ(),e=tQ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),r?D.createElement("pre",{style:i},r):null,a)}const lQ=D.createElement(oQ,null);class cQ extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?D.createElement(od.Provider,{value:this.props.routeContext},D.createElement(bF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AQ(t){let{routeContext:e,match:r,children:n}=t,i=D.useContext(Zx);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),D.createElement(od.Provider,{value:e},n)}function uQ(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,o=(i=r)==null?void 0:i.errors;if(o!=null){let u=s.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||Ti(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,A=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(A=u),d.route.id){let{loaderData:h,errors:f}=r,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,A>=0?s=s.slice(0,A+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let f,p=!1,g=null,v=null;r&&(f=o&&d.route.id?o[d.route.id]:void 0,g=d.route.errorElement||lQ,l&&(A<0&&h===0?(gQ("route-fallback",!1),p=!0,v=null):A===h&&(p=!0,v=d.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,h+1)),I=()=>{let F;return f?F=g:p?F=v:d.route.Component?F=D.createElement(d.route.Component,null):d.route.element?F=d.route.element:F=u,D.createElement(AQ,{match:d,routeContext:{outlet:u,matches:C,isDataRoute:r!=null},children:F})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(cQ,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:I(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):I()},null)}var xF=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xF||{}),U1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(U1||{});function dQ(t){let e=D.useContext(Zx);return e||Ti(!1),e}function hQ(t){let e=D.useContext(nQ);return e||Ti(!1),e}function fQ(t){let e=D.useContext(od);return e||Ti(!1),e}function _F(t){let e=fQ(),r=e.matches[e.matches.length-1];return r.route.id||Ti(!1),r.route.id}function mQ(){var t;let e=D.useContext(bF),r=hQ(U1.UseRouteError),n=_F(U1.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function pQ(){let{router:t}=dQ(xF.UseNavigateStable),e=_F(U1.UseNavigateStable),r=D.useRef(!1);return yF(()=>{r.current=!0}),D.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,p0({fromRouteId:e},a)))},[t,e])}const HC={};function gQ(t,e,r){!e&&!HC[t]&&(HC[t]=!0)}function vQ(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function wQ(t){let{to:e,replace:r,state:n,relative:i}=t;sp()||Ti(!1);let{future:a,static:s}=D.useContext(ap),{matches:o}=D.useContext(od),{pathname:l}=Yv(),A=DA(),u=vF(e,gF(o,a.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return D.useEffect(()=>A(JSON.parse(d),{replace:r,state:n,relative:i}),[A,d,i,r,n]),null}function as(t){Ti(!1)}function bQ(t){let{basename:e="/",children:r=null,location:n,navigationType:i=eA.Pop,navigator:a,static:s=!1,future:o}=t;sp()&&Ti(!1);let l=e.replace(/^\/*/,"/"),A=D.useMemo(()=>({basename:l,navigator:a,static:s,future:p0({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof n=="string"&&(n=mf(n));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=n,g=D.useMemo(()=>{let v=pF(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return g==null?null:D.createElement(ap.Provider,{value:A},D.createElement(Xv.Provider,{children:r,value:g}))}function yQ(t){let{children:e,location:r}=t;return aQ(u2(e),r)}new Promise(()=>{});function u2(t,e){e===void 0&&(e=[]);let r=[];return D.Children.forEach(t,(n,i)=>{if(!D.isValidElement(n))return;let a=[...e,i];if(n.type===D.Fragment){r.push.apply(r,u2(n.props.children,a));return}n.type!==as&&Ti(!1),!n.props.index||!n.props.children||Ti(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=u2(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xQ="6";try{window.__reactRouterVersion=xQ}catch{}const _Q="startTransition",VC=BM[_Q];function EQ(t){let{basename:e,children:r,future:n,window:i}=t,a=D.useRef();a.current==null&&(a.current=FM({window:i,v5Compat:!0}));let s=a.current,[o,l]=D.useState({action:s.action,location:s.location}),{v7_startTransition:A}=n||{},u=D.useCallback(d=>{A&&VC?VC(()=>l(d)):l(d)},[l,A]);return D.useLayoutEffect(()=>s.listen(u),[s,u]),D.useEffect(()=>vQ(n),[n]),D.createElement(bQ,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:s,future:n})}var KC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(KC||(KC={}));var jC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jC||(jC={}));const BQ="modulepreload",CQ=function(t){return"/"+t},zC={},xh=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=CQ(a),a in zC)return;zC[a]=!0;const s=a.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===a&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${o}`))return;const A=document.createElement("link");if(A.rel=s?"stylesheet":BQ,s||(A.as="script",A.crossOrigin=""),A.href=a,document.head.appendChild(A),s)return new Promise((u,d)=>{A.addEventListener("load",u),A.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a})},NQ=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},SQ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],o=t[r++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},BF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,A=l?t[i+2]:0,u=a>>2,d=(a&3)<<4|o>>4;let h=(o&15)<<2|A>>6,f=A&63;l||(f=64,s||(h=64)),n.push(r[u],r[d],r[h],r[f])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SQ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const A=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||o==null||A==null||d==null)throw new kQ;const h=a<<2|o>>4;if(n.push(h),A!==64){const f=o<<4&240|A>>2;if(n.push(f),d!==64){const p=A<<6&192|d;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kQ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TQ=function(t){const e=EF(t);return BF.encodeByteArray(e,!0)},O1=function(t){return TQ(t).replace(/\./g,"")},CF=function(t){try{return BF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ=()=>NF().__FIREBASE_DEFAULTS__,FQ=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PQ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CF(t[1]);return e&&JSON.parse(e)},Jv=()=>{try{return NQ()||IQ()||FQ()||PQ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SF=t=>{var e,r;return(r=(e=Jv())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},kF=t=>{const e=SF(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},TF=()=>{var t;return(t=Jv())==null?void 0:t.config},IF=t=>{var e;return(e=Jv())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t},o="";return[O1(JSON.stringify(r)),O1(JSON.stringify(s)),o].join(".")}const Um={};function DQ(){const t={prod:[],emulator:[]};for(const e of Object.keys(Um))Um[e]?t.emulator.push(e):t.prod.push(e);return t}function RQ(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let $C=!1;function e_(t,e){if(typeof window>"u"||typeof document>"u"||!dc(window.location.host)||Um[t]===e||Um[t]||$C)return;Um[t]=e;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",a=DQ().prod.length>0;function s(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,f){h.setAttribute("width","24"),h.setAttribute("id",f),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function A(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{$C=!0,s()},h}function u(h,f){h.setAttribute("id",f),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=RQ(n),f=r("text"),p=document.getElementById(f)||document.createElement("span"),g=r("learnmore"),v=document.getElementById(g)||document.createElement("a"),C=r("preprendIcon"),I=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const F=h.element;o(F),u(v,g);const E=A();l(I,C),F.append(I,p,v,E),document.body.appendChild(F)}a?(p.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UQ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oi())}function PF(){var e;const t=(e=Jv())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OQ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MQ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QQ(){const t=Oi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DF(){return!PF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RF(){return!PF()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function t_(){try{return typeof indexedDB=="object"}catch{return!1}}function UF(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}function HQ(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ="FirebaseError";class go extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=VQ,Object.setPrototypeOf(this,go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ld.prototype.create)}}class ld{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?KQ(a,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new go(i,o,n)}}function KQ(t,e){return t.replace(jQ,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const jQ=/\{\$([^}]+)}/g;function zQ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uo(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(GC(a)&&GC(s)){if(!uo(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function GC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function wm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function bm(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function $Q(t,e){const r=new GQ(t,e);return r.subscribe.bind(r)}class GQ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");WQ(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Cb),i.error===void 0&&(i.error=Cb),i.complete===void 0&&(i.complete=Cb);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WQ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Cb(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qQ=1e3,XQ=2,YQ=4*60*60*1e3,JQ=.5;function WC(t,e=qQ,r=XQ){const n=e*Math.pow(r,t),i=Math.round(JQ*n*(Math.random()-.5)*2);return Math.min(YQ,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){return t&&t._delegate?t._delegate:t}class ho{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new LQ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t7(e))try{this.getOrInitializeService({instanceIdentifier:iu})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=iu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=iu){return this.instances.has(e)}getOptions(e=iu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&s.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:e7(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=iu){return this.component?this.component.multipleInstances?e:iu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e7(t){return t===iu?void 0:t}function t7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new ZQ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qr||(Qr={}));const n7={debug:Qr.DEBUG,verbose:Qr.VERBOSE,info:Qr.INFO,warn:Qr.WARN,error:Qr.ERROR,silent:Qr.SILENT},i7=Qr.INFO,a7={[Qr.DEBUG]:"log",[Qr.VERBOSE]:"log",[Qr.INFO]:"info",[Qr.WARN]:"warn",[Qr.ERROR]:"error"},s7=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=a7[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let ew=class{constructor(e){this.name=e,this._logLevel=i7,this._logHandler=s7,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n7[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qr.DEBUG,...e),this._logHandler(this,Qr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qr.VERBOSE,...e),this._logHandler(this,Qr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qr.INFO,...e),this._logHandler(this,Qr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qr.WARN,...e),this._logHandler(this,Qr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qr.ERROR,...e),this._logHandler(this,Qr.ERROR,...e)}};const o7=(t,e)=>e.some(r=>t instanceof r);let qC,XC;function l7(){return qC||(qC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c7(){return XC||(XC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OF=new WeakMap,d2=new WeakMap,MF=new WeakMap,Nb=new WeakMap,r_=new WeakMap;function A7(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(dA(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&OF.set(r,t)}).catch(()=>{}),r_.set(e,t),e}function u7(t){if(d2.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});d2.set(t,e)}let h2={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return d2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MF.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return dA(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function d7(t){h2=t(h2)}function h7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Sb(this),e,...r);return MF.set(n,e.sort?e.sort():[e]),dA(n)}:c7().includes(t)?function(...e){return t.apply(Sb(this),e),dA(OF.get(this))}:function(...e){return dA(t.apply(Sb(this),e))}}function f7(t){return typeof t=="function"?h7(t):(t instanceof IDBTransaction&&u7(t),o7(t,l7())?new Proxy(t,h2):t)}function dA(t){if(t instanceof IDBRequest)return A7(t);if(Nb.has(t))return Nb.get(t);const e=f7(t);return e!==t&&(Nb.set(t,e),r_.set(e,t)),e}const Sb=t=>r_.get(t);function QF(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=dA(s);return n&&s.addEventListener("upgradeneeded",l=>{n(dA(s.result),l.oldVersion,l.newVersion,dA(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",A=>i(A.oldVersion,A.newVersion,A))}).catch(()=>{}),o}const m7=["get","getKey","getAll","getAllKeys","count"],p7=["put","add","delete","clear"],kb=new Map;function YC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kb.get(e))return kb.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=p7.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||m7.includes(r)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let A=l.store;return n&&(A=A.index(o.shift())),(await Promise.all([A[r](...o),i&&l.done]))[0]};return kb.set(e,a),a}d7(t=>({...t,get:(e,r,n)=>YC(e,r)||t.get(e,r,n),has:(e,r)=>!!YC(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(v7(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function v7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const f2="@firebase/app",JC="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new ew("@firebase/app"),w7="@firebase/app-compat",b7="@firebase/analytics-compat",y7="@firebase/analytics",x7="@firebase/app-check-compat",_7="@firebase/app-check",E7="@firebase/auth",B7="@firebase/auth-compat",C7="@firebase/database",N7="@firebase/data-connect",S7="@firebase/database-compat",k7="@firebase/functions",T7="@firebase/functions-compat",I7="@firebase/installations",F7="@firebase/installations-compat",P7="@firebase/messaging",L7="@firebase/messaging-compat",D7="@firebase/performance",R7="@firebase/performance-compat",U7="@firebase/remote-config",O7="@firebase/remote-config-compat",M7="@firebase/storage",Q7="@firebase/storage-compat",H7="@firebase/firestore",V7="@firebase/ai",K7="@firebase/firestore-compat",j7="firebase",z7="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="[DEFAULT]",$7={[f2]:"fire-core",[w7]:"fire-core-compat",[y7]:"fire-analytics",[b7]:"fire-analytics-compat",[_7]:"fire-app-check",[x7]:"fire-app-check-compat",[E7]:"fire-auth",[B7]:"fire-auth-compat",[C7]:"fire-rtdb",[N7]:"fire-data-connect",[S7]:"fire-rtdb-compat",[k7]:"fire-fn",[T7]:"fire-fn-compat",[I7]:"fire-iid",[F7]:"fire-iid-compat",[P7]:"fire-fcm",[L7]:"fire-fcm-compat",[D7]:"fire-perf",[R7]:"fire-perf-compat",[U7]:"fire-rc",[O7]:"fire-rc-compat",[M7]:"fire-gcs",[Q7]:"fire-gcs-compat",[H7]:"fire-fst",[K7]:"fire-fst-compat",[V7]:"fire-vertex","fire-js":"fire-js",[j7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new Map,G7=new Map,m2=new Map;function ZC(t,e){try{t.container.addComponent(e)}catch(r){ic.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Oo(t){const e=t.name;if(m2.has(e))return ic.debug(`There were multiple attempts to register component ${e}.`),!1;m2.set(e,t);for(const r of Q1.values())ZC(r,t);for(const r of G7.values())ZC(r,t);return!0}function Bl(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function W7(t,e,r=M1){Bl(t,e).clearInstance(r)}function Ds(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hA=new ld("app","Firebase",q7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hA.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=z7;function HF(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:M1,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw hA.create("bad-app-name",{appName:String(i)});if(r||(r=TF()),!r)throw hA.create("no-options");const a=Q1.get(i);if(a){if(uo(r,a.options)&&uo(n,a.config))return a;throw hA.create("duplicate-app",{appName:i})}const s=new r7(i);for(const l of m2.values())s.addComponent(l);const o=new X7(r,n,s);return Q1.set(i,o),o}function tw(t=M1){const e=Q1.get(t);if(!e&&t===M1&&TF())return HF();if(!e)throw hA.create("no-app",{appName:t});return e}function ds(t,e,r){let n=$7[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${n}" with version "${e}":`];i&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ic.warn(s.join(" "));return}Oo(new ho(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7="firebase-heartbeat-database",J7=1,g0="firebase-heartbeat-store";let Tb=null;function VF(){return Tb||(Tb=QF(Y7,J7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(g0)}catch(r){console.warn(r)}}}}).catch(t=>{throw hA.create("idb-open",{originalErrorMessage:t.message})})),Tb}async function Z7(t){try{const r=(await VF()).transaction(g0),n=await r.objectStore(g0).get(KF(t));return await r.done,n}catch(e){if(e instanceof go)ic.warn(e.message);else{const r=hA.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ic.warn(r.message)}}}async function eN(t,e){try{const n=(await VF()).transaction(g0,"readwrite");await n.objectStore(g0).put(e,KF(t)),await n.done}catch(r){if(r instanceof go)ic.warn(r.message);else{const n=hA.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ic.warn(n.message)}}}function KF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=1024,tH=30;class rH{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new iH(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>tH){const s=aH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ic.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=tN(),{heartbeatsToSend:n,unsentEntries:i}=nH(this._heartbeatsCache.heartbeats),a=O1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return ic.warn(r),""}}}function tN(){return new Date().toISOString().substring(0,10)}function nH(t,e=eH){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),rN(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),rN(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class iH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t_()?UF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Z7(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return eN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return eN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function rN(t){return O1(JSON.stringify({version:2,heartbeats:t})).length}function aH(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t){Oo(new ho("platform-logger",e=>new g7(e),"PRIVATE")),Oo(new ho("heartbeat",e=>new rH(e),"PRIVATE")),ds(f2,JC,t),ds(f2,JC,"esm2020"),ds("fire-js","")}sH("");var oH="firebase",lH="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(oH,lH,"app");function jF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cH=jF,zF=new ld("auth","Firebase",jF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new ew("@firebase/auth");function AH(t,...e){H1.logLevel<=Qr.WARN&&H1.warn(`Auth (${cd}): ${t}`,...e)}function A1(t,...e){H1.logLevel<=Qr.ERROR&&H1.error(`Auth (${cd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,...e){throw n_(t,...e)}function pl(t,...e){return n_(t,...e)}function $F(t,e,r){const n={...cH(),[e]:r};return new ld("auth","Firebase",n).create(e,{appName:t.name})}function Zl(t){return $F(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function n_(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return zF.create(t,...e)}function ur(t,e,...r){if(!t)throw n_(e,...r)}function ql(t){const e="INTERNAL ASSERTION FAILED: "+t;throw A1(e),new Error(e)}function ac(t,e){t||ql(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uH(){return nN()==="http:"||nN()==="https:"}function nN(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uH()||LF()||"connection"in navigator)?navigator.onLine:!0}function hH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,r){this.shortDelay=e,this.longDelay=r,ac(r>e,"Short delay should be less than long delay!"),this.isMobile=UQ()||MQ()}get(){return dH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t,e){ac(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ql("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ql("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ql("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pH=new lp(3e4,6e4);function RA(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function UA(t,e,r,n,i={}){return WF(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const o=op({key:t.config.apiKey,...s}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const A={method:e,headers:l,...a};return OQ()||(A.referrerPolicy="no-referrer"),t.emulatorConfig&&dc(t.emulatorConfig.host)&&(A.credentials="include"),GF.fetch()(await qF(t,t.config.apiHost,r,o),A)})}async function WF(t,e,r){t._canInitEmulator=!1;const n={...fH,...e};try{const i=new vH(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw ag(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,A]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ag(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw ag(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw ag(t,"user-disabled",s);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw $F(t,u,A);Mo(t,u)}}catch(i){if(i instanceof go)throw i;Mo(t,"network-request-failed",{message:String(i)})}}async function cp(t,e,r,n,i={}){const a=await UA(t,e,r,n,i);return"mfaPendingCredential"in a&&Mo(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function qF(t,e,r,n){const i=`${e}${r}?${n}`,a=t,s=a.config.emulator?i_(t.config,i):`${t.config.apiScheme}://${i}`;return mH.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function gH(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(pl(this.auth,"network-request-failed")),pH.get())})}}function ag(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=pl(t,e,n);return i.customData._tokenResponse=r,i}function iN(t){return t!==void 0&&t.enterprise!==void 0}class wH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return gH(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bH(t,e){return UA(t,"GET","/v2/recaptchaConfig",RA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yH(t,e){return UA(t,"POST","/v1/accounts:delete",e)}async function V1(t,e){return UA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xH(t,e=!1){const r=Tr(t),n=await r.getIdToken(e),i=a_(n);ur(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Om(Ib(i.auth_time)),issuedAtTime:Om(Ib(i.iat)),expirationTime:Om(Ib(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ib(t){return Number(t)*1e3}function a_(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return A1("JWT malformed, contained fewer than 3 sections"),null;try{const i=CF(r);return i?JSON.parse(i):(A1("Failed to decode base64 JWT payload"),null)}catch(i){return A1("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function aN(t){const e=a_(t);return ur(e,"internal-error"),ur(typeof e.exp<"u","internal-error"),ur(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v0(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof go&&_H(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function _H({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Om(this.lastLoginAt),this.creationTime=Om(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(t){var d;const e=t.auth,r=await t.getIdToken(),n=await v0(t,V1(e,{idToken:r}));ur(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const a=(d=i.providerUserInfo)!=null&&d.length?XF(i.providerUserInfo):[],s=CH(t.providerData,a),o=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),A=o?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new g2(i.createdAt,i.lastLoginAt),isAnonymous:A};Object.assign(t,u)}async function BH(t){const e=Tr(t);await K1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CH(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function XF(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NH(t,e){const r=await WF(t,{},async()=>{const n=op({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await qF(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&dc(t.emulatorConfig.host)&&(l.credentials="include"),GF.fetch()(s,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function SH(t,e){return UA(t,"POST","/v2/accounts:revokeToken",RA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ur(e.idToken,"internal-error"),ur(typeof e.idToken<"u","internal-error"),ur(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ur(e.length!==0,"internal-error");const r=aN(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ur(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await NH(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new _h;return n&&(ur(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(ur(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ur(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _h,this.toJSON())}_performRefresh(){return ql("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t,e){ur(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fo{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new EH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new g2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await v0(this,this.stsTokenManager.getToken(this.auth,e));return ur(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return xH(this,e)}reload(){return BH(this)}_assign(e){this!==e&&(ur(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Fo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){ur(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await K1(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ds(this.auth.app))return Promise.reject(Zl(this.auth));const e=await this.getIdToken();return await v0(this,yH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,s=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,A=r.createdAt??void 0,u=r.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:f,providerData:p,stsTokenManager:g}=r;ur(d&&g,e,"internal-error");const v=_h.fromJSON(this.name,g);ur(typeof d=="string",e,"internal-error"),Pc(n,e.name),Pc(i,e.name),ur(typeof h=="boolean",e,"internal-error"),ur(typeof f=="boolean",e,"internal-error"),Pc(a,e.name),Pc(s,e.name),Pc(o,e.name),Pc(l,e.name),Pc(A,e.name),Pc(u,e.name);const C=new Fo({uid:d,auth:e,email:i,emailVerified:h,displayName:n,isAnonymous:f,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:v,createdAt:A,lastLoginAt:u});return p&&Array.isArray(p)&&(C.providerData=p.map(I=>({...I}))),l&&(C._redirectEventId=l),C}static async _fromIdTokenResponse(e,r,n=!1){const i=new _h;i.updateFromServerResponse(r);const a=new Fo({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await K1(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ur(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?XF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new _h;o.updateFromIdToken(n);const l=new Fo({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),A={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new g2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,A),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=new Map;function Xl(t){ac(t instanceof Function,"Expected a class definition");let e=sN.get(t);return e?(ac(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}YF.type="NONE";const oN=YF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t,e,r){return`firebase:${t}:${e}:${r}`}class Eh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=u1(this.userKey,i.apiKey,a),this.fullPersistenceKey=u1("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await V1(this.auth,{idToken:e}).catch(()=>{});return r?Fo._fromGetAccountInfoResponse(this.auth,r,e):null}return Fo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Eh(Xl(oN),e,n);const i=(await Promise.all(r.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let a=i[0]||Xl(oN);const s=u1(n,e.config.apiKey,e.name);let o=null;for(const A of r)try{const u=await A._get(s);if(u){let d;if(typeof u=="string"){const h=await V1(e,{idToken:u}).catch(()=>{});if(!h)break;d=await Fo._fromGetAccountInfoResponse(e,h,u)}else d=Fo._fromJSON(e,u);A!==a&&(o=d),a=A;break}}catch{}const l=i.filter(A=>A._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Eh(a,e,n):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(r.map(async A=>{if(A!==a)try{await A._remove(s)}catch{}})),new Eh(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(n3(e))return"Blackberry";if(i3(e))return"Webos";if(ZF(e))return"Safari";if((e.includes("chrome/")||e3(e))&&!e.includes("edge/"))return"Chrome";if(r3(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function JF(t=Oi()){return/firefox\//i.test(t)}function ZF(t=Oi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e3(t=Oi()){return/crios\//i.test(t)}function t3(t=Oi()){return/iemobile/i.test(t)}function r3(t=Oi()){return/android/i.test(t)}function n3(t=Oi()){return/blackberry/i.test(t)}function i3(t=Oi()){return/webos/i.test(t)}function s_(t=Oi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kH(t=Oi()){var e;return s_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function TH(){return QQ()&&document.documentMode===10}function a3(t=Oi()){return s_(t)||r3(t)||i3(t)||n3(t)||/windows phone/i.test(t)||t3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t,e=[]){let r;switch(t){case"Browser":r=lN(Oi());break;case"Worker":r=`${lN(Oi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${cd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FH(t,e={}){return UA(t,"GET","/v2/passwordPolicy",RA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH=6;class LH{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??PH,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cN(this),this.idTokenSubscription=new cN(this),this.beforeStateQueue=new IH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Xl(r)),this._initializationPromise=this.queue(async()=>{var n,i,a;if(!this._deleted&&(this.persistenceManager=await Eh.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await V1(this,{idToken:e}),n=await Fo._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Ds(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ur(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await K1(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ds(this.app))return Promise.reject(Zl(this));const r=e?Tr(e):null;return r&&ur(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ur(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ds(this.app)?Promise.reject(Zl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ds(this.app)?Promise.reject(Zl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FH(this),r=new LH(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ld("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await SH(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Xl(e)||this._popupRedirectResolver;ur(r,this,"argument-error"),this.redirectPersistenceManager=await Eh.create(this,[Xl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ur(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{s=!0,l()}}else{const l=e.addObserver(r);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ur(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&AH(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ad(t){return Tr(t)}class cN{constructor(e){this.auth=e,this.observer=null,this.addObserver=$Q(r=>this.observer=r)}get next(){return ur(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RH(t){rw=t}function o3(t){return rw.loadJS(t)}function UH(){return rw.recaptchaEnterpriseScript}function OH(){return rw.gapiScript}function MH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class QH{constructor(){this.enterprise=new HH}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class HH{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const VH="recaptcha-enterprise",l3="NO_RECAPTCHA";class KH{constructor(e){this.type=VH,this.auth=Ad(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{bH(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const A=new wH(l);return a.tenantId==null?a._agentRecaptchaConfig=A:a._tenantRecaptchaConfigs[a.tenantId]=A,s(A.siteKey)}}).catch(l=>{o(l)})})}function i(a,s,o){const l=window.grecaptcha;iN(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(A=>{s(A)}).catch(()=>{s(l3)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QH().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{n(this.auth).then(o=>{if(!r&&iN(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=UH();l.length!==0&&(l+=o),o3(l).then(()=>{i(o,a,s)}).catch(A=>{s(A)})}}).catch(o=>{s(o)})})}}async function em(t,e,r,n=!1,i=!1){const a=new KH(t);let s;if(i)s=l3;else try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,A=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:A,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function v2(t,e,r,n,i){var a,s;if(i==="EMAIL_PASSWORD_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await em(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await em(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("PHONE_PROVIDER")){const o=await em(t,e,r);return n(t,o).catch(async l=>{var A;if(((A=t._getRecaptchaConfig())==null?void 0:A.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const u=await em(t,e,r,!1,!0);return n(t,u)}return Promise.reject(l)})}else{const o=await em(t,e,r,!1,!0);return n(t,o)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(t,e){const r=Bl(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(uo(a,e??{}))return i;Mo(i,"already-initialized")}return r.initialize({options:e})}function zH(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Xl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function $H(t,e,r){const n=Ad(t);ur(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),a=c3(e),{host:s,port:o}=GH(e),l=o===null?"":`:${o}`,A={url:`${a}//${s}${l}/`},u=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){ur(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ur(uo(A,n.config.emulator)&&uo(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=A,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,dc(s)?(Zv(`${a}//${s}${l}`),e_("Auth",!0)):i||WH()}function c3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function GH(t){const e=c3(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:AN(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:AN(s)}}}function AN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WH(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ql("not implemented")}_getIdTokenResponse(e){return ql("not implemented")}_linkToIdToken(e,r){return ql("not implemented")}_getReauthenticationResolver(e){return ql("not implemented")}}async function qH(t,e){return UA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XH(t,e){return cp(t,"POST","/v1/accounts:signInWithPassword",RA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YH(t,e){return cp(t,"POST","/v1/accounts:signInWithEmailLink",RA(t,e))}async function JH(t,e){return cp(t,"POST","/v1/accounts:signInWithEmailLink",RA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends o_{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new w0(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new w0(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v2(e,r,"signInWithPassword",XH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return YH(e,{email:this._email,oobCode:this._password});default:Mo(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v2(e,n,"signUpPassword",qH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JH(e,{idToken:r,email:this._email,oobCode:this._password});default:Mo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t,e){return cp(t,"POST","/v1/accounts:signInWithIdp",RA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH="http://localhost";class Ru extends o_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ru(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Mo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=r;if(!n||!i)return null;const s=new Ru(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return Bh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Bh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Bh(e,r)}buildRequest(){const e={requestUri:ZH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=op(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function t9(t){const e=wm(bm(t)).link,r=e?wm(bm(e)).deep_link_id:null,n=wm(bm(t)).deep_link_id;return(n?wm(bm(n)).link:null)||n||r||e||t}class l_{constructor(e){const r=wm(bm(e)),n=r.apiKey??null,i=r.oobCode??null,a=e9(r.mode??null);ur(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=t9(e);try{return new l_(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(){this.providerId=pf.PROVIDER_ID}static credential(e,r){return w0._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=l_.parseLink(r);return ur(n,"argument-error"),w0._fromEmailAndCode(e,n.code,n.tenantId)}}pf.PROVIDER_ID="password";pf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends A3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Ap{constructor(){super("facebook.com")}static credential(e){return Ru._fromParams({providerId:zc.PROVIDER_ID,signInMethod:zc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zc.credentialFromTaggedObject(e)}static credentialFromError(e){return zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zc.credential(e.oauthAccessToken)}catch{return null}}}zc.FACEBOOK_SIGN_IN_METHOD="facebook.com";zc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Ap{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ru._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return $c.credential(r,n)}catch{return null}}}$c.GOOGLE_SIGN_IN_METHOD="google.com";$c.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends Ap{constructor(){super("github.com")}static credential(e){return Ru._fromParams({providerId:Gc.PROVIDER_ID,signInMethod:Gc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gc.credentialFromTaggedObject(e)}static credentialFromError(e){return Gc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gc.credential(e.oauthAccessToken)}catch{return null}}}Gc.GITHUB_SIGN_IN_METHOD="github.com";Gc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Ap{constructor(){super("twitter.com")}static credential(e,r){return Ru._fromParams({providerId:Wc.PROVIDER_ID,signInMethod:Wc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Wc.credentialFromTaggedObject(e)}static credentialFromError(e){return Wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Wc.credential(r,n)}catch{return null}}}Wc.TWITTER_SIGN_IN_METHOD="twitter.com";Wc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r9(t,e){return cp(t,"POST","/v1/accounts:signUp",RA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Fo._fromIdTokenResponse(e,n,i),s=uN(n);return new Uu({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=uN(n);return new Uu({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function uN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1 extends go{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,j1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new j1(e,r,n,i)}}function u3(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?j1._fromErrorAndOperation(t,a,e,n):a})}async function n9(t,e,r=!1){const n=await v0(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Uu._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i9(t,e,r=!1){const{auth:n}=t;if(Ds(n.app))return Promise.reject(Zl(n));const i="reauthenticate";try{const a=await v0(t,u3(n,i,e,t),r);ur(a.idToken,n,"internal-error");const s=a_(a.idToken);ur(s,n,"internal-error");const{sub:o}=s;return ur(t.uid===o,n,"user-mismatch"),Uu._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Mo(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(t,e,r=!1){if(Ds(t.app))return Promise.reject(Zl(t));const n="signIn",i=await u3(t,n,e),a=await Uu._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function a9(t,e){return d3(Ad(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(t){const e=Ad(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function M1e(t,e,r){if(Ds(t.app))return Promise.reject(Zl(t));const n=Ad(t),s=await v2(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r9,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&h3(t),l}),o=await Uu._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(o.user),o}function Q1e(t,e,r){return Ds(t.app)?Promise.reject(Zl(t)):a9(Tr(t),pf.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&h3(t),n})}function s9(t,e,r,n){return Tr(t).onIdTokenChanged(e,r,n)}function o9(t,e,r){return Tr(t).beforeAuthStateChanged(e,r)}function H1e(t,e,r,n){return Tr(t).onAuthStateChanged(e,r,n)}function V1e(t){return Tr(t).signOut()}const z1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(z1,"1"),this.storage.removeItem(z1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=1e3,c9=10;class m3 extends f3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);TH()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,c9):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},l9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}m3.type="LOCAL";const A9=m3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3 extends f3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}p3.type="SESSION";const g3=p3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new nw(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async A=>A(r.origin,a)),l=await u9(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const A=c_("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===A)switch(h.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(h.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:A,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(){return window}function h9(t){gl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(){return typeof gl().WorkerGlobalScope<"u"&&typeof gl().importScripts=="function"}async function f9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function m9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function p9(){return v3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="firebaseLocalStorageDb",g9=1,$1="firebaseLocalStorage",b3="fbase_key";class up{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function iw(t,e){return t.transaction([$1],e?"readwrite":"readonly").objectStore($1)}function v9(){const t=indexedDB.deleteDatabase(w3);return new up(t).toPromise()}function w2(){const t=indexedDB.open(w3,g9);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore($1,{keyPath:b3})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains($1)?e(n):(n.close(),await v9(),e(await w2()))})})}async function dN(t,e,r){const n=iw(t,!0).put({[b3]:e,value:r});return new up(n).toPromise()}async function w9(t,e){const r=iw(t,!1).get(e),n=await new up(r).toPromise();return n===void 0?null:n.value}function hN(t,e){const r=iw(t,!0).delete(e);return new up(r).toPromise()}const b9=800,y9=3;class y3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>y9)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nw._getInstance(p9()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await f9(),!this.activeServiceWorker)return;this.sender=new d9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||m9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w2();return await dN(e,z1,"1"),await hN(e,z1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>dN(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>w9(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>hN(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=iw(i,!1).getAll();return new up(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}y3.type="LOCAL";const x9=y3;new lp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(t,e){return e?Xl(e):(ur(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends o_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Bh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Bh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function E9(t){return d3(t.auth,new A_(t),t.bypassAuthState)}function B9(t){const{auth:e,user:r}=t;return ur(r,e,"internal-error"),i9(r,new A_(t),t.bypassAuthState)}async function C9(t){const{auth:e,user:r}=t;return ur(r,e,"internal-error"),n9(r,new A_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E9;case"linkViaPopup":case"linkViaRedirect":return C9;case"reauthViaPopup":case"reauthViaRedirect":return B9;default:Mo(this.auth,"internal-error")}}resolve(e){ac(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ac(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=new lp(2e3,1e4);class mh extends x3{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,mh.currentPopupAction&&mh.currentPopupAction.cancel(),mh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ur(e,this.auth,"internal-error"),e}async onExecution(){ac(this.filter.length===1,"Popup operations only handle one event");const e=c_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(pl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,N9.get())};e()}}mh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="pendingRedirect",d1=new Map;class k9 extends x3{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=d1.get(this.auth._key());if(!e){try{const n=await T9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}d1.set(this.auth._key(),e)}return this.bypassAuthState||d1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T9(t,e){const r=P9(e),n=F9(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function I9(t,e){d1.set(t._key(),e)}function F9(t){return Xl(t._redirectPersistence)}function P9(t){return u1(S9,t.config.apiKey,t.name)}async function L9(t,e,r=!1){if(Ds(t.app))return Promise.reject(Zl(t));const n=Ad(t),i=_9(n,e),s=await new k9(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=10*60*1e3;class R9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U9(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!_3(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(pl(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D9&&this.cachedEventUids.clear(),this.cachedEventUids.has(fN(e))}saveEventToCache(e){this.cachedEventUids.add(fN(e)),this.lastProcessedEventTime=Date.now()}}function fN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _3({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function U9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O9(t,e={}){return UA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q9=/^https?/;async function H9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await O9(t);for(const r of e)try{if(V9(r))return}catch{}Mo(t,"unauthorized-domain")}function V9(t){const e=p2(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!Q9.test(r))return!1;if(M9.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=new lp(3e4,6e4);function mN(){const t=gl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function j9(t){return new Promise((e,r)=>{var i,a,s;function n(){mN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mN(),r(pl(t,"network-request-failed"))},timeout:K9.get()})}if((a=(i=gl().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=gl().gapi)!=null&&s.load)n();else{const o=MH("iframefcb");return gl()[o]=()=>{gapi.load?n():r(pl(t,"network-request-failed"))},o3(`${OH()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw h1=null,e})}let h1=null;function z9(t){return h1=h1||j9(t),h1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=new lp(5e3,15e3),G9="__/auth/iframe",W9="emulator/auth/iframe",q9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y9(t){const e=t.config;ur(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?i_(e,W9):`https://${t.config.authDomain}/${G9}`,n={apiKey:e.apiKey,appName:t.name,v:cd},i=X9.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${op(n).slice(1)}`}async function J9(t){const e=await z9(t),r=gl().gapi;return ur(r,t,"internal-error"),e.open({where:document.body,url:Y9(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q9,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=pl(t,"network-request-failed"),o=gl().setTimeout(()=>{a(s)},$9.get());function l(){gl().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eV=500,tV=600,rV="_blank",nV="http://localhost";class pN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iV(t,e,r,n=eV,i=tV){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...Z9,width:n.toString(),height:i.toString(),top:a,left:s},A=Oi().toLowerCase();r&&(o=e3(A)?rV:r),JF(A)&&(e=e||nV,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(kH(A)&&o!=="_self")return aV(e||"",o),new pN(null);const d=window.open(e||"",o,u);ur(d,t,"popup-blocked");try{d.focus()}catch{}return new pN(d)}function aV(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV="__/auth/handler",oV="emulator/auth/handler",lV=encodeURIComponent("fac");async function gN(t,e,r,n,i,a){ur(t.config.authDomain,t,"auth-domain-config-required"),ur(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:cd,eventId:i};if(e instanceof A3){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",zQ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(a||{}))s[u]=d}if(e instanceof Ap){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),A=l?`#${lV}=${encodeURIComponent(l)}`:"";return`${cV(t)}?${op(o).slice(1)}${A}`}function cV({config:t}){return t.emulator?i_(t,oV):`https://${t.authDomain}/${sV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="webStorageSupport";class AV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g3,this._completeRedirectFn=L9,this._overrideRedirectResult=I9}async _openPopup(e,r,n,i){var s;ac((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await gN(e,r,n,p2(),i);return iV(e,a,c_())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await gN(e,r,n,p2(),i);return h9(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(ac(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await J9(e),n=new R9(e);return r.register("authEvent",i=>(ur(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Fb,{type:Fb},i=>{var s;const a=(s=i==null?void 0:i[0])==null?void 0:s[Fb];a!==void 0&&r(!!a),Mo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=H9(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return a3()||ZF()||s_()}}const uV=AV;var vN="@firebase/auth",wN="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ur(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fV(t){Oo(new ho("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;ur(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s3(t)},A=new DH(n,i,a,l);return zH(A,r),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Oo(new ho("auth-internal",e=>{const r=Ad(e.getProvider("auth").getImmediate());return(n=>new dV(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(vN,wN,hV(t)),ds(vN,wN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=5*60,pV=IF("authIdTokenMaxAge")||mV;let bN=null;const gV=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>pV)return;const i=r==null?void 0:r.token;bN!==i&&(bN=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function vV(t=tw()){const e=Bl(t,"auth");if(e.isInitialized())return e.getImmediate();const r=jH(t,{popupRedirectResolver:uV,persistence:[x9,A9,g3]}),n=IF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=gV(a.toString());o9(r,s,()=>s(r.currentUser)),s9(r,o=>s(o))}}const i=SF("auth");return i&&$H(r,`http://${i}`),r}function wV(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}RH({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=pl("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",wV().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fV("Browser");var yN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fA,E3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,P){function x(){}x.prototype=P.prototype,N.F=P.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(k,y,S){for(var _=Array(arguments.length-2),M=2;M<arguments.length;M++)_[M-2]=arguments[M];return P.prototype[y].apply(k,_)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,P,x){x||(x=0);const k=Array(16);if(typeof P=="string")for(var y=0;y<16;++y)k[y]=P.charCodeAt(x++)|P.charCodeAt(x++)<<8|P.charCodeAt(x++)<<16|P.charCodeAt(x++)<<24;else for(y=0;y<16;++y)k[y]=P[x++]|P[x++]<<8|P[x++]<<16|P[x++]<<24;P=N.g[0],x=N.g[1],y=N.g[2];let S=N.g[3],_;_=P+(S^x&(y^S))+k[0]+3614090360&4294967295,P=x+(_<<7&4294967295|_>>>25),_=S+(y^P&(x^y))+k[1]+3905402710&4294967295,S=P+(_<<12&4294967295|_>>>20),_=y+(x^S&(P^x))+k[2]+606105819&4294967295,y=S+(_<<17&4294967295|_>>>15),_=x+(P^y&(S^P))+k[3]+3250441966&4294967295,x=y+(_<<22&4294967295|_>>>10),_=P+(S^x&(y^S))+k[4]+4118548399&4294967295,P=x+(_<<7&4294967295|_>>>25),_=S+(y^P&(x^y))+k[5]+1200080426&4294967295,S=P+(_<<12&4294967295|_>>>20),_=y+(x^S&(P^x))+k[6]+2821735955&4294967295,y=S+(_<<17&4294967295|_>>>15),_=x+(P^y&(S^P))+k[7]+4249261313&4294967295,x=y+(_<<22&4294967295|_>>>10),_=P+(S^x&(y^S))+k[8]+1770035416&4294967295,P=x+(_<<7&4294967295|_>>>25),_=S+(y^P&(x^y))+k[9]+2336552879&4294967295,S=P+(_<<12&4294967295|_>>>20),_=y+(x^S&(P^x))+k[10]+4294925233&4294967295,y=S+(_<<17&4294967295|_>>>15),_=x+(P^y&(S^P))+k[11]+2304563134&4294967295,x=y+(_<<22&4294967295|_>>>10),_=P+(S^x&(y^S))+k[12]+1804603682&4294967295,P=x+(_<<7&4294967295|_>>>25),_=S+(y^P&(x^y))+k[13]+4254626195&4294967295,S=P+(_<<12&4294967295|_>>>20),_=y+(x^S&(P^x))+k[14]+2792965006&4294967295,y=S+(_<<17&4294967295|_>>>15),_=x+(P^y&(S^P))+k[15]+1236535329&4294967295,x=y+(_<<22&4294967295|_>>>10),_=P+(y^S&(x^y))+k[1]+4129170786&4294967295,P=x+(_<<5&4294967295|_>>>27),_=S+(x^y&(P^x))+k[6]+3225465664&4294967295,S=P+(_<<9&4294967295|_>>>23),_=y+(P^x&(S^P))+k[11]+643717713&4294967295,y=S+(_<<14&4294967295|_>>>18),_=x+(S^P&(y^S))+k[0]+3921069994&4294967295,x=y+(_<<20&4294967295|_>>>12),_=P+(y^S&(x^y))+k[5]+3593408605&4294967295,P=x+(_<<5&4294967295|_>>>27),_=S+(x^y&(P^x))+k[10]+38016083&4294967295,S=P+(_<<9&4294967295|_>>>23),_=y+(P^x&(S^P))+k[15]+3634488961&4294967295,y=S+(_<<14&4294967295|_>>>18),_=x+(S^P&(y^S))+k[4]+3889429448&4294967295,x=y+(_<<20&4294967295|_>>>12),_=P+(y^S&(x^y))+k[9]+568446438&4294967295,P=x+(_<<5&4294967295|_>>>27),_=S+(x^y&(P^x))+k[14]+3275163606&4294967295,S=P+(_<<9&4294967295|_>>>23),_=y+(P^x&(S^P))+k[3]+4107603335&4294967295,y=S+(_<<14&4294967295|_>>>18),_=x+(S^P&(y^S))+k[8]+1163531501&4294967295,x=y+(_<<20&4294967295|_>>>12),_=P+(y^S&(x^y))+k[13]+2850285829&4294967295,P=x+(_<<5&4294967295|_>>>27),_=S+(x^y&(P^x))+k[2]+4243563512&4294967295,S=P+(_<<9&4294967295|_>>>23),_=y+(P^x&(S^P))+k[7]+1735328473&4294967295,y=S+(_<<14&4294967295|_>>>18),_=x+(S^P&(y^S))+k[12]+2368359562&4294967295,x=y+(_<<20&4294967295|_>>>12),_=P+(x^y^S)+k[5]+4294588738&4294967295,P=x+(_<<4&4294967295|_>>>28),_=S+(P^x^y)+k[8]+2272392833&4294967295,S=P+(_<<11&4294967295|_>>>21),_=y+(S^P^x)+k[11]+1839030562&4294967295,y=S+(_<<16&4294967295|_>>>16),_=x+(y^S^P)+k[14]+4259657740&4294967295,x=y+(_<<23&4294967295|_>>>9),_=P+(x^y^S)+k[1]+2763975236&4294967295,P=x+(_<<4&4294967295|_>>>28),_=S+(P^x^y)+k[4]+1272893353&4294967295,S=P+(_<<11&4294967295|_>>>21),_=y+(S^P^x)+k[7]+4139469664&4294967295,y=S+(_<<16&4294967295|_>>>16),_=x+(y^S^P)+k[10]+3200236656&4294967295,x=y+(_<<23&4294967295|_>>>9),_=P+(x^y^S)+k[13]+681279174&4294967295,P=x+(_<<4&4294967295|_>>>28),_=S+(P^x^y)+k[0]+3936430074&4294967295,S=P+(_<<11&4294967295|_>>>21),_=y+(S^P^x)+k[3]+3572445317&4294967295,y=S+(_<<16&4294967295|_>>>16),_=x+(y^S^P)+k[6]+76029189&4294967295,x=y+(_<<23&4294967295|_>>>9),_=P+(x^y^S)+k[9]+3654602809&4294967295,P=x+(_<<4&4294967295|_>>>28),_=S+(P^x^y)+k[12]+3873151461&4294967295,S=P+(_<<11&4294967295|_>>>21),_=y+(S^P^x)+k[15]+530742520&4294967295,y=S+(_<<16&4294967295|_>>>16),_=x+(y^S^P)+k[2]+3299628645&4294967295,x=y+(_<<23&4294967295|_>>>9),_=P+(y^(x|~S))+k[0]+4096336452&4294967295,P=x+(_<<6&4294967295|_>>>26),_=S+(x^(P|~y))+k[7]+1126891415&4294967295,S=P+(_<<10&4294967295|_>>>22),_=y+(P^(S|~x))+k[14]+2878612391&4294967295,y=S+(_<<15&4294967295|_>>>17),_=x+(S^(y|~P))+k[5]+4237533241&4294967295,x=y+(_<<21&4294967295|_>>>11),_=P+(y^(x|~S))+k[12]+1700485571&4294967295,P=x+(_<<6&4294967295|_>>>26),_=S+(x^(P|~y))+k[3]+2399980690&4294967295,S=P+(_<<10&4294967295|_>>>22),_=y+(P^(S|~x))+k[10]+4293915773&4294967295,y=S+(_<<15&4294967295|_>>>17),_=x+(S^(y|~P))+k[1]+2240044497&4294967295,x=y+(_<<21&4294967295|_>>>11),_=P+(y^(x|~S))+k[8]+1873313359&4294967295,P=x+(_<<6&4294967295|_>>>26),_=S+(x^(P|~y))+k[15]+4264355552&4294967295,S=P+(_<<10&4294967295|_>>>22),_=y+(P^(S|~x))+k[6]+2734768916&4294967295,y=S+(_<<15&4294967295|_>>>17),_=x+(S^(y|~P))+k[13]+1309151649&4294967295,x=y+(_<<21&4294967295|_>>>11),_=P+(y^(x|~S))+k[4]+4149444226&4294967295,P=x+(_<<6&4294967295|_>>>26),_=S+(x^(P|~y))+k[11]+3174756917&4294967295,S=P+(_<<10&4294967295|_>>>22),_=y+(P^(S|~x))+k[2]+718787259&4294967295,y=S+(_<<15&4294967295|_>>>17),_=x+(S^(y|~P))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+P&4294967295,N.g[1]=N.g[1]+(y+(_<<21&4294967295|_>>>11))&4294967295,N.g[2]=N.g[2]+y&4294967295,N.g[3]=N.g[3]+S&4294967295}n.prototype.v=function(N,P){P===void 0&&(P=N.length);const x=P-this.blockSize,k=this.C;let y=this.h,S=0;for(;S<P;){if(y==0)for(;S<=x;)i(this,N,S),S+=this.blockSize;if(typeof N=="string"){for(;S<P;)if(k[y++]=N.charCodeAt(S++),y==this.blockSize){i(this,k),y=0;break}}else for(;S<P;)if(k[y++]=N[S++],y==this.blockSize){i(this,k),y=0;break}}this.h=y,this.o+=P},n.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var P=1;P<N.length-8;++P)N[P]=0;P=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=P&255,P/=256;for(this.v(N),N=Array(16),P=0,x=0;x<4;++x)for(let k=0;k<32;k+=8)N[P++]=this.g[x]>>>k&255;return N};function a(N,P){var x=o;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=P(N)}function s(N,P){this.h=P;const x=[];let k=!0;for(let y=N.length-1;y>=0;y--){const S=N[y]|0;k&&S==P||(x[y]=S,k=!1)}this.g=x}var o={};function l(N){return-128<=N&&N<128?a(N,function(P){return new s([P|0],P<0?-1:0)}):new s([N|0],N<0?-1:0)}function A(N){if(isNaN(N)||!isFinite(N))return d;if(N<0)return v(A(-N));const P=[];let x=1;for(let k=0;N>=x;k++)P[k]=N/x|0,x*=4294967296;return new s(P,0)}function u(N,P){if(N.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(N.charAt(0)=="-")return v(u(N.substring(1),P));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=A(Math.pow(P,8));let k=d;for(let S=0;S<N.length;S+=8){var y=Math.min(8,N.length-S);const _=parseInt(N.substring(S,S+y),P);y<8?(y=A(Math.pow(P,y)),k=k.j(y).add(A(_))):(k=k.j(x),k=k.add(A(_)))}return k}var d=l(0),h=l(1),f=l(16777216);t=s.prototype,t.m=function(){if(g(this))return-v(this).m();let N=0,P=1;for(let x=0;x<this.g.length;x++){const k=this.i(x);N+=(k>=0?k:4294967296+k)*P,P*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(p(this))return"0";if(g(this))return"-"+v(this).toString(N);const P=A(Math.pow(N,6));var x=this;let k="";for(;;){const y=E(x,P).g;x=C(x,y.j(P));let S=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=y,p(x))return S+k;for(;S.length<6;)S="0"+S;k=S+k}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function p(N){if(N.h!=0)return!1;for(let P=0;P<N.g.length;P++)if(N.g[P]!=0)return!1;return!0}function g(N){return N.h==-1}t.l=function(N){return N=C(this,N),g(N)?-1:p(N)?0:1};function v(N){const P=N.g.length,x=[];for(let k=0;k<P;k++)x[k]=~N.g[k];return new s(x,~N.h).add(h)}t.abs=function(){return g(this)?v(this):this},t.add=function(N){const P=Math.max(this.g.length,N.g.length),x=[];let k=0;for(let y=0;y<=P;y++){let S=k+(this.i(y)&65535)+(N.i(y)&65535),_=(S>>>16)+(this.i(y)>>>16)+(N.i(y)>>>16);k=_>>>16,S&=65535,_&=65535,x[y]=_<<16|S}return new s(x,x[x.length-1]&-2147483648?-1:0)};function C(N,P){return N.add(v(P))}t.j=function(N){if(p(this)||p(N))return d;if(g(this))return g(N)?v(this).j(v(N)):v(v(this).j(N));if(g(N))return v(this.j(v(N)));if(this.l(f)<0&&N.l(f)<0)return A(this.m()*N.m());const P=this.g.length+N.g.length,x=[];for(var k=0;k<2*P;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(let y=0;y<N.g.length;y++){const S=this.i(k)>>>16,_=this.i(k)&65535,M=N.i(y)>>>16,K=N.i(y)&65535;x[2*k+2*y]+=_*K,I(x,2*k+2*y),x[2*k+2*y+1]+=S*K,I(x,2*k+2*y+1),x[2*k+2*y+1]+=_*M,I(x,2*k+2*y+1),x[2*k+2*y+2]+=S*M,I(x,2*k+2*y+2)}for(N=0;N<P;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=P;N<2*P;N++)x[N]=0;return new s(x,0)};function I(N,P){for(;(N[P]&65535)!=N[P];)N[P+1]+=N[P]>>>16,N[P]&=65535,P++}function F(N,P){this.g=N,this.h=P}function E(N,P){if(p(P))throw Error("division by zero");if(p(N))return new F(d,d);if(g(N))return P=E(v(N),P),new F(v(P.g),v(P.h));if(g(P))return P=E(N,v(P)),new F(v(P.g),P.h);if(N.g.length>30){if(g(N)||g(P))throw Error("slowDivide_ only works with positive integers.");for(var x=h,k=P;k.l(N)<=0;)x=R(x),k=R(k);var y=L(x,1),S=L(k,1);for(k=L(k,2),x=L(x,2);!p(k);){var _=S.add(k);_.l(N)<=0&&(y=y.add(x),S=_),k=L(k,1),x=L(x,1)}return P=C(N,y.j(P)),new F(y,P)}for(y=d;N.l(P)>=0;){for(x=Math.max(1,Math.floor(N.m()/P.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),S=A(x),_=S.j(P);g(_)||_.l(N)>0;)x-=k,S=A(x),_=S.j(P);p(S)&&(S=h),y=y.add(S),N=C(N,_)}return new F(y,N)}t.B=function(N){return E(this,N).h},t.and=function(N){const P=Math.max(this.g.length,N.g.length),x=[];for(let k=0;k<P;k++)x[k]=this.i(k)&N.i(k);return new s(x,this.h&N.h)},t.or=function(N){const P=Math.max(this.g.length,N.g.length),x=[];for(let k=0;k<P;k++)x[k]=this.i(k)|N.i(k);return new s(x,this.h|N.h)},t.xor=function(N){const P=Math.max(this.g.length,N.g.length),x=[];for(let k=0;k<P;k++)x[k]=this.i(k)^N.i(k);return new s(x,this.h^N.h)};function R(N){const P=N.g.length+1,x=[];for(let k=0;k<P;k++)x[k]=N.i(k)<<1|N.i(k-1)>>>31;return new s(x,N.h)}function L(N,P){const x=P>>5;P%=32;const k=N.g.length-x,y=[];for(let S=0;S<k;S++)y[S]=P>0?N.i(S+x)>>>P|N.i(S+x+1)<<32-P:N.i(S+x);return new s(y,N.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,E3=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=A,s.fromString=u,fA=s}).apply(typeof yN<"u"?yN:typeof self<"u"?self:typeof window<"u"?window:{});var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B3,ym,C3,f1,b2,N3,S3,k3;(function(){var t,e=Object.defineProperty;function r(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof sg=="object"&&sg];for(var j=0;j<b.length;++j){var ne=b[j];if(ne&&ne.Math==Math)return ne}throw Error("Cannot find global object")}var n=r(this);function i(b,j){if(j)e:{var ne=n;b=b.split(".");for(var be=0;be<b.length-1;be++){var qe=b[be];if(!(qe in ne))break e;ne=ne[qe]}b=b[b.length-1],be=ne[b],j=j(be),j!=be&&j!=null&&e(ne,b,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(b){return b||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(b){return b||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(b){return b||function(j){var ne=[],be;for(be in j)Object.prototype.hasOwnProperty.call(j,be)&&ne.push([be,j[be]]);return ne}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function o(b){var j=typeof b;return j=="object"&&b!=null||j=="function"}function l(b,j,ne){return b.call.apply(b.bind,arguments)}function A(b,j,ne){return A=l,A.apply(null,arguments)}function u(b,j){var ne=Array.prototype.slice.call(arguments,1);return function(){var be=ne.slice();return be.push.apply(be,arguments),b.apply(this,be)}}function d(b,j){function ne(){}ne.prototype=j.prototype,b.Z=j.prototype,b.prototype=new ne,b.prototype.constructor=b,b.Ob=function(be,qe,at){for(var Tt=Array(arguments.length-2),cr=2;cr<arguments.length;cr++)Tt[cr-2]=arguments[cr];return j.prototype[qe].apply(be,Tt)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?b=>b&&AsyncContext.Snapshot.wrap(b):b=>b;function f(b){const j=b.length;if(j>0){const ne=Array(j);for(let be=0;be<j;be++)ne[be]=b[be];return ne}return[]}function p(b,j){for(let be=1;be<arguments.length;be++){const qe=arguments[be];var ne=typeof qe;if(ne=ne!="object"?ne:qe?Array.isArray(qe)?"array":ne:"null",ne=="array"||ne=="object"&&typeof qe.length=="number"){ne=b.length||0;const at=qe.length||0;b.length=ne+at;for(let Tt=0;Tt<at;Tt++)b[ne+Tt]=qe[Tt]}else b.push(qe)}}class g{constructor(j,ne){this.i=j,this.j=ne,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function v(b){s.setTimeout(()=>{throw b},0)}function C(){var b=N;let j=null;return b.g&&(j=b.g,b.g=b.g.next,b.g||(b.h=null),j.next=null),j}class I{constructor(){this.h=this.g=null}add(j,ne){const be=F.get();be.set(j,ne),this.h?this.h.next=be:this.g=be,this.h=be}}var F=new g(()=>new E,b=>b.reset());class E{constructor(){this.next=this.g=this.h=null}set(j,ne){this.h=j,this.g=ne,this.next=null}reset(){this.next=this.g=this.h=null}}let R,L=!1,N=new I,P=()=>{const b=Promise.resolve(void 0);R=()=>{b.then(x)}};function x(){for(var b;b=C();){try{b.h.call(b.g)}catch(ne){v(ne)}var j=F;j.j(b),j.h<100&&(j.h++,b.next=j.g,j.g=b)}L=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function y(b,j){this.type=b,this.g=this.target=j,this.defaultPrevented=!1}y.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var b=!1,j=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const ne=()=>{};s.addEventListener("test",ne,j),s.removeEventListener("test",ne,j)}catch{}return b}();function _(b){return/^[\s\xa0]*$/.test(b)}function M(b,j){y.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b&&this.init(b,j)}d(M,y),M.prototype.init=function(b,j){const ne=this.type=b.type,be=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;this.target=b.target||b.srcElement,this.g=j,j=b.relatedTarget,j||(ne=="mouseover"?j=b.fromElement:ne=="mouseout"&&(j=b.toElement)),this.relatedTarget=j,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=b.pointerType,this.state=b.state,this.i=b,b.defaultPrevented&&M.Z.h.call(this)},M.prototype.h=function(){M.Z.h.call(this);const b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),z=0;function ae(b,j,ne,be,qe){this.listener=b,this.proxy=null,this.src=j,this.type=ne,this.capture=!!be,this.ha=qe,this.key=++z,this.da=this.fa=!1}function te(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function G(b,j,ne){for(const be in b)j.call(ne,b[be],be,b)}function ue(b,j){for(const ne in b)j.call(void 0,b[ne],ne,b)}function de(b){const j={};for(const ne in b)j[ne]=b[ne];return j}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(b,j){let ne,be;for(let qe=1;qe<arguments.length;qe++){be=arguments[qe];for(ne in be)b[ne]=be[ne];for(let at=0;at<T.length;at++)ne=T[at],Object.prototype.hasOwnProperty.call(be,ne)&&(b[ne]=be[ne])}}function V(b){this.src=b,this.g={},this.h=0}V.prototype.add=function(b,j,ne,be,qe){const at=b.toString();b=this.g[at],b||(b=this.g[at]=[],this.h++);const Tt=X(b,j,be,qe);return Tt>-1?(j=b[Tt],ne||(j.fa=!1)):(j=new ae(j,this.src,at,!!be,qe),j.fa=ne,b.push(j)),j};function Q(b,j){const ne=j.type;if(ne in b.g){var be=b.g[ne],qe=Array.prototype.indexOf.call(be,j,void 0),at;(at=qe>=0)&&Array.prototype.splice.call(be,qe,1),at&&(te(j),b.g[ne].length==0&&(delete b.g[ne],b.h--))}}function X(b,j,ne,be){for(let qe=0;qe<b.length;++qe){const at=b[qe];if(!at.da&&at.listener==j&&at.capture==!!ne&&at.ha==be)return qe}return-1}var ie="closure_lm_"+(Math.random()*1e6|0),ee={};function Z(b,j,ne,be,qe){if(be&&be.once)return Y(b,j,ne,be,qe);if(Array.isArray(j)){for(let at=0;at<j.length;at++)Z(b,j[at],ne,be,qe);return null}return ne=Me(ne),b&&b[K]?b.J(j,ne,o(be)?!!be.capture:!!be,qe):re(b,j,ne,!1,be,qe)}function re(b,j,ne,be,qe,at){if(!j)throw Error("Invalid event type");const Tt=o(qe)?!!qe.capture:!!qe;let cr=ye(b);if(cr||(b[ie]=cr=new V(b)),ne=cr.add(j,ne,be,Tt,at),ne.proxy)return ne;if(be=ce(),ne.proxy=be,be.src=b,be.listener=ne,b.addEventListener)S||(qe=Tt),qe===void 0&&(qe=!1),b.addEventListener(j.toString(),be,qe);else if(b.attachEvent)b.attachEvent(W(j.toString()),be);else if(b.addListener&&b.removeListener)b.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return ne}function ce(){function b(ne){return j.call(b.src,b.listener,ne)}const j=xe;return b}function Y(b,j,ne,be,qe){if(Array.isArray(j)){for(let at=0;at<j.length;at++)Y(b,j[at],ne,be,qe);return null}return ne=Me(ne),b&&b[K]?b.K(j,ne,o(be)?!!be.capture:!!be,qe):re(b,j,ne,!0,be,qe)}function ge(b,j,ne,be,qe){if(Array.isArray(j))for(var at=0;at<j.length;at++)ge(b,j[at],ne,be,qe);else be=o(be)?!!be.capture:!!be,ne=Me(ne),b&&b[K]?(b=b.i,at=String(j).toString(),at in b.g&&(j=b.g[at],ne=X(j,ne,be,qe),ne>-1&&(te(j[ne]),Array.prototype.splice.call(j,ne,1),j.length==0&&(delete b.g[at],b.h--)))):b&&(b=ye(b))&&(j=b.g[j.toString()],b=-1,j&&(b=X(j,ne,be,qe)),(ne=b>-1?j[b]:null)&&q(ne))}function q(b){if(typeof b!="number"&&b&&!b.da){var j=b.src;if(j&&j[K])Q(j.i,b);else{var ne=b.type,be=b.proxy;j.removeEventListener?j.removeEventListener(ne,be,b.capture):j.detachEvent?j.detachEvent(W(ne),be):j.addListener&&j.removeListener&&j.removeListener(be),(ne=ye(j))?(Q(ne,b),ne.h==0&&(ne.src=null,j[ie]=null)):te(b)}}}function W(b){return b in ee?ee[b]:ee[b]="on"+b}function xe(b,j){if(b.da)b=!0;else{j=new M(j,this);const ne=b.listener,be=b.ha||b.src;b.fa&&q(b),b=ne.call(be,j)}return b}function ye(b){return b=b[ie],b instanceof V?b:null}var Ue="__closure_events_fn_"+(Math.random()*1e9>>>0);function Me(b){return typeof b=="function"?b:(b[Ue]||(b[Ue]=function(j){return b.handleEvent(j)}),b[Ue])}function $e(){k.call(this),this.i=new V(this),this.M=this,this.G=null}d($e,k),$e.prototype[K]=!0,$e.prototype.removeEventListener=function(b,j,ne,be){ge(this,b,j,ne,be)};function fe(b,j){var ne,be=b.G;if(be)for(ne=[];be;be=be.G)ne.push(be);if(b=b.M,be=j.type||j,typeof j=="string")j=new y(j,b);else if(j instanceof y)j.target=j.target||b;else{var qe=j;j=new y(be,b),O(j,qe)}qe=!0;let at,Tt;if(ne)for(Tt=ne.length-1;Tt>=0;Tt--)at=j.g=ne[Tt],qe=Oe(at,be,!0,j)&&qe;if(at=j.g=b,qe=Oe(at,be,!0,j)&&qe,qe=Oe(at,be,!1,j)&&qe,ne)for(Tt=0;Tt<ne.length;Tt++)at=j.g=ne[Tt],qe=Oe(at,be,!1,j)&&qe}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var b=this.i;for(const j in b.g){const ne=b.g[j];for(let be=0;be<ne.length;be++)te(ne[be]);delete b.g[j],b.h--}}this.G=null},$e.prototype.J=function(b,j,ne,be){return this.i.add(String(b),j,!1,ne,be)},$e.prototype.K=function(b,j,ne,be){return this.i.add(String(b),j,!0,ne,be)};function Oe(b,j,ne,be){if(j=b.i.g[String(j)],!j)return!0;j=j.concat();let qe=!0;for(let at=0;at<j.length;++at){const Tt=j[at];if(Tt&&!Tt.da&&Tt.capture==ne){const cr=Tt.listener,Cr=Tt.ha||Tt.src;Tt.fa&&Q(b.i,Tt),qe=cr.call(Cr,be)!==!1&&qe}}return qe&&!be.defaultPrevented}function Re(b,j){if(typeof b!="function")if(b&&typeof b.handleEvent=="function")b=A(b.handleEvent,b);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:s.setTimeout(b,j||0)}function He(b){b.g=Re(()=>{b.g=null,b.i&&(b.i=!1,He(b))},b.l);const j=b.h;b.h=null,b.m.apply(null,j)}class pe extends k{constructor(j,ne){super(),this.m=j,this.l=ne,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:He(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Le(b){k.call(this),this.h=b,this.g={}}d(Le,k);var lt=[];function Ae(b){G(b.g,function(j,ne){this.g.hasOwnProperty(ne)&&q(j)},b),b.g={}}Le.prototype.N=function(){Le.Z.N.call(this),Ae(this)},Le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ne=s.JSON.stringify,ve=s.JSON.parse,Ce=class{stringify(b){return s.JSON.stringify(b,void 0)}parse(b){return s.JSON.parse(b,void 0)}};function Ke(){}function Ve(){}var ot={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pt(){y.call(this,"d")}d(pt,y);function Bt(){y.call(this,"c")}d(Bt,y);var Be={},ze=null;function st(){return ze=ze||new $e}Be.Ia="serverreachability";function St(b){y.call(this,Be.Ia,b)}d(St,y);function Ot(b){const j=st();fe(j,new St(j))}Be.STAT_EVENT="statevent";function Et(b,j){y.call(this,Be.STAT_EVENT,b),this.stat=j}d(Et,y);function dt(b){const j=st();fe(j,new Et(j,b))}Be.Ja="timingevent";function jt(b,j){y.call(this,Be.Ja,b),this.size=j}d(jt,y);function sr(b,j){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){b()},j)}function qt(){this.g=!0}qt.prototype.ua=function(){this.g=!1};function Ur(b,j,ne,be,qe,at){b.info(function(){if(b.g)if(at){var Tt="",cr=at.split("&");for(let Lr=0;Lr<cr.length;Lr++){var Cr=cr[Lr].split("=");if(Cr.length>1){const gn=Cr[0];Cr=Cr[1];const Zi=gn.split("_");Tt=Zi.length>=2&&Zi[1]=="type"?Tt+(gn+"="+Cr+"&"):Tt+(gn+"=redacted&")}}}else Tt=null;else Tt=at;return"XMLHTTP REQ ("+be+") [attempt "+qe+"]: "+j+`
`+ne+`
`+Tt})}function en(b,j,ne,be,qe,at,Tt){b.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+qe+"]: "+j+`
`+ne+`
`+at+" "+Tt})}function Qt(b,j,ne,be){b.info(function(){return"XMLHTTP TEXT ("+j+"): "+Mt(b,ne)+(be?" "+be:"")})}function Pn(b,j){b.info(function(){return"TIMEOUT: "+j})}qt.prototype.info=function(){};function Mt(b,j){if(!b.g)return j;if(!j)return null;try{const at=JSON.parse(j);if(at){for(b=0;b<at.length;b++)if(Array.isArray(at[b])){var ne=at[b];if(!(ne.length<2)){var be=ne[1];if(Array.isArray(be)&&!(be.length<1)){var qe=be[0];if(qe!="noop"&&qe!="stop"&&qe!="close")for(let Tt=1;Tt<be.length;Tt++)be[Tt]=""}}}}return Ne(at)}catch{return j}}var yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Or;function Fr(){}d(Fr,Ke),Fr.prototype.g=function(){return new XMLHttpRequest},Or=new Fr;function le(b){return encodeURIComponent(String(b))}function Ie(b){var j=1;b=b.split(":");const ne=[];for(;j>0&&b.length;)ne.push(b.shift()),j--;return b.length&&ne.push(b.join(":")),ne}function _e(b,j,ne,be){this.j=b,this.i=j,this.l=ne,this.S=be||1,this.V=new Le(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Se}function Se(){this.i=null,this.g="",this.h=!1}var ke={},De={};function Je(b,j,ne){b.M=1,b.A=$s(La(j)),b.u=ne,b.R=!0,ct(b,null)}function ct(b,j){b.F=Date.now(),xt(b),b.B=La(b.A);var ne=b.B,be=b.S;Array.isArray(be)||(be=[String(be)]),bc(ne.i,"t",be),b.C=0,ne=b.j.L,b.h=new Se,b.g=Nn(b.j,ne?j:null,!b.u),b.P>0&&(b.O=new pe(A(b.Y,b,b.g),b.P)),j=b.V,ne=b.g,be=b.ba;var qe="readystatechange";Array.isArray(qe)||(qe&&(lt[0]=qe.toString()),qe=lt);for(let at=0;at<qe.length;at++){const Tt=Z(ne,qe[at],be||j.handleEvent,!1,j.h||j);if(!Tt)break;j.g[Tt.key]=Tt}j=b.J?de(b.J):{},b.u?(b.v||(b.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.B,b.v,b.u,j)):(b.v="GET",b.g.ea(b.B,b.v,null,j)),Ot(),Ur(b.i,b.v,b.B,b.l,b.S,b.u)}_e.prototype.ba=function(b){b=b.target;const j=this.O;j&&es(b)==3?j.j():this.Y(b)},_e.prototype.Y=function(b){try{if(b==this.g)e:{const cr=es(this.g),Cr=this.g.ya(),Lr=this.g.ca();if(!(cr<3)&&(cr!=3||this.g&&(this.h.h||this.g.la()||Go(this.g)))){this.K||cr!=4||Cr==7||(Cr==8||Lr<=0?Ot(3):Ot(2)),Ut(this);var j=this.g.ca();this.X=j;var ne=Ze(this);if(this.o=j==200,en(this.i,this.v,this.B,this.l,this.S,cr,j),this.o){if(this.U&&!this.L){t:{if(this.g){var be,qe=this.g;if((be=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(be)){var at=be;break t}}at=null}if(b=at)Qt(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,or(this,b);else{this.o=!1,this.m=3,dt(12),It(this),Ct(this);break e}}if(this.R){b=!0;let gn;for(;!this.K&&this.C<ne.length;)if(gn=it(this,ne),gn==De){cr==4&&(this.m=4,dt(14),b=!1),Qt(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==ke){this.m=4,dt(15),Qt(this.i,this.l,ne,"[Invalid Chunk]"),b=!1;break}else Qt(this.i,this.l,gn,null),or(this,gn);if(et(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cr!=4||ne.length!=0||this.h.h||(this.m=1,dt(16),b=!1),this.o=this.o&&b,!b)Qt(this.i,this.l,ne,"[Invalid Chunked Response]"),It(this),Ct(this);else if(ne.length>0&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.aa&&!Tt.P&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),We(Tt),Tt.P=!0,dt(11))}}else Qt(this.i,this.l,ne,null),or(this,ne);cr==4&&It(this),this.o&&!this.K&&(cr==4?zt(this.j,this):(this.o=!1,xt(this)))}else Dl(this.g),j==400&&ne.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),It(this),Ct(this)}}}catch{}finally{}};function Ze(b){if(!et(b))return b.g.la();const j=Go(b.g);if(j==="")return"";let ne="";const be=j.length,qe=es(b.g)==4;if(!b.h.i){if(typeof TextDecoder>"u")return It(b),Ct(b),"";b.h.i=new s.TextDecoder}for(let at=0;at<be;at++)b.h.h=!0,ne+=b.h.i.decode(j[at],{stream:!(qe&&at==be-1)});return j.length=0,b.h.g+=ne,b.C=0,b.h.g}function et(b){return b.g?b.v=="GET"&&b.M!=2&&b.j.Aa:!1}function it(b,j){var ne=b.C,be=j.indexOf(`
`,ne);return be==-1?De:(ne=Number(j.substring(ne,be)),isNaN(ne)?ke:(be+=1,be+ne>j.length?De:(j=j.slice(be,be+ne),b.C=be+ne,j)))}_e.prototype.cancel=function(){this.K=!0,It(this)};function xt(b){b.T=Date.now()+b.H,kt(b,b.H)}function kt(b,j){if(b.D!=null)throw Error("WatchDog timer not null");b.D=sr(A(b.aa,b),j)}function Ut(b){b.D&&(s.clearTimeout(b.D),b.D=null)}_e.prototype.aa=function(){this.D=null;const b=Date.now();b-this.T>=0?(Pn(this.i,this.B),this.M!=2&&(Ot(),dt(17)),It(this),this.m=2,Ct(this)):kt(this,this.T-b)};function Ct(b){b.j.I==0||b.K||zt(b.j,b)}function It(b){Ut(b);var j=b.O;j&&typeof j.dispose=="function"&&j.dispose(),b.O=null,Ae(b.V),b.g&&(j=b.g,b.g=null,j.abort(),j.dispose())}function or(b,j){try{var ne=b.j;if(ne.I!=0&&(ne.g==b||Fa(ne.h,b))){if(!b.L&&Fa(ne.h,b)&&ne.I==3){try{var be=ne.Ba.g.parse(j)}catch{be=null}if(Array.isArray(be)&&be.length==3){var qe=be;if(qe[0]==0){e:if(!ne.v){if(ne.g)if(ne.g.F+3e3<b.F)wt(ne),Ws(ne);else break e;Qe(ne),dt(18)}}else ne.xa=qe[1],0<ne.xa-ne.K&&qe[2]<37500&&ne.F&&ne.A==0&&!ne.C&&(ne.C=sr(A(ne.Va,ne),6e3));ps(ne.h)<=1&&ne.ta&&(ne.ta=void 0)}else nr(ne,11)}else if((b.L||ne.g==b)&&wt(ne),!_(j))for(qe=ne.Ba.g.parse(j),j=0;j<qe.length;j++){let Lr=qe[j];const gn=Lr[0];if(!(gn<=ne.K))if(ne.K=gn,Lr=Lr[1],ne.I==2)if(Lr[0]=="c"){ne.M=Lr[1],ne.ba=Lr[2];const Zi=Lr[3];Zi!=null&&(ne.ka=Zi,ne.j.info("VER="+ne.ka));const ws=Lr[4];ws!=null&&(ne.za=ws,ne.j.info("SVER="+ne.za));const Vn=Lr[5];Vn!=null&&typeof Vn=="number"&&Vn>0&&(be=1.5*Vn,ne.O=be,ne.j.info("backChannelRequestTimeoutMs_="+be)),be=ne;const bs=b.g;if(bs){const _o=bs.g?bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var at=be.h;at.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(Ja(at,at.h),at.h=null))}if(be.G){const _c=bs.g?bs.g.getResponseHeader("X-HTTP-Session-Id"):null;_c&&(be.wa=_c,Pr(be.J,be.G,_c))}}ne.I=3,ne.l&&ne.l.ra(),ne.aa&&(ne.T=Date.now()-b.F,ne.j.info("Handshake RTT: "+ne.T+"ms")),be=ne;var Tt=b;if(be.na=jr(be,be.L?be.ba:null,be.W),Tt.L){Pa(be.h,Tt);var cr=Tt,Cr=be.O;Cr&&(cr.H=Cr),cr.D&&(Ut(cr),xt(cr)),be.g=Tt}else Te(be);ne.i.length>0&&Wo(ne)}else Lr[0]!="stop"&&Lr[0]!="close"||nr(ne,7);else ne.I==3&&(Lr[0]=="stop"||Lr[0]=="close"?Lr[0]=="stop"?nr(ne,7):Ul(ne):Lr[0]!="noop"&&ne.l&&ne.l.qa(Lr),ne.A=0)}}Ot(4)}catch{}}var rn=class{constructor(b,j){this.g=b,this.map=j}};function Er(b){this.l=b||10,s.PerformanceNavigationTiming?(b=s.performance.getEntriesByType("navigation"),b=b.length>0&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ln(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function ps(b){return b.h?1:b.g?b.g.size:0}function Fa(b,j){return b.h?b.h==j:b.g?b.g.has(j):!1}function Ja(b,j){b.g?b.g.add(j):b.h=j}function Pa(b,j){b.h&&b.h==j?b.h=null:b.g&&b.g.has(j)&&b.g.delete(j)}Er.prototype.cancel=function(){if(this.i=wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function wo(b){if(b.h!=null)return b.i.concat(b.h.G);if(b.g!=null&&b.g.size!==0){let j=b.i;for(const ne of b.g.values())j=j.concat(ne.G);return j}return f(b.i)}var Ii=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uf(b,j){if(b){b=b.split("&");for(let ne=0;ne<b.length;ne++){const be=b[ne].indexOf("=");let qe,at=null;be>=0?(qe=b[ne].substring(0,be),at=b[ne].substring(be+1)):qe=b[ne],j(qe,at?decodeURIComponent(at.replace(/\+/g," ")):"")}}}function an(b){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;b instanceof an?(this.l=b.l,jo(this,b.j),this.o=b.o,this.g=b.g,Da(this,b.u),this.h=b.h,bo(this,zo(b.i)),this.m=b.m):b&&(j=String(b).match(Ii))?(this.l=!1,jo(this,j[1]||"",!0),this.o=_n(j[2]||""),this.g=_n(j[3]||"",!0),Da(this,j[4]),this.h=_n(j[5]||"",!0),bo(this,j[6]||"",!0),this.m=_n(j[7]||"")):(this.l=!1,this.i=new Za(null,this.l))}an.prototype.toString=function(){const b=[];var j=this.j;j&&b.push(yo(j,Cd,!0),":");var ne=this.g;return(ne||j=="file")&&(b.push("//"),(j=this.o)&&b.push(yo(j,Cd,!0),"@"),b.push(le(ne).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ne=this.u,ne!=null&&b.push(":",String(ne))),(ne=this.h)&&(this.g&&ne.charAt(0)!="/"&&b.push("/"),b.push(yo(ne,ne.charAt(0)=="/"?Gs:Mf,!0))),(ne=this.i.toString())&&b.push("?",ne),(ne=this.m)&&b.push("#",yo(ne,Sd)),b.join("")},an.prototype.resolve=function(b){const j=La(this);let ne=!!b.j;ne?jo(j,b.j):ne=!!b.o,ne?j.o=b.o:ne=!!b.g,ne?j.g=b.g:ne=b.u!=null;var be=b.h;if(ne)Da(j,b.u);else if(ne=!!b.h){if(be.charAt(0)!="/")if(this.g&&!this.h)be="/"+be;else{var qe=j.h.lastIndexOf("/");qe!=-1&&(be=j.h.slice(0,qe+1)+be)}if(qe=be,qe==".."||qe==".")be="";else if(qe.indexOf("./")!=-1||qe.indexOf("/.")!=-1){be=qe.lastIndexOf("/",0)==0,qe=qe.split("/");const at=[];for(let Tt=0;Tt<qe.length;){const cr=qe[Tt++];cr=="."?be&&Tt==qe.length&&at.push(""):cr==".."?((at.length>1||at.length==1&&at[0]!="")&&at.pop(),be&&Tt==qe.length&&at.push("")):(at.push(cr),be=!0)}be=at.join("/")}else be=qe}return ne?j.h=be:ne=b.i.toString()!=="",ne?bo(j,zo(b.i)):ne=!!b.m,ne&&(j.m=b.m),j};function La(b){return new an(b)}function jo(b,j,ne){b.j=ne?_n(j,!0):j,b.j&&(b.j=b.j.replace(/:$/,""))}function Da(b,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);b.u=j}else b.u=null}function bo(b,j,ne){j instanceof Za?(b.i=j,Qf(b.i,b.l)):(ne||(j=yo(j,Nd)),b.i=new Za(j,b.l))}function Pr(b,j,ne){b.i.set(j,ne)}function $s(b){return Pr(b,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),b}function _n(b,j){return b?j?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function yo(b,j,ne){return typeof b=="string"?(b=encodeURI(b).replace(j,Of),ne&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function Of(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var Cd=/[#\/\?@]/g,Mf=/[#\?:]/g,Gs=/[#\?]/g,Nd=/[#\?@]/g,Sd=/#/g;function Za(b,j){this.h=this.g=null,this.i=b||null,this.j=!!j}function gs(b){b.g||(b.g=new Map,b.h=0,b.i&&Uf(b.i,function(j,ne){b.add(decodeURIComponent(j.replace(/\+/g," ")),ne)}))}t=Za.prototype,t.add=function(b,j){gs(this),this.i=null,b=Ra(this,b);let ne=this.g.get(b);return ne||this.g.set(b,ne=[]),ne.push(j),this.h+=1,this};function kd(b,j){gs(b),j=Ra(b,j),b.g.has(j)&&(b.i=null,b.h-=b.g.get(j).length,b.g.delete(j))}function Td(b,j){return gs(b),j=Ra(b,j),b.g.has(j)}t.forEach=function(b,j){gs(this),this.g.forEach(function(ne,be){ne.forEach(function(qe){b.call(j,qe,be,this)},this)},this)};function Id(b,j){gs(b);let ne=[];if(typeof j=="string")Td(b,j)&&(ne=ne.concat(b.g.get(Ra(b,j))));else for(b=Array.from(b.g.values()),j=0;j<b.length;j++)ne=ne.concat(b[j]);return ne}t.set=function(b,j){return gs(this),this.i=null,b=Ra(this,b),Td(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[j]),this.h+=1,this},t.get=function(b,j){return b?(b=Id(this,b),b.length>0?String(b[0]):j):j};function bc(b,j,ne){kd(b,j),ne.length>0&&(b.i=null,b.g.set(Ra(b,j),f(ne)),b.h+=ne.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],j=Array.from(this.g.keys());for(let be=0;be<j.length;be++){var ne=j[be];const qe=le(ne);ne=Id(this,ne);for(let at=0;at<ne.length;at++){let Tt=qe;ne[at]!==""&&(Tt+="="+le(ne[at])),b.push(Tt)}}return this.i=b.join("&")};function zo(b){const j=new Za;return j.i=b.i,b.g&&(j.g=new Map(b.g),j.h=b.h),j}function Ra(b,j){return j=String(j),b.j&&(j=j.toLowerCase()),j}function Qf(b,j){j&&!b.j&&(gs(b),b.i=null,b.g.forEach(function(ne,be){const qe=be.toLowerCase();be!=qe&&(kd(this,be),bc(this,qe,ne))},b)),b.j=j}function Il(b,j){const ne=new qt;if(s.Image){const be=new Image;be.onload=u(ar,ne,"TestLoadImage: loaded",!0,j,be),be.onerror=u(ar,ne,"TestLoadImage: error",!1,j,be),be.onabort=u(ar,ne,"TestLoadImage: abort",!1,j,be),be.ontimeout=u(ar,ne,"TestLoadImage: timeout",!1,j,be),s.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=b}else j(!1)}function GA(b,j){const ne=new qt,be=new AbortController,qe=setTimeout(()=>{be.abort(),ar(ne,"TestPingServer: timeout",!1,j)},1e4);fetch(b,{signal:be.signal}).then(at=>{clearTimeout(qe),at.ok?ar(ne,"TestPingServer: ok",!0,j):ar(ne,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(qe),ar(ne,"TestPingServer: error",!1,j)})}function ar(b,j,ne,be,qe){try{qe&&(qe.onload=null,qe.onerror=null,qe.onabort=null,qe.ontimeout=null),be(ne)}catch{}}function Hf(){this.g=new Ce}function WA(b){this.i=b.Sb||null,this.h=b.ab||!1}d(WA,Ke),WA.prototype.g=function(){return new yc(this.i,this.h)};function yc(b,j){$e.call(this),this.H=b,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(yc,$e),t=yc.prototype,t.open=function(b,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=b,this.D=j,this.readyState=1,Oa(this)},t.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};b&&(j.body=b),(this.H||s).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ua(this)),this.readyState=0},t.Pa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fd(this)}else b.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fd(b){b.j.read().then(b.Ma.bind(b)).catch(b.ga.bind(b))}t.Ma=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var j=b.value?b.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!b.done}))&&(this.response=this.responseText+=j)}b.done?Ua(this):Oa(this),this.readyState==3&&Fd(this)}},t.Oa=function(b){this.g&&(this.response=this.responseText=b,Ua(this))},t.Na=function(b){this.g&&(this.response=b,Ua(this))},t.ga=function(){this.g&&Ua(this)};function Ua(b){b.readyState=4,b.l=null,b.j=null,b.B=null,Oa(b)}t.setRequestHeader=function(b,j){this.A.append(b,j)},t.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],j=this.h.entries();for(var ne=j.next();!ne.done;)ne=ne.value,b.push(ne[0]+": "+ne[1]),ne=j.next();return b.join(`\r
`)};function Oa(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function Pd(b){let j="";return G(b,function(ne,be){j+=be,j+=":",j+=ne,j+=`\r
`}),j}function qA(b,j,ne){e:{for(be in ne){var be=!1;break e}be=!0}be||(ne=Pd(ne),typeof b=="string"?ne!=null&&le(ne):Pr(b,j,ne))}function sn(b){$e.call(this),this.headers=new Map,this.L=b||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(sn,$e);var XA=/^https?$/i,Fl=["POST","PUT"];t=sn.prototype,t.Fa=function(b){this.H=b},t.ea=function(b,j,ne,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);j=j?j.toUpperCase():"GET",this.D=b,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Or.g(),this.g.onreadystatechange=h(A(this.Ca,this));try{this.B=!0,this.g.open(j,String(b),!0),this.B=!1}catch(at){Pl(this,at);return}if(b=ne||"",ne=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var qe in be)ne.set(qe,be[qe]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const at of be.keys())ne.set(at,be.get(at));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(ne.keys()).find(at=>at.toLowerCase()=="content-type"),qe=s.FormData&&b instanceof s.FormData,!(Array.prototype.indexOf.call(Fl,j,void 0)>=0)||be||qe||ne.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,Tt]of ne)this.g.setRequestHeader(at,Tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(b),this.v=!1}catch(at){Pl(this,at)}};function Pl(b,j){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=j,b.o=5,Ll(b),$o(b)}function Ll(b){b.A||(b.A=!0,fe(b,"complete"),fe(b,"error"))}t.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=b||7,fe(this,"complete"),fe(this,"abort"),$o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$o(this,!0)),sn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ld(this):this.Xa())},t.Xa=function(){Ld(this)};function Ld(b){if(b.h&&typeof a<"u"){if(b.v&&es(b)==4)setTimeout(b.Ca.bind(b),0);else if(fe(b,"readystatechange"),es(b)==4){b.h=!1;try{const at=b.ca();e:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var ne;if(!(ne=j)){var be;if(be=at===0){let Tt=String(b.D).match(Ii)[1]||null;!Tt&&s.self&&s.self.location&&(Tt=s.self.location.protocol.slice(0,-1)),be=!XA.test(Tt?Tt.toLowerCase():"")}ne=be}if(ne)fe(b,"complete"),fe(b,"success");else{b.o=6;try{var qe=es(b)>2?b.g.statusText:""}catch{qe=""}b.l=qe+" ["+b.ca()+"]",Ll(b)}}finally{$o(b)}}}}function $o(b,j){if(b.g){b.m&&(clearTimeout(b.m),b.m=null);const ne=b.g;b.g=null,j||fe(b,"ready");try{ne.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function es(b){return b.g?b.g.readyState:0}t.ca=function(){try{return es(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(b){if(this.g){var j=this.g.responseText;return b&&j.indexOf(b)==0&&(j=j.substring(b.length)),ve(j)}};function Go(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.F){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function Dl(b){const j={};b=(b.g&&es(b)>=2&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<b.length;be++){if(_(b[be]))continue;var ne=Ie(b[be]);const qe=ne[0];if(ne=ne[1],typeof ne!="string")continue;ne=ne.trim();const at=j[qe]||[];j[qe]=at,at.push(ne)}ue(j,function(be){return be.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xo(b,j,ne){return ne&&ne.internalChannelParams&&ne.internalChannelParams[b]||j}function Rl(b){this.za=0,this.i=[],this.j=new qt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xo("failFast",!1,b),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xo("baseRetryDelayMs",5e3,b),this.Za=xo("retryDelaySeedMs",1e4,b),this.Ta=xo("forwardChannelMaxRetries",2,b),this.va=xo("forwardChannelRequestTimeoutMs",2e4,b),this.ma=b&&b.xmlHttpFactory||void 0,this.Ua=b&&b.Rb||void 0,this.Aa=b&&b.useFetchStreams||!1,this.O=void 0,this.L=b&&b.supportsCrossDomainXhr||!1,this.M="",this.h=new Er(b&&b.concurrentRequestLimit),this.Ba=new Hf,this.S=b&&b.fastHandshake||!1,this.R=b&&b.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=b&&b.Pb||!1,b&&b.ua&&this.j.ua(),b&&b.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&b&&b.detectBufferingProxy||!1,this.ia=void 0,b&&b.longPollingTimeout&&b.longPollingTimeout>0&&(this.ia=b.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Rl.prototype,t.ka=8,t.I=1,t.connect=function(b,j,ne,be){dt(0),this.W=b,this.H=j||{},ne&&be!==void 0&&(this.H.OSID=ne,this.H.OAID=be),this.F=this.X,this.J=jr(this,null,this.W),Wo(this)};function Ul(b){if(xc(b),b.I==3){var j=b.V++,ne=La(b.J);if(Pr(ne,"SID",b.M),Pr(ne,"RID",j),Pr(ne,"TYPE","terminate"),U(b,ne),j=new _e(b,b.j,j),j.M=2,j.A=$s(La(ne)),ne=!1,s.navigator&&s.navigator.sendBeacon)try{ne=s.navigator.sendBeacon(j.A.toString(),"")}catch{}!ne&&s.Image&&(new Image().src=j.A,ne=!0),ne||(j.g=Nn(j.j,null),j.g.ea(j.A)),j.F=Date.now(),xt(j)}mr(b)}function Ws(b){b.g&&(We(b),b.g.cancel(),b.g=null)}function xc(b){Ws(b),b.v&&(s.clearTimeout(b.v),b.v=null),wt(b),b.h.cancel(),b.m&&(typeof b.m=="number"&&s.clearTimeout(b.m),b.m=null)}function Wo(b){if(!Ln(b.h)&&!b.m){b.m=!0;var j=b.Ea;R||P(),L||(R(),L=!0),N.add(j,b),b.D=0}}function Ma(b,j){return ps(b.h)>=b.h.j-(b.m?1:0)?!1:b.m?(b.i=j.G.concat(b.i),!0):b.I==1||b.I==2||b.D>=(b.Sa?0:b.Ta)?!1:(b.m=sr(A(b.Ea,b,j),Yt(b,b.D)),b.D++,!0)}t.Ea=function(b){if(this.m)if(this.m=null,this.I==1){if(!b){this.V=Math.floor(Math.random()*1e5),b=this.V++;const qe=new _e(this,this.j,b);let at=this.o;if(this.U&&(at?(at=de(at),O(at,this.U)):at=this.U),this.u!==null||this.R||(qe.J=at,at=null),this.S)e:{for(var j=0,ne=0;ne<this.i.length;ne++){t:{var be=this.i[ne];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(j+=be,j>4096){j=ne;break e}if(j===4096||ne===this.i.length-1){j=ne+1;break e}}j=1e3}else j=1e3;j=se(this,qe,j),ne=La(this.J),Pr(ne,"RID",b),Pr(ne,"CVER",22),this.G&&Pr(ne,"X-HTTP-Session-Id",this.G),U(this,ne),at&&(this.R?j="headers="+le(Pd(at))+"&"+j:this.u&&qA(ne,this.u,at)),Ja(this.h,qe),this.Ra&&Pr(ne,"TYPE","init"),this.S?(Pr(ne,"$req",j),Pr(ne,"SID","null"),qe.U=!0,Je(qe,ne,null)):Je(qe,ne,j),this.I=2}}else this.I==3&&(b?vs(this,b):this.i.length==0||Ln(this.h)||vs(this))};function vs(b,j){var ne;j?ne=j.l:ne=b.V++;const be=La(b.J);Pr(be,"SID",b.M),Pr(be,"RID",ne),Pr(be,"AID",b.K),U(b,be),b.u&&b.o&&qA(be,b.u,b.o),ne=new _e(b,b.j,ne,b.D+1),b.u===null&&(ne.J=b.o),j&&(b.i=j.G.concat(b.i)),j=se(b,ne,1e3),ne.H=Math.round(b.va*.5)+Math.round(b.va*.5*Math.random()),Ja(b.h,ne),Je(ne,be,j)}function U(b,j){b.H&&G(b.H,function(ne,be){Pr(j,be,ne)}),b.l&&G({},function(ne,be){Pr(j,be,ne)})}function se(b,j,ne){ne=Math.min(b.i.length,ne);const be=b.l?A(b.l.Ka,b.l,b):null;e:{var qe=b.i;let cr=-1;for(;;){const Cr=["count="+ne];cr==-1?ne>0?(cr=qe[0].g,Cr.push("ofs="+cr)):cr=0:Cr.push("ofs="+cr);let Lr=!0;for(let gn=0;gn<ne;gn++){var at=qe[gn].g;const Zi=qe[gn].map;if(at-=cr,at<0)cr=Math.max(0,qe[gn].g-100),Lr=!1;else try{at="req"+at+"_"||"";try{var Tt=Zi instanceof Map?Zi:Object.entries(Zi);for(const[ws,Vn]of Tt){let bs=Vn;o(Vn)&&(bs=Ne(Vn)),Cr.push(at+ws+"="+encodeURIComponent(bs))}}catch(ws){throw Cr.push(at+"type="+encodeURIComponent("_badmap")),ws}}catch{be&&be(Zi)}}if(Lr){Tt=Cr.join("&");break e}}Tt=void 0}return b=b.i.splice(0,ne),j.G=b,Tt}function Te(b){if(!b.g&&!b.v){b.Y=1;var j=b.Da;R||P(),L||(R(),L=!0),N.add(j,b),b.A=0}}function Qe(b){return b.g||b.v||b.A>=3?!1:(b.Y++,b.v=sr(A(b.Da,b),Yt(b,b.A)),b.A++,!0)}t.Da=function(){if(this.v=null,ft(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var b=4*this.T;this.j.info("BP detection timer enabled: "+b),this.B=sr(A(this.Wa,this),b)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Ws(this),ft(this))};function We(b){b.B!=null&&(s.clearTimeout(b.B),b.B=null)}function ft(b){b.g=new _e(b,b.j,"rpc",b.Y),b.u===null&&(b.g.J=b.o),b.g.P=0;var j=La(b.na);Pr(j,"RID","rpc"),Pr(j,"SID",b.M),Pr(j,"AID",b.K),Pr(j,"CI",b.F?"0":"1"),!b.F&&b.ia&&Pr(j,"TO",b.ia),Pr(j,"TYPE","xmlhttp"),U(b,j),b.u&&b.o&&qA(j,b.u,b.o),b.O&&(b.g.H=b.O);var ne=b.g;b=b.ba,ne.M=1,ne.A=$s(La(j)),ne.u=null,ne.R=!0,ct(ne,b)}t.Va=function(){this.C!=null&&(this.C=null,Ws(this),Qe(this),dt(19))};function wt(b){b.C!=null&&(s.clearTimeout(b.C),b.C=null)}function zt(b,j){var ne=null;if(b.g==j){wt(b),We(b),b.g=null;var be=2}else if(Fa(b.h,j))ne=j.G,Pa(b.h,j),be=1;else return;if(b.I!=0){if(j.o)if(be==1){ne=j.u?j.u.length:0,j=Date.now()-j.F;var qe=b.D;be=st(),fe(be,new jt(be,ne)),Wo(b)}else Te(b);else if(qe=j.m,qe==3||qe==0&&j.X>0||!(be==1&&Ma(b,j)||be==2&&Qe(b)))switch(ne&&ne.length>0&&(j=b.h,j.i=j.i.concat(ne)),qe){case 1:nr(b,5);break;case 4:nr(b,10);break;case 3:nr(b,6);break;default:nr(b,2)}}}function Yt(b,j){let ne=b.Qa+Math.floor(Math.random()*b.Za);return b.isActive()||(ne*=2),ne*j}function nr(b,j){if(b.j.info("Error code "+j),j==2){var ne=A(b.bb,b),be=b.Ua;const qe=!be;be=new an(be||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||jo(be,"https"),$s(be),qe?Il(be.toString(),ne):GA(be.toString(),ne)}else dt(2);b.I=0,b.l&&b.l.pa(j),mr(b),xc(b)}t.bb=function(b){b?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function mr(b){if(b.I=0,b.ja=[],b.l){const j=wo(b.h);(j.length!=0||b.i.length!=0)&&(p(b.ja,j),p(b.ja,b.i),b.h.i.length=0,f(b.i),b.i.length=0),b.l.oa()}}function jr(b,j,ne){var be=ne instanceof an?La(ne):new an(ne);if(be.g!="")j&&(be.g=j+"."+be.g),Da(be,be.u);else{var qe=s.location;be=qe.protocol,j=j?j+"."+qe.hostname:qe.hostname,qe=+qe.port;const at=new an(null);be&&jo(at,be),j&&(at.g=j),qe&&Da(at,qe),ne&&(at.h=ne),be=at}return ne=b.G,j=b.wa,ne&&j&&Pr(be,ne,j),Pr(be,"VER",b.ka),U(b,be),be}function Nn(b,j,ne){if(j&&!b.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=b.Aa&&!b.ma?new sn(new WA({ab:ne})):new sn(b.ma),j.Fa(b.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wn(){}t=Wn.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gr(){}Gr.prototype.g=function(b,j){return new Wr(b,j)};function Wr(b,j){$e.call(this),this.g=new Rl(j),this.l=b,this.h=j&&j.messageUrlParams||null,b=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(b?b["X-WebChannel-Content-Type"]=j.messageContentType:b={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(b?b["X-WebChannel-Client-Profile"]=j.sa:b={"X-WebChannel-Client-Profile":j.sa}),this.g.U=b,(b=j&&j.Qb)&&!_(b)&&(this.g.u=b),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!_(j)&&(this.g.G=j,b=this.h,b!==null&&j in b&&(b=this.h,j in b&&delete b[j])),this.j=new ua(this)}d(Wr,$e),Wr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wr.prototype.close=function(){Ul(this.g)},Wr.prototype.o=function(b){var j=this.g;if(typeof b=="string"){var ne={};ne.__data__=b,b=ne}else this.v&&(ne={},ne.__data__=Ne(b),b=ne);j.i.push(new rn(j.Ya++,b)),j.I==3&&Wo(j)},Wr.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,Wr.Z.N.call(this)};function qn(b){pt.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var j=b.__sm__;if(j){e:{for(const ne in j){b=ne;break e}b=void 0}(this.i=b)&&(b=this.i,j=j!==null&&b in j?j[b]:void 0),this.data=j}else this.data=b}d(qn,pt);function _i(){Bt.call(this),this.status=1}d(_i,Bt);function ua(b){this.g=b}d(ua,Wn),ua.prototype.ra=function(){fe(this.g,"a")},ua.prototype.qa=function(b){fe(this.g,new qn(b))},ua.prototype.pa=function(b){fe(this.g,new _i)},ua.prototype.oa=function(){fe(this.g,"b")},Gr.prototype.createWebChannel=Gr.prototype.g,Wr.prototype.send=Wr.prototype.o,Wr.prototype.open=Wr.prototype.m,Wr.prototype.close=Wr.prototype.close,k3=function(){return new Gr},S3=function(){return st()},N3=Be,b2={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yn.NO_ERROR=0,yn.TIMEOUT=8,yn.HTTP_ERROR=6,f1=yn,xn.COMPLETE="complete",C3=xn,Ve.EventType=ot,ot.OPEN="a",ot.CLOSE="b",ot.ERROR="c",ot.MESSAGE="d",$e.prototype.listen=$e.prototype.J,ym=Ve,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,B3=sn}).apply(typeof sg<"u"?sg:typeof self<"u"?self:typeof window<"u"?window:{});const xN="@firebase/firestore",_N="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new ew("@firebase/firestore");function sh(){return yA.logLevel}function K1e(t){yA.setLogLevel(t)}function _t(t,...e){if(yA.logLevel<=Qr.DEBUG){const r=e.map(u_);yA.debug(`Firestore (${gf}): ${t}`,...r)}}function wi(t,...e){if(yA.logLevel<=Qr.ERROR){const r=e.map(u_);yA.error(`Firestore (${gf}): ${t}`,...r)}}function fo(t,...e){if(yA.logLevel<=Qr.WARN){const r=e.map(u_);yA.warn(`Firestore (${gf}): ${t}`,...r)}}function u_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,T3(t,n,r)}function T3(t,e,r){let n=`FIRESTORE (${gf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw wi(n),new Error(n)}function Wt(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||T3(e,i,n)}function j1e(t,e){t||Vt(57014,e)}function Dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends go{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r($i.UNAUTHENTICATED))}shutdown(){}}class yV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class xV{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Wt(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Xi,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Xi)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Wt(typeof n.accessToken=="string",31837,{l:n}),new I3(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wt(e===null||typeof e=="string",2055,{h:e}),new $i(e)}}class _V{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EV{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new _V(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r($i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BV{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Wt(this.o===void 0,3512);const n=a=>{a.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,_t("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new y2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Wt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new y2(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class z1e{getToken(){return Promise.resolve(new y2(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=CV(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%62))}return n}}function dr(t,e){return t<e?-1:t>e?1:0}function x2(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),a=e.charAt(n);if(i!==a)return Pb(i)===Pb(a)?dr(i,a):Pb(i)?1:-1}return dr(t.length,e.length)}const NV=55296,SV=57343;function Pb(t){const e=t.charCodeAt(0);return e>=NV&&e<=SV}function Qh(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}function F3(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="__name__";class ol{constructor(e,r,n){r===void 0?r=0:r>e.length&&Vt(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Vt(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ol.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ol?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=ol.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return dr(e.length,r.length)}static compareSegments(e,r){const n=ol.isNumericId(e),i=ol.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?ol.extractNumericId(e).compare(ol.extractNumericId(r)):x2(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fA.fromString(e.substring(4,e.length-2))}}class Sr extends ol{construct(e,r,n){return new Sr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new vt(rt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Sr(r)}static emptyPath(){return new Sr([])}}const kV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends ol{construct(e,r,n){return new $n(e,r,n)}static isValidIdentifier(e){return kV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_2}static keyField(){return new $n([_2])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new vt(rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new vt(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new vt(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(n+=o,i++):(a(),i++)}if(a(),s)throw new vt(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(r)}static emptyPath(){return new $n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.path=e}static fromPath(e){return new Lt(Sr.fromString(e))}static fromName(e){return new Lt(Sr.fromString(e).popFirst(5))}static empty(){return new Lt(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Sr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Lt(new Sr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e,r){if(!r)throw new vt(rt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TV(t,e,r,n){if(e===!0&&n===!0)throw new vt(rt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function EN(t){if(!Lt.isDocumentKey(t))throw new vt(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BN(t){if(Lt.isDocumentKey(t))throw new vt(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function P3(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function aw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Vt(12329,{type:typeof t})}function Dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new vt(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=aw(t);throw new vt(rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function L3(t,e){if(e<=0)throw new vt(rt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t,e){const r={typeString:t};return e&&(r.value=e),r}function ud(t,e){if(!P3(t))throw new vt(rt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const s=t[n];if(i&&typeof s!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new vt(rt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=-62135596800,NN=1e6;class hn{static now(){return hn.fromMillis(Date.now())}static fromDate(e){return hn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*NN);return new hn(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new vt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new vt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<CN)throw new vt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NN}_compareTo(e){return this.seconds===e.seconds?dr(this.nanoseconds,e.nanoseconds):dr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:hn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ud(e,hn._jsonSchema))return new hn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}hn._jsonSchemaVersion="firestore/timestamp/1.0",hn._jsonSchema={type:ki("string",hn._jsonSchemaVersion),seconds:ki("number"),nanoseconds:ki("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{static fromTimestamp(e){return new er(e)}static min(){return new er(new hn(0,0))}static max(){return new er(new hn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=-1;class Vh{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function E2(t){return t.fields.find(e=>e.kind===2)}function au(t){return t.fields.filter(e=>e.kind!==2)}function IV(t,e){let r=dr(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=FV(t.fields[n],e.fields[n]),r!==0)return r;return dr(t.fields.length,e.fields.length)}Vh.UNKNOWN_ID=-1;class Bu{constructor(e,r){this.fieldPath=e,this.kind=r}}function FV(t,e){const r=$n.comparator(t.fieldPath,e.fieldPath);return r!==0?r:dr(t.kind,e.kind)}class Kh{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Kh(0,js.min())}}function D3(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=er.fromTimestamp(n===1e9?new hn(r+1,0):new hn(r,n));return new js(i,Lt.empty(),e)}function R3(t){return new js(t.readTime,t.key,Hh)}class js{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new js(er.min(),Lt.empty(),Hh)}static max(){return new js(er.max(),Lt.empty(),Hh)}}function f_(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Lt.comparator(t.documentKey,e.documentKey),r!==0?r:dr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(t){if(t.code!==rt.FAILED_PRECONDITION||t.message!==U3)throw t;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ye((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ye?r:Ye.resolve(r)}catch(r){return Ye.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ye.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ye.reject(r)}static resolve(e){return new Ye((r,n)=>{r(e)})}static reject(e){return new Ye((r,n)=>{n(e)})}static waitFor(e){return new Ye((r,n)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&r()},l=>n(l))}),s=!0,a===i&&r()})}static or(e){let r=Ye.resolve(!1);for(const n of e)r=r.next(i=>i?Ye.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new Ye((n,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const A=l;r(e[A]).next(u=>{s[A]=u,++o,o===a&&n(s)},u=>i(u))}})}static doWhile(e,r){return new Ye((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="SimpleDb";class sw{static open(e,r,n,i){try{return new sw(r,e.transaction(i,n))}catch(a){throw new Mm(r,a)}}constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.S=new Xi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{r.error?this.S.reject(new Mm(e,r.error)):this.S.resolve()},this.transaction.onerror=n=>{const i=m_(n.target.error);this.S.reject(new Mm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(_t(Is,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new LV(r)}}class vl{static delete(e){return _t(Is,"Removing database:",e),lu(NF().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!t_())return!1;if(vl.F())return!0;const e=Oi(),r=vl.M(e),n=0<r&&r<10,i=M3(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,r){return e.store(r)}static M(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,r,n){this.name=e,this.version=r,this.N=n,this.B=null,vl.M(Oi())===12.2&&wi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(_t(Is,"Opening database:",this.name),this.db=await new Promise((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;r(s)},i.onblocked=()=>{n(new Mm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?n(new vt(rt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new vt(rt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Mm(e,s))},i.onupgradeneeded=a=>{_t(Is,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next(()=>{_t(Is,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=r=>this.q(r)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const a=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=sw.open(this.db,e,a?"readonly":"readwrite",n),l=i(o).next(A=>(o.C(),A)).catch(A=>(o.abort(A),Ye.reject(A))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,A=l.name!=="FirebaseError"&&s<3;if(_t(Is,"Transaction failed with error:",l.message,"Retrying:",A),this.close(),!A)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function M3(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class PV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return lu(this.U.delete())}}class Mm extends vt{constructor(e,r){super(rt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function MA(t){return t.name==="IndexedDbTransactionError"}class LV{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(_t(Is,"PUT",this.store.name,e,r),n=this.store.put(r,e)):(_t(Is,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lu(n)}add(e){return _t(Is,"ADD",this.store.name,e,e),lu(this.store.add(e))}get(e){return lu(this.store.get(e)).next(r=>(r===void 0&&(r=null),_t(Is,"GET",this.store.name,e,r),r))}delete(e){return _t(Is,"DELETE",this.store.name,e),lu(this.store.delete(e))}count(){return _t(Is,"COUNT",this.store.name),lu(this.store.count())}J(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new Ye((s,o)=>{a.onerror=l=>{o(l.target.error)},a.onsuccess=l=>{s(l.target.result)}})}{const a=this.cursor(n),s=[];return this.H(a,(o,l)=>{s.push(l)}).next(()=>s)}}Y(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ye((i,a)=>{n.onerror=s=>{a(s.target.error)},n.onsuccess=s=>{i(s.target.result)}})}Z(e,r){_t(Is,"DELETE ALL",this.store.name);const n=this.options(e,r);n.X=!1;const i=this.cursor(n);return this.H(i,(a,s,o)=>o.delete())}ee(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.H(i,r)}te(e){const r=this.cursor({});return new Ye((n,i)=>{r.onerror=a=>{const s=m_(a.target.error);i(s)},r.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next(o=>{o?s.continue():n()}):n()}})}H(e,r){const n=[];return new Ye((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const l=new PV(o),A=r(o.primaryKey,o.value,l);if(A instanceof Ye){const u=A.catch(d=>(l.done(),Ye.reject(d)));n.push(u)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}}).next(()=>Ye.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function lu(t){return new Ye((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=m_(n.target.error);r(i)}})}let SN=!1;function m_(t){const e=vl.M(Oi());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new vt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SN||(SN=!0,setTimeout(()=>{throw n},0)),n}}return t}const Qm="IndexBackfiller";class DV{constructor(e,r){this.asyncQueue=e,this.ne=r,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){_t(Qm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const r=await this.ne.ie();_t(Qm,`Documents written: ${r}`)}catch(r){MA(r)?_t(Qm,"Ignoring IndexedDB error during index backfill: ",r):await OA(r)}await this.re(6e4)})}}class RV{constructor(e,r){this.localStore=e,this.persistence=r}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.se(r,e))}se(e,r){const n=new Set;let i=r,a=!0;return Ye.doWhile(()=>a===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!n.has(s))return _t(Qm,`Processing collection: ${s}`),this.oe(e,s,i).next(o=>{i-=o,n.add(s)});a=!1})).next(()=>r-i)}oe(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next(a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this._e(i,a)).next(o=>(_t(Qm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>s.size)}))}_e(e,r){let n=e;return r.changes.forEach((i,a)=>{const s=R3(a);f_(s,n)>0&&(n=s)}),new js(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ls.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=-1;function dp(t){return t==null}function b0(t){return t===0&&1/t==-1/0}function Q3(t){return typeof t=="number"&&Number.isInteger(t)&&!b0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="";function Ca(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=kN(e)),e=UV(t.get(r),e);return kN(e)}function UV(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case G1:r+="";break;default:r+=a}}return r}function kN(t){return t+G1+""}function Al(t){const e=t.length;if(Wt(e>=2,64408,{path:t}),e===2)return Wt(t.charAt(0)===G1&&t.charAt(1)==="",56145,{path:t}),Sr.emptyPath();const r=e-2,n=[];let i="";for(let a=0;a<e;){const s=t.indexOf(G1,a);switch((s<0||s>r)&&Vt(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let l;i.length===0?l=o:(i+=o,l=i,i=""),n.push(l);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Vt(61167,{path:t})}a=s+2}return new Sr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="remoteDocuments",hp="owner",Hd="owner",y0="mutationQueues",OV="userId",Io="mutations",TN="batchId",pu="userMutationsIndex",IN=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e){return[t,Ca(e)]}function H3(t,e,r){return[t,Ca(e),r]}const MV={},jh="documentMutations",W1="remoteDocumentsV14",QV=["prefixPath","collectionGroup","readTime","documentId"],p1="documentKeyIndex",HV=["prefixPath","collectionGroup","documentId"],V3="collectionGroupIndex",VV=["collectionGroup","readTime","prefixPath","documentId"],x0="remoteDocumentGlobal",B2="remoteDocumentGlobalKey",zh="targets",K3="queryTargetsIndex",KV=["canonicalId","targetId"],$h="targetDocuments",jV=["targetId","path"],p_="documentTargetsIndex",zV=["path","targetId"],q1="targetGlobalKey",Cu="targetGlobal",_0="collectionParents",$V=["collectionId","parent"],Gh="clientMetadata",GV="clientId",ow="bundles",WV="bundleId",lw="namedQueries",qV="name",g_="indexConfiguration",XV="indexId",C2="collectionGroupIndex",YV="collectionGroup",Hm="indexState",JV=["indexId","uid"],j3="sequenceNumberIndex",ZV=["uid","sequenceNumber"],Vm="indexEntries",eK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],z3="documentKeyIndex",tK=["indexId","uid","orderedDocumentKey"],cw="documentOverlays",rK=["userId","collectionPath","documentId"],N2="collectionPathOverlayIndex",nK=["userId","collectionPath","largestBatchId"],$3="collectionGroupOverlayIndex",iK=["userId","collectionGroup","largestBatchId"],v_="globals",aK="name",G3=[y0,Io,jh,su,zh,hp,Cu,$h,Gh,x0,_0,ow,lw],sK=[...G3,cw],W3=[y0,Io,jh,W1,zh,hp,Cu,$h,Gh,x0,_0,ow,lw,cw],q3=W3,w_=[...q3,g_,Hm,Vm],oK=w_,X3=[...w_,v_],lK=X3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2 extends O3{constructor(e,r){super(),this.le=e,this.currentSequenceNumber=r}}function Hi(t,e){const r=Dt(t);return vl.O(r.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function QA(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Y3(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function J3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,r){this.comparator=e,this.root=r||sa.EMPTY}insert(e,r){return new Fn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,sa.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sa.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new og(this.root,e,this.comparator,!1)}getReverseIterator(){return new og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new og(this.root,e,this.comparator,!0)}}class og{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sa{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??sa.RED,this.left=i??sa.EMPTY,this.right=a??sa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new sa(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return sa.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Vt(27949);return e+(this.isRed()?0:1)}}sa.EMPTY=null,sa.RED=!0,sa.BLACK=!1;sa.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(e,r,n,i,a){return this}insert(e,r,n){return new sa(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new PN(this.data.getIterator())}getIteratorFrom(e){return new PN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new pn(this.comparator);return r.data=e,r}}class PN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vd(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new cs([])}unionWith(e){let r=new pn($n.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new cs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Qh(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1e(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Z3("Invalid base64 string: "+a):a}}(e);return new ii(r)}static fromUint8Array(e){const r=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new ii(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ii.EMPTY_BYTE_STRING=new ii("");const cK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sc(t){if(Wt(!!t,39018),typeof t=="string"){let e=0;const r=cK.exec(t);if(Wt(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:zn(t.seconds),nanos:zn(t.nanos)}}function zn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oc(t){return typeof t=="string"?ii.fromBase64String(t):ii.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP="server_timestamp",tP="__type__",rP="__previous_value__",nP="__local_write_time__";function Aw(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[tP])==null?void 0:n.stringValue)===eP}function uw(t){const e=t.mapValue.fields[rP];return Aw(e)?uw(e):e}function E0(t){const e=sc(t.mapValue.fields[nP].timestampValue);return new hn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(e,r,n,i,a,s,o,l,A,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=A,this.isUsingEmulator=u}}const B0="(default)";class Ou{constructor(e,r){this.projectId=e,this.database=r||B0}static empty(){return new Ou("","")}get isDefaultDatabase(){return this.database===B0}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="__type__",iP="__max__",tA={mapValue:{fields:{__type__:{stringValue:iP}}}},y_="__vector__",Wh="value",g1={nullValue:"NULL_VALUE"};function xA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Aw(t)?4:aP(t)?9007199254740991:dw(t)?10:11:Vt(28295,{value:t})}function El(t,e){if(t===e)return!0;const r=xA(t);if(r!==xA(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return E0(t).isEqual(E0(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=sc(i.timestampValue),o=sc(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return oc(i.bytesValue).isEqual(oc(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return zn(i.geoPointValue.latitude)===zn(a.geoPointValue.latitude)&&zn(i.geoPointValue.longitude)===zn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return zn(i.integerValue)===zn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=zn(i.doubleValue),o=zn(a.doubleValue);return s===o?b0(s)===b0(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Qh(t.arrayValue.values||[],e.arrayValue.values||[],El);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(FN(s)!==FN(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!El(s[l],o[l])))return!1;return!0}(t,e);default:return Vt(52216,{left:t})}}function C0(t,e){return(t.values||[]).find(r=>El(r,e))!==void 0}function _A(t,e){if(t===e)return 0;const r=xA(t),n=xA(e);if(r!==n)return dr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return dr(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=zn(a.integerValue||a.doubleValue),l=zn(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return LN(t.timestampValue,e.timestampValue);case 4:return LN(E0(t),E0(e));case 5:return x2(t.stringValue,e.stringValue);case 6:return function(a,s){const o=oc(a),l=oc(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let A=0;A<o.length&&A<l.length;A++){const u=dr(o[A],l[A]);if(u!==0)return u}return dr(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=dr(zn(a.latitude),zn(s.latitude));return o!==0?o:dr(zn(a.longitude),zn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return DN(t.arrayValue,e.arrayValue);case 10:return function(a,s){var h,f,p,g;const o=a.fields||{},l=s.fields||{},A=(h=o[Wh])==null?void 0:h.arrayValue,u=(f=l[Wh])==null?void 0:f.arrayValue,d=dr(((p=A==null?void 0:A.values)==null?void 0:p.length)||0,((g=u==null?void 0:u.values)==null?void 0:g.length)||0);return d!==0?d:DN(A,u)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===tA.mapValue&&s===tA.mapValue)return 0;if(a===tA.mapValue)return 1;if(s===tA.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),A=s.fields||{},u=Object.keys(A);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=x2(l[d],u[d]);if(h!==0)return h;const f=_A(o[l[d]],A[u[d]]);if(f!==0)return f}return dr(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Vt(23264,{he:r})}}function LN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return dr(t,e);const r=sc(t),n=sc(e),i=dr(r.seconds,n.seconds);return i!==0?i:dr(r.nanos,n.nanos)}function DN(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=_A(r[i],n[i]);if(a)return a}return dr(r.length,n.length)}function qh(t){return k2(t)}function k2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=sc(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return oc(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Lt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=k2(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${k2(r.fields[s])}`;return i+"}"}(t.mapValue):Vt(61005,{value:t})}function v1(t){switch(xA(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uw(t);return e?16+v1(e):16;case 5:return 2*t.stringValue.length;case 6:return oc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+v1(a),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return QA(n.fields,(a,s)=>{i+=a.length+v1(s)}),i}(t.mapValue);default:throw Vt(13486,{value:t})}}function Mu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function T2(t){return!!t&&"integerValue"in t}function N0(t){return!!t&&"arrayValue"in t}function RN(t){return!!t&&"nullValue"in t}function UN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function w1(t){return!!t&&"mapValue"in t}function dw(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[b_])==null?void 0:n.stringValue)===y_}function Km(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return QA(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Km(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Km(t.arrayValue.values[r]);return e}return{...t}}function aP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iP}const sP={mapValue:{fields:{[b_]:{stringValue:y_},[Wh]:{arrayValue:{}}}}};function uK(t){return"nullValue"in t?g1:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Mu(Ou.empty(),Lt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?dw(t)?sP:{mapValue:{}}:Vt(35942,{value:t})}function dK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Mu(Ou.empty(),Lt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?sP:"mapValue"in t?dw(t)?{mapValue:{}}:tA:Vt(61959,{value:t})}function ON(t,e){const r=_A(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function MN(t,e){const r=_A(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.value=e}static empty(){return new la({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!w1(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Km(r)}setAll(e){let r=$n.emptyPath(),n={},i=[];e.forEach((s,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}s?n[o.lastSegment()]=Km(s):i.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());w1(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return El(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];w1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){QA(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new la(Km(this.value))}}function oP(t){const e=[];return QA(t.fields,(r,n)=>{const i=new $n([r]);if(w1(n)){const a=oP(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new cs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,r,n,i,a,s,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new On(e,0,er.min(),er.min(),er.min(),la.empty(),0)}static newFoundDocument(e,r,n,i){return new On(e,1,r,er.min(),n,i,0)}static newNoDocument(e,r){return new On(e,2,r,er.min(),er.min(),la.empty(),0)}static newUnknownDocument(e,r){return new On(e,3,r,er.min(),er.min(),la.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(er.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=la.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=la.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,r){this.position=e,this.inclusive=r}}function QN(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=Lt.comparator(Lt.fromName(s.referenceValue),r.key):n=_A(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function HN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!El(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,r="asc"){this.field=e,this.dir=r}}function hK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{}class Hr extends lP{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new fK(e,r,n):r==="array-contains"?new gK(e,n):r==="in"?new fP(e,n):r==="not-in"?new vK(e,n):r==="array-contains-any"?new wK(e,n):new Hr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new mK(e,n):new pK(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(_A(r,this.value)):r!==null&&xA(this.value)===xA(r)&&this.matchesComparison(_A(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends lP{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new fn(e,r)}matches(e){return Xh(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xh(t){return t.op==="and"}function I2(t){return t.op==="or"}function x_(t){return cP(t)&&Xh(t)}function cP(t){for(const e of t.filters)if(e instanceof fn)return!1;return!0}function F2(t){if(t instanceof Hr)return t.field.canonicalString()+t.op.toString()+qh(t.value);if(x_(t))return t.filters.map(e=>F2(e)).join(",");{const e=t.filters.map(r=>F2(r)).join(",");return`${t.op}(${e})`}}function AP(t,e){return t instanceof Hr?function(n,i){return i instanceof Hr&&n.op===i.op&&n.field.isEqual(i.field)&&El(n.value,i.value)}(t,e):t instanceof fn?function(n,i){return i instanceof fn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,s,o)=>a&&AP(s,i.filters[o]),!0):!1}(t,e):void Vt(19439)}function uP(t,e){const r=t.filters.concat(e);return fn.create(r,t.op)}function dP(t){return t instanceof Hr?function(r){return`${r.field.canonicalString()} ${r.op} ${qh(r.value)}`}(t):t instanceof fn?function(r){return r.op.toString()+" {"+r.getFilters().map(dP).join(" ,")+"}"}(t):"Filter"}class fK extends Hr{constructor(e,r,n){super(e,r,n),this.key=Lt.fromName(n.referenceValue)}matches(e){const r=Lt.comparator(e.key,this.key);return this.matchesComparison(r)}}class mK extends Hr{constructor(e,r){super(e,"in",r),this.keys=hP("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class pK extends Hr{constructor(e,r){super(e,"not-in",r),this.keys=hP("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function hP(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>Lt.fromName(n.referenceValue))}class gK extends Hr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return N0(r)&&C0(r.arrayValue,this.value)}}class fP extends Hr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&C0(this.value.arrayValue,r)}}class vK extends Hr{constructor(e,r){super(e,"not-in",r)}matches(e){if(C0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!C0(this.value.arrayValue,r)}}class wK extends Hr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!N0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>C0(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e,r=null,n=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function P2(t,e=null,r=[],n=[],i=null,a=null,s=null){return new bK(t,e,r,n,i,a,s)}function Qu(t){const e=Dt(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>F2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),dp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>qh(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>qh(n)).join(",")),e.Te=r}return e.Te}function fp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!hK(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!AP(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HN(t.startAt,e.startAt)&&HN(t.endAt,e.endAt)}function X1(t){return Lt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Y1(t,e){return t.filters.filter(r=>r instanceof Hr&&r.field.isEqual(e))}function VN(t,e,r){let n=g1,i=!0;for(const a of Y1(t,e)){let s=g1,o=!0;switch(a.op){case"<":case"<=":s=uK(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=g1}ON({value:n,inclusive:i},{value:s,inclusive:o})<0&&(n=s,i=o)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];ON({value:n,inclusive:i},{value:s,inclusive:r.inclusive})<0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}function KN(t,e,r){let n=tA,i=!0;for(const a of Y1(t,e)){let s=tA,o=!0;switch(a.op){case">=":case">":s=dK(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=tA}MN({value:n,inclusive:i},{value:s,inclusive:o})>0&&(n=s,i=o)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];MN({value:n,inclusive:i},{value:s,inclusive:r.inclusive})>0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,r=null,n=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mP(t,e,r,n,i,a,s,o){return new hc(t,e,r,n,i,a,s,o)}function vf(t){return new hc(t)}function jN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __(t){return t.collectionGroup!==null}function Ch(t){const e=Dt(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new pn($n.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(A=>{A.isInequality()&&(o=o.add(A.field))})}),o})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new S0(a,n))}),r.has($n.keyField().canonicalString())||e.Ie.push(new S0($n.keyField(),n))}return e.Ie}function Na(t){const e=Dt(t);return e.Ee||(e.Ee=gP(e,Ch(t))),e.Ee}function pP(t){const e=Dt(t);return e.de||(e.de=gP(e,t.explicitOrderBy)),e.de}function gP(t,e){if(t.limitType==="F")return P2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new S0(i.field,a)});const r=t.endAt?new EA(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new EA(t.startAt.position,t.startAt.inclusive):null;return P2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function L2(t,e){const r=t.filters.concat([e]);return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function J1(t,e,r){return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function mp(t,e){return fp(Na(t),Na(e))&&t.limitType===e.limitType}function vP(t){return`${Qu(Na(t))}|lt:${t.limitType}`}function oh(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>dP(i)).join(", ")}]`),dp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>qh(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>qh(i)).join(",")),`Target(${n})`}(Na(t))}; limitType=${t.limitType})`}function pp(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Lt.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of Ch(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,o,l){const A=QN(s,o,l);return s.inclusive?A<=0:A<0}(n.startAt,Ch(n),i)||n.endAt&&!function(s,o,l){const A=QN(s,o,l);return s.inclusive?A>=0:A>0}(n.endAt,Ch(n),i))}(t,e)}function wP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bP(t){return(e,r)=>{let n=!1;for(const i of Ch(t)){const a=yK(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function yK(t,e,r){const n=t.field.isKeyField()?Lt.comparator(e.key,r.key):function(a,s,o){const l=s.data.field(a),A=o.data.field(a);return l!==null&&A!==null?_A(l,A):Vt(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Vt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){QA(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return J3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK=new Fn(Lt.comparator);function As(){return xK}const yP=new Fn(Lt.comparator);function xm(...t){let e=yP;for(const r of t)e=e.insert(r.key,r);return e}function xP(t){let e=yP;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ul(){return jm()}function _P(){return jm()}function jm(){return new fc(t=>t.toString(),(t,e)=>t.isEqual(e))}const _K=new Fn(Lt.comparator),EK=new pn(Lt.comparator);function vr(...t){let e=EK;for(const r of t)e=e.add(r);return e}const BK=new pn(dr);function E_(){return BK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:b0(e)?"-0":e}}function EP(t){return{integerValue:""+t}}function BP(t,e){return Q3(e)?EP(e):B_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this._=void 0}}function CK(t,e,r){return t instanceof Yh?function(i,a){const s={fields:{[tP]:{stringValue:eP},[nP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Aw(a)&&(a=uw(a)),a&&(s.fields[rP]=a),{mapValue:s}}(r,e):t instanceof Hu?NP(t,e):t instanceof Vu?SP(t,e):function(i,a){const s=CP(i,a),o=zN(s)+zN(i.Ae);return T2(s)&&T2(i.Ae)?EP(o):B_(i.serializer,o)}(t,e)}function NK(t,e,r){return t instanceof Hu?NP(t,e):t instanceof Vu?SP(t,e):r}function CP(t,e){return t instanceof Jh?function(n){return T2(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Yh extends hw{}class Hu extends hw{constructor(e){super(),this.elements=e}}function NP(t,e){const r=kP(e);for(const n of t.elements)r.some(i=>El(i,n))||r.push(n);return{arrayValue:{values:r}}}class Vu extends hw{constructor(e){super(),this.elements=e}}function SP(t,e){let r=kP(e);for(const n of t.elements)r=r.filter(i=>!El(i,n));return{arrayValue:{values:r}}}class Jh extends hw{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function zN(t){return zn(t.integerValue||t.doubleValue)}function kP(t){return N0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,r){this.field=e,this.transform=r}}function SK(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Hu&&i instanceof Hu||n instanceof Vu&&i instanceof Vu?Qh(n.elements,i.elements,El):n instanceof Jh&&i instanceof Jh?El(n.Ae,i.Ae):n instanceof Yh&&i instanceof Yh}(t.transform,e.transform)}class kK{constructor(e,r){this.version=e,this.transformResults=r}}class Gn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function b1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fw{}function TP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bf(t.key,Gn.none()):new wf(t.key,t.data,Gn.none());{const r=t.data,n=la.empty();let i=new pn($n.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new mc(t.key,n,new cs(i.toArray()),Gn.none())}}function TK(t,e,r){t instanceof wf?function(i,a,s){const o=i.value.clone(),l=GN(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,r):t instanceof mc?function(i,a,s){if(!b1(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=GN(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(IP(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function zm(t,e,r,n){return t instanceof wf?function(a,s,o,l){if(!b1(a.precondition,s))return o;const A=a.value.clone(),u=WN(a.fieldTransforms,l,s);return A.setAll(u),s.convertToFoundDocument(s.version,A).setHasLocalMutations(),null}(t,e,r,n):t instanceof mc?function(a,s,o,l){if(!b1(a.precondition,s))return o;const A=WN(a.fieldTransforms,l,s),u=s.data;return u.setAll(IP(a)),u.setAll(A),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(a,s,o){return b1(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,r)}function IK(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=CP(n.transform,i||null);a!=null&&(r===null&&(r=la.empty()),r.set(n.field,a))}return r||null}function $N(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Qh(n,i,(a,s)=>SK(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wf extends fw{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class mc extends fw{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function IP(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function GN(t,e,r){const n=new Map;Wt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);n.set(a.field,NK(s,o,r[i]))}return n}function WN(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,CK(a,s,e))}return n}class bf extends fw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C_ extends fw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&TK(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=zm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=zm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=_P();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=r.has(i.key)?null:o;const l=TP(s,o);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(er.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),vr())}isEqual(e){return this.batchId===e.batchId&&Qh(this.mutations,e.mutations,(r,n)=>$N(r,n))&&Qh(this.baseMutations,e.baseMutations,(r,n)=>$N(r,n))}}class S_{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Wt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return _K}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new S_(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi,$r;function PP(t){switch(t){case rt.OK:return Vt(64938);case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0;default:return Vt(15467,{code:t})}}function LP(t){if(t===void 0)return wi("GRPC error has no .code"),rt.UNKNOWN;switch(t){case Bi.OK:return rt.OK;case Bi.CANCELLED:return rt.CANCELLED;case Bi.UNKNOWN:return rt.UNKNOWN;case Bi.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case Bi.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case Bi.INTERNAL:return rt.INTERNAL;case Bi.UNAVAILABLE:return rt.UNAVAILABLE;case Bi.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case Bi.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case Bi.NOT_FOUND:return rt.NOT_FOUND;case Bi.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case Bi.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case Bi.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case Bi.ABORTED:return rt.ABORTED;case Bi.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case Bi.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case Bi.DATA_LOSS:return rt.DATA_LOSS;default:return Vt(39323,{code:t})}}($r=Bi||(Bi={}))[$r.OK=0]="OK",$r[$r.CANCELLED=1]="CANCELLED",$r[$r.UNKNOWN=2]="UNKNOWN",$r[$r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$r[$r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$r[$r.NOT_FOUND=5]="NOT_FOUND",$r[$r.ALREADY_EXISTS=6]="ALREADY_EXISTS",$r[$r.PERMISSION_DENIED=7]="PERMISSION_DENIED",$r[$r.UNAUTHENTICATED=16]="UNAUTHENTICATED",$r[$r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$r[$r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$r[$r.ABORTED=10]="ABORTED",$r[$r.OUT_OF_RANGE=11]="OUT_OF_RANGE",$r[$r.UNIMPLEMENTED=12]="UNIMPLEMENTED",$r[$r.INTERNAL=13]="INTERNAL",$r[$r.UNAVAILABLE=14]="UNAVAILABLE",$r[$r.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $m=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PK=new fA([4294967295,4294967295],0);function qN(t){const e=DP().encode(t),r=new E3;return r.update(e),new Uint8Array(r.digest())}function XN(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new fA([r,n],0),new fA([i,a],0)]}class T_{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new _m(`Invalid padding: ${r}`);if(n<0)throw new _m(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new _m(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new _m(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=fA.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(fA.fromNumber(n)));return i.compare(PK)===1&&(i=new fA([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=qN(e),[n,i]=XN(r);for(let a=0;a<this.hashCount;a++){const s=this.ye(n,i,a);if(!this.we(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new T_(a,i,r);return n.forEach(o=>s.insert(o)),s}insert(e){if(this.ge===0)return;const r=qN(e),[n,i]=XN(r);for(let a=0;a<this.hashCount;a++){const s=this.ye(n,i,a);this.Se(s)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class _m extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,wp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new vp(er.min(),i,new Fn(dr),As(),vr())}}class wp{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new wp(n,r,vr(),vr(),vr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class RP{constructor(e,r){this.targetId=e,this.Ce=r}}class UP{constructor(e,r,n=ii.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class YN{constructor(){this.ve=0,this.Fe=JN(),this.Me=ii.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=vr(),r=vr(),n=vr();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Vt(38017,{changeType:a})}}),new wp(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=JN()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LK{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.Je=lg(),this.He=lg(),this.Ye=new Fn(dr)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Vt(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(X1(a))if(n===0){const s=new Lt(a.path);this.et(r,s,On.newNoDocument(s,er.min()))}else Wt(n===1,20013,{expectedCount:n});else{const s=this._t(r);if(s!==n){const o=this.ut(e),l=o?this.ct(o,e,s):1;if(l!==0){this.it(r);const A=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,A)}$m==null||$m.lt(function(u,d,h,f,p){var C,I,F;const g={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},v=d.unchangedNames;return v&&(g.bloomFilter={applied:p===0,hashCount:(v==null?void 0:v.hashCount)??0,bitmapLength:((I=(C=v==null?void 0:v.bits)==null?void 0:C.bitmap)==null?void 0:I.length)??0,padding:((F=v==null?void 0:v.bits)==null?void 0:F.padding)??0,mightContain:E=>(f==null?void 0:f.mightContain(E))??!1}),g}(s,e.Ce,this.Ge.ht(),o,l))}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let s,o;try{s=oc(n).toUint8Array()}catch(l){if(l instanceof Z3)return fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new T_(s,i,a)}catch(l){return fo(l instanceof _m?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(r,a,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((a,s)=>{const o=this.ot(s);if(o){if(a.current&&X1(o.target)){const l=new Lt(o.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,On.newNoDocument(l,e))}a.Be&&(r.set(s,a.ke()),a.qe())}});let n=vr();this.He.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const A=this.ot(l);return!A||A.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(a))}),this.je.forEach((a,s)=>s.setReadTime(e));const i=new vp(e,r,this.Ye,this.je,n);return this.je=As(),this.Je=lg(),this.He=lg(),this.Ye=new Fn(dr),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new YN,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new pn(dr),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new pn(dr),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||_t("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YN),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function lg(){return new Fn(Lt.comparator)}function JN(){return new Fn(Lt.comparator)}const DK=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),RK=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),UK=(()=>({and:"AND",or:"OR"}))();class OK{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function D2(t,e){return t.useProto3Json||dp(e)?e:{value:e}}function Zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MK(t,e){return Zh(t,e.toTimestamp())}function bi(t){return Wt(!!t,49232),er.fromTimestamp(function(r){const n=sc(r);return new hn(n.seconds,n.nanos)}(t))}function I_(t,e){return R2(t,e).canonicalString()}function R2(t,e){const r=function(i){return new Sr(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function MP(t){const e=Sr.fromString(t);return Wt(WP(e),10190,{key:e.toString()}),e}function k0(t,e){return I_(t.databaseId,e.path)}function wl(t,e){const r=MP(e);if(r.get(1)!==t.databaseId.projectId)throw new vt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new vt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Lt(VP(r))}function QP(t,e){return I_(t.databaseId,e)}function HP(t){const e=MP(t);return e.length===4?Sr.emptyPath():VP(e)}function U2(t){return new Sr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VP(t){return Wt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ZN(t,e,r){return{name:k0(t,e),fields:r.value.mapValue.fields}}function mw(t,e,r){const n=wl(t,e.name),i=bi(e.updateTime),a=e.createTime?bi(e.createTime):er.min(),s=new la({mapValue:{fields:e.fields}}),o=On.newFoundDocument(n,i,a,s);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function QK(t,e){return"found"in e?function(n,i){Wt(!!i.found,43571),i.found.name,i.found.updateTime;const a=wl(n,i.found.name),s=bi(i.found.updateTime),o=i.found.createTime?bi(i.found.createTime):er.min(),l=new la({mapValue:{fields:i.found.fields}});return On.newFoundDocument(a,s,o,l)}(t,e):"missing"in e?function(n,i){Wt(!!i.missing,3894),Wt(!!i.readTime,22933);const a=wl(n,i.missing),s=bi(i.readTime);return On.newNoDocument(a,s)}(t,e):Vt(7234,{result:e})}function HK(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:Vt(39313,{state:A})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(A,u){return A.useProto3Json?(Wt(u===void 0||typeof u=="string",58123),ii.fromBase64String(u||"")):(Wt(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ii.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(A){const u=A.code===void 0?rt.UNKNOWN:LP(A.code);return new vt(u,A.message||"")}(s);r=new UP(n,i,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=wl(t,n.document.name),a=bi(n.document.updateTime),s=n.document.createTime?bi(n.document.createTime):er.min(),o=new la({mapValue:{fields:n.document.fields}}),l=On.newFoundDocument(i,a,s,o),A=n.targetIds||[],u=n.removedTargetIds||[];r=new y1(A,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=wl(t,n.document),a=n.readTime?bi(n.readTime):er.min(),s=On.newNoDocument(i,a),o=n.removedTargetIds||[];r=new y1([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=wl(t,n.document),a=n.removedTargetIds||[];r=new y1([],a,i,null)}else{if(!("filter"in e))return Vt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new FK(i,a),o=n.targetId;r=new RP(o,s)}}return r}function T0(t,e){let r;if(e instanceof wf)r={update:ZN(t,e.key,e.value)};else if(e instanceof bf)r={delete:k0(t,e.key)};else if(e instanceof mc)r={update:ZN(t,e.key,e.data),updateMask:GK(e.fieldMask)};else{if(!(e instanceof C_))return Vt(16599,{Vt:e.type});r={verify:k0(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,s){const o=s.transform;if(o instanceof Yh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Hu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Vu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Jh)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Vt(20930,{transform:s.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:MK(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Vt(27497)}(t,e.precondition)),r}function O2(t,e){const r=e.currentDocument?function(a){return a.updateTime!==void 0?Gn.updateTime(bi(a.updateTime)):a.exists!==void 0?Gn.exists(a.exists):Gn.none()}(e.currentDocument):Gn.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let l=null;if("setToServerValue"in o)Wt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new Yh;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];l=new Hu(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];l=new Vu(u)}else"increment"in o?l=new Jh(s,o.increment):Vt(16584,{proto:o});const A=$n.fromServerFormat(o.fieldPath);return new gp(A,l)}(t,i)):[];if(e.update){e.update.name;const i=wl(t,e.update.name),a=new la({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=function(l){const A=l.fieldPaths||[];return new cs(A.map(u=>$n.fromServerFormat(u)))}(e.updateMask);return new mc(i,a,s,r,n)}return new wf(i,a,r,n)}if(e.delete){const i=wl(t,e.delete);return new bf(i,r)}if(e.verify){const i=wl(t,e.verify);return new C_(i,r)}return Vt(1463,{proto:e})}function VK(t,e){return t&&t.length>0?(Wt(e!==void 0,14353),t.map(r=>function(i,a){let s=i.updateTime?bi(i.updateTime):bi(a);return s.isEqual(er.min())&&(s=bi(a)),new kK(s,i.transformResults||[])}(r,e))):[]}function KP(t,e){return{documents:[QP(t,e.path)]}}function pw(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=QP(t,i);const a=function(A){if(A.length!==0)return GP(fn.create(A,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const s=function(A){if(A.length!==0)return A.map(u=>function(h){return{field:qc(h.field),direction:jK(h.dir)}}(u))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const o=D2(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(A){return{before:A.inclusive,values:A.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(A){return{before:!A.inclusive,values:A.position}}(e.endAt)),{ft:r,parent:i}}function jP(t,e,r,n){const{ft:i,parent:a}=pw(t,e),s={},o=[];let l=0;return r.forEach(A=>{const u=n?A.alias:"aggregate_"+l++;s[u]=A.alias,A.aggregateType==="count"?o.push({alias:u,count:{}}):A.aggregateType==="avg"?o.push({alias:u,avg:{field:qc(A.fieldPath)}}):A.aggregateType==="sum"&&o.push({alias:u,sum:{field:qc(A.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},gt:s,parent:a}}function zP(t){let e=HP(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Wt(n===1,65062);const u=r.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];r.where&&(a=function(d){const h=$P(d);return h instanceof fn&&x_(h)?h.getFilters():[h]}(r.where));let s=[];r.orderBy&&(s=function(d){return d.map(h=>function(p){return new S0(lh(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(d){let h;return h=typeof d=="object"?d.value:d,dp(h)?null:h}(r.limit));let l=null;r.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new EA(f,h)}(r.startAt));let A=null;return r.endAt&&(A=function(d){const h=!d.before,f=d.values||[];return new EA(f,h)}(r.endAt)),mP(e,i,s,a,o,"F",l,A)}function KK(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function $P(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=lh(r.unaryFilter.field);return Hr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=lh(r.unaryFilter.field);return Hr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=lh(r.unaryFilter.field);return Hr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=lh(r.unaryFilter.field);return Hr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}}(t):t.fieldFilter!==void 0?function(r){return Hr.create(lh(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return fn.create(r.compositeFilter.filters.map(n=>$P(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}}(r.compositeFilter.op))}(t):Vt(30097,{filter:t})}function jK(t){return DK[t]}function zK(t){return RK[t]}function $K(t){return UK[t]}function qc(t){return{fieldPath:t.canonicalString()}}function lh(t){return $n.fromServerFormat(t.fieldPath)}function GP(t){return t instanceof Hr?function(r){if(r.op==="=="){if(UN(r.value))return{unaryFilter:{field:qc(r.field),op:"IS_NAN"}};if(RN(r.value))return{unaryFilter:{field:qc(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(UN(r.value))return{unaryFilter:{field:qc(r.field),op:"IS_NOT_NAN"}};if(RN(r.value))return{unaryFilter:{field:qc(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qc(r.field),op:zK(r.op),value:r.value}}}(t):t instanceof fn?function(r){const n=r.getFilters().map(i=>GP(i));return n.length===1?n[0]:{compositeFilter:{op:$K(r.op),filters:n}}}(t):Vt(54877,{filter:t})}function GK(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function WP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,r,n,i,a=er.min(),s=er.min(),o=ii.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Yl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.yt=e}}function WK(t,e){let r;if(e.document)r=mw(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Lt.fromSegments(e.noDocument.path),i=ju(e.noDocument.readTime);r=On.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Vt(56709);{const n=Lt.fromSegments(e.unknownDocument.path),i=ju(e.unknownDocument.version);r=On.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime(function(i){const a=new hn(i[0],i[1]);return er.fromTimestamp(a)}(e.readTime)),r}function eS(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Z1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(a,s){return{name:k0(a,s.key),fields:s.data.value.mapValue.fields,updateTime:Zh(a,s.version.toTimestamp()),createTime:Zh(a,s.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Ku(e.version)};else{if(!e.isUnknownDocument())return Vt(57904,{document:e});n.unknownDocument={path:r.path.toArray(),version:Ku(e.version)}}return n}function Z1(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ku(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ju(t){const e=new hn(t.seconds,t.nanoseconds);return er.fromTimestamp(e)}function cu(t,e){const r=(e.baseMutations||[]).map(a=>O2(t.yt,a));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map(a=>O2(t.yt,a)),i=hn.fromMillis(e.localWriteTimeMs);return new N_(e.batchId,i,r,n)}function Em(t){const e=ju(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?ju(t.lastLimboFreeSnapshotVersion):er.min();let n;return n=function(a){return a.documents!==void 0}(t.query)?function(a){const s=a.documents.length;return Wt(s===1,1966,{count:s}),Na(vf(HP(a.documents[0])))}(t.query):function(a){return Na(zP(a))}(t.query),new Yl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ii.fromBase64String(t.resumeToken))}function XP(t,e){const r=Ku(e.snapshotVersion),n=Ku(e.lastLimboFreeSnapshotVersion);let i;i=X1(e.target)?KP(t.yt,e.target):pw(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qu(e.target),readTime:r,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function gw(t){const e=zP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?J1(e,e.limit,"L"):e}function Lb(t,e){return new k_(e.largestBatchId,O2(t.yt,e.overlayMutation))}function tS(t,e){const r=e.path.lastSegment();return[t,Ca(e.path.popLast()),r]}function rS(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Ku(n.readTime),documentKey:Ca(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{getBundleMetadata(e,r){return nS(e).get(r).next(n=>{if(n)return function(a){return{id:a.bundleId,createTime:ju(a.createTime),version:a.version}}(n)})}saveBundleMetadata(e,r){return nS(e).put(function(i){return{bundleId:i.id,createTime:Ku(bi(i.createTime)),version:i.version}}(r))}getNamedQuery(e,r){return iS(e).get(r).next(n=>{if(n)return function(a){return{name:a.name,query:gw(a.bundledQuery),readTime:ju(a.readTime)}}(n)})}saveNamedQuery(e,r){return iS(e).put(function(i){return{name:i.name,readTime:Ku(bi(i.readTime)),bundledQuery:i.bundledQuery}}(r))}}function nS(t){return Hi(t,ow)}function iS(t){return Hi(t,lw)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,r){this.serializer=e,this.userId=r}static wt(e,r){const n=r.uid||"";return new vw(e,n)}getOverlay(e,r){return tm(e).get(tS(this.userId,r)).next(n=>n?Lb(this.serializer,n):null)}getOverlays(e,r){const n=ul();return Ye.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){const i=[];return n.forEach((a,s)=>{const o=new k_(r,s);i.push(this.St(e,o))}),Ye.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach(s=>i.add(Ca(s.getCollectionPath())));const a=[];return i.forEach(s=>{const o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);a.push(tm(e).Z(N2,o))}),Ye.waitFor(a)}getOverlaysForCollection(e,r,n){const i=ul(),a=Ca(r),s=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return tm(e).J(N2,s).next(o=>{for(const l of o){const A=Lb(this.serializer,l);i.set(A.getKey(),A)}return i})}getOverlaysForCollectionGroup(e,r,n,i){const a=ul();let s;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return tm(e).ee({index:$3,range:o},(l,A,u)=>{const d=Lb(this.serializer,A);a.size()<i||d.largestBatchId===s?(a.set(d.getKey(),d),s=d.largestBatchId):u.done()}).next(()=>a)}St(e,r){return tm(e).put(function(i,a,s){const[o,l,A]=tS(a,s.mutation.key);return{userId:a,collectionPath:l,documentId:A,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:T0(i.yt,s.mutation)}}(this.serializer,this.userId,r))}}function tm(t){return Hi(t,cw)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{bt(e){return Hi(e,v_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?ii.fromUint8Array(n):ii.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.bt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(){}Dt(e,r){this.Ct(e,r),r.vt()}Ct(e,r){if("nullValue"in e)this.Ft(r,5);else if("booleanValue"in e)this.Ft(r,10),r.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(r,15),r.Mt(zn(e.integerValue));else if("doubleValue"in e){const n=zn(e.doubleValue);isNaN(n)?this.Ft(r,13):(this.Ft(r,15),b0(n)?r.Mt(0):r.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(r,20),typeof n=="string"&&(n=sc(n)),r.xt(`${n.seconds||""}`),r.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,r),this.Nt(r);else if("bytesValue"in e)this.Ft(r,30),r.Bt(oc(e.bytesValue)),this.Nt(r);else if("referenceValue"in e)this.Lt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(r,45),r.Mt(n.latitude||0),r.Mt(n.longitude||0)}else"mapValue"in e?aP(e)?this.Ft(r,Number.MAX_SAFE_INTEGER):dw(e)?this.kt(e.mapValue,r):(this.qt(e.mapValue,r),this.Nt(r)):"arrayValue"in e?(this.Qt(e.arrayValue,r),this.Nt(r)):Vt(19022,{$t:e})}Ot(e,r){this.Ft(r,25),this.Ut(e,r)}Ut(e,r){r.xt(e)}qt(e,r){const n=e.fields||{};this.Ft(r,55);for(const i of Object.keys(n))this.Ot(i,r),this.Ct(n[i],r)}kt(e,r){var s,o;const n=e.fields||{};this.Ft(r,53);const i=Wh,a=((o=(s=n[i].arrayValue)==null?void 0:s.values)==null?void 0:o.length)||0;this.Ft(r,15),r.Mt(zn(a)),this.Ot(i,r),this.Ct(n[i],r)}Qt(e,r){const n=e.values||[];this.Ft(r,50);for(const i of n)this.Ct(i,r)}Lt(e,r){this.Ft(r,37),Lt.fromName(e).path.forEach(n=>{this.Ft(r,60),this.Ut(n,r)})}Ft(e,r){e.Mt(r)}Nt(e){e.Mt(2)}}Au.Kt=new Au;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=255;function YK(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function aS(t){const e=64-function(n){let i=0;for(let a=0;a<8;++a){const s=YK(255&n[a]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}class JK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Gt(n.value),n=r.next();this.zt()}jt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Jt(n.value),n=r.next();this.Ht()}Yt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const i=r.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const i=r.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const r=this.en(e),n=aS(r);this.tn(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}nn(e){const r=this.en(e),n=aS(r);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}rn(){this.sn(Kd),this.sn(255)}_n(){this.an(Kd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const r=function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)}(e),n=!!(128&r[0]);r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}Gt(e){const r=255&e;r===0?(this.sn(0),this.sn(255)):r===Kd?(this.sn(Kd),this.sn(0)):this.sn(r)}Jt(e){const r=255&e;r===0?(this.an(0),this.an(255)):r===Kd?(this.an(Kd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class ZK{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class ej{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class rm{constructor(){this.cn=new JK,this.ln=new ZK(this.cn),this.hn=new ej(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,r,n,i){this.Tn=e,this.In=r,this.En=n,this.dn=i}An(){const e=this.dn.length,r=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.dn,0),r!==e?n.set([0],this.dn.length):++n[n.length-1],new uu(this.Tn,this.In,this.En,n)}Rn(e,r,n){return{indexId:this.Tn,uid:e,arrayValue:x1(this.En),directionalValue:x1(this.dn),orderedDocumentKey:x1(r),documentKey:n.path.toArray()}}Vn(e,r,n){const i=this.Rn(e,r,n);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Lc(t,e){let r=t.Tn-e.Tn;return r!==0?r:(r=sS(t.En,e.En),r!==0?r:(r=sS(t.dn,e.dn),r!==0?r:Lt.comparator(t.In,e.In)))}function sS(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}function x1(t){return RF()?function(r){let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}(t):t}function oS(t){return typeof t!="string"?t:function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(t)}class lS{constructor(e){this.mn=new pn((r,n)=>$n.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const r of e.filters){const n=r;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Wt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const r=E2(e);if(r!==void 0&&!this.wn(r))return!1;const n=au(e);let i=new Set,a=0,s=0;for(;a<n.length&&this.wn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=n[a];if(!this.Sn(o,l)||!this.bn(this.fn[s++],l))return!1}++a}for(;a<n.length;++a){const o=n[a];if(s>=this.fn.length||!this.bn(this.fn[s++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new pn($n.comparator);const r=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Bu(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Bu(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Bu(n.field,n.dir==="asc"?0:1)));return new Vh(Vh.UNKNOWN_ID,this.collectionId,r,Kh.empty())}wn(e){for(const r of this.gn)if(this.Sn(r,e))return!0;return!1}Sn(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}bn(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){var r,n;if(Wt(t instanceof Hr||t instanceof fn,20012),t instanceof Hr){if(t instanceof fP){const i=((n=(r=t.value.arrayValue)==null?void 0:r.values)==null?void 0:n.map(a=>Hr.create(t.field,"==",a)))||[];return fn.create(i,"or")}return t}const e=t.filters.map(i=>YP(i));return fn.create(e,t.op)}function tj(t){if(t.getFilters().length===0)return[];const e=H2(YP(t));return Wt(JP(e),7391),M2(e)||Q2(e)?[e]:e.getFilters()}function M2(t){return t instanceof Hr}function Q2(t){return t instanceof fn&&x_(t)}function JP(t){return M2(t)||Q2(t)||function(r){if(r instanceof fn&&I2(r)){for(const n of r.getFilters())if(!M2(n)&&!Q2(n))return!1;return!0}return!1}(t)}function H2(t){if(Wt(t instanceof Hr||t instanceof fn,34018),t instanceof Hr)return t;if(t.filters.length===1)return H2(t.filters[0]);const e=t.filters.map(n=>H2(n));let r=fn.create(e,t.op);return r=ev(r),JP(r)?r:(Wt(r instanceof fn,64498),Wt(Xh(r),40251),Wt(r.filters.length>1,57927),r.filters.reduce((n,i)=>F_(n,i)))}function F_(t,e){let r;return Wt(t instanceof Hr||t instanceof fn,38388),Wt(e instanceof Hr||e instanceof fn,25473),r=t instanceof Hr?e instanceof Hr?function(i,a){return fn.create([i,a],"and")}(t,e):cS(t,e):e instanceof Hr?cS(e,t):function(i,a){if(Wt(i.filters.length>0&&a.filters.length>0,48005),Xh(i)&&Xh(a))return uP(i,a.getFilters());const s=I2(i)?i:a,o=I2(i)?a:i,l=s.filters.map(A=>F_(A,o));return fn.create(l,"or")}(t,e),ev(r)}function cS(t,e){if(Xh(e))return uP(e,t.getFilters());{const r=e.filters.map(n=>F_(t,n));return fn.create(r,"or")}}function ev(t){if(Wt(t instanceof Hr||t instanceof fn,11850),t instanceof Hr)return t;const e=t.getFilters();if(e.length===1)return ev(e[0]);if(cP(t))return t;const r=e.map(i=>ev(i)),n=[];return r.forEach(i=>{i instanceof Hr?n.push(i):i instanceof fn&&(i.op===t.op?n.push(...i.filters):n.push(i))}),n.length===1?n[0]:fn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.Cn=new P_}addToCollectionParentIndex(e,r){return this.Cn.add(r),Ye.resolve()}getCollectionParents(e,r){return Ye.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Ye.resolve()}deleteFieldIndex(e,r){return Ye.resolve()}deleteAllFieldIndexes(e){return Ye.resolve()}createTargetIndexes(e,r){return Ye.resolve()}getDocumentsMatchingTarget(e,r){return Ye.resolve(null)}getIndexType(e,r){return Ye.resolve(0)}getFieldIndexes(e,r){return Ye.resolve([])}getNextCollectionGroupToUpdate(e){return Ye.resolve(null)}getMinOffset(e,r){return Ye.resolve(js.min())}getMinOffsetFromCollectionGroup(e,r){return Ye.resolve(js.min())}updateCollectionGroup(e,r,n){return Ye.resolve()}updateIndexEntries(e,r){return Ye.resolve()}}class P_{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new pn(Sr.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new pn(Sr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="IndexedDbIndexManager",cg=new Uint8Array(0);class nj{constructor(e,r){this.databaseId=r,this.vn=new P_,this.Fn=new fc(n=>Qu(n),(n,i)=>fp(n,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.vn.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener(()=>{this.vn.add(r)});const a={collectionId:n,parent:Ca(i)};return uS(e).put(a)}return Ye.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[F3(r),""],!1,!0);return uS(e).J(i).next(a=>{for(const s of a){if(s.collectionId!==r)break;n.push(Al(s.parent))}return n})}addFieldIndex(e,r){const n=nm(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(r);delete i.indexId;const a=n.add(i);if(r.indexState){const s=zd(e);return a.next(o=>{s.put(rS(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return a.next()}deleteFieldIndex(e,r){const n=nm(e),i=zd(e),a=jd(e);return n.delete(r.indexId).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=nm(e),n=jd(e),i=zd(e);return r.Z().next(()=>n.Z()).next(()=>i.Z())}createTargetIndexes(e,r){return Ye.forEach(this.Mn(r),n=>this.getIndexType(e,n).next(i=>{if(i===0||i===1){const a=new lS(n).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,r){const n=jd(e);let i=!0;const a=new Map;return Ye.forEach(this.Mn(r),s=>this.xn(e,s).next(o=>{i&&(i=!!o),a.set(s,o)})).next(()=>{if(i){let s=vr();const o=[];return Ye.forEach(a,(l,A)=>{_t(AS,`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(E=>`${E.fieldPath}:${E.kind}`).join(",")}`}(l)} to execute ${Qu(r)}`);const u=function(F,E){const R=E2(E);if(R===void 0)return null;for(const L of Y1(F,R.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(A,l),d=function(F,E){const R=new Map;for(const L of au(E))for(const N of Y1(F,L.fieldPath))switch(N.op){case"==":case"in":R.set(L.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return R.set(L.fieldPath.canonicalString(),N.value),Array.from(R.values())}return null}(A,l),h=function(F,E){const R=[];let L=!0;for(const N of au(E)){const P=N.kind===0?VN(F,N.fieldPath,F.startAt):KN(F,N.fieldPath,F.startAt);R.push(P.value),L&&(L=P.inclusive)}return new EA(R,L)}(A,l),f=function(F,E){const R=[];let L=!0;for(const N of au(E)){const P=N.kind===0?KN(F,N.fieldPath,F.endAt):VN(F,N.fieldPath,F.endAt);R.push(P.value),L&&(L=P.inclusive)}return new EA(R,L)}(A,l),p=this.On(l,A,h),g=this.On(l,A,f),v=this.Nn(l,A,d),C=this.Bn(l.indexId,u,p,h.inclusive,g,f.inclusive,v);return Ye.forEach(C,I=>n.Y(I,r.limit).next(F=>{F.forEach(E=>{const R=Lt.fromSegments(E.documentKey);s.has(R)||(s=s.add(R),o.push(R))})}))}).next(()=>o)}return Ye.resolve(null)})}Mn(e){let r=this.Fn.get(e);return r||(e.filters.length===0?r=[e]:r=tj(fn.create(e.filters,"and")).map(n=>P2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,r),r)}Bn(e,r,n,i,a,s,o){const l=(r!=null?r.length:1)*Math.max(n.length,a.length),A=l/(r!=null?r.length:1),u=[];for(let d=0;d<l;++d){const h=r?this.Ln(r[d/A]):cg,f=this.kn(e,h,n[d%A],i),p=this.qn(e,h,a[d%A],s),g=o.map(v=>this.kn(e,h,v,!0));u.push(...this.createRange(f,p,g))}return u}kn(e,r,n,i){const a=new uu(e,Lt.empty(),r,n);return i?a:a.An()}qn(e,r,n,i){const a=new uu(e,Lt.empty(),r,n);return i?a.An():a}xn(e,r){const n=new lS(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let s=null;for(const o of a)n.yn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s})}getIndexType(e,r){let n=2;const i=this.Mn(r);return Ye.forEach(i,a=>this.xn(e,a).next(s=>{s?n!==0&&s.fields.length<function(l){let A=new pn($n.comparator),u=!1;for(const d of l.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:A=A.add(h.field));for(const d of l.orderBy)d.field.isKeyField()||(A=A.add(d.field));return A.size+(u?1:0)}(a)&&(n=1):n=0})).next(()=>function(s){return s.limit!==null}(r)&&i.length>1&&n===2?1:n)}Qn(e,r){const n=new rm;for(const i of au(e)){const a=r.data.field(i.fieldPath);if(a==null)return null;const s=n.Pn(i.kind);Au.Kt.Dt(a,s)}return n.un()}Ln(e){const r=new rm;return Au.Kt.Dt(e,r.Pn(0)),r.un()}$n(e,r){const n=new rm;return Au.Kt.Dt(Mu(this.databaseId,r),n.Pn(function(a){const s=au(a);return s.length===0?0:s[s.length-1].kind}(e))),n.un()}Nn(e,r,n){if(n===null)return[];let i=[];i.push(new rm);let a=0;for(const s of au(e)){const o=n[a++];for(const l of i)if(this.Un(r,s.fieldPath)&&N0(o))i=this.Kn(i,s,o);else{const A=l.Pn(s.kind);Au.Kt.Dt(o,A)}}return this.Wn(i)}On(e,r,n){return this.Nn(e,r,n.position)}Wn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].un();return r}Kn(e,r,n){const i=[...e],a=[];for(const s of n.arrayValue.values||[])for(const o of i){const l=new rm;l.seed(o.un()),Au.Kt.Dt(s,l.Pn(r.kind)),a.push(l)}return a}Un(e,r){return!!e.filters.find(n=>n instanceof Hr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=nm(e),i=zd(e);return(r?n.J(C2,IDBKeyRange.bound(r,r)):n.J()).next(a=>{const s=[];return Ye.forEach(a,o=>i.get([o.indexId,this.uid]).next(l=>{s.push(function(u,d){const h=d?new Kh(d.sequenceNumber,new js(ju(d.readTime),new Lt(Al(d.documentKey)),d.largestBatchId)):Kh.empty(),f=u.fields.map(([p,g])=>new Bu($n.fromServerFormat(p),g));return new Vh(u.indexId,u.collectionGroup,f,h)}(o,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:dr(n.collectionGroup,i.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const i=nm(e),a=zd(e);return this.Gn(e).next(s=>i.J(C2,IDBKeyRange.bound(r,r)).next(o=>Ye.forEach(o,l=>a.put(rS(l.indexId,this.uid,s,n)))))}updateIndexEntries(e,r){const n=new Map;return Ye.forEach(r,(i,a)=>{const s=n.get(i.collectionGroup);return(s?Ye.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(n.set(i.collectionGroup,o),Ye.forEach(o,l=>this.zn(e,i,l).next(A=>{const u=this.jn(a,l);return A.isEqual(u)?Ye.resolve():this.Jn(e,a,l,A,u)}))))})}Hn(e,r,n,i){return jd(e).put(i.Rn(this.uid,this.$n(n,r.key),r.key))}Yn(e,r,n,i){return jd(e).delete(i.Vn(this.uid,this.$n(n,r.key),r.key))}zn(e,r,n){const i=jd(e);let a=new pn(Lc);return i.ee({index:z3,range:IDBKeyRange.only([n.indexId,this.uid,x1(this.$n(n,r))])},(s,o)=>{a=a.add(new uu(n.indexId,r,oS(o.arrayValue),oS(o.directionalValue)))}).next(()=>a)}jn(e,r){let n=new pn(Lc);const i=this.Qn(r,e);if(i==null)return n;const a=E2(r);if(a!=null){const s=e.data.field(a.fieldPath);if(N0(s))for(const o of s.arrayValue.values||[])n=n.add(new uu(r.indexId,e.key,this.Ln(o),i))}else n=n.add(new uu(r.indexId,e.key,cg,i));return n}Jn(e,r,n,i,a){_t(AS,"Updating index entries for document '%s'",r.key);const s=[];return function(l,A,u,d,h){const f=l.getIterator(),p=A.getIterator();let g=Vd(f),v=Vd(p);for(;g||v;){let C=!1,I=!1;if(g&&v){const F=u(g,v);F<0?I=!0:F>0&&(C=!0)}else g!=null?I=!0:C=!0;C?(d(v),v=Vd(p)):I?(h(g),g=Vd(f)):(g=Vd(f),v=Vd(p))}}(i,a,Lc,o=>{s.push(this.Hn(e,r,n,o))},o=>{s.push(this.Yn(e,r,n,o))}),Ye.waitFor(s)}Gn(e){let r=1;return zd(e).ee({index:j3,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,a)=>{a.done(),r=i.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((s,o)=>Lc(s,o)).filter((s,o,l)=>!o||Lc(s,l[o-1])!==0);const i=[];i.push(e);for(const s of n){const o=Lc(s,e),l=Lc(s,r);if(o===0)i[0]=e.An();else if(o>0&&l<0)i.push(s),i.push(s.An());else if(l>0)break}i.push(r);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const o=i[s].Vn(this.uid,cg,Lt.empty()),l=i[s+1].Vn(this.uid,cg,Lt.empty());a.push(IDBKeyRange.bound(o,l))}return a}Zn(e,r){return Lc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(dS)}getMinOffset(e,r){return Ye.mapArray(this.Mn(r),n=>this.xn(e,n).next(i=>i||Vt(44426))).next(dS)}}function uS(t){return Hi(t,_0)}function jd(t){return Hi(t,Vm)}function nm(t){return Hi(t,g_)}function zd(t){return Hi(t,Hm)}function dS(t){Wt(t.length!==0,28825);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;f_(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new js(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZP=41943040;class ba{static withCacheSize(e){return new ba(e,ba.DEFAULT_COLLECTION_PERCENTILE,ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t,e,r){const n=t.store(Io),i=t.store(jh),a=[],s=IDBKeyRange.only(r.batchId);let o=0;const l=n.ee({range:s},(u,d,h)=>(o++,h.delete()));a.push(l.next(()=>{Wt(o===1,47070,{batchId:r.batchId})}));const A=[];for(const u of r.mutations){const d=H3(e,u.key.path,r.batchId);a.push(i.delete(d)),A.push(u.key)}return Ye.waitFor(a).next(()=>A)}function tv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Vt(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ba.DEFAULT_COLLECTION_PERCENTILE=10,ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ba.DEFAULT=new ba(ZP,ba.DEFAULT_COLLECTION_PERCENTILE,ba.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ba.DISABLED=new ba(-1,0,0);class ww{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Xn={}}static wt(e,r,n,i){Wt(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new ww(a,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).ee({index:pu,range:n},(i,a,s)=>{r=!1,s.done()}).next(()=>r)}addMutationBatch(e,r,n,i){const a=ch(e),s=Dc(e);return s.add({}).next(o=>{Wt(typeof o=="number",49019);const l=new N_(o,r,n,i),A=function(f,p,g){const v=g.baseMutations.map(I=>T0(f.yt,I)),C=g.mutations.map(I=>T0(f.yt,I));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:C}}(this.serializer,this.userId,l),u=[];let d=new pn((h,f)=>dr(h.canonicalString(),f.canonicalString()));for(const h of i){const f=H3(this.userId,h.key.path,o);d=d.add(h.key.path.popLast()),u.push(s.put(A)),u.push(a.put(f,MV))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),Ye.waitFor(u).next(()=>l)})}lookupMutationBatch(e,r){return Dc(e).get(r).next(n=>n?(Wt(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:r}),cu(this.serializer,n)):null)}er(e,r){return this.Xn[r]?Ye.resolve(this.Xn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const i=n.keys();return this.Xn[r]=i,i}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Dc(e).ee({index:pu,range:i},(s,o,l)=>{o.userId===this.userId&&(Wt(o.batchId>=n,47524,{tr:n}),a=cu(this.serializer,o)),l.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=mA;return Dc(e).ee({index:pu,range:r,reverse:!0},(i,a,s)=>{n=a.batchId,s.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,mA],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).J(pu,r).next(n=>n.map(i=>cu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=m1(this.userId,r.path),i=IDBKeyRange.lowerBound(n),a=[];return ch(e).ee({range:i},(s,o,l)=>{const[A,u,d]=s,h=Al(u);if(A===this.userId&&r.path.isEqual(h))return Dc(e).get(d).next(f=>{if(!f)throw Vt(61480,{nr:s,batchId:d});Wt(f.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:f.userId,batchId:d}),a.push(cu(this.serializer,f))});l.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new pn(dr);const i=[];return r.forEach(a=>{const s=m1(this.userId,a.path),o=IDBKeyRange.lowerBound(s),l=ch(e).ee({range:o},(A,u,d)=>{const[h,f,p]=A,g=Al(f);h===this.userId&&a.path.isEqual(g)?n=n.add(p):d.done()});i.push(l)}),Ye.waitFor(i).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,a=m1(this.userId,n),s=IDBKeyRange.lowerBound(a);let o=new pn(dr);return ch(e).ee({range:s},(l,A,u)=>{const[d,h,f]=l,p=Al(h);d===this.userId&&n.isPrefixOf(p)?p.length===i&&(o=o.add(f)):u.done()}).next(()=>this.rr(e,o))}rr(e,r){const n=[],i=[];return r.forEach(a=>{i.push(Dc(e).get(a).next(s=>{if(s===null)throw Vt(35274,{batchId:a});Wt(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),n.push(cu(this.serializer,s))}))}),Ye.waitFor(i).next(()=>n)}removeMutationBatch(e,r){return eL(e.le,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.ir(r.batchId)}),Ye.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ye.resolve();const n=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ch(e).ee({range:n},(a,s,o)=>{if(a[0]===this.userId){const l=Al(a[1]);i.push(l)}else o.done()}).next(()=>{Wt(i.length===0,56720,{sr:i.map(a=>a.canonicalString())})})})}containsKey(e,r){return tL(e,this.userId,r)}_r(e){return rL(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:mA,lastStreamToken:""})}}function tL(t,e,r){const n=m1(e,r.path),i=n[1],a=IDBKeyRange.lowerBound(n);let s=!1;return ch(t).ee({range:a,X:!0},(o,l,A)=>{const[u,d,h]=o;u===e&&d===i&&(s=!0),A.done()}).next(()=>s)}function Dc(t){return Hi(t,Io)}function ch(t){return Hi(t,jh)}function rL(t){return Hi(t,y0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zu(0)}static cr(){return new zu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.lr(e).next(r=>{const n=new zu(r.highestTargetId);return r.highestTargetId=n.next(),this.hr(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(r=>er.fromTimestamp(new hn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.lr(e).next(i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.hr(e,i)))}addTargetData(e,r){return this.Pr(e,r).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(r,n),this.hr(e,n))))}updateTargetData(e,r){return this.Pr(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>$d(e).delete(r.targetId)).next(()=>this.lr(e)).next(n=>(Wt(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n)))}removeTargets(e,r,n){let i=0;const a=[];return $d(e).ee((s,o)=>{const l=Em(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(i++,a.push(this.removeTargetData(e,l)))}).next(()=>Ye.waitFor(a)).next(()=>i)}forEachTarget(e,r){return $d(e).ee((n,i)=>{const a=Em(i);r(a)})}lr(e){return fS(e).get(q1).next(r=>(Wt(r!==null,2888),r))}hr(e,r){return fS(e).put(q1,r)}Pr(e,r){return $d(e).put(XP(this.serializer,r))}Tr(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Qu(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return $d(e).ee({range:i,index:K3},(s,o,l)=>{const A=Em(o);fp(r,A.target)&&(a=A,l.done())}).next(()=>a)}addMatchingKeys(e,r,n){const i=[],a=Xc(e);return r.forEach(s=>{const o=Ca(s.path);i.push(a.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,s))}),Ye.waitFor(i)}removeMatchingKeys(e,r,n){const i=Xc(e);return Ye.forEach(r,a=>{const s=Ca(a.path);return Ye.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(e,n,a)])})}removeMatchingKeysForTargetId(e,r){const n=Xc(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=Xc(e);let a=vr();return i.ee({range:n,X:!0},(s,o,l)=>{const A=Al(s[1]),u=new Lt(A);a=a.add(u)}).next(()=>a)}containsKey(e,r){const n=Ca(r.path),i=IDBKeyRange.bound([n],[F3(n)],!1,!0);let a=0;return Xc(e).ee({index:p_,X:!0,range:i},([s,o],l,A)=>{s!==0&&(a++,A.done())}).next(()=>a>0)}At(e,r){return $d(e).get(r).next(n=>n?Em(n):null)}}function $d(t){return Hi(t,zh)}function fS(t){return Hi(t,Cu)}function Xc(t){return Hi(t,$h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LruGarbageCollector",nL=1048576;function pS([t,e],[r,n]){const i=dr(t,r);return i===0?dr(e,n):i}class aj{constructor(e){this.Ir=e,this.buffer=new pn(pS),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();pS(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class iL{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_t(mS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){MA(r)?_t(mS,"Ignoring IndexedDB error during garbage collection: ",r):await OA(r)}await this.Vr(3e5)})}}class sj{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ye.resolve(ls.ce);const n=new aj(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),Ye.resolve(hS)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hS):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,a,s,o,l,A;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(n=d,o=Date.now(),this.removeTargets(e,n,r))).next(d=>(a=d,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(A=Date.now(),sh()<=Qr.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(A-l)+`ms
Total Duration: ${A-u}ms`),Ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:d})))}}function aL(t,e){return new sj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,r){this.db=e,this.garbageCollector=aL(this,r)}gr(e){const r=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}pr(e,r){return this.Sr(e,(n,i)=>r(i))}addReference(e,r,n){return Ag(e,n)}removeReference(e,r,n){return Ag(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Ag(e,r)}br(e,r){return function(i,a){let s=!1;return rL(i).te(o=>tL(i,o,a).next(l=>(l&&(s=!0),Ye.resolve(!l)))).next(()=>s)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,(s,o)=>{if(o<=r){const l=this.br(e,s).next(A=>{if(!A)return a++,n.getEntry(e,s).next(()=>(n.removeEntry(s,er.min()),Xc(e).delete(function(d){return[0,Ca(d.path)]}(s))))});i.push(l)}}).next(()=>Ye.waitFor(i)).next(()=>n.apply(e)).next(()=>a)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Ag(e,r)}Sr(e,r){const n=Xc(e);let i,a=ls.ce;return n.ee({index:p_},([s,o],{path:l,sequenceNumber:A})=>{s===0?(a!==ls.ce&&r(new Lt(Al(i)),a),a=A,i=l):a=ls.ce}).next(()=>{a!==ls.ce&&r(new Lt(Al(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ag(t,e){return Xc(t).put(function(n,i){return{targetId:0,path:Ca(n.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.changes=new fc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ye.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return tu(e).put(n)}removeEntry(e,r,n){return tu(e).delete(function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Z1(s),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.Dr(e,n)))}getEntry(e,r){let n=On.newInvalidDocument(r);return tu(e).ee({index:p1,range:IDBKeyRange.only(im(r))},(i,a)=>{n=this.Cr(r,a)}).next(()=>n)}vr(e,r){let n={size:0,document:On.newInvalidDocument(r)};return tu(e).ee({index:p1,range:IDBKeyRange.only(im(r))},(i,a)=>{n={document:this.Cr(r,a),size:tv(a)}}).next(()=>n)}getEntries(e,r){let n=As();return this.Fr(e,r,(i,a)=>{const s=this.Cr(i,a);n=n.insert(i,s)}).next(()=>n)}Mr(e,r){let n=As(),i=new Fn(Lt.comparator);return this.Fr(e,r,(a,s)=>{const o=this.Cr(a,s);n=n.insert(a,o),i=i.insert(a,tv(s))}).next(()=>({documents:n,Or:i}))}Fr(e,r,n){if(r.isEmpty())return Ye.resolve();let i=new pn(wS);r.forEach(l=>i=i.add(l));const a=IDBKeyRange.bound(im(i.first()),im(i.last())),s=i.getIterator();let o=s.getNext();return tu(e).ee({index:p1,range:a},(l,A,u)=>{const d=Lt.fromSegments([...A.prefixPath,A.collectionGroup,A.documentId]);for(;o&&wS(o,d)<0;)n(o,null),o=s.getNext();o&&o.isEqual(d)&&(n(o,A),o=s.hasNext()?s.getNext():null),o?u.j(im(o)):u.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,r,n,i,a){const s=r.path,o=[s.popLast().toArray(),s.lastSegment(),Z1(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tu(e).J(IDBKeyRange.bound(o,l,!0)).next(A=>{a==null||a.incrementDocumentReadCount(A.length);let u=As();for(const d of A){const h=this.Cr(Lt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(pp(r,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,r,n,i){let a=As();const s=vS(r,n),o=vS(r,js.max());return tu(e).ee({index:V3,range:IDBKeyRange.bound(s,o,!0)},(l,A,u)=>{const d=this.Cr(Lt.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);a=a.insert(d.key,d),a.size===i&&u.done()}).next(()=>a)}newChangeBuffer(e){return new cj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return gS(e).get(B2).next(r=>(Wt(!!r,20021),r))}Dr(e,r){return gS(e).put(B2,r)}Cr(e,r){if(r){const n=WK(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(er.min())))return n}return On.newInvalidDocument(e)}}function oL(t){return new lj(t)}class cj extends sL{constructor(e,r){super(),this.Nr=e,this.trackRemovals=r,this.Br=new fc(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const r=[];let n=0,i=new pn((a,s)=>dr(a.canonicalString(),s.canonicalString()));return this.changes.forEach((a,s)=>{const o=this.Br.get(a);if(r.push(this.Nr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const l=eS(this.Nr.serializer,s);i=i.add(a.path.popLast());const A=tv(l);n+=A-o.size,r.push(this.Nr.addEntry(e,a,l))}else if(n-=o.size,this.trackRemovals){const l=eS(this.Nr.serializer,s.convertToNoDocument(er.min()));r.push(this.Nr.addEntry(e,a,l))}}),i.forEach(a=>{r.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))}),r.push(this.Nr.updateMetadata(e,n)),Ye.waitFor(r)}getFromCache(e,r){return this.Nr.vr(e,r).next(n=>(this.Br.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.Nr.Mr(e,r).next(({documents:n,Or:i})=>(i.forEach((a,s)=>{this.Br.set(a,{size:s,readTime:n.get(a).readTime})}),n))}}function gS(t){return Hi(t,x0)}function tu(t){return Hi(t,W1)}function im(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vS(t,e){const r=e.documentKey.path.toArray();return[t,Z1(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function wS(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<r.length-2&&a<n.length-2;++a)if(i=dr(r[a],n[a]),i)return i;return i=dr(r.length,n.length),i||(i=dr(r[r.length-2],n[n.length-2]),i||dr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&zm(n.mutation,i,cs.empty(),hn.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,vr()).next(()=>n))}getLocalViewOfDocuments(e,r,n=vr()){const i=ul();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let s=xm();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=ul();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,vr()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{r.set(s,o)})})}computeViews(e,r,n,i){let a=As();const s=jm(),o=function(){return jm()}();return r.forEach((l,A)=>{const u=n.get(A.key);i.has(A.key)&&(u===void 0||u.mutation instanceof mc)?a=a.insert(A.key,A):u!==void 0?(s.set(A.key,u.mutation.getFieldMask()),zm(u.mutation,A,u.mutation.getFieldMask(),hn.now())):s.set(A.key,cs.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((A,u)=>s.set(A,u)),r.forEach((A,u)=>o.set(A,new Aj(u,s.get(A)??null))),o))}recalculateAndSaveOverlays(e,r){const n=jm();let i=new Fn((s,o)=>s-o),a=vr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const o of s)o.keys().forEach(l=>{const A=r.get(l);if(A===null)return;let u=n.get(l)||cs.empty();u=o.applyToLocalView(A,u),n.set(l,u);const d=(i.get(o.batchId)||vr()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),A=l.key,u=l.value,d=_P();u.forEach(h=>{if(!a.has(h)){const f=TP(r.get(h),n.get(h));f!==null&&d.set(h,f),a=a.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,A,d))}return Ye.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return Lt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):__(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):Ye.resolve(ul());let o=Hh,l=a;return s.next(A=>Ye.forEach(A,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),a.get(u)?Ye.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,A,a)).next(()=>this.computeViews(e,l,A,vr())).next(u=>({batchId:o,changes:xP(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Lt(r)).next(n=>{let i=xm();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let s=xm();return this.indexManager.getCollectionParents(e,a).next(o=>Ye.forEach(o,l=>{const A=function(d,h){return new hc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,A,n,i).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(s=>{a.forEach((l,A)=>{const u=A.getKey();s.get(u)===null&&(s=s.insert(u,On.newInvalidDocument(u)))});let o=xm();return s.forEach((l,A)=>{const u=a.get(l);u!==void 0&&zm(u.mutation,A,cs.empty(),hn.now()),pp(r,A)&&(o=o.insert(l,A))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Ye.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:bi(i.createTime)}}(r)),Ye.resolve()}getNamedQuery(e,r){return Ye.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:gw(i.bundledQuery),readTime:bi(i.readTime)}}(r)),Ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.overlays=new Fn(Lt.comparator),this.qr=new Map}getOverlay(e,r){return Ye.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ul();return Ye.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.St(e,r,a)}),Ye.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),Ye.resolve()}getOverlaysForCollection(e,r,n){const i=ul(),a=r.length+1,s=new Lt(r.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,A=l.getKey();if(!r.isPrefixOf(A.path))break;A.path.length===a&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Ye.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new Fn((A,u)=>A-u);const s=this.overlays.getIterator();for(;s.hasNext();){const A=s.getNext().value;if(A.getKey().getCollectionGroup()===r&&A.largestBatchId>n){let u=a.get(A.largestBatchId);u===null&&(u=ul(),a=a.insert(A.largestBatchId,u)),u.set(A.getKey(),A)}}const o=ul(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((A,u)=>o.set(A,u)),!(o.size()>=i)););return Ye.resolve(o)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new k_(r,n));let a=this.qr.get(r);a===void 0&&(a=vr(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.sessionToken=ii.EMPTY_BYTE_STRING}getSessionToken(e){return Ye.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.Qr=new pn(ji.$r),this.Ur=new pn(ji.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new ji(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new ji(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new Lt(new Sr([])),n=new ji(r,e),i=new ji(r,e+1),a=[];return this.Ur.forEachInRange([n,i],s=>{this.Gr(s),a.push(s.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Lt(new Sr([])),n=new ji(r,e),i=new ji(r,e+1);let a=vr();return this.Ur.forEachInRange([n,i],s=>{a=a.add(s.key)}),a}containsKey(e){const r=new ji(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ji{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Lt.comparator(e.key,r.key)||dr(e.Yr,r.Yr)}static Kr(e,r){return dr(e.Yr,r.Yr)||Lt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new pn(ji.$r)}checkEmpty(e){return Ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new N_(a,r,n,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new ji(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ye.resolve(s)}lookupMutationBatch(e,r){return Ye.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),a=i<0?0:i;return Ye.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ye.resolve(this.mutationQueue.length===0?mA:this.tr-1)}getAllMutationBatches(e){return Ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ji(r,0),i=new ji(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],s=>{const o=this.Xr(s.Yr);a.push(o)}),Ye.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new pn(dr);return r.forEach(i=>{const a=new ji(i,0),s=new ji(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],o=>{n=n.add(o.Yr)})}),Ye.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;Lt.isDocumentKey(a)||(a=a.child(""));const s=new ji(new Lt(a),0);let o=new pn(dr);return this.Zr.forEachWhile(l=>{const A=l.key.path;return!!n.isPrefixOf(A)&&(A.length===i&&(o=o.add(l.Yr)),!0)},s),Ye.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Wt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ye.forEach(r.mutations,i=>{const a=new ji(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new ji(r,0),i=this.Zr.firstAfterOrEqual(n);return Ye.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ye.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.ri=e,this.docs=function(){return new Fn(Lt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ye.resolve(n?n.document.mutableCopy():On.newInvalidDocument(r))}getEntries(e,r){let n=As();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():On.newInvalidDocument(i))}),Ye.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=As();const s=r.path,o=new Lt(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:A,value:{document:u}}=l.getNext();if(!s.isPrefixOf(A.path))break;A.path.length>s.length+1||f_(R3(u),n)<=0||(i.has(u.key)||pp(r,u))&&(a=a.insert(u.key,u.mutableCopy()))}return Ye.resolve(a)}getAllFromCollectionGroup(e,r,n,i){Vt(9500)}ii(e,r){return Ye.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new pj(this)}getSize(e){return Ye.resolve(this.size)}}class pj extends sL{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),Ye.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.persistence=e,this.si=new fc(r=>Qu(r),fp),this.lastRemoteSnapshotVersion=er.min(),this.highestTargetId=0,this.oi=0,this._i=new L_,this.targetCount=0,this.ai=zu.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),Ye.resolve()}getLastRemoteSnapshotVersion(e){return Ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ye.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ye.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ye.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new zu(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Ye.resolve()}updateTargetData(e,r){return this.Pr(r),Ye.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ye.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ye.waitFor(a).next(()=>i)}getTargetCount(e){return Ye.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Ye.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Ye.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),Ye.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Ye.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Ye.resolve(n)}containsKey(e,r){return Ye.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,r){this.ui={},this.overlays={},this.ci=new ls(0),this.li=!1,this.li=!0,this.hi=new hj,this.referenceDelegate=e(this),this.Pi=new gj(this),this.indexManager=new rj,this.remoteDocumentCache=function(i){return new mj(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new qP(r),this.Ii=new uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new dj,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new fj(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){_t("MemoryPersistence","Starting transaction:",e);const i=new vj(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,r){return Ye.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class vj extends O3{constructor(e){super(),this.currentSequenceNumber=e}}class bw{constructor(e){this.persistence=e,this.Ri=new L_,this.Vi=null}static mi(e){return new bw(e)}get fi(){if(this.Vi)return this.Vi;throw Vt(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ye.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ye.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Ye.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ye.forEach(this.fi,n=>{const i=Lt.fromPath(n);return this.gi(e,i).next(a=>{a||r.removeEntry(i,er.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return Ye.or([()=>Ye.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class rv{constructor(e,r){this.persistence=e,this.pi=new fc(n=>Ca(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=aL(this,r)}static mi(e,r){return new rv(e,r)}Ei(){}di(e){return Ye.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return Ye.forEach(this.pi,(n,i)=>this.br(e,n,i).next(a=>a?Ye.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,r).next(o=>{o||(n++,a.removeEntry(s,er.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Ye.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ye.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ye.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Ye.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=v1(e.data.value)),r}br(e,r,n){return Ye.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return Ye.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.serializer=e}k(e,r,n,i){const a=new sw("createOrUpgrade",r);n<1&&i>=1&&(function(l){l.createObjectStore(hp)}(e),function(l){l.createObjectStore(y0,{keyPath:OV}),l.createObjectStore(Io,{keyPath:TN,autoIncrement:!0}).createIndex(pu,IN,{unique:!0}),l.createObjectStore(jh)}(e),bS(e),function(l){l.createObjectStore(su)}(e));let s=Ye.resolve();return n<3&&i>=3&&(n!==0&&(function(l){l.deleteObjectStore($h),l.deleteObjectStore(zh),l.deleteObjectStore(Cu)}(e),bS(e)),s=s.next(()=>function(l){const A=l.store(Cu),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:er.min().toTimestamp(),targetCount:0};return A.put(q1,u)}(a))),n<4&&i>=4&&(n!==0&&(s=s.next(()=>function(l,A){return A.store(Io).J().next(d=>{l.deleteObjectStore(Io),l.createObjectStore(Io,{keyPath:TN,autoIncrement:!0}).createIndex(pu,IN,{unique:!0});const h=A.store(Io),f=d.map(p=>h.put(p));return Ye.waitFor(f)})}(e,a))),s=s.next(()=>{(function(l){l.createObjectStore(Gh,{keyPath:GV})})(e)})),n<5&&i>=5&&(s=s.next(()=>this.yi(a))),n<6&&i>=6&&(s=s.next(()=>(function(l){l.createObjectStore(x0)}(e),this.wi(a)))),n<7&&i>=7&&(s=s.next(()=>this.Si(a))),n<8&&i>=8&&(s=s.next(()=>this.bi(e,a))),n<9&&i>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&i>=10&&(s=s.next(()=>this.Di(a))),n<11&&i>=11&&(s=s.next(()=>{(function(l){l.createObjectStore(ow,{keyPath:WV})})(e),function(l){l.createObjectStore(lw,{keyPath:qV})}(e)})),n<12&&i>=12&&(s=s.next(()=>{(function(l){const A=l.createObjectStore(cw,{keyPath:rK});A.createIndex(N2,nK,{unique:!1}),A.createIndex($3,iK,{unique:!1})})(e)})),n<13&&i>=13&&(s=s.next(()=>function(l){const A=l.createObjectStore(W1,{keyPath:QV});A.createIndex(p1,HV),A.createIndex(V3,VV)}(e)).next(()=>this.Ci(e,a)).next(()=>e.deleteObjectStore(su))),n<14&&i>=14&&(s=s.next(()=>this.Fi(e,a))),n<15&&i>=15&&(s=s.next(()=>function(l){l.createObjectStore(g_,{keyPath:XV,autoIncrement:!0}).createIndex(C2,YV,{unique:!1}),l.createObjectStore(Hm,{keyPath:JV}).createIndex(j3,ZV,{unique:!1}),l.createObjectStore(Vm,{keyPath:eK}).createIndex(z3,tK,{unique:!1})}(e))),n<16&&i>=16&&(s=s.next(()=>{r.objectStore(Hm).clear()}).next(()=>{r.objectStore(Vm).clear()})),n<17&&i>=17&&(s=s.next(()=>{(function(l){l.createObjectStore(v_,{keyPath:aK})})(e)})),n<18&&i>=18&&RF()&&(s=s.next(()=>{r.objectStore(Hm).clear()}).next(()=>{r.objectStore(Vm).clear()})),s}wi(e){let r=0;return e.store(su).ee((n,i)=>{r+=tv(i)}).next(()=>{const n={byteSize:r};return e.store(x0).put(B2,n)})}yi(e){const r=e.store(y0),n=e.store(Io);return r.J().next(i=>Ye.forEach(i,a=>{const s=IDBKeyRange.bound([a.userId,mA],[a.userId,a.lastAcknowledgedBatchId]);return n.J(pu,s).next(o=>Ye.forEach(o,l=>{Wt(l.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const A=cu(this.serializer,l);return eL(e,a.userId,A).next(()=>{})}))}))}Si(e){const r=e.store($h),n=e.store(su);return e.store(Cu).get(q1).next(i=>{const a=[];return n.ee((s,o)=>{const l=new Sr(s),A=function(d){return[0,Ca(d)]}(l);a.push(r.get(A).next(u=>u?Ye.resolve():(d=>r.put({targetId:0,path:Ca(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>Ye.waitFor(a))})}bi(e,r){e.createObjectStore(_0,{keyPath:$V});const n=r.store(_0),i=new P_,a=s=>{if(i.add(s)){const o=s.lastSegment(),l=s.popLast();return n.put({collectionId:o,parent:Ca(l)})}};return r.store(su).ee({X:!0},(s,o)=>{const l=new Sr(s);return a(l.popLast())}).next(()=>r.store(jh).ee({X:!0},([s,o,l],A)=>{const u=Al(o);return a(u.popLast())}))}Di(e){const r=e.store(zh);return r.ee((n,i)=>{const a=Em(i),s=XP(this.serializer,a);return r.put(s)})}Ci(e,r){const n=r.store(su),i=[];return n.ee((a,s)=>{const o=r.store(W1),l=function(d){return d.document?new Lt(Sr.fromString(d.document.name).popFirst(5)):d.noDocument?Lt.fromSegments(d.noDocument.path):d.unknownDocument?Lt.fromSegments(d.unknownDocument.path):Vt(36783)}(s).path.toArray(),A={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(A))}).next(()=>Ye.waitFor(i))}Fi(e,r){const n=r.store(Io),i=oL(this.serializer),a=new D_(bw.mi,this.serializer.yt);return n.J().next(s=>{const o=new Map;return s.forEach(l=>{let A=o.get(l.userId)??vr();cu(this.serializer,l).keys().forEach(u=>A=A.add(u)),o.set(l.userId,A)}),Ye.forEach(o,(l,A)=>{const u=new $i(A),d=vw.wt(this.serializer,u),h=a.getIndexManager(u),f=ww.wt(u,this.serializer,h,a.referenceDelegate);return new lL(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new S2(r,ls.ce),l).next()})})}}function bS(t){t.createObjectStore($h,{keyPath:jV}).createIndex(p_,zV,{unique:!0}),t.createObjectStore(zh,{keyPath:"targetId"}).createIndex(K3,KV,{unique:!0}),t.createObjectStore(Cu)}const Rc="IndexedDbPersistence",Db=18e5,Rb=5e3,Ub="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cL="main";class R_{constructor(e,r,n,i,a,s,o,l,A,u,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.Mi=a,this.window=s,this.document=o,this.xi=A,this.Oi=u,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=h=>Promise.resolve(),!R_.v())throw new vt(rt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oj(this,i),this.$i=r+cL,this.serializer=new qP(l),this.Ui=new vl(this.$i,this.Ni,new wj(this.serializer)),this.hi=new XK,this.Pi=new ij(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oL(this.serializer),this.Ii=new qK,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,u===!1&&wi(Rc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vt(rt.FAILED_PRECONDITION,Ub);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new ls(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ug(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(r=>{r||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(r=>this.isPrimary&&!r?this.Zi(e).next(()=>!1):!!r&&this.Xi(e).next(()=>!0))).catch(e=>{if(MA(e))return _t(Rc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _t(Rc,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return am(e).get(Hd).next(r=>Ye.resolve(this.es(r)))}ts(e){return ug(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Db)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Hi(r,Gh);return n.J().next(i=>{const a=this.ss(i,Db),s=i.filter(o=>a.indexOf(o)===-1);return Ye.forEach(s,o=>n.delete(o.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ki)for(const r of e)this.Ki.removeItem(this._s(r.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Ye.resolve(!0):am(e).get(Hd).next(r=>{if(r!==null&&this.rs(r.leaseTimestampMs,Rb)&&!this.us(r.ownerId)){if(this.es(r)&&this.networkEnabled)return!0;if(!this.es(r)){if(!r.allowTabSynchronization)throw new vt(rt.FAILED_PRECONDITION,Ub);return!1}}return!(!this.networkEnabled||!this.inForeground)||ug(e).J().next(n=>this.ss(n,Rb).find(i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&_t(Rc,`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[hp,Gh],e=>{const r=new S2(e,ls.ce);return this.Zi(r).next(()=>this.ts(r))}),this.Ui.close(),this.Ps()}ss(e,r){return e.filter(n=>this.rs(n.updateTimeMs,r)&&!this.us(n.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>ug(e).J().next(r=>this.ss(r,Db).map(n=>n.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,r){return ww.wt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nj(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return vw.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,r,n){_t(Rc,"Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",a=function(l){return l===18?lK:l===17?X3:l===16?oK:l===15?w_:l===14?q3:l===13?W3:l===12?sK:l===11?G3:void Vt(60245)}(this.Ni);let s;return this.Ui.runTransaction(e,i,a,o=>(s=new S2(o,this.ci?this.ci.next():ls.ce),r==="readwrite-primary"?this.Hi(s).next(l=>!!l||this.Yi(s)).next(l=>{if(!l)throw wi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new vt(rt.FAILED_PRECONDITION,U3);return n(s)}).next(l=>this.Xi(s).next(()=>l)):this.Is(s).next(()=>n(s)))).then(o=>(s.raiseOnCommittedEvent(),o))}Is(e){return am(e).get(Hd).next(r=>{if(r!==null&&this.rs(r.leaseTimestampMs,Rb)&&!this.us(r.ownerId)&&!this.es(r)&&!(this.Oi||this.allowTabSynchronization&&r.allowTabSynchronization))throw new vt(rt.FAILED_PRECONDITION,Ub)})}Xi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return am(e).put(Hd,r)}static v(){return vl.v()}Zi(e){const r=am(e);return r.get(Hd).next(n=>this.es(n)?(_t(Rc,"Releasing primary lease."),r.delete(Hd)):Ye.resolve())}rs(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(wi(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const r=/(?:Version|Mobile)\/1[456]/;DF()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var r;try{const n=((r=this.Ki)==null?void 0:r.getItem(this._s(e)))!==null;return _t(Rc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return wi(Rc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){wi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function am(t){return Hi(t,hp)}function ug(t){return Hi(t,Gh)}function U_(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=vr(),i=vr();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new O_(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return DF()?8:M3(Oi())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ys(e,r).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ws(e,r,i,n).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new bj;return this.Ss(e,r,s).next(o=>{if(a.result=o,this.Vs)return this.bs(e,r,s,o.size)})}).next(()=>a.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(sh()<=Qr.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",oh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ye.resolve()):(sh()<=Qr.DEBUG&&_t("QueryEngine","Query:",oh(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(sh()<=Qr.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",oh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Na(r))):Ye.resolve())}ys(e,r){if(jN(r))return Ye.resolve(null);let n=Na(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=J1(r,null,"F"),n=Na(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const s=vr(...a);return this.ps.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const A=this.Ds(r,o);return this.Cs(r,A,s,l.readTime)?this.ys(e,J1(r,null,"F")):this.vs(e,A,r,l)}))})))}ws(e,r,n,i){return jN(r)||i.isEqual(er.min())?Ye.resolve(null):this.ps.getDocuments(e,n).next(a=>{const s=this.Ds(r,a);return this.Cs(r,s,n,i)?Ye.resolve(null):(sh()<=Qr.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oh(r)),this.vs(e,s,r,D3(i,Hh)).next(o=>o))})}Ds(e,r){let n=new pn(bP(e));return r.forEach((i,a)=>{pp(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,n){return sh()<=Qr.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",oh(r)),this.ps.getDocumentsMatchingQuery(e,r,js.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="LocalStore",yj=3e8;class xj{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new Fn(dr),this.xs=new fc(a=>Qu(a),fp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function uL(t,e,r,n){return new xj(t,e,r,n)}async function dL(t,e){const r=Dt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const s=[],o=[];let l=vr();for(const A of i){s.push(A.batchId);for(const u of A.mutations)l=l.add(u.key)}for(const A of a){o.push(A.batchId);for(const u of A.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(A=>({Ls:A,removedBatchIds:s,addedBatchIds:o}))})})}function _j(t,e){const r=Dt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,A,u){const d=A.batch,h=d.keys();let f=Ye.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(g=>{const v=A.docVersions.get(p);Wt(v!==null,48541),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,A),g.isValidDocument()&&(g.setReadTime(A.commitVersion),u.addEntry(g)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=vr();for(let A=0;A<o.mutationResults.length;++A)o.mutationResults[A].transformResults.length>0&&(l=l.add(o.batch.mutations[A].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function hL(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function Ej(t,e){const r=Dt(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const o=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;o.push(r.Pi.removeMatchingKeys(a,u.removedDocuments,d).next(()=>r.Pi.addMatchingKeys(a,u.addedDocuments,d)));let f=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(ii.EMPTY_BYTE_STRING,er.min()).withLastLimboFreeSnapshotVersion(er.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,n)),i=i.insert(d,f),function(g,v,C){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=yj?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,f,u)&&o.push(r.Pi.updateTargetData(a,f))});let l=As(),A=vr();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,u))}),o.push(fL(a,s,e.documentUpdates).next(u=>{l=u.ks,A=u.qs})),!n.isEqual(er.min())){const u=r.Pi.getLastRemoteSnapshotVersion(a).next(d=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(u)}return Ye.waitFor(o).next(()=>s.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,A)).next(()=>l)}).then(a=>(r.Ms=i,a))}function fL(t,e,r){let n=vr(),i=vr();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let s=As();return r.forEach((o,l)=>{const A=a.get(o);l.isFoundDocument()!==A.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(er.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!A.isValidDocument()||l.version.compareTo(A.version)>0||l.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):_t(M_,"Ignoring outdated watch update for ",o,". Current version:",A.version," Watch version:",l.version)}),{ks:s,qs:i}})}function Bj(t,e){const r=Dt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=mA),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ef(t,e){const r=Dt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(a=>a?(i=a,Ye.resolve(i)):r.Pi.allocateTargetId(n).next(s=>(i=new Yl(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function tf(t,e,r){const n=Dt(t),i=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!MA(s))throw s;_t(M_,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function nv(t,e,r){const n=Dt(t);let i=er.min(),a=vr();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,A,u){const d=Dt(l),h=d.xs.get(u);return h!==void 0?Ye.resolve(d.Ms.get(h)):d.Pi.getTargetData(A,u)}(n,s,Na(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(s,e,r?i:er.min(),r?a:vr())).next(o=>(gL(n,wP(e),o),{documents:o,Qs:a})))}function mL(t,e){const r=Dt(t),n=Dt(r.Pi),i=r.Ms.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",a=>n.At(a,e).next(s=>s?s.target:null))}function pL(t,e){const r=Dt(t),n=r.Os.get(e)||er.min();return r.persistence.runTransaction("Get new document changes","readonly",i=>r.Ns.getAllFromCollectionGroup(i,e,D3(n,Hh),Number.MAX_SAFE_INTEGER)).then(i=>(gL(r,e,i),i))}function gL(t,e,r){let n=t.Os.get(e)||er.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}async function Cj(t,e,r,n){const i=Dt(t);let a=vr(),s=As();for(const A of r){const u=e.$s(A.metadata.name);A.document&&(a=a.add(u));const d=e.Us(A);d.setReadTime(e.Ks(A.metadata.readTime)),s=s.insert(u,d)}const o=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await ef(i,function(u){return Na(vf(Sr.fromString(`__bundle__/docs/${u}`)))}(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",A=>fL(A,o,s).next(u=>(o.apply(A),u)).next(u=>i.Pi.removeMatchingKeysForTargetId(A,l.targetId).next(()=>i.Pi.addMatchingKeys(A,a,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(A,u.ks,u.qs)).next(()=>u.ks)))}async function Nj(t,e,r=vr()){const n=await ef(t,Na(gw(e.bundledQuery))),i=Dt(t);return i.persistence.runTransaction("Save named query","readwrite",a=>{const s=bi(e.readTime);if(n.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(a,e);const o=n.withResumeToken(ii.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(o.targetId,o),i.Pi.updateTargetData(a,o).next(()=>i.Pi.removeMatchingKeysForTargetId(a,n.targetId)).next(()=>i.Pi.addMatchingKeys(a,r,n.targetId)).next(()=>i.Ii.saveNamedQuery(a,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="firestore_clients";function yS(t,e){return`${vL}_${t}_${e}`}const wL="firestore_mutations";function xS(t,e,r){let n=`${wL}_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const bL="firestore_targets";function Ob(t,e){return`${bL}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll="SharedClientState";class iv{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static Ws(e,r,n){const i=JSON.parse(n);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new vt(i.error.code,i.error.message))),s?new iv(e,r,i.state,a):(wi(ll,`Failed to parse mutation state for ID '${r}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Ws(e,r){const n=JSON.parse(r);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new vt(n.error.code,n.error.message))),a?new Gm(e,n.state,i):(wi(ll,`Failed to parse target state for ID '${e}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class av{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Ws(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=E_();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=Q3(n.activeTargetIds[s]),a=a.add(n.activeTargetIds[s]);return i?new av(e,a):(wi(ll,`Failed to parse client data for instance '${e}': ${r}`),null)}}class Q_{constructor(e,r){this.clientId=e,this.onlineState=r}static Ws(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Q_(r.clientId,r.onlineState):(wi(ll,`Failed to parse online state: ${e}`),null)}}class V2{constructor(){this.activeTargetIds=E_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mb{constructor(e,r,n,i,a){this.window=e,this.Mi=r,this.persistenceKey=n,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Fn(dr),this.started=!1,this.Xs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=yS(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new V2),this.ro=new RegExp(`^${vL}_${s}_([^_]*)$`),this.io=new RegExp(`^${wL}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${bL}_${s}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const n of e){if(n===this.Js)continue;const i=this.getItem(yS(this.persistenceKey,n));if(i){const a=av.Ws(n,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const r=this.storage.getItem(this.oo);if(r){const n=this.uo(r);n&&this.co(n)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let r=!1;return this.Zs.forEach((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,r,n){this.ho(e,r,n),this.Po(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ob(this.persistenceKey,e));if(i){const a=Gm.Ws(e,i);a&&(n=a.state)}}return r&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ob(this.persistenceKey,e))}updateQueryState(e,r,n){this.Io(e,r,n)}handleUserChange(e,r,n){r.forEach(i=>{this.Po(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return _t(ll,"READ",e,r),r}setItem(e,r){_t(ll,"SET",e,r),this.storage.setItem(e,r)}removeItem(e){_t(ll,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const r=e;if(r.storageArea===this.storage){if(_t(ll,"EVENT",r.key,r.newValue),r.key===this.eo)return void wi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.ro.test(r.key)){if(r.newValue==null){const n=this.Ro(r.key);return this.Vo(n,null)}{const n=this.mo(r.key,r.newValue);if(n)return this.Vo(n.clientId,n)}}else if(this.io.test(r.key)){if(r.newValue!==null){const n=this.fo(r.key,r.newValue);if(n)return this.po(n)}}else if(this.so.test(r.key)){if(r.newValue!==null){const n=this.yo(r.key,r.newValue);if(n)return this.wo(n)}}else if(r.key===this.oo){if(r.newValue!==null){const n=this.uo(r.newValue);if(n)return this.co(n)}}else if(r.key===this.no){const n=function(a){let s=ls.ce;if(a!=null)try{const o=JSON.parse(a);Wt(typeof o=="number",30636,{So:a}),s=o}catch(o){wi(ll,"Failed to read sequence number from WebStorage",o)}return s}(r.newValue);n!==ls.ce&&this.sequenceNumberHandler(n)}else if(r.key===this._o){const n=this.bo(r.newValue);await Promise.all(n.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(r)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,r,n){const i=new iv(this.currentUser,e,r,n),a=xS(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const r=xS(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Eo(e){const r={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(r))}Io(e,r,n){const i=Ob(this.persistenceKey,e),a=new Gm(e,r,n);this.setItem(i,a.Gs())}Ao(e){const r=JSON.stringify(Array.from(e));this.setItem(this._o,r)}Ro(e){const r=this.ro.exec(e);return r?r[1]:null}mo(e,r){const n=this.Ro(e);return av.Ws(n,r)}fo(e,r){const n=this.io.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return iv.Ws(new $i(a),i,r)}yo(e,r){const n=this.so.exec(e),i=Number(n[1]);return Gm.Ws(i,r)}uo(e){return Q_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);_t(ll,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,r){const n=r?this.Zs.insert(e,r):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(n),s=[],o=[];return a.forEach(l=>{i.has(l)||s.push(l)}),i.forEach(l=>{a.has(l)||o.push(l)}),this.syncEngine.Fo(s,o).then(()=>{this.Zs=n})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let r=E_();return e.forEach((n,i)=>{r=r.unionWith(i.activeTargetIds)}),r}}class yL{constructor(){this.Mo=new V2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new V2,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="ConnectivityMonitor";class ES{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_t(_S,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_t(_S,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg=null;function K2(){return dg===null?dg=function(){return 268435456+Math.round(2147483648*Math.random())}():dg++,"0x"+dg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="RestConnection",kj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===B0?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,a){const s=K2(),o=this.zo(e,r.toUriEncodedString());_t(Qb,`Sending RPC '${e}' ${s}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,a);const{host:A}=new URL(o),u=dc(A);return this.Jo(e,o,l,n,u).then(d=>(_t(Qb,`Received RPC '${e}' ${s}: `,d),d),d=>{throw fo(Qb,`RPC '${e}' ${s} failed with error: `,d,"url: ",o,"request:",n),d})}Ho(e,r,n,i,a,s){return this.Go(e,r,n,i,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}zo(e,r){const n=kj[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="WebChannelConnection";class Fj extends Tj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,a){const s=K2();return new Promise((o,l)=>{const A=new B3;A.setWithCredentials(!0),A.listenOnce(C3.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case f1.NO_ERROR:const d=A.getResponseJson();_t(ha,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case f1.TIMEOUT:_t(ha,`RPC '${e}' ${s} timed out`),l(new vt(rt.DEADLINE_EXCEEDED,"Request time out"));break;case f1.HTTP_ERROR:const h=A.getStatus();if(_t(ha,`RPC '${e}' ${s} failed with status:`,h,"response text:",A.getResponseText()),h>0){let f=A.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const g=function(C){const I=C.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(I)>=0?I:rt.UNKNOWN}(p.status);l(new vt(g,p.message))}else l(new vt(rt.UNKNOWN,"Server responded with status "+A.getStatus()))}else l(new vt(rt.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{l_:e,streamId:s,h_:A.getLastErrorCode(),P_:A.getLastError()})}}finally{_t(ha,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);_t(ha,`RPC '${e}' ${s} sending request:`,i),A.send(r,"POST",u,n,15)})}T_(e,r,n){const i=K2(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=k3(),o=S3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(l.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=a.join("");_t(ha,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=s.createWebChannel(u,l);this.I_(d);let h=!1,f=!1;const p=new Ij({Yo:v=>{f?_t(ha,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(_t(ha,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),_t(ha,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},Zo:()=>d.close()}),g=(v,C,I)=>{v.listen(C,F=>{try{I(F)}catch(E){setTimeout(()=>{throw E},0)}})};return g(d,ym.EventType.OPEN,()=>{f||(_t(ha,`RPC '${e}' stream ${i} transport opened.`),p.o_())}),g(d,ym.EventType.CLOSE,()=>{f||(f=!0,_t(ha,`RPC '${e}' stream ${i} transport closed`),p.a_(),this.E_(d))}),g(d,ym.EventType.ERROR,v=>{f||(f=!0,fo(ha,`RPC '${e}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),p.a_(new vt(rt.UNAVAILABLE,"The operation could not be completed")))}),g(d,ym.EventType.MESSAGE,v=>{var C;if(!f){const I=v.data[0];Wt(!!I,16349);const F=I,E=(F==null?void 0:F.error)||((C=F[0])==null?void 0:C.error);if(E){_t(ha,`RPC '${e}' stream ${i} received error:`,E);const R=E.status;let L=function(x){const k=Bi[x];if(k!==void 0)return LP(k)}(R),N=E.message;L===void 0&&(L=rt.INTERNAL,N="Unknown error status: "+R+" with message "+E.message),f=!0,p.a_(new vt(L,N)),d.close()}else _t(ha,`RPC '${e}' stream ${i} received:`,I),p.u_(I)}}),g(o,N3.STAT_EVENT,v=>{v.stat===b2.PROXY?_t(ha,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===b2.NOPROXY&&_t(ha,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){return typeof window<"u"?window:null}function _1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new OK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&_t("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="PersistentStream";class _L{constructor(e,r,n,i,a,s,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new H_(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===rt.RESOURCE_EXHAUSTED?(wi(r.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new vt(rt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return _t(BS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(_t(BS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pj extends _L{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=HK(this.serializer,e),n=function(a){if(!("targetChange"in a))return er.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?er.min():s.readTime?bi(s.readTime):er.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=U2(this.serializer),r.addTarget=function(a,s){let o;const l=s.target;if(o=X1(l)?{documents:KP(a,l)}:{query:pw(a,l).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=OP(a,s.resumeToken);const A=D2(a,s.expectedCount);A!==null&&(o.expectedCount=A)}else if(s.snapshotVersion.compareTo(er.min())>0){o.readTime=Zh(a,s.snapshotVersion.toTimestamp());const A=D2(a,s.expectedCount);A!==null&&(o.expectedCount=A)}return o}(this.serializer,e);const n=KK(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=U2(this.serializer),r.removeTarget=e,this.q_(r)}}class Lj extends _L{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=VK(e.writeResults,e.commitTime),n=bi(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=U2(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>T0(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{}class Rj extends Dj{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new vt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Go(e,R2(r,n),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new vt(rt.UNKNOWN,a.toString())})}Ho(e,r,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,R2(r,n),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new vt(rt.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Uj{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wi(r),this.aa=!1):_t("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="RemoteStore";class Oj{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(s=>{n.enqueueAndForget(async()=>{HA(this)&&(_t($u,"Restarting streams for network reachability change."),await async function(l){const A=Dt(l);A.Ea.add(4),await yf(A),A.Ra.set("Unknown"),A.Ea.delete(4),await bp(A)}(this))})}),this.Ra=new Uj(n,i)}}async function bp(t){if(HA(t))for(const e of t.da)await e(!0)}async function yf(t){for(const e of t.da)await e(!1)}function yw(t,e){const r=Dt(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),j_(r)?K_(r):_f(r).O_()&&V_(r,e))}function rf(t,e){const r=Dt(t),n=_f(r);r.Ia.delete(e),n.O_()&&EL(r,e),r.Ia.size===0&&(n.O_()?n.L_():HA(r)&&r.Ra.set("Unknown"))}function V_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(er.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}_f(t).Y_(e)}function EL(t,e){t.Va.Ue(e),_f(t).Z_(e)}function K_(t){t.Va=new LK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_f(t).start(),t.Ra.ua()}function j_(t){return HA(t)&&!_f(t).x_()&&t.Ia.size>0}function HA(t){return Dt(t).Ea.size===0}function BL(t){t.Va=void 0}async function Mj(t){t.Ra.set("Online")}async function Qj(t){t.Ia.forEach((e,r)=>{V_(t,e)})}async function Hj(t,e){BL(t),j_(t)?(t.Ra.ha(e),K_(t)):t.Ra.set("Unknown")}async function Vj(t,e,r){if(t.Ra.set("Online"),e instanceof UP&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(n){_t($u,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await sv(t,n)}else if(e instanceof y1?t.Va.Ze(e):e instanceof RP?t.Va.st(e):t.Va.tt(e),!r.isEqual(er.min()))try{const n=await hL(t.localStore);r.compareTo(n)>=0&&await function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach((l,A)=>{if(l.resumeToken.approximateByteSize()>0){const u=a.Ia.get(A);u&&a.Ia.set(A,u.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,A)=>{const u=a.Ia.get(l);if(!u)return;a.Ia.set(l,u.withResumeToken(ii.EMPTY_BYTE_STRING,u.snapshotVersion)),EL(a,l);const d=new Yl(u.target,l,A,u.sequenceNumber);V_(a,d)}),a.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){_t($u,"Failed to raise snapshot:",n),await sv(t,n)}}async function sv(t,e,r){if(!MA(e))throw e;t.Ea.add(1),await yf(t),t.Ra.set("Offline"),r||(r=()=>hL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{_t($u,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await bp(t)})}function CL(t,e){return e().catch(r=>sv(t,r,e))}async function xf(t){const e=Dt(t),r=BA(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mA;for(;Kj(e);)try{const i=await Bj(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,jj(e,i)}catch(i){await sv(e,i)}NL(e)&&SL(e)}function Kj(t){return HA(t)&&t.Ta.length<10}function jj(t,e){t.Ta.push(e);const r=BA(t);r.O_()&&r.X_&&r.ea(e.mutations)}function NL(t){return HA(t)&&!BA(t).x_()&&t.Ta.length>0}function SL(t){BA(t).start()}async function zj(t){BA(t).ra()}async function $j(t){const e=BA(t);for(const r of t.Ta)e.ea(r.mutations)}async function Gj(t,e,r){const n=t.Ta.shift(),i=S_.from(n,e,r);await CL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xf(t)}async function Wj(t,e){e&&BA(t).X_&&await async function(n,i){if(function(s){return PP(s)&&s!==rt.ABORTED}(i.code)){const a=n.Ta.shift();BA(n).B_(),await CL(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await xf(n)}}(t,e),NL(t)&&SL(t)}async function CS(t,e){const r=Dt(t);r.asyncQueue.verifyOperationInProgress(),_t($u,"RemoteStore received new credentials");const n=HA(r);r.Ea.add(3),await yf(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await bp(r)}async function j2(t,e){const r=Dt(t);e?(r.Ea.delete(2),await bp(r)):e||(r.Ea.add(2),await yf(r),r.Ra.set("Unknown"))}function _f(t){return t.ma||(t.ma=function(r,n,i){const a=Dt(r);return a.sa(),new Pj(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Mj.bind(null,t),t_:Qj.bind(null,t),r_:Hj.bind(null,t),H_:Vj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),j_(t)?K_(t):t.Ra.set("Unknown")):(await t.ma.stop(),BL(t))})),t.ma}function BA(t){return t.fa||(t.fa=function(r,n,i){const a=Dt(r);return a.sa(),new Lj(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:zj.bind(null,t),r_:Wj.bind(null,t),ta:$j.bind(null,t),na:Gj.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await xf(t)):(await t.fa.stop(),t.Ta.length>0&&(_t($u,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,o=new z_(e,r,s,i,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vt(rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ef(t,e){if(wi("AsyncQueue",`${e}: ${t}`),MA(t))return new vt(rt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{static emptySet(e){return new Nu(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Lt.comparator(r.key,n.key):(r,n)=>Lt.comparator(r.key,n.key),this.keyedMap=xm(),this.sortedSet=new Fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Nu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Nu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.ga=new Fn(Lt.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Vt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Gu{constructor(e,r,n,i,a,s,o,l,A){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=A}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach(o=>{s.push({type:0,doc:o})}),new Gu(e,r,Nu.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Xj{constructor(){this.queries=SS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Dt(r),a=i.queries;i.queries=SS(),a.forEach((s,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new vt(rt.ABORTED,"Firestore shutting down"))}}function SS(){return new fc(t=>vP(t),mp)}async function $_(t,e){const r=Dt(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new qj,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const o=Ef(s,`Initialization of query '${oh(e.query)}' failed`);return void e.onError(o)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&W_(r)}async function G_(t,e){const r=Dt(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Yj(t,e){const r=Dt(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(n=!0);s.wa=i}}n&&W_(r)}function Jj(t,e,r){const n=Dt(t),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);n.queries.delete(e)}function W_(t){t.Ca.forEach(e=>{e.next()})}var z2,kS;(kS=z2||(z2={})).Ma="default",kS.Cache="cache";class q_{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Gu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Gu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==z2.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,r){this.Qa=e,this.byteLength=r}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.serializer=e}$s(e){return wl(this.serializer,e)}Us(e){return e.metadata.exists?mw(this.serializer,e.document,!1):On.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return bi(e)}}class X_{constructor(e,r){this.Ua=e,this.serializer=r,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=TL(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++r;const n=Sr.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,{...this.progress}):null}za(e){const r=new Map,n=new TS(this.serializer);for(const i of e)if(i.metadata.queries){const a=n.$s(i.metadata.name);for(const s of i.metadata.queries){const o=(r.get(s)||vr()).add(a);r.set(s,o)}}return r}async ja(e){const r=await Cj(e,new TS(this.serializer),this.Wa,this.Ua.id),n=this.za(this.documents);for(const i of this.Ka)await Nj(e,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:r}}}function TL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.key=e}}class FL{constructor(e){this.key=e}}class PL{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=vr(),this.mutatedKeys=vr(),this.eu=bP(e),this.tu=new Nu(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new NS,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,A=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=pp(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(n.track({type:3,doc:f}),v=!0):this.su(h,f)||(n.track({type:2,doc:f}),v=!0,(l&&this.eu(f,l)>0||A&&this.eu(f,A)<0)&&(o=!0)):!h&&f?(n.track({type:0,doc:f}),v=!0):h&&!f&&(n.track({type:1,doc:h}),v=!0,(l||A)&&(o=!0)),v&&(f?(s=s.add(f),a=g?a.add(u):a.delete(u)):(s=s.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),a=a.delete(u.key),n.track({type:1,doc:u})}return{tu:s,iu:n,Cs:o,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((u,d)=>function(f,p){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{Rt:v})}};return g(f)-g(p)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(n),i=i??!1;const o=r&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,A=l!==this.Za;return this.Za=l,s.length!==0||A?{snapshot:new Gu(this.query,e.tu,a,s,e.mutatedKeys,l===0,A,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=vr(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new FL(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new IL(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=vr();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Gu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const VA="SyncEngine";class Zj{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class ez{constructor(e){this.key=e,this.hu=!1}}class tz{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new fc(o=>vP(o),mp),this.Iu=new Map,this.Eu=new Set,this.du=new Fn(Lt.comparator),this.Au=new Map,this.Ru=new L_,this.Vu={},this.mu=new Map,this.fu=zu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rz(t,e,r=!0){const n=xw(t);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await LL(n,e,r,!0),i}async function nz(t,e){const r=xw(t);await LL(r,e,!0,!1)}async function LL(t,e,r,n){const i=await ef(t.localStore,Na(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await Y_(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&yw(t.remoteStore,i),o}async function Y_(t,e,r,n,i){t.pu=(d,h,f)=>async function(g,v,C,I){let F=v.view.ru(C);F.Cs&&(F=await nv(g.localStore,v.query,!1).then(({documents:N})=>v.view.ru(N,F)));const E=I&&I.targetChanges.get(v.targetId),R=I&&I.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(F,g.isPrimaryClient,E,R);return $2(g,v.targetId,L.au),L.snapshot}(t,d,h,f);const a=await nv(t.localStore,e,!0),s=new PL(e,a.Qs),o=s.ru(a.documents),l=wp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),A=s.applyChanges(o,t.isPrimaryClient,l);$2(t,r,A.au);const u=new Zj(e,r,s);return t.Tu.set(e,u),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),A.snapshot}async function iz(t,e,r){const n=Dt(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter(s=>!mp(s,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await tf(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&rf(n.remoteStore,i.targetId),nf(n,i.targetId)}).catch(OA)):(nf(n,i.targetId),await tf(n.localStore,i.targetId,!0))}async function az(t,e){const r=Dt(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),rf(r.remoteStore,n.targetId))}async function sz(t,e,r){const n=tE(t);try{const i=await function(s,o){const l=Dt(s),A=hn.now(),u=o.reduce((f,p)=>f.add(p.key),vr());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=As(),g=vr();return l.Ns.getEntries(f,u).next(v=>{p=v,p.forEach((C,I)=>{I.isValidDocument()||(g=g.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(v=>{d=v;const C=[];for(const I of o){const F=IK(I,d.get(I.key).overlayedDocument);F!=null&&C.push(new mc(I.key,F,oP(F.value.mapValue),Gn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,A,C,o)}).next(v=>{h=v;const C=v.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(f,v.batchId,C)})}).then(()=>({batchId:h.batchId,changes:xP(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let A=s.Vu[s.currentUser.toKey()];A||(A=new Fn(dr)),A=A.insert(o,l),s.Vu[s.currentUser.toKey()]=A}(n,i.batchId,r),await pc(n,i.changes),await xf(n.remoteStore)}catch(i){const a=Ef(i,"Failed to persist write");r.reject(a)}}async function DL(t,e){const r=Dt(t);try{const n=await Ej(r.localStore,e);e.targetChanges.forEach((i,a)=>{const s=r.Au.get(a);s&&(Wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Wt(s.hu,14607):i.removedDocuments.size>0&&(Wt(s.hu,42227),s.hu=!1))}),await pc(r,n,e)}catch(n){await OA(n)}}function IS(t,e,r){const n=Dt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=Dt(s);l.onlineState=o;let A=!1;l.queries.forEach((u,d)=>{for(const h of d.Sa)h.va(o)&&(A=!0)}),A&&W_(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function oz(t,e,r){const n=Dt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),a=i&&i.key;if(a){let s=new Fn(Lt.comparator);s=s.insert(a,On.newNoDocument(a,er.min()));const o=vr().add(a),l=new vp(er.min(),new Map,new Fn(dr),s,o);await DL(n,l),n.du=n.du.remove(a),n.Au.delete(e),eE(n)}else await tf(n.localStore,e,!1).then(()=>nf(n,e,r)).catch(OA)}async function lz(t,e){const r=Dt(t),n=e.batch.batchId;try{const i=await _j(r.localStore,e);Z_(r,n,null),J_(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await pc(r,i)}catch(i){await OA(i)}}async function cz(t,e,r){const n=Dt(t);try{const i=await function(s,o){const l=Dt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let u;return l.mutationQueue.lookupMutationBatch(A,o).next(d=>(Wt(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(A,d))).next(()=>l.mutationQueue.performConsistencyCheck(A)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(A,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,u)).next(()=>l.localDocuments.getDocuments(A,u))})}(n.localStore,e);Z_(n,e,r),J_(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await pc(n,i)}catch(i){await OA(i)}}async function Az(t,e){const r=Dt(t);HA(r.remoteStore)||_t(VA,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(s){const o=Dt(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(r.localStore);if(n===mA)return void e.resolve();const i=r.mu.get(n)||[];i.push(e),r.mu.set(n,i)}catch(n){const i=Ef(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function J_(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function Z_(t,e,r){const n=Dt(t);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function nf(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||RL(t,n)})}function RL(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(rf(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),eE(t))}function $2(t,e,r){for(const n of r)n instanceof IL?(t.Ru.addReference(n.key,e),uz(t,n)):n instanceof FL?(_t(VA,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||RL(t,n.key)):Vt(19791,{wu:n})}function uz(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(_t(VA,"New document in limbo: "+r),t.Eu.add(n),eE(t))}function eE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Lt(Sr.fromString(e)),n=t.fu.next();t.Au.set(n,new ez(r)),t.du=t.du.insert(r,n),yw(t.remoteStore,new Yl(Na(vf(r.path)),n,"TargetPurposeLimboResolution",ls.ce))}}async function pc(t,e,r){const n=Dt(t),i=[],a=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{s.push(n.pu(l,e,r).then(A=>{var u;if((A||r)&&n.isPrimaryClient){const d=A?!A.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(A){i.push(A);const d=O_.As(l.targetId,A);a.push(d)}}))}),await Promise.all(s),n.Pu.H_(i),await async function(l,A){const u=Dt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ye.forEach(A,h=>Ye.forEach(h.Es,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>Ye.forEach(h.ds,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!MA(d))throw d;_t(M_,"Failed to update sequence numbers: "+d)}for(const d of A){const h=d.targetId;if(!d.fromCache){const f=u.Ms.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);u.Ms=u.Ms.insert(h,g)}}}(n.localStore,a))}async function dz(t,e){const r=Dt(t);if(!r.currentUser.isEqual(e)){_t(VA,"User change. New user:",e.toKey());const n=await dL(r.localStore,e);r.currentUser=e,function(a,s){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new vt(rt.CANCELLED,s))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await pc(r,n.Ls)}}function hz(t,e){const r=Dt(t),n=r.Au.get(e);if(n&&n.hu)return vr().add(n.key);{let i=vr();const a=r.Iu.get(e);if(!a)return i;for(const s of a){const o=r.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function fz(t,e){const r=Dt(t),n=await nv(r.localStore,e.query,!0),i=e.view.cu(n);return r.isPrimaryClient&&$2(r,e.targetId,i.au),i}async function mz(t,e){const r=Dt(t);return pL(r.localStore,e).then(n=>pc(r,n))}async function pz(t,e,r,n){const i=Dt(t),a=await function(o,l){const A=Dt(o),u=Dt(A.mutationQueue);return A.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.er(d,l).next(h=>h?A.localDocuments.getDocuments(d,h):Ye.resolve(null)))}(i.localStore,e);a!==null?(r==="pending"?await xf(i.remoteStore):r==="acknowledged"||r==="rejected"?(Z_(i,e,n||null),J_(i,e),function(o,l){Dt(Dt(o).mutationQueue).ir(l)}(i.localStore,e)):Vt(6720,"Unknown batchState",{Su:r}),await pc(i,a)):_t(VA,"Cannot apply mutation batch with id: "+e)}async function gz(t,e){const r=Dt(t);if(xw(r),tE(r),e===!0&&r.gu!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await FS(r,n.toArray());r.gu=!0,await j2(r.remoteStore,!0);for(const a of i)yw(r.remoteStore,a)}else if(e===!1&&r.gu!==!1){const n=[];let i=Promise.resolve();r.Iu.forEach((a,s)=>{r.sharedClientState.isLocalQueryTarget(s)?n.push(s):i=i.then(()=>(nf(r,s),tf(r.localStore,s,!0))),rf(r.remoteStore,s)}),await i,await FS(r,n),function(s){const o=Dt(s);o.Au.forEach((l,A)=>{rf(o.remoteStore,A)}),o.Ru.Jr(),o.Au=new Map,o.du=new Fn(Lt.comparator)}(r),r.gu=!1,await j2(r.remoteStore,!1)}}async function FS(t,e,r){const n=Dt(t),i=[],a=[];for(const s of e){let o;const l=n.Iu.get(s);if(l&&l.length!==0){o=await ef(n.localStore,Na(l[0]));for(const A of l){const u=n.Tu.get(A),d=await fz(n,u);d.snapshot&&a.push(d.snapshot)}}else{const A=await mL(n.localStore,s);o=await ef(n.localStore,A),await Y_(n,UL(A),s,!1,o.resumeToken)}i.push(o)}return n.Pu.H_(a),i}function UL(t){return mP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vz(t){return function(r){return Dt(Dt(r).persistence).Ts()}(Dt(t).localStore)}async function wz(t,e,r,n){const i=Dt(t);if(i.gu)return void _t(VA,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(r){case"current":case"not-current":{const s=await pL(i.localStore,wP(a[0])),o=vp.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ii.EMPTY_BYTE_STRING);await pc(i,s,o);break}case"rejected":await tf(i.localStore,e,!0),nf(i,e,n);break;default:Vt(64155,r)}}async function bz(t,e,r){const n=xw(t);if(n.gu){for(const i of e){if(n.Iu.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){_t(VA,"Adding an already active target "+i);continue}const a=await mL(n.localStore,i),s=await ef(n.localStore,a);await Y_(n,UL(a),s.targetId,!1,s.resumeToken),yw(n.remoteStore,s)}for(const i of r)n.Iu.has(i)&&await tf(n.localStore,i,!1).then(()=>{rf(n.remoteStore,i),nf(n,i)}).catch(OA)}}function xw(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oz.bind(null,e),e.Pu.H_=Yj.bind(null,e.eventManager),e.Pu.yu=Jj.bind(null,e.eventManager),e}function tE(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cz.bind(null,e),e}function yz(t,e,r){const n=Dt(t);(async function(a,s,o){try{const l=await s.getMetadata();if(await function(f,p){const g=Dt(f),v=bi(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",C=>g.Ii.getBundleMetadata(C,p.id)).then(C=>!!C&&C.createTime.compareTo(v)>=0)}(a.localStore,l))return await s.close(),o._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress(TL(l));const A=new X_(l,s.serializer);let u=await s.bu();for(;u;){const h=await A.Ga(u);h&&o._updateProgress(h),u=await s.bu()}const d=await A.ja(a.localStore);return await pc(a,d.Ha,void 0),await function(f,p){const g=Dt(f);return g.persistence.runTransaction("Save bundle","readwrite",v=>g.Ii.saveBundleMetadata(v,p))}(a.localStore,l),o._completeWith(d.progress),Promise.resolve(d.Ja)}catch(l){return fo(VA,`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(n,e,r).then(i=>{n.sharedClientState.notifyBundleLoaded(i)})}class af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return uL(this.persistence,new AL,e.initialUser,this.serializer)}Cu(e){return new D_(bw.mi,this.serializer)}Du(e){return new yL}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}af.provider={build:()=>new af};class rE extends af{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Wt(this.persistence.referenceDelegate instanceof rv,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new iL(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?ba.withCacheSize(this.cacheSizeBytes):ba.DEFAULT;return new D_(n=>rv.mi(n,r),this.serializer)}}class nE extends af{constructor(e,r,n){super(),this.xu=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await tE(this.xu.syncEngine),await xf(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return uL(this.persistence,new AL,e.initialUser,this.serializer)}Fu(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new iL(n,e.asyncQueue,r)}Mu(e,r){const n=new RV(r,this.persistence);return new DV(e.asyncQueue,n)}Cu(e){const r=U_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ba.withCacheSize(this.cacheSizeBytes):ba.DEFAULT;return new R_(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,xL(),_1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new yL}}class OL extends nE{constructor(e,r){super(e,r,!1),this.xu=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.xu.syncEngine;this.sharedClientState instanceof Mb&&(this.sharedClientState.syncEngine={Co:pz.bind(null,r),vo:wz.bind(null,r),Fo:bz.bind(null,r),Ts:vz.bind(null,r),Do:mz.bind(null,r)},await this.sharedClientState.start()),await this.persistence.Ji(async n=>{await gz(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Du(e){const r=xL();if(!Mb.v(r))throw new vt(rt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=U_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mb(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class CA{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>IS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=dz.bind(null,this.syncEngine),await j2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xj}()}createDatastore(e){const r=dd(e.databaseInfo.databaseId),n=function(a){return new Fj(a)}(e.databaseInfo);return function(a,s,o,l){return new Rj(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,s,o){return new Oj(n,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,r=>IS(this.syncEngine,r,0),function(){return ES.v()?new ES:new Sj}())}createSyncEngine(e,r){return function(i,a,s,o,l,A,u){const d=new tz(i,a,s,o,l,A);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=Dt(i);_t($u,"RemoteStore shutting down."),a.Ea.add(5),await yf(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}CA.provider={build:()=>new CA};function PS(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,r){this.Bu=e,this.serializer=r,this.metadata=new Xi,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(n=>{n&&n.$a()?this.metadata.resolve(n.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.Qa)}`))},n=>this.metadata.reject(n))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const r=this.Lu.decode(e),n=Number(r);isNaN(n)&&this.Qu(`length string (${r}) is not valid number`);const i=await this.$u(n);return new kL(JSON.parse(i),e.length+n)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const r=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,r){this.bundleData=e,this.serializer=r,this.cursor=0,this.elements=[];let n=this.bu();if(!n||!n.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(n==null?void 0:n.Qa)}`);this.metadata=n;do n=this.bu(),n!==null&&this.elements.push(n);while(n!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),r=this.$u(e);return new kL(JSON.parse(r),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new vt(rt.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let r=this.cursor;for(;r<this.bundleData.length;){if(this.bundleData[r]==="{"){if(r===e)throw new Error("First character is a bracket and not a number");return this.cursor=r,Number(this.bundleData.slice(e,r))}r++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new vt(rt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(i,a){const s=Dt(i),o={documents:a.map(d=>k0(s.serializer,d))},l=await s.Ho("BatchGetDocuments",s.serializer.databaseId,Sr.emptyPath(),o,a.length),A=new Map;l.forEach(d=>{const h=QK(s.serializer,d);A.set(h.key.toString(),h)});const u=[];return a.forEach(d=>{const h=A.get(d.toString());Wt(!!h,55234,{key:d}),u.push(h)}),u}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new bf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const i=Lt.fromPath(n);this.mutations.push(new C_(i,this.precondition(i)))}),await async function(n,i){const a=Dt(n),s={writes:i.map(o=>T0(a.serializer,o))};await a.Go("Commit",a.serializer.databaseId,Sr.emptyPath(),s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Vt(50498,{Gu:e.constructor.name});r=er.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new vt(rt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(er.min())?Gn.exists(!1):Gn.updateTime(r):Gn.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(er.min()))throw new vt(rt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gn.updateTime(r)}return Gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e,r,n,i,a){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=a,this.zu=n.maxAttempts,this.M_=new H_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Ez(this.datastore),r=this.Hu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.Yu(i)}))}).catch(n=>{this.Yu(n)})})}Hu(e){try{const r=this.updateFunction(e);return!dp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!PP(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="FirestoreClient";class Cz{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=$i.UNAUTHENTICATED,this.clientId=d_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async s=>{_t(NA,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(_t(NA,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Ef(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Hb(t,e){t.asyncQueue.verifyOperationInProgress(),_t(NA,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await dL(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function LS(t,e){t.asyncQueue.verifyOperationInProgress();const r=await iE(t);_t(NA,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>CS(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>CS(e.remoteStore,i)),t._onlineComponents=e}async function iE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_t(NA,"Using user provided OfflineComponentProvider");try{await Hb(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===rt.FAILED_PRECONDITION||i.code===rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;fo("Error using user provided cache. Falling back to memory cache: "+r),await Hb(t,new af)}}else _t(NA,"Using default OfflineComponentProvider"),await Hb(t,new rE(void 0));return t._offlineComponents}async function Ew(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_t(NA,"Using user provided OnlineComponentProvider"),await LS(t,t._uninitializedComponentsProvider._online)):(_t(NA,"Using default OnlineComponentProvider"),await LS(t,new CA))),t._onlineComponents}function ML(t){return iE(t).then(e=>e.persistence)}function Bf(t){return iE(t).then(e=>e.localStore)}function QL(t){return Ew(t).then(e=>e.remoteStore)}function aE(t){return Ew(t).then(e=>e.syncEngine)}function HL(t){return Ew(t).then(e=>e.datastore)}async function sf(t){const e=await Ew(t),r=e.eventManager;return r.onListen=rz.bind(null,e.syncEngine),r.onUnlisten=iz.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=nz.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=az.bind(null,e.syncEngine),r}function Nz(t){return t.asyncQueue.enqueue(async()=>{const e=await ML(t),r=await QL(t);return e.setNetworkEnabled(!0),function(i){const a=Dt(i);return a.Ea.delete(0),bp(a)}(r)})}function Sz(t){return t.asyncQueue.enqueue(async()=>{const e=await ML(t),r=await QL(t);return e.setNetworkEnabled(!1),async function(i){const a=Dt(i);a.Ea.add(0),await yf(a),a.Ra.set("Offline")}(r)})}function kz(t,e){const r=new Xi;return t.asyncQueue.enqueueAndForget(async()=>async function(i,a,s){try{const o=await function(A,u){const d=Dt(A);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(i,a);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new vt(rt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Ef(o,`Failed to get document '${a} from cache`);s.reject(l)}}(await Bf(t),e,r)),r.promise}function VL(t,e,r={}){const n=new Xi;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,A){const u=new _w({next:h=>{u.Nu(),s.enqueueAndForget(()=>G_(a,d));const f=h.docs.has(o);!f&&h.fromCache?A.reject(new vt(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?A.reject(new vt(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(h)},error:h=>A.reject(h)}),d=new q_(vf(o.path),u,{includeMetadataChanges:!0,qa:!0});return $_(a,d)}(await sf(t),t.asyncQueue,e,r,n)),n.promise}function Tz(t,e){const r=new Xi;return t.asyncQueue.enqueueAndForget(async()=>async function(i,a,s){try{const o=await nv(i,a,!0),l=new PL(a,o.Qs),A=l.ru(o.documents),u=l.applyChanges(A,!1);s.resolve(u.snapshot)}catch(o){const l=Ef(o,`Failed to execute query '${a} against cache`);s.reject(l)}}(await Bf(t),e,r)),r.promise}function KL(t,e,r={}){const n=new Xi;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,A){const u=new _w({next:h=>{u.Nu(),s.enqueueAndForget(()=>G_(a,d)),h.fromCache&&l.source==="server"?A.reject(new vt(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(h)},error:h=>A.reject(h)}),d=new q_(o,u,{includeMetadataChanges:!0,qa:!0});return $_(a,d)}(await sf(t),t.asyncQueue,e,r,n)),n.promise}function Iz(t,e,r){const n=new Xi;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await HL(t);n.resolve(async function(s,o,l){var g;const A=Dt(s),{request:u,gt:d,parent:h}=jP(A.serializer,pP(o),l);A.connection.$o||delete u.parent;const f=(await A.Ho("RunAggregationQuery",A.serializer.databaseId,h,u,1)).filter(v=>!!v.result);Wt(f.length===1,64727);const p=(g=f[0].result)==null?void 0:g.aggregateFields;return Object.keys(p).reduce((v,C)=>(v[d[C]]=p[C],v),{})}(i,e,r))}catch(i){n.reject(i)}}),n.promise}function Fz(t,e){const r=new _w(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,a){Dt(i).Ca.add(a),a.next()}(await sf(t),r)),()=>{r.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,a){Dt(i).Ca.delete(a)}(await sf(t),r))}}function Pz(t,e,r,n){const i=function(s,o){let l;return l=typeof s=="string"?DP().encode(s):s,function(u,d){return new xz(u,d)}(function(u,d){if(u instanceof Uint8Array)return PS(u,d);if(u instanceof ArrayBuffer)return PS(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(r,dd(e));t.asyncQueue.enqueueAndForget(async()=>{yz(await aE(t),i,n)})}function Lz(t,e){return t.asyncQueue.enqueue(async()=>function(n,i){const a=Dt(n);return a.persistence.runTransaction("Get named query","readonly",s=>a.Ii.getNamedQuery(s,i))}(await Bf(t),e))}function jL(t,e){return function(n,i){return new _z(n,i)}(t,e)}function Dz(t,e){return t.asyncQueue.enqueue(async()=>async function(n,i){const a=Dt(n),s=a.indexManager,o=[];return a.persistence.runTransaction("Configure indexes","readwrite",l=>s.getFieldIndexes(l).next(A=>function(d,h,f,p,g){d=[...d],h=[...h],d.sort(f),h.sort(f);const v=d.length,C=h.length;let I=0,F=0;for(;I<C&&F<v;){const E=f(d[F],h[I]);E<0?g(d[F++]):E>0?p(h[I++]):(I++,F++)}for(;I<C;)p(h[I++]);for(;F<v;)g(d[F++])}(A,i,IV,u=>{o.push(s.addFieldIndex(l,u))},u=>{o.push(s.deleteFieldIndex(l,u))})).next(()=>Ye.waitFor(o)))}(await Bf(t),e))}function Rz(t,e){return t.asyncQueue.enqueue(async()=>function(n,i){Dt(n).Fs.Vs=i}(await Bf(t),e))}function Uz(t){return t.asyncQueue.enqueue(async()=>function(r){const n=Dt(r),i=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",a=>i.deleteAllFieldIndexes(a))}(await Bf(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="firestore.googleapis.com",RS=!0;class US{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new vt(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$L,this.ssl=RS}else this.host=e.host,this.ssl=e.ssl??RS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nL)throw new vt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zL(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new vt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new vt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new vt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yp{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new US({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vt(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new vt(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new US(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new bV;switch(n.type){case"firstParty":return new EV(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new vt(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=DS.get(r);n&&(_t("ComponentProvider","Removing Datastore"),DS.delete(r),n.terminate())}(this),Promise.resolve()}}function Oz(t,e,r,n={}){var A;t=Dr(t,yp);const i=dc(e),a=t._getSettings(),s={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;i&&(Zv(`https://${o}`),e_("Firestore",!0)),a.host!==$L&&a.host!==o&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:i,emulatorOptions:n};if(!uo(l,s)&&(t._setSettings(l),n.mockUserToken)){let u,d;if(typeof n.mockUserToken=="string")u=n.mockUserToken,d=$i.MOCK_USER;else{u=FF(n.mockUserToken,(A=t._app)==null?void 0:A.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new vt(rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new $i(h)}t._authCredentials=new yV(new I3(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class wn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}toJSON(){return{type:wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(ud(r,wn._jsonSchema))return new wn(e,n||null,new Lt(Sr.fromString(r.referencePath)))}}wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:ki("string",wn._jsonSchemaVersion),referencePath:ki("string")};class bl extends Ji{constructor(e,r,n){super(e,r,vf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Lt(e))}withConverter(e){return new bl(this.firestore,e,this._path)}}function W1e(t,e,...r){if(t=Tr(t),h_("collection","path",e),t instanceof yp){const n=Sr.fromString(e,...r);return BN(n),new bl(t,null,n)}{if(!(t instanceof wn||t instanceof bl))throw new vt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Sr.fromString(e,...r));return BN(n),new bl(t.firestore,null,n)}}function q1e(t,e){if(t=Dr(t,yp),h_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vt(rt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ji(t,null,function(n){return new hc(Sr.emptyPath(),n)}(e))}function Mz(t,e,...r){if(t=Tr(t),arguments.length===1&&(e=d_.newId()),h_("doc","path",e),t instanceof yp){const n=Sr.fromString(e,...r);return EN(n),new wn(t,null,new Lt(n))}{if(!(t instanceof wn||t instanceof bl))throw new vt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Sr.fromString(e,...r));return EN(n),new wn(t.firestore,t instanceof bl?t.converter:null,new Lt(n))}}function X1e(t,e){return t=Tr(t),e=Tr(e),(t instanceof wn||t instanceof bl)&&(e instanceof wn||e instanceof bl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function GL(t,e){return t=Tr(t),e=Tr(e),t instanceof Ji&&e instanceof Ji&&t.firestore===e.firestore&&mp(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="AsyncQueue";class MS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new H_(this,"async_queue_retry"),this._c=()=>{const n=_1();n&&_t(OS,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=_1();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=_1();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Xi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!MA(e))throw e;_t(OS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,wi("INTERNAL UNHANDLED ERROR: ",QS(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=z_.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&Vt(47125,{Pc:QS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function QS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Qz{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1e=-1;class Cn extends yp{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new MS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MS(e),this._firestoreClient=void 0,await e}}}function J1e(t,e,r){r||(r=B0);const n=Bl(t,"firestore");if(n.isInitialized(r)){const i=n.getImmediate({identifier:r}),a=n.getOptions(r);if(uo(a,e))return i;throw new vt(rt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new vt(rt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nL)throw new vt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&dc(e.host)&&Zv(e.host),n.initialize({options:e,instanceIdentifier:r})}function Hz(t,e){const r=typeof t=="object"?t:tw(),n=typeof t=="string"?t:e||B0,i=Bl(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=kF("firestore");a&&Oz(i,...a)}return i}function Jn(t){if(t._terminated)throw new vt(rt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WL(t),t._firestoreClient}function WL(t){var n,i,a;const e=t._freezeSettings(),r=function(o,l,A,u){return new AK(o,l,A,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,zL(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Cz(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function Z1e(t,e){fo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return qL(t,CA.provider,{build:n=>new nE(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function eve(t){fo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();qL(t,CA.provider,{build:r=>new OL(r,e.cacheSizeBytes)})}function qL(t,e,r){if((t=Dr(t,Cn))._firestoreClient||t._terminated)throw new vt(rt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new vt(rt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},WL(t)}function tve(t){if(t._initialized&&!t._terminated)throw new vt(rt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xi;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!vl.v())return Promise.resolve();const i=n+cL;await vl.delete(i)}(U_(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function rve(t){return function(r){const n=new Xi;return r.asyncQueue.enqueueAndForget(async()=>Az(await aE(r),n)),n.promise}(Jn(t=Dr(t,Cn)))}function nve(t){return Nz(Jn(t=Dr(t,Cn)))}function ive(t){return Sz(Jn(t=Dr(t,Cn)))}function ave(t){return W7(t.app,"firestore",t._databaseId.database),t._delete()}function HS(t,e){const r=Jn(t=Dr(t,Cn)),n=new Qz;return Pz(r,t._databaseId,e,n),n}function Vz(t,e){return Lz(Jn(t=Dr(t,Cn)),e).then(r=>r?new Ji(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class Kz{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(ii.fromBase64String(e))}catch(r){throw new vt(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Rs(ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ud(e,Rs._jsonSchema))return Rs.fromBase64String(e.bytes)}}Rs._jsonSchemaVersion="firestore/bytes/1.0",Rs._jsonSchema={type:ki("string",Rs._jsonSchemaVersion),bytes:ki("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new vt(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function sve(){return new hd(_2)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new vt(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new vt(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dr(this._lat,e._lat)||dr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yl._jsonSchemaVersion}}static fromJSON(e){if(ud(e,yl._jsonSchema))return new yl(e.latitude,e.longitude)}}yl._jsonSchemaVersion="firestore/geoPoint/1.0",yl._jsonSchema={type:ki("string",yl._jsonSchemaVersion),latitude:ki("number"),longitude:ki("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Do._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ud(e,Do._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Do(e.vectorValues);throw new vt(rt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Do._jsonSchemaVersion="firestore/vectorValue/1.0",Do._jsonSchema={type:ki("string",Do._jsonSchemaVersion),vectorValues:ki("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=/^__.*__$/;class zz{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new mc(e,this.data,this.fieldMask,r,this.fieldTransforms):new wf(e,this.data,r,this.fieldTransforms)}}class XL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new mc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function YL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{Ac:t})}}class Bw{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ov(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YL(this.Ac)&&jz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $z{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||dd(e)}Cc(e,r,n,i=!1){return new Bw({Ac:e,methodName:r,Dc:n,path:$n.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function md(t){const e=t._freezeSettings(),r=dd(t._databaseId);return new $z(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Cw(t,e,r,n,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);dE("Data must be an object, but it was:",s,n);const o=eD(n,s);let l,A;if(a.merge)l=new cs(s.fieldMask),A=s.fieldTransforms;else if(a.mergeFields){const u=[];for(const d of a.mergeFields){const h=F0(e,d,r);if(!s.contains(h))throw new vt(rt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);rD(u,h)||u.push(h)}l=new cs(u),A=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,A=s.fieldTransforms;return new zz(new la(o),l,A)}class xp extends fd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xp}}function JL(t,e,r){return new Bw({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sE extends fd{_toFieldTransform(e){return new gp(e.path,new Yh)}isEqual(e){return e instanceof sE}}class oE extends fd{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=JL(this,e,!0),n=this.vc.map(a=>pd(a,r)),i=new Hu(n);return new gp(e.path,i)}isEqual(e){return e instanceof oE&&uo(this.vc,e.vc)}}class lE extends fd{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=JL(this,e,!0),n=this.vc.map(a=>pd(a,r)),i=new Vu(n);return new gp(e.path,i)}isEqual(e){return e instanceof lE&&uo(this.vc,e.vc)}}class cE extends fd{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new Jh(e.serializer,BP(e.serializer,this.Fc));return new gp(e.path,r)}isEqual(e){return e instanceof cE&&this.Fc===e.Fc}}function AE(t,e,r,n){const i=t.Cc(1,e,r);dE("Data must be an object, but it was:",i,n);const a=[],s=la.empty();QA(n,(l,A)=>{const u=Nw(e,l,r);A=Tr(A);const d=i.yc(u);if(A instanceof xp)a.push(u);else{const h=pd(A,d);h!=null&&(a.push(u),s.set(u,h))}});const o=new cs(a);return new XL(s,o,i.fieldTransforms)}function uE(t,e,r,n,i,a){const s=t.Cc(1,e,r),o=[F0(e,n,r)],l=[i];if(a.length%2!=0)throw new vt(rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(F0(e,a[h])),l.push(a[h+1]);const A=[],u=la.empty();for(let h=o.length-1;h>=0;--h)if(!rD(A,o[h])){const f=o[h];let p=l[h];p=Tr(p);const g=s.yc(f);if(p instanceof xp)A.push(f);else{const v=pd(p,g);v!=null&&(A.push(f),u.set(f,v))}}const d=new cs(A);return new XL(u,d,s.fieldTransforms)}function ZL(t,e,r,n=!1){return pd(r,t.Cc(n?4:3,e))}function pd(t,e){if(tD(t=Tr(t)))return dE("Unsupported field value:",e,t),eD(t,e);if(t instanceof fd)return function(n,i){if(!YL(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const a=[];let s=0;for(const o of n){let l=pd(o,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=Tr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return BP(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=hn.fromDate(n);return{timestampValue:Zh(i.serializer,a)}}if(n instanceof hn){const a=new hn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Zh(i.serializer,a)}}if(n instanceof yl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Rs)return{bytesValue:OP(i.serializer,n._byteString)};if(n instanceof wn){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:I_(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Do)return function(s,o){return{mapValue:{fields:{[b_]:{stringValue:y_},[Wh]:{arrayValue:{values:s.toArray().map(A=>{if(typeof A!="number")throw o.Sc("VectorValues must only contain numeric values.");return B_(o.serializer,A)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${aw(n)}`)}(t,e)}function eD(t,e){const r={};return J3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):QA(t,(n,i)=>{const a=pd(i,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function tD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof hn||t instanceof yl||t instanceof Rs||t instanceof wn||t instanceof fd||t instanceof Do)}function dE(t,e,r){if(!tD(r)||!P3(r)){const n=aw(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function F0(t,e,r){if((e=Tr(e))instanceof hd)return e._internalPath;if(typeof e=="string")return Nw(t,e);throw ov("Field path arguments must be of type string or ",t,!1,void 0,r)}const Gz=new RegExp("[~\\*/\\[\\]]");function Nw(t,e,r){if(e.search(Gz)>=0)throw ov(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new hd(...e.split("."))._internalPath}catch{throw ov(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function ov(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new vt(rt.INVALID_ARGUMENT,o+t+l)}function rD(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Wz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Sw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Wz extends P0{data(){return super.data()}}function Sw(t,e){return typeof e=="string"?Nw(t,e):e instanceof hd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new vt(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hE{}class _p extends hE{}function ove(t,e,...r){let n=[];e instanceof hE&&n.push(e),n=n.concat(r),function(a){const s=a.filter(l=>l instanceof Cf).length,o=a.filter(l=>l instanceof Ep).length;if(s>1||s>0&&o>0)throw new vt(rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Ep extends _p{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Ep(e,r,n)}_apply(e){const r=this._parse(e);return aD(e._query,r),new Ji(e.firestore,e.converter,L2(e._query,r))}_parse(e){const r=md(e.firestore);return function(a,s,o,l,A,u,d){let h;if(A.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new vt(rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){KS(d,u);const p=[];for(const g of d)p.push(VS(l,a,g));h={arrayValue:{values:p}}}else h=VS(l,a,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||KS(d,u),h=ZL(o,s,d,u==="in"||u==="not-in");return Hr.create(A,u,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function lve(t,e,r){const n=e,i=Sw("where",t);return Ep._create(i,n,r)}class Cf extends hE{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Cf(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:fn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)aD(s,l),s=L2(s,l)}(e._query,r),new Ji(e.firestore,e.converter,L2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function cve(...t){return t.forEach(e=>sD("or",e)),Cf._create("or",t)}function Ave(...t){return t.forEach(e=>sD("and",e)),Cf._create("and",t)}class fE extends _p{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new fE(e,r)}_apply(e){const r=function(i,a,s){if(i.startAt!==null)throw new vt(rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new vt(rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new S0(a,s)}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(i,a){const s=i.explicitOrderBy.concat([a]);return new hc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function uve(t,e="asc"){const r=e,n=Sw("orderBy",t);return fE._create(n,r)}class kw extends _p{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new kw(e,r,n)}_apply(e){return new Ji(e.firestore,e.converter,J1(e._query,this._limit,this._limitType))}}function dve(t){return L3("limit",t),kw._create("limit",t,"F")}function hve(t){return L3("limitToLast",t),kw._create("limitToLast",t,"L")}class Tw extends _p{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Tw(e,r,n)}_apply(e){const r=iD(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,function(i,a){return new hc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,r))}}function fve(...t){return Tw._create("startAt",t,!0)}function mve(...t){return Tw._create("startAfter",t,!1)}class Iw extends _p{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Iw(e,r,n)}_apply(e){const r=iD(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,function(i,a){return new hc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)}(e._query,r))}}function pve(...t){return Iw._create("endBefore",t,!1)}function gve(...t){return Iw._create("endAt",t,!0)}function iD(t,e,r,n){if(r[0]=Tr(r[0]),r[0]instanceof P0)return function(a,s,o,l,A){if(!l)throw new vt(rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of Ch(a))if(d.field.isKeyField())u.push(Mu(s,l.key));else{const h=l.data.field(d.field);if(Aw(h))throw new vt(rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=d.field.canonicalString();throw new vt(rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new EA(u,A)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=md(t.firestore);return function(s,o,l,A,u,d){const h=s.explicitOrderBy;if(u.length>h.length)throw new vt(rt.INVALID_ARGUMENT,`Too many arguments provided to ${A}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<u.length;p++){const g=u[p];if(h[p].field.isKeyField()){if(typeof g!="string")throw new vt(rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${A}(), but got a ${typeof g}`);if(!__(s)&&g.indexOf("/")!==-1)throw new vt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${A}() must be a plain document ID, but '${g}' contains a slash.`);const v=s.path.child(Sr.fromString(g));if(!Lt.isDocumentKey(v))throw new vt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${A}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const C=new Lt(v);f.push(Mu(o,C))}else{const v=ZL(l,A,g);f.push(v)}}return new EA(f,d)}(t._query,t.firestore._databaseId,i,e,r,n)}}function VS(t,e,r){if(typeof(r=Tr(r))=="string"){if(r==="")throw new vt(rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__(e)&&r.indexOf("/")!==-1)throw new vt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Sr.fromString(r));if(!Lt.isDocumentKey(n))throw new vt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Mu(t,new Lt(n))}if(r instanceof wn)return Mu(t,r._key);throw new vt(rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${aw(r)}.`)}function KS(t,e){if(!Array.isArray(t)||t.length===0)throw new vt(rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aD(t,e){const r=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new vt(rt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new vt(rt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function sD(t,e){if(!(e instanceof Ep||e instanceof Cf))throw new vt(rt.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class oD{convertValue(e,r="none"){switch(xA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(oc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return QA(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,i,a;const r=(a=(i=(n=e.fields)==null?void 0:n[Wh].arrayValue)==null?void 0:i.values)==null?void 0:a.map(s=>zn(s.doubleValue));return new Do(r)}convertGeoPoint(e){return new yl(zn(e.latitude),zn(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=uw(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(E0(e));default:return null}}convertTimestamp(e){const r=sc(e);return new hn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Sr.fromString(e);Wt(WP(n),9688,{name:e});const i=new Ou(n.get(1),n.get(3)),a=new Lt(n.popFirst(5));return i.isEqual(r)||wi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class mE extends oD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vve(t){return new I0("sum",F0("sum",t))}function wve(t){return new I0("avg",F0("average",t))}function qz(){return new I0("count")}function bve(t,e){var r,n;return t instanceof I0&&e instanceof I0&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)==null?void 0:r.canonicalString())===((n=e._internalFieldPath)==null?void 0:n.canonicalString())}function yve(t,e){return GL(t.query,e.query)&&uo(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="NOT SUPPORTED";class rA{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hs extends P0{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new E1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Sw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new vt(rt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Hs._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}function xve(t,e,r){if(ud(e,Hs._jsonSchema)){if(e.bundle===lD)throw new vt(rt.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const n=dd(t._databaseId),i=jL(e.bundle,n),a=i.Wu(),s=new X_(i.getMetadata(),n);for(const u of a)s.Ga(u);const o=s.documents;if(o.length!==1)throw new vt(rt.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${o.length} documents.`);const l=mw(n,o[0].document),A=new Lt(Sr.fromString(e.bundleName));return new Hs(t,new mE(t),A,l,new rA(!1,!1),r||null)}}Hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hs._jsonSchema={type:ki("string",Hs._jsonSchemaVersion),bundleSource:ki("string","DocumentSnapshot"),bundleName:ki("string"),bundle:ki("string")};class E1 extends Hs{data(e={}){return super.data(e)}}class Vs{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new rA(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new E1(this._firestore,this._userDataWriter,n.key,n,new rA(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new vt(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new E1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new rA(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new E1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new rA(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let A=-1,u=-1;return o.type!==0&&(A=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:Xz(o.type),doc:l,oldIndex:A,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new vt(rt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=d_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _ve(t,e,r){if(ud(e,Vs._jsonSchema)){if(e.bundle===lD)throw new vt(rt.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const n=dd(t._databaseId),i=jL(e.bundle,n),a=i.Wu(),s=new X_(i.getMetadata(),n);for(const h of a)s.Ga(h);if(s.queries.length!==1)throw new vt(rt.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${s.queries.length} queries.`);const o=gw(s.queries[0].bundledQuery),l=s.documents;let A=new Nu;l.map(h=>{const f=mw(n,h.document);A=A.add(f)});const u=Gu.fromInitialDocuments(o,A,vr(),!1,!1),d=new Ji(t,r||null,o);return new Vs(t,new mE(t),d,u)}}function Xz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:t})}}function Eve(t,e){return t instanceof Hs&&e instanceof Hs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Vs&&e instanceof Vs&&t._firestore===e._firestore&&GL(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bve(t){t=Dr(t,wn);const e=Dr(t.firestore,Cn);return VL(Jn(e),t._key).then(r=>pE(e,t,r))}Vs._jsonSchemaVersion="firestore/querySnapshot/1.0",Vs._jsonSchema={type:ki("string",Vs._jsonSchemaVersion),bundleSource:ki("string","QuerySnapshot"),bundleName:ki("string"),bundle:ki("string")};class KA extends oD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,r)}}function Cve(t){t=Dr(t,wn);const e=Dr(t.firestore,Cn),r=Jn(e),n=new KA(e);return kz(r,t._key).then(i=>new Hs(e,n,t._key,i,new rA(i!==null&&i.hasLocalMutations,!0),t.converter))}function Nve(t){t=Dr(t,wn);const e=Dr(t.firestore,Cn);return VL(Jn(e),t._key,{source:"server"}).then(r=>pE(e,t,r))}function Sve(t){t=Dr(t,Ji);const e=Dr(t.firestore,Cn),r=Jn(e),n=new KA(e);return nD(t._query),KL(r,t._query).then(i=>new Vs(e,n,t,i))}function kve(t){t=Dr(t,Ji);const e=Dr(t.firestore,Cn),r=Jn(e),n=new KA(e);return Tz(r,t._query).then(i=>new Vs(e,n,t,i))}function Tve(t){t=Dr(t,Ji);const e=Dr(t.firestore,Cn),r=Jn(e),n=new KA(e);return KL(r,t._query,{source:"server"}).then(i=>new Vs(e,n,t,i))}function Ive(t,e,r){t=Dr(t,wn);const n=Dr(t.firestore,Cn),i=Fw(t.converter,e,r);return Bp(n,[Cw(md(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Gn.none())])}function Fve(t,e,r,...n){t=Dr(t,wn);const i=Dr(t.firestore,Cn),a=md(i);let s;return s=typeof(e=Tr(e))=="string"||e instanceof hd?uE(a,"updateDoc",t._key,e,r,n):AE(a,"updateDoc",t._key,e),Bp(i,[s.toMutation(t._key,Gn.exists(!0))])}function Pve(t){return Bp(Dr(t.firestore,Cn),[new bf(t._key,Gn.none())])}function Lve(t,e){const r=Dr(t.firestore,Cn),n=Mz(t),i=Fw(t.converter,e);return Bp(r,[Cw(md(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Gn.exists(!1))]).then(()=>n)}function jS(t,...e){var l,A,u;t=Tr(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Nh(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(Nh(e[n])){const d=e[n];e[n]=(l=d.next)==null?void 0:l.bind(d),e[n+1]=(A=d.error)==null?void 0:A.bind(d),e[n+2]=(u=d.complete)==null?void 0:u.bind(d)}let a,s,o;if(t instanceof wn)s=Dr(t.firestore,Cn),o=vf(t._key.path),a={next:d=>{e[n]&&e[n](pE(s,t,d))},error:e[n+1],complete:e[n+2]};else{const d=Dr(t,Ji);s=Dr(d.firestore,Cn),o=d._query;const h=new KA(s);a={next:f=>{e[n]&&e[n](new Vs(s,h,d,f))},error:e[n+1],complete:e[n+2]},nD(t._query)}return function(h,f,p,g){const v=new _w(g),C=new q_(f,v,p);return h.asyncQueue.enqueueAndForget(async()=>$_(await sf(h),C)),()=>{v.Nu(),h.asyncQueue.enqueueAndForget(async()=>G_(await sf(h),C))}}(Jn(s),o,i,a)}function Dve(t,e,...r){const n=Tr(t),i=function(l){const A={bundle:"",bundleName:"",bundleSource:""},u=["bundle","bundleName","bundleSource"];for(const d of u){if(!(d in l)){A.error=`snapshotJson missing required field: ${d}`;break}const h=l[d];if(typeof h!="string"){A.error=`snapshotJson field '${d}' must be a string.`;break}if(h.length===0){A.error=`snapshotJson field '${d}' cannot be an empty string.`;break}d==="bundle"?A.bundle=h:d==="bundleName"?A.bundleName=h:d==="bundleSource"&&(A.bundleSource=h)}return A}(e);if(i.error)throw new vt(rt.INVALID_ARGUMENT,i.error);let a,s=0;if(typeof r[s]!="object"||Nh(r[s])||(a=r[s++]),i.bundleSource==="QuerySnapshot"){let o=null;if(typeof r[s]=="object"&&Nh(r[s])){const l=r[s++];o={next:l.next,error:l.error,complete:l.complete}}else o={next:r[s++],error:r[s++],complete:r[s++]};return function(A,u,d,h,f){let p,g=!1;return HS(A,u.bundle).then(()=>Vz(A,u.bundleName)).then(C=>{C&&!g&&(f&&C.withConverter(f),p=jS(C,d||{},h))}).catch(C=>(h.error&&h.error(C),()=>{})),()=>{g||(g=!0,p&&p())}}(n,i,a,o,r[s])}if(i.bundleSource==="DocumentSnapshot"){let o=null;if(typeof r[s]=="object"&&Nh(r[s])){const l=r[s++];o={next:l.next,error:l.error,complete:l.complete}}else o={next:r[s++],error:r[s++],complete:r[s++]};return function(A,u,d,h,f){let p,g=!1;return HS(A,u.bundle).then(()=>{if(!g){const C=new wn(A,f||null,Lt.fromPath(u.bundleName));p=jS(C,d||{},h)}}).catch(C=>(h.error&&h.error(C),()=>{})),()=>{g||(g=!0,p&&p())}}(n,i,a,o,r[s])}throw new vt(rt.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function Rve(t,e){return Fz(Jn(t=Dr(t,Cn)),Nh(e)?e:{next:e})}function Bp(t,e){return function(n,i){const a=new Xi;return n.asyncQueue.enqueueAndForget(async()=>sz(await aE(n),i,a)),a.promise}(Jn(t),e)}function pE(t,e,r){const n=r.docs.get(e._key),i=new KA(t);return new Hs(t,i,e._key,n,new rA(r.hasPendingWrites,r.fromCache),e.converter)}function Uve(t){return Yz(t,{count:qz()})}function Yz(t,e){const r=Dr(t.firestore,Cn),n=Jn(r),i=Y3(e,(a,s)=>new FP(s,a.aggregateType,a._internalFieldPath));return Iz(n,t._query,i).then(a=>function(o,l,A){const u=new KA(o);return new Kz(l,u,A)}(r,t,a))}class Jz{constructor(e){this.kind="memory",this._onlineComponentProvider=CA.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new rE(void 0)}}toJSON(){return{kind:this.kind}}}class Zz{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=i$(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class e${constructor(){this.kind="memoryEager",this._offlineComponentProvider=af.provider}toJSON(){return{kind:this.kind}}}class t${constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new rE(e)}}toJSON(){return{kind:this.kind}}}function Ove(){return new e$}function Mve(t){return new t$(t==null?void 0:t.cacheSizeBytes)}function Qve(t){return new Jz(t)}function Hve(t){return new Zz(t)}class r${constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=CA.provider,this._offlineComponentProvider={build:r=>new nE(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class n${constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=CA.provider,this._offlineComponentProvider={build:r=>new OL(r,e==null?void 0:e.cacheSizeBytes)}}}function i$(t){return new r$(t==null?void 0:t.forceOwnership)}function Vve(){return new n$}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=md(e)}set(e,r,n){this._verifyNotCommitted();const i=nA(e,this._firestore),a=Fw(i.converter,r,n),s=Cw(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,n);return this._mutations.push(s.toMutation(i._key,Gn.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const a=nA(e,this._firestore);let s;return s=typeof(r=Tr(r))=="string"||r instanceof hd?uE(this._dataReader,"WriteBatch.update",a._key,r,n,i):AE(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(s.toMutation(a._key,Gn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=nA(e,this._firestore);return this._mutations=this._mutations.concat(new bf(r._key,Gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nA(t,e){if((t=Tr(t)).firestore!==e)throw new vt(rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=md(e)}get(e){const r=nA(e,this._firestore),n=new mE(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return Vt(24041);const a=i[0];if(a.isFoundDocument())return new P0(this._firestore,n,a.key,a,r.converter);if(a.isNoDocument())return new P0(this._firestore,n,r._key,null,r.converter);throw Vt(18433,{doc:a})})}set(e,r,n){const i=nA(e,this._firestore),a=Fw(i.converter,r,n),s=Cw(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,n);return this._transaction.set(i._key,s),this}update(e,r,n,...i){const a=nA(e,this._firestore);let s;return s=typeof(r=Tr(r))=="string"||r instanceof hd?uE(this._dataReader,"Transaction.update",a._key,r,n,i):AE(this._dataReader,"Transaction.update",a._key,r),this._transaction.update(a._key,s),this}delete(e){const r=nA(e,this._firestore);return this._transaction.delete(r._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l$ extends o${constructor(e,r){super(e,r),this._firestore=e}get(e){const r=nA(e,this._firestore),n=new KA(this._firestore);return super.get(e).then(i=>new Hs(this._firestore,n,r._key,i._document,new rA(!1,!1),r.converter))}}function Kve(t,e,r){t=Dr(t,Cn);const n={...a$,...r};return function(a){if(a.maxAttempts<1)throw new vt(rt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(a,s,o){const l=new Xi;return a.asyncQueue.enqueueAndForget(async()=>{const A=await HL(a);new Bz(a.asyncQueue,A,o,s,l).ju()}),l.promise}(Jn(t),i=>e(new l$(t,i)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jve(){return new xp("deleteField")}function zve(){return new sE("serverTimestamp")}function $ve(...t){return new oE("arrayUnion",t)}function Gve(...t){return new lE("arrayRemove",t)}function Wve(t){return new cE("increment",t)}function qve(t){return new Do(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xve(t){return Jn(t=Dr(t,Cn)),new s$(t,e=>Bp(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yve(t,e){const r=Jn(t=Dr(t,Cn));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return fo("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(a){const s=typeof a=="string"?function(A){try{return JSON.parse(A)}catch(u){throw new vt(rt.INVALID_ARGUMENT,"Failed to parse JSON: "+(u==null?void 0:u.message))}}(a):a,o=[];if(Array.isArray(s.indexes))for(const l of s.indexes){const A=zS(l,"collectionGroup"),u=[];if(Array.isArray(l.fields))for(const d of l.fields){const h=Nw("setIndexConfiguration",zS(d,"fieldPath"));d.arrayConfig==="CONTAINS"?u.push(new Bu(h,2)):d.order==="ASCENDING"?u.push(new Bu(h,0)):d.order==="DESCENDING"&&u.push(new Bu(h,1))}o.push(new Vh(Vh.UNKNOWN_ID,A,u,Kh.empty()))}return o}(e);return Dz(r,n)}function zS(t,e){if(typeof t[e]!="string")throw new vt(rt.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Jve(t){var i;t=Dr(t,Cn);const e=$S.get(t);if(e)return e;if(((i=Jn(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const n=new c$(t);return $S.set(t,n),n}function Zve(t){cD(t,!0)}function ewe(t){cD(t,!1)}function twe(t){Uz(Jn(t._firestore)).then(e=>_t("deleting all persistent cache indexes succeeded")).catch(e=>fo("deleting all persistent cache indexes failed",e))}function cD(t,e){Rz(Jn(t._firestore),e).then(r=>_t(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>fo(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const $S=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rwe(t){var n;const e=Jn(Dr(t.firestore,Cn)),r=(n=e._onlineComponents)==null?void 0:n.datastore.serializer;return r===void 0?null:pw(r,Na(t._query)).ft}function nwe(t,e){var a;const r=Y3(e,(s,o)=>new FP(o,s.aggregateType,s._internalFieldPath)),n=Jn(Dr(t.firestore,Cn)),i=(a=n._onlineComponents)==null?void 0:a.datastore.serializer;return i===void 0?null:jP(i,pP(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iwe{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return gE.instance.onExistenceFilterMismatch(e)}}class gE{constructor(){this.Mc=new Map}static get instance(){return hg||(hg=new gE,function(r){if($m)throw new Error("a TestingHooksSpi instance is already set");$m=r}(hg)),hg}lt(e){this.Mc.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Mc;return n.set(r,e),()=>n.delete(r)}}let hg=null;(function(e,r=!0){(function(i){gf=i})(cd),Oo(new ho("firestore",(n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),o=new Cn(new xV(n.getProvider("auth-internal")),new BV(s,n.getProvider("app-check-internal")),function(A,u){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new vt(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(A.options.projectId,u)}(s,i),s);return a={useFetchStreams:r,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),ds(xN,_N,e),ds(xN,_N,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="firebasestorage.googleapis.com",uD="storageBucket",A$=2*60*1e3,u$=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends go{constructor(e,r,n=0){super(Vb(e),`Firebase Storage: ${r} (${Vb(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,oi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ai;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ai||(ai={}));function Vb(t){return"storage/"+t}function vE(){const t="An unknown error occurred, please check the error payload for server response.";return new oi(ai.UNKNOWN,t)}function d$(t){return new oi(ai.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function h$(t){return new oi(ai.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function f$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new oi(ai.UNAUTHENTICATED,t)}function m$(){return new oi(ai.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function p$(t){return new oi(ai.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function g$(){return new oi(ai.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v$(){return new oi(ai.CANCELED,"User canceled the upload/download.")}function w$(t){return new oi(ai.INVALID_URL,"Invalid URL '"+t+"'.")}function b$(t){return new oi(ai.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function y$(){return new oi(ai.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uD+"' property when initializing the app?")}function x$(){return new oi(ai.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _$(){return new oi(ai.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function E$(t){return new oi(ai.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function G2(t){return new oi(ai.INVALID_ARGUMENT,t)}function dD(){return new oi(ai.APP_DELETED,"The Firebase app was deleted.")}function B$(t){return new oi(ai.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wm(t,e){return new oi(ai.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function sm(t){throw new oi(ai.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Ga.makeFromUrl(e,r)}catch{return new Ga(e,"")}if(n.path==="")return n;throw b$(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function A(E){E.path_=decodeURIComponent(E.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},g=r===AD?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",C=new RegExp(`^https?://${g}/${i}/${v}`,"i"),F=[{regex:o,indices:l,postModify:a},{regex:f,indices:p,postModify:A},{regex:C,indices:{bucket:1,path:2},postModify:A}];for(let E=0;E<F.length;E++){const R=F[E],L=R.regex.exec(e);if(L){const N=L[R.indices.bucket];let P=L[R.indices.path];P||(P=""),n=new Ga(N,P),R.postModify(n);break}}if(n==null)throw w$(e);return n}}class C${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(t,e,r){let n=1,i=null,a=null,s=!1,o=0;function l(){return o===2}let A=!1;function u(...v){A||(A=!0,e.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,t(f,l())},v)}function h(){a&&clearTimeout(a)}function f(v,...C){if(A){h();return}if(v){h(),u.call(null,v,...C);return}if(l()||s){h(),u.call(null,v,...C);return}n<64&&(n*=2);let F;o===1?(o=2,F=0):F=(n+Math.random())*1e3,d(F)}let p=!1;function g(v){p||(p=!0,h(),!A&&(i!==null?(v||(o=2),clearTimeout(i),d(0)):v||(o=1)))}return d(0),a=setTimeout(()=>{s=!0,g(!0)},r),g}function S$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$(t){return t!==void 0}function T$(t){return typeof t=="object"&&!Array.isArray(t)}function wE(t){return typeof t=="string"||t instanceof String}function GS(t){return bE()&&t instanceof Blob}function bE(){return typeof Blob<"u"}function W2(t,e,r,n){if(n<e)throw G2(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw G2(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function hD(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var Su;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Su||(Su={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e,r,n,i,a,s,o,l,A,u,d,h=!0,f=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=A,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new fg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const l=o.loaded,A=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,A)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===Su.NO_ERROR,l=a.getStatus();if(!o||I$(l,this.additionalRetryCodes_)&&this.retry){const u=a.getErrorCode()===Su.ABORT;n(!1,new fg(!1,null,u));return}const A=this.successCodes_.indexOf(l)!==-1;n(!0,new fg(A,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());k$(l)?a(l):a()}catch(l){s(l)}else if(o!==null){const l=vE();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(i.canceled){const l=this.appDelete_?dD():v$();s(l)}else{const l=g$();s(l)}};this.canceled_?r(!1,new fg(!1,null,!0)):this.backoffId_=N$(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fg{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function P$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function L$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function D$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function R$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function U$(t,e,r,n,i,a,s=!0,o=!1){const l=hD(t.urlParams),A=t.url+l,u=Object.assign({},t.headers);return D$(u,e),P$(u,r),L$(u,a),R$(u,n),new F$(A,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function M$(...t){const e=O$();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(bE())return new Blob(t);throw new oi(ai.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Q$(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t){if(typeof atob>"u")throw E$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kb{constructor(e,r){this.data=e,this.contentType=r||null}}function V$(t,e){switch(t){case dl.RAW:return new Kb(fD(e));case dl.BASE64:case dl.BASE64URL:return new Kb(mD(t,e));case dl.DATA_URL:return new Kb(j$(e),z$(e))}throw vE()}function fD(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,s=t.charCodeAt(++r);n=65536|(a&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function K$(t){let e;try{e=decodeURIComponent(t)}catch{throw Wm(dl.DATA_URL,"Malformed data URL.")}return fD(e)}function mD(t,e){switch(t){case dl.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Wm(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case dl.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Wm(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=H$(e)}catch(i){throw i.message.includes("polyfill")?i:Wm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class pD{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Wm(dl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=$$(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function j$(t){const e=new pD(t);return e.base64?mD(dl.BASE64,e.rest):K$(e.rest)}function z$(t){return new pD(t).contentType}function $$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,r){let n=0,i="";GS(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(GS(this.data_)){const n=this.data_,i=Q$(n,e,r);return i===null?null:new Yc(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Yc(n,!0)}}static getBlob(...e){if(bE()){const r=e.map(n=>n instanceof Yc?n.data_:n);return new Yc(M$.apply(null,r))}else{const r=e.map(s=>wE(s)?V$(dl.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(s=>{for(let o=0;o<s.length;o++)i[a++]=s[o]}),new Yc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){let e;try{e=JSON.parse(t)}catch{return null}return T$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function W$(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function gD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(t,e){return e}class Ka{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||q$}}let mg=null;function X$(t){return!wE(t)||t.length<2?t:gD(t)}function xE(){if(mg)return mg;const t=[];t.push(new Ka("bucket")),t.push(new Ka("generation")),t.push(new Ka("metageneration")),t.push(new Ka("name","fullPath",!0));function e(a,s){return X$(s)}const r=new Ka("name");r.xform=e,t.push(r);function n(a,s){return s!==void 0?Number(s):s}const i=new Ka("size");return i.xform=n,t.push(i),t.push(new Ka("timeCreated")),t.push(new Ka("updated")),t.push(new Ka("md5Hash",null,!0)),t.push(new Ka("cacheControl",null,!0)),t.push(new Ka("contentDisposition",null,!0)),t.push(new Ka("contentEncoding",null,!0)),t.push(new Ka("contentLanguage",null,!0)),t.push(new Ka("contentType",null,!0)),t.push(new Ka("metadata","customMetadata",!0)),mg=t,mg}function Y$(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new Ga(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function J$(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const s=r[a];n[s.local]=s.xform(n,e[s.server])}return Y$(n,t),n}function vD(t,e,r){const n=yE(e);return n===null?null:J$(t,n,r)}function Z$(t,e,r,n){const i=yE(e);if(i===null||!wE(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(A=>{const u=t.bucket,d=t.fullPath,h="/b/"+s(u)+"/o/"+s(d),f=Nf(h,r,n),p=hD({alt:"media",token:A});return f+p})[0]}function eG(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="prefixes",qS="items";function tG(t,e,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[WS])for(const i of r[WS]){const a=i.replace(/\/$/,""),s=t._makeStorageReference(new Ga(e,a));n.prefixes.push(s)}if(r[qS])for(const i of r[qS]){const a=t._makeStorageReference(new Ga(e,i.name));n.items.push(a)}return n}function rG(t,e,r){const n=yE(r);return n===null?null:tG(t,e,n)}class Cp{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t){if(!t)throw vE()}function wD(t,e){function r(n,i){const a=vD(t,i,e);return _E(a!==null),a}return r}function nG(t,e){function r(n,i){const a=rG(t,e,i);return _E(a!==null),a}return r}function iG(t,e){function r(n,i){const a=vD(t,i,e);return _E(a!==null),Z$(a,i,t.host,t._protocol)}return r}function EE(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=m$():i=f$():r.getStatus()===402?i=h$(t.bucket):r.getStatus()===403?i=p$(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function BE(t){const e=EE(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=d$(t.path)),a.serverResponse=i.serverResponse,a}return r}function aG(t,e,r){const n=e.fullServerUrl(),i=Nf(n,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,o=new Cp(i,a,wD(t,r),s);return o.errorHandler=BE(e),o}function sG(t,e,r,n,i){const a={};e.isRoot?a.prefix="":a.prefix=e.path+"/",r&&r.length>0&&(a.delimiter=r),n&&(a.pageToken=n),i&&(a.maxResults=i);const s=e.bucketOnlyServerUrl(),o=Nf(s,t.host,t._protocol),l="GET",A=t.maxOperationRetryTime,u=new Cp(o,l,nG(t,e.bucket),A);return u.urlParams=a,u.errorHandler=EE(e),u}function oG(t,e,r){const n=e.fullServerUrl(),i=Nf(n,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,o=new Cp(i,a,iG(t,r),s);return o.errorHandler=BE(e),o}function lG(t,e){const r=e.fullServerUrl(),n=Nf(r,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function s(l,A){}const o=new Cp(n,i,s,a);return o.successCodes=[200,204],o.errorHandler=BE(e),o}function cG(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function AG(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=cG(null,e)),n}function uG(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let F="";for(let E=0;E<2;E++)F=F+Math.random().toString().slice(2);return F}const l=o();s["Content-Type"]="multipart/related; boundary="+l;const A=AG(e,n,i),u=eG(A,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+A.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=Yc.getBlob(d,n,h);if(f===null)throw x$();const p={name:A.fullPath},g=Nf(a,t.host,t._protocol),v="POST",C=t.maxUploadRetryTime,I=new Cp(g,v,wD(t,r),C);return I.urlParams=p,I.headers=s,I.body=f.uploadData(),I.errorHandler=EE(e),I}class dG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Su.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Su.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Su.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i,a){if(this.sent_)throw sm("cannot .send() more than once");if(dc(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const s in a)a.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,a[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class hG extends dG{initXhr(){this.xhr_.responseType="text"}}function Np(){return new hG}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,r){this._service=e,r instanceof Ga?this._location=r:this._location=Ga.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Wu(e,r)}get root(){const e=new Ga(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gD(this._location.path)}get storage(){return this._service}get parent(){const e=G$(this._location.path);if(e===null)return null;const r=new Ga(this._location.bucket,e);return new Wu(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw B$(e)}}function fG(t,e,r){t._throwIfRoot("uploadBytes");const n=uG(t.storage,t._location,xE(),new Yc(e,!0),r);return t.storage.makeRequestWithTokens(n,Np).then(i=>({metadata:i,ref:t}))}function mG(t){const e={prefixes:[],items:[]};return bD(t,e).then(()=>e)}async function bD(t,e,r){const i=await pG(t,{pageToken:r});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await bD(t,e,i.nextPageToken)}function pG(t,e){e!=null&&typeof e.maxResults=="number"&&W2("options.maxResults",1,1e3,e.maxResults);const r=e||{},n=sG(t.storage,t._location,"/",r.pageToken,r.maxResults);return t.storage.makeRequestWithTokens(n,Np)}function gG(t){t._throwIfRoot("getMetadata");const e=aG(t.storage,t._location,xE());return t.storage.makeRequestWithTokens(e,Np)}function vG(t){t._throwIfRoot("getDownloadURL");const e=oG(t.storage,t._location,xE());return t.storage.makeRequestWithTokens(e,Np).then(r=>{if(r===null)throw _$();return r})}function wG(t){t._throwIfRoot("deleteObject");const e=lG(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Np)}function bG(t,e){const r=W$(t._location.path,e),n=new Ga(t._location.bucket,r);return new Wu(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yG(t){return/^[A-Za-z]+:\/\//.test(t)}function xG(t,e){return new Wu(t,e)}function yD(t,e){if(t instanceof CE){const r=t;if(r._bucket==null)throw y$();const n=new Wu(r,r._bucket);return e!=null?yD(n,e):n}else return e!==void 0?bG(t,e):t}function _G(t,e){if(e&&yG(e)){if(t instanceof CE)return xG(t,e);throw G2("To use ref(service, url), the first argument must be a Storage instance.")}else return yD(t,e)}function XS(t,e){const r=e==null?void 0:e[uD];return r==null?null:Ga.makeFromBucketSpec(r,t)}function EG(t,e,r,n={}){t.host=`${e}:${r}`;const i=dc(e);i&&(Zv(`https://${t.host}/b`),e_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:FF(a,t.app.options.projectId))}class CE{constructor(e,r,n,i,a,s=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=s,this._bucket=null,this._host=AD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A$,this._maxUploadRetryTime=u$,this._requests=new Set,i!=null?this._bucket=Ga.makeFromBucketSpec(i,this._host):this._bucket=XS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ga.makeFromBucketSpec(this._url,e):this._bucket=XS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wu(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new C$(dD());{const s=U$(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const YS="@firebase/storage",JS="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="storage";function awe(t,e,r){return t=Tr(t),fG(t,e,r)}function swe(t){return t=Tr(t),gG(t)}function owe(t){return t=Tr(t),mG(t)}function lwe(t){return t=Tr(t),vG(t)}function cwe(t){return t=Tr(t),wG(t)}function Awe(t,e){return t=Tr(t),_G(t,e)}function BG(t=tw(),e){t=Tr(t);const n=Bl(t,xD).getImmediate({identifier:e}),i=kF("storage");return i&&CG(n,...i),n}function CG(t,e,r,n={}){EG(t,e,r,n)}function NG(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new CE(r,n,i,e,cd)}function SG(){Oo(new ho(xD,NG,"PUBLIC").setMultipleInstances(!0)),ds(YS,JS,""),ds(YS,JS,"esm2020")}SG();const _D="@firebase/installations",NE="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=1e4,BD=`w:${NE}`,CD="FIS_v2",kG="https://firebaseinstallations.googleapis.com/v1",TG=60*60*1e3,IG="installations",FG="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qu=new ld(IG,FG,PG);function ND(t){return t instanceof go&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD({projectId:t}){return`${kG}/projects/${t}/installations`}function kD(t){return{token:t.token,requestStatus:2,expiresIn:DG(t.expiresIn),creationTime:Date.now()}}async function TD(t,e){const n=(await e.json()).error;return qu.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ID({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function LG(t,{refreshToken:e}){const r=ID(t);return r.append("Authorization",RG(e)),r}async function FD(t){const e=await t();return e.status>=500&&e.status<600?t():e}function DG(t){return Number(t.replace("s","000"))}function RG(t){return`${CD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UG({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=SD(t),i=ID(t),a=e.getImmediate({optional:!0});if(a){const A=await a.getHeartbeatsHeader();A&&i.append("x-firebase-client",A)}const s={fid:r,authVersion:CD,appId:t.appId,sdkVersion:BD},o={method:"POST",headers:i,body:JSON.stringify(s)},l=await FD(()=>fetch(n,o));if(l.ok){const A=await l.json();return{fid:A.fid||r,registrationStatus:2,refreshToken:A.refreshToken,authToken:kD(A.authToken)}}else throw await TD("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG=/^[cdef][\w-]{21}$/,q2="";function QG(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=HG(t);return MG.test(r)?r:q2}catch{return q2}}function HG(t){return OG(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new Map;function DD(t,e){const r=Pw(t);RD(r,e),VG(r,e)}function RD(t,e){const r=LD.get(t);if(r)for(const n of r)n(e)}function VG(t,e){const r=KG();r&&r.postMessage({key:t,fid:e}),jG()}let gu=null;function KG(){return!gu&&"BroadcastChannel"in self&&(gu=new BroadcastChannel("[Firebase] FID Change"),gu.onmessage=t=>{RD(t.data.key,t.data.fid)}),gu}function jG(){LD.size===0&&gu&&(gu.close(),gu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG="firebase-installations-database",$G=1,Xu="firebase-installations-store";let jb=null;function SE(){return jb||(jb=QF(zG,$G,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Xu)}}})),jb}async function lv(t,e){const r=Pw(t),i=(await SE()).transaction(Xu,"readwrite"),a=i.objectStore(Xu),s=await a.get(r);return await a.put(e,r),await i.done,(!s||s.fid!==e.fid)&&DD(t,e.fid),e}async function UD(t){const e=Pw(t),n=(await SE()).transaction(Xu,"readwrite");await n.objectStore(Xu).delete(e),await n.done}async function Lw(t,e){const r=Pw(t),i=(await SE()).transaction(Xu,"readwrite"),a=i.objectStore(Xu),s=await a.get(r),o=e(s);return o===void 0?await a.delete(r):await a.put(o,r),await i.done,o&&(!s||s.fid!==o.fid)&&DD(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(t){let e;const r=await Lw(t.appConfig,n=>{const i=GG(n),a=WG(t,i);return e=a.registrationPromise,a.installationEntry});return r.fid===q2?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function GG(t){const e=t||{fid:QG(),registrationStatus:0};return OD(e)}function WG(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(qu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=qG(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XG(t)}:{installationEntry:e}}async function qG(t,e){try{const r=await UG(t,e);return lv(t.appConfig,r)}catch(r){throw ND(r)&&r.customData.serverCode===409?await UD(t.appConfig):await lv(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function XG(t){let e=await ZS(t.appConfig);for(;e.registrationStatus===1;)await PD(100),e=await ZS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await kE(t);return n||r}return e}function ZS(t){return Lw(t,e=>{if(!e)throw qu.create("installation-not-found");return OD(e)})}function OD(t){return YG(t)?{fid:t.fid,registrationStatus:0}:t}function YG(t){return t.registrationStatus===1&&t.registrationTime+ED<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JG({appConfig:t,heartbeatServiceProvider:e},r){const n=ZG(t,r),i=LG(t,r),a=e.getImmediate({optional:!0});if(a){const A=await a.getHeartbeatsHeader();A&&i.append("x-firebase-client",A)}const s={installation:{sdkVersion:BD,appId:t.appId}},o={method:"POST",headers:i,body:JSON.stringify(s)},l=await FD(()=>fetch(n,o));if(l.ok){const A=await l.json();return kD(A)}else throw await TD("Generate Auth Token",l)}function ZG(t,{fid:e}){return`${SD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(t,e=!1){let r;const n=await Lw(t.appConfig,a=>{if(!MD(a))throw qu.create("not-registered");const s=a.authToken;if(!e&&rW(s))return a;if(s.requestStatus===1)return r=eW(t,e),a;{if(!navigator.onLine)throw qu.create("app-offline");const o=iW(a);return r=tW(t,o),o}});return r?await r:n.authToken}async function eW(t,e){let r=await ek(t.appConfig);for(;r.authToken.requestStatus===1;)await PD(100),r=await ek(t.appConfig);const n=r.authToken;return n.requestStatus===0?TE(t,e):n}function ek(t){return Lw(t,e=>{if(!MD(e))throw qu.create("not-registered");const r=e.authToken;return aW(r)?{...e,authToken:{requestStatus:0}}:e})}async function tW(t,e){try{const r=await JG(t,e),n={...e,authToken:r};return await lv(t.appConfig,n),r}catch(r){if(ND(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await UD(t.appConfig);else{const n={...e,authToken:{requestStatus:0}};await lv(t.appConfig,n)}throw r}}function MD(t){return t!==void 0&&t.registrationStatus===2}function rW(t){return t.requestStatus===2&&!nW(t)}function nW(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TG}function iW(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function aW(t){return t.requestStatus===1&&t.requestTime+ED<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sW(t){const e=t,{installationEntry:r,registrationPromise:n}=await kE(e);return n?n.catch(console.error):TE(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oW(t,e=!1){const r=t;return await lW(r),(await TE(r,e)).token}async function lW(t){const{registrationPromise:e}=await kE(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t){if(!t||!t.options)throw zb("App Configuration");if(!t.name)throw zb("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw zb(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zb(t){return qu.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="installations",AW="installations-internal",uW=t=>{const e=t.getProvider("app").getImmediate(),r=cW(e),n=Bl(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},dW=t=>{const e=t.getProvider("app").getImmediate(),r=Bl(e,QD).getImmediate();return{getId:()=>sW(r),getToken:i=>oW(r,i)}};function hW(){Oo(new ho(QD,uW,"PUBLIC")),Oo(new ho(AW,dW,"PRIVATE"))}hW();ds(_D,NE);ds(_D,NE,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="analytics",fW="firebase_id",mW="origin",pW=60*1e3,gW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",IE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new ew("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ks=new ld("analytics","Analytics",vW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t){if(!t.startsWith(IE)){const e=Ks.create("invalid-gtag-resource",{gtagURL:t});return qa.warn(e.message),""}return t}function HD(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function bW(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function yW(t,e){const r=bW("firebase-js-sdk-policy",{createScriptURL:wW}),n=document.createElement("script"),i=`${IE}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function xW(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _W(t,e,r,n,i,a){const s=n[i];try{if(s)await e[s];else{const l=(await HD(r)).find(A=>A.measurementId===i);l&&await e[l.appId]}}catch(o){qa.error(o)}t("config",i,a)}async function EW(t,e,r,n,i){try{let a=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const o=await HD(r);for(const l of s){const A=o.find(d=>d.measurementId===l),u=A&&e[A.appId];if(u)a.push(u);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",n,i||{})}catch(a){qa.error(a)}}function BW(t,e,r,n){async function i(a,...s){try{if(a==="event"){const[o,l]=s;await EW(t,e,r,o,l)}else if(a==="config"){const[o,l]=s;await _W(t,e,r,n,o,l)}else if(a==="consent"){const[o,l]=s;t("consent",o,l)}else if(a==="get"){const[o,l,A]=s;t("get",o,l,A)}else if(a==="set"){const[o]=s;t("set",o)}else t(a,...s)}catch(o){qa.error(o)}}return i}function CW(t,e,r,n,i){let a=function(...s){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=BW(a,t,e,r),{gtagCore:a,wrappedGtag:window[i]}}function NW(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(IE)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=30,kW=1e3;class TW{constructor(e={},r=kW){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const VD=new TW;function IW(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function FW(t){var s;const{appId:e,apiKey:r}=t,n={method:"GET",headers:IW(r)},i=gW.replace("{app-id}",e),a=await fetch(i,n);if(a.status!==200&&a.status!==304){let o="";try{const l=await a.json();(s=l.error)!=null&&s.message&&(o=l.error.message)}catch{}throw Ks.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function PW(t,e=VD,r){const{appId:n,apiKey:i,measurementId:a}=t.options;if(!n)throw Ks.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:n};throw Ks.create("no-api-key")}const s=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new RW;return setTimeout(async()=>{o.abort()},r!==void 0?r:pW),KD({appId:n,apiKey:i,measurementId:a},s,o,e)}async function KD(t,{throttleEndTimeMillis:e,backoffCount:r},n,i=VD){var o;const{appId:a,measurementId:s}=t;try{await LW(n,e)}catch(l){if(s)return qa.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:a,measurementId:s};throw l}try{const l=await FW(t);return i.deleteThrottleMetadata(a),l}catch(l){const A=l;if(!DW(A)){if(i.deleteThrottleMetadata(a),s)return qa.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${A==null?void 0:A.message}]`),{appId:a,measurementId:s};throw l}const u=Number((o=A==null?void 0:A.customData)==null?void 0:o.httpStatus)===503?WC(r,i.intervalMillis,SW):WC(r,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:r+1};return i.setThrottleMetadata(a,d),qa.debug(`Calling attemptFetch again in ${u} millis`),KD(t,d,n,i)}}function LW(t,e){return new Promise((r,n)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(r,i);t.addEventListener(()=>{clearTimeout(a),n(Ks.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function DW(t){if(!(t instanceof go)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class RW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function UW(t,e,r,n,i){if(i&&i.global){t("event",r,n);return}else{const a=await e,s={...n,send_to:a};t("event",r,s)}}async function OW(t,e,r,n){if(n&&n.global){const i={};for(const a of Object.keys(r))i[`user_properties.${a}`]=r[a];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MW(){if(t_())try{await UF()}catch(t){return qa.warn(Ks.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return qa.warn(Ks.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function QW(t,e,r,n,i,a,s){const o=PW(t);o.then(h=>{r[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&qa.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>qa.error(h)),e.push(o);const l=MW().then(h=>{if(h)return n.getId()}),[A,u]=await Promise.all([o,l]);NW(a)||yW(a,A.measurementId),i("js",new Date);const d=(s==null?void 0:s.config)??{};return d[mW]="firebase",d.update=!0,u!=null&&(d[fW]=u),i("config",A.measurementId,d),A.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(e){this.app=e}_delete(){return delete Sh[this.app.options.appId],Promise.resolve()}}let Sh={},tk=[];const rk={};let $b="dataLayer",VW="gtag",nk,FE,ik=!1;function KW(){const t=[];if(LF()&&t.push("This is a browser extension environment."),HQ()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>`(${i+1}) ${n}`).join(" "),r=Ks.create("invalid-analytics-context",{errorInfo:e});qa.warn(r.message)}}function jW(t,e,r){KW();const n=t.options.appId;if(!n)throw Ks.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)qa.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ks.create("no-api-key");if(Sh[n]!=null)throw Ks.create("already-exists",{id:n});if(!ik){xW($b);const{wrappedGtag:a,gtagCore:s}=CW(Sh,tk,rk,$b,VW);FE=a,nk=s,ik=!0}return Sh[n]=QW(t,tk,rk,e,nk,$b,r),new HW(t)}function zW(t=tw()){t=Tr(t);const e=Bl(t,cv);return e.isInitialized()?e.getImmediate():$W(t)}function $W(t,e={}){const r=Bl(t,cv);if(r.isInitialized()){const i=r.getImmediate();if(uo(e,r.getOptions()))return i;throw Ks.create("already-initialized")}return r.initialize({options:e})}function GW(t,e,r){t=Tr(t),OW(FE,Sh[t.app.options.appId],e,r).catch(n=>qa.error(n))}function WW(t,e,r,n){t=Tr(t),UW(FE,Sh[t.app.options.appId],e,r,n).catch(i=>qa.error(i))}const ak="@firebase/analytics",sk="0.10.19";function qW(){Oo(new ho(cv,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return jW(n,i,r)},"PUBLIC")),Oo(new ho("analytics-internal",t,"PRIVATE")),ds(ak,sk),ds(ak,sk,"esm2020");function t(e){try{const r=e.getProvider(cv).getImmediate();return{logEvent:(n,i,a)=>WW(r,n,i,a),setUserProperties:(n,i)=>GW(r,n,i)}}catch(r){throw Ks.create("interop-component-reg-failed",{reason:r})}}}qW();const jD={apiKey:"AIzaSyDRYJ8wJpjIi4qF1jzLe14xtmb7iTT4jsc",authDomain:"apartmecra-elz.firebaseapp.com",projectId:"apartmecra-elz",storageBucket:"apartmecra-elz.firebasestorage.app",messagingSenderId:"669151390046",appId:"1:669151390046:web:30590b4e09a529d17d47cf",measurementId:"G-4J8KGT8KJ5"},Sp=HF(jD),X2=vV(Sp),XW=Hz(Sp),YW=BG(Sp);let zD=null;typeof window<"u"&&(zD=zW(Sp));console.log(" Firebase initialized successfully");console.log(" Project:",jD.projectId);const uwe=Object.freeze(Object.defineProperty({__proto__:null,get analytics(){return zD},auth:X2,db:XW,default:Sp,storage:YW},Symbol.toStringTag,{value:"Module"})),JW=()=>X2!=null,ZW=async()=>JW()?(console.log(" Using Firebase API service"),await xh(()=>import("./firebaseApi-ec33505f.js"),["assets/firebaseApi-ec33505f.js","assets/firebaseDb-cdf0b9a6.js","assets/vendor-06819936.js"])):(console.error(" Firebase is not available - application may not work correctly"),await xh(()=>import("./localApi-2b4fa962.js"),[])),eq=()=>new Proxy({},{get(t,e){return async(...r)=>{const n=await ZW();if(n[e])return n[e](...r);throw new Error(`API method ${e} not found`)}}}),rr=eq(),tq=rr.login;rr.changePassword;const rq=rr.getDashboardSummary,nq=rr.getRecentTransactions,Yi=rr.getSites,$D=rr.createSite,SA=rr.updateSite,Gb=rr.deleteSite,iq=rr.archiveSite,Xa=rr.getCompanies,ok=rr.createCompany,qm=rr.updateCompany,aq=rr.deleteCompany,lk=rr.archiveCompany,Sa=rr.getAgreements,GD=rr.createAgreement,Xm=rr.updateAgreement,WD=rr.deleteAgreement,ck=rr.archiveAgreement,lc=rr.getTransactions,hl=rr.createTransaction,sq=rr.updateTransaction,Ak=rr.deleteTransaction,ph=rr.getPartners,oq=rr.createPartner,gh=rr.updatePartner,lq=rr.deletePartner,cq=rr.getArchivedSites,Aq=rr.getArchivedCompanies,uq=rr.getArchivedAgreements,uk=rr.deleteArchivedSite,dk=rr.deleteArchivedCompany,hk=rr.deleteArchivedAgreement,dq=rr.restoreSite,hq=rr.restoreCompany,fq=rr.restoreAgreement,B1=rr.getUsers,qD=rr.createUser,XD=rr.updateUser,fk=rr.deleteUser,mq=rr.getSiteData;rr.getSiteAgreements;rr.getSiteTransactions;const pq=rr.getLogs,Un=rr.createLog;rr.deleteLog;const Dw=rr.getPanelImages,gq=rr.uploadPanelImage,vq=rr.cleanupExpiredImages,wq=rr.resetPanelImages;rr.onAuthStateChange;rr.getCurrentUser;rr.hasPermission;rr.canAccessSite;rr.canAccessCompany;rr.getAccountingRecords;const bq=rr.createAccountingRecord,yq=24*60*60*1e3,xq=t=>{const e=Date.now(),r=e+yq,n={userId:t.id,role:t.role,timestamp:e,expiry:r};return btoa(JSON.stringify(n))},_q=t=>{try{const e=JSON.parse(atob(t));return Date.now()>e.expiry?{valid:!1,reason:"expired"}:{valid:!0,data:e}}catch{return{valid:!1,reason:"invalid"}}};let om=null,pg=0;const Eq=1e3,Bq=()=>{const t=Date.now();if(om!==null&&t-pg<Eq)return om;const e=localStorage.getItem("token");return e?_q(e).valid?(om=!0,pg=t,!0):(PE(),om=!1,pg=t,!1):(om=!1,pg=t,!1)};let du=null,vh=0;const Cq=1e3,cc=()=>{const t=Date.now();if(du!==null&&t-vh<Cq)return du;const e=localStorage.getItem("user");if(!e)return du=null,vh=t,null;try{const r=JSON.parse(e);return du=r,vh=t,r}catch{return PE(),du=null,vh=t,null}},YD=()=>{du=null,vh=0},Nq=()=>{const t=cc();return t&&t.role==="observer"},PE=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("loginAttempts"),sessionStorage.clear(),YD()},gg=async(t,e)=>{try{const r=await tq(t,e);if(r.error)return{error:r.error};const n=xq(r.user);return localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(r.user)),YD(),du=r.user,vh=Date.now(),{...r,token:n}}catch{return{error:"Authentication failed"}}},mk=()=>{const[t,e]=D.useState("admin"),[r,n]=D.useState(""),[i,a]=D.useState(""),[s,o]=D.useState(""),[l,A]=D.useState(""),[u,d]=D.useState(""),[h,f]=D.useState(""),[p,g]=D.useState(""),[v,C]=D.useState(""),[I,F]=D.useState(""),[E,R]=D.useState(!1),[L,N]=D.useState(!1),[P,x]=D.useState(!1),[k,y]=D.useState({admin:!1,company:!1,site:!1,personnel:!1}),S=DA(),_=T=>`remember_me_${T}`,M=(T,O,V)=>{const Q=_(T),X={username:O,password:V,timestamp:Date.now()};localStorage.setItem(Q,JSON.stringify(X))},K=T=>{const O=_(T),V=localStorage.getItem(O);if(V)try{const Q=JSON.parse(V),X=Date.now()-30*24*60*60*1e3;if(Q.timestamp>X)return Q;localStorage.removeItem(O)}catch{localStorage.removeItem(O)}return null},z=T=>{const O=_(T);localStorage.removeItem(O)};D.useEffect(()=>{const T=K("admin");T&&(n(T.username),a(T.password),y(X=>({...X,admin:!0})));const O=K("company");O&&(o(O.username),A(O.password),y(X=>({...X,company:!0})));const V=K("site");V&&(d(V.username),f(V.password),y(X=>({...X,site:!0})));const Q=K("personnel");Q&&(g(Q.username),C(Q.password),y(X=>({...X,personnel:!0})))},[]);const ae=async T=>{if(T.preventDefault(),!r||!i){F("Ltfen tm alanlar doldurunuz.");return}R(!0),F("");try{const O=await gg(r,i);O.error?F(O.error):(k.admin?M("admin",r,i):z("admin"),S("/dashboard"))}catch{F("Kullanc ad veya ifre hatal. Ltfen bilgilerinizi kontrol ediniz.")}finally{R(!1)}},te=async T=>{if(T.preventDefault(),!s||!l){F("Ltfen firma ID ve telefon numarasn giriniz.");return}R(!0),F("");try{const V=(await Xa()).find(X=>String(X.id).toLowerCase()===String(s).toLowerCase()&&String(X.phone).replace(/\D/g,"")===String(l).replace(/\D/g,""));if(!V){F("Firma ID veya telefon numaras hatal."),R(!1);return}if(V.status!=="active"){F("Firma pasif durumda. Giri yaplamaz."),R(!1);return}const Q=await gg(s,l);Q.error?F(Q.error):(k.company?M("company",s,l):z("company"),S("/company-dashboard"))}catch{F("Giri srasnda bir hata olutu.")}finally{R(!1)}},G=async T=>{if(T.preventDefault(),!u||!h){F("Ltfen site ID ve telefon numarasn giriniz.");return}R(!0),F("");try{const O=await gg(u,h);O.error?F(O.error):(k.site?M("site",u,h):z("site"),S("/dashboard"))}catch{F("Site ID veya telefon numaras hatal.")}finally{R(!1)}},ue=async T=>{if(T.preventDefault(),!p||!v){F("Ltfen kullanc ad ve ifrenizi giriniz.");return}R(!0),F("");try{const O=await gg(p,v);O.error?F(O.error):(k.personnel?M("personnel",p,v):z("personnel"),S("/dashboard"))}catch{F("Kullanc ad veya ifre hatal. Ltfen bilgilerinizi kontrol ediniz.")}finally{R(!1)}},de=T=>{e(T),F("")};return c("div",{className:"min-vh-100 d-flex align-items-center justify-content-center p-3",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%)"},children:c("div",{className:"container",children:m("div",{className:"row justify-content-center",children:[c("div",{className:"col-12 text-center mb-5",children:m("div",{className:"d-flex flex-column align-items-center",children:[c("div",{className:"mb-3",children:c("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"80px",height:"80px",background:"linear-gradient(135deg, #0A66C2, #2ECC71)",boxShadow:"0 10px 20px rgba(10, 102, 194, 0.2)"},children:c("i",{className:"bi bi-building",style:{fontSize:"2rem",color:"white"}})})}),c("h1",{className:"h2 fw-bold text-dark",children:"Apart Mecra"}),c("p",{className:"text-muted mb-0",children:"Kurumsal Ynetim Sistemi"})]})}),m("div",{className:"col-12 col-md-8 col-lg-6 col-xl-5",children:[c("div",{className:"card border-0 shadow-lg",style:{borderRadius:"20px",overflow:"hidden"},children:m("div",{className:"card-body p-4 p-md-5",children:[c("div",{className:"d-flex justify-content-center mb-4",children:m("div",{className:"d-flex bg-light rounded-pill p-1",style:{width:"100%",maxWidth:"450px"},children:[c("button",{className:`flex-fill border-0 rounded-pill py-2 px-2 fw-medium ${t==="admin"?"bg-primary text-white":"bg-transparent text-muted"}`,onClick:()=>de("admin"),style:{transition:"all 0.3s ease",fontSize:"0.8rem"},children:"Ynetici"}),c("button",{className:`flex-fill border-0 rounded-pill py-2 px-2 fw-medium ${t==="company"?"bg-primary text-white":"bg-transparent text-muted"}`,onClick:()=>de("company"),style:{transition:"all 0.3s ease",fontSize:"0.8rem"},children:"Firma"}),c("button",{className:`flex-fill border-0 rounded-pill py-2 px-2 fw-medium ${t==="site"?"bg-primary text-white":"bg-transparent text-muted"}`,onClick:()=>de("site"),style:{transition:"all 0.3s ease",fontSize:"0.8rem"},children:"Site"}),c("button",{className:`flex-fill border-0 rounded-pill py-2 px-2 fw-medium ${t==="personnel"?"bg-primary text-white":"bg-transparent text-muted"}`,onClick:()=>de("personnel"),style:{transition:"all 0.3s ease",fontSize:"0.8rem"},children:"Personel"})]})}),m("div",{className:"tab-content",children:[I&&c("div",{className:"alert alert-danger rounded-pill text-center py-2 mb-4",role:"alert",children:c("small",{children:I})}),m("div",{className:`tab-pane fade ${t==="admin"?"show active":""}`,children:[c("h2",{className:"h4 text-center mb-4 fw-bold text-dark",children:"Ynetici Girii"}),m("form",{onSubmit:ae,children:[c("div",{className:"mb-3",children:m("div",{className:"input-group position-relative",children:[c("span",{className:"input-group-text bg-light border-0 rounded-start-pill",style:{paddingLeft:"20px"},children:c("i",{className:"bi bi-person text-muted"})}),c("input",{type:"text",className:"form-control border-0 rounded-end-pill ps-3",placeholder:"Kullanc adnz girin",value:r,onChange:T=>n(T.target.value),disabled:E,style:{backgroundColor:"#f8f9fa"}})]})}),c("div",{className:"mb-4",children:m("div",{className:"input-group position-relative",children:[c("span",{className:"input-group-text bg-light border-0 rounded-start-pill",style:{paddingLeft:"20px"},children:c("i",{className:"bi bi-lock text-muted"})}),c("input",{type:L?"text":"password",className:"form-control border-0 rounded-end-pill ps-3 pe-5",placeholder:"ifrenizi girin",value:i,onChange:T=>a(T.target.value),disabled:E,style:{backgroundColor:"#f8f9fa"}}),c("button",{type:"button",className:"btn btn-link position-absolute end-0 top-50 translate-middle-y me-3 p-0",onClick:()=>N(!L),style:{border:"none",background:"none",color:"#6c757d",zIndex:10},children:c("i",{className:`bi ${L?"bi-eye-slash":"bi-eye"}`})})]})}),c("div",{className:"mb-3",children:m("div",{className:"form-check",children:[c("input",{className:"form-check-input",type:"checkbox",id:"rememberAdmin",checked:k.admin,onChange:T=>y(O=>({...O,admin:T.target.checked}))}),c("label",{className:"form-check-label small text-muted",htmlFor:"rememberAdmin",children:"ifremi hatrla"})]})}),c("button",{type:"submit",className:"w-100 btn btn-primary rounded-pill py-3 fw-bold shadow-sm",disabled:E,style:{background:"linear-gradient(135deg, #0A66C2, #2ECC71)",border:"none",transition:"all 0.3s ease"},children:E?m("span",{children:[c("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Giri yaplyor..."]}):"Giri Yap"})]})]}),m("div",{className:`tab-pane fade ${t==="company"?"show active":""}`,children:[c("h2",{className:"h4 text-center mb-4 fw-bold text-dark",children:"Firma Girii"}),m("form",{onSubmit:te,children:[c("div",{className:"mb-3",children:m("div",{className:"input-group position-relative",children:[c("span",{className:"input-group-text bg-light border-0 rounded-start-pill",style:{paddingLeft:"20px"},children:c("i",{className:"bi bi-building text-muted"})}),c("input",{type:"text",className:"form-control border-0 rounded-end-pill ps-3",placeholder:"Firma ID'nizi girin",value:s,onChange:T=>o(T.target.value),style:{backgroundColor:"#f8f9fa"}})]})}),c("div",{className:"mb-4",children:m("div",{className:"input-group position-relative",children:[c("span",{className:"input-group-text bg-light border-0 rounded-start-pill",style:{paddingLeft:"20px"},children:c("i",{className:"bi bi-telephone text-muted"})}),c("input",{type:"tel",className:"form-control border-0 rounded-end-pill ps-3",placeholder:"Telefon numaranz girin",value:l,onChange:T=>A(T.target.value),style:{backgroundColor:"#f8f9fa"}})]})}),c("div",{className:"mb-3",children:m("div",{className:"form-check",children:[c("input",{className:"form-check-input",type:"checkbox",id:"rememberCompany",checked:k.company,onChange:T=>y(O=>({...O,company:T.target.checked}))}),c("label",{className:"form-check-label small text-muted",htmlFor:"rememberCompany",children:"ifremi hatrla"})]})}),c("button",{type:"submit",className:"w-100 btn btn-primary rounded-pill py-3 fw-bold shadow-sm",disabled:E,style:{background:"linear-gradient(135deg, #0A66C2, #2ECC71)",border:"none",transition:"all 0.3s ease"},children:E?m("span",{children:[c("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Giri yaplyor..."]}):"Firma Girii Yap"}),c("div",{className:"mt-4 text-center small text-muted px-3",children:"Firma olarak giri yapmak iin firma ID'niz, telefon numaranz, kullanc adnz ve ifrenizi kullanacaksnz."})]})]}),m("div",{className:`tab-pane fade ${t==="site"?"show active":""}`,children:[c("h2",{className:"h4 text-center mb-4 fw-bold text-dark",children:"Site Girii"}),m("form",{onSubmit:G,children:[c("div",{className:"mb-3",children:m("div",{className:"input-group position-relative",children:[c("span",{className:"input-group-text bg-light border-0 rounded-start-pill",style:{paddingLeft:"20px"},children:c("i",{className:"bi bi-geo-alt text-muted"})}),c("input",{type:"text",className:"form-control border-0 rounded-end-pill ps-3",placeholder:"Site ID'nizi girin",value:u,onChange:T=>d(T.target.value),style:{backgroundColor:"#f8f9fa"}})]})}),c("div",{className:"mb-4",children:m("div",{className:"input-group position-relative",children:[c("span",{className:"input-group-text bg-light border-0 rounded-start-pill",style:{paddingLeft:"20px"},children:c("i",{className:"bi bi-telephone text-muted"})}),c("input",{type:"tel",className:"form-control border-0 rounded-end-pill ps-3",placeholder:"Telefon numaranz girin",value:h,onChange:T=>f(T.target.value),style:{backgroundColor:"#f8f9fa"}})]})}),c("div",{className:"mb-3",children:m("div",{className:"form-check",children:[c("input",{className:"form-check-input",type:"checkbox",id:"rememberSite",checked:k.site,onChange:T=>y(O=>({...O,site:T.target.checked}))}),c("label",{className:"form-check-label small text-muted",htmlFor:"rememberSite",children:"ifremi hatrla"})]})}),c("button",{type:"submit",className:"w-100 btn btn-primary rounded-pill py-3 fw-bold shadow-sm",disabled:E,style:{background:"linear-gradient(135deg, #0A66C2, #2ECC71)",border:"none",transition:"all 0.3s ease"},children:E?m("span",{children:[c("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Giri yaplyor..."]}):"Site Girii Yap"}),c("div",{className:"mt-4 text-center small text-muted px-3",children:"Site olarak giri yapmak iin site ID'niz, telefon numaranz, kullanc adnz ve ifrenizi kullanacaksnz."})]})]}),m("div",{className:`tab-pane fade ${t==="personnel"?"show active":""}`,children:[c("h2",{className:"h4 text-center mb-4 fw-bold text-dark",children:"Personel Girii"}),m("form",{onSubmit:ue,children:[c("div",{className:"mb-3",children:m("div",{className:"input-group position-relative",children:[c("span",{className:"input-group-text bg-light border-0 rounded-start-pill",style:{paddingLeft:"20px"},children:c("i",{className:"bi bi-person text-muted"})}),c("input",{type:"text",className:"form-control border-0 rounded-end-pill ps-3",placeholder:"Kullanc adnz girin",value:p,onChange:T=>g(T.target.value),disabled:E,style:{backgroundColor:"#f8f9fa"}})]})}),c("div",{className:"mb-4",children:m("div",{className:"input-group position-relative",children:[c("span",{className:"input-group-text bg-light border-0 rounded-start-pill",style:{paddingLeft:"20px"},children:c("i",{className:"bi bi-lock text-muted"})}),c("input",{type:P?"text":"password",className:"form-control border-0 rounded-end-pill ps-3 pe-5",placeholder:"ifrenizi girin",value:v,onChange:T=>C(T.target.value),disabled:E,style:{backgroundColor:"#f8f9fa"}}),c("button",{type:"button",className:"btn btn-link position-absolute end-0 top-50 translate-middle-y me-3 p-0",onClick:()=>x(!P),style:{border:"none",background:"none",color:"#6c757d",zIndex:10},children:c("i",{className:`bi ${P?"bi-eye-slash":"bi-eye"}`})})]})}),c("div",{className:"mb-3",children:m("div",{className:"form-check",children:[c("input",{className:"form-check-input",type:"checkbox",id:"rememberPersonnel",checked:k.personnel,onChange:T=>y(O=>({...O,personnel:T.target.checked}))}),c("label",{className:"form-check-label small text-muted",htmlFor:"rememberPersonnel",children:"ifremi hatrla"})]})}),c("button",{type:"submit",className:"w-100 btn btn-primary rounded-pill py-3 fw-bold shadow-sm",disabled:E,style:{background:"linear-gradient(135deg, #0A66C2, #2ECC71)",border:"none",transition:"all 0.3s ease"},children:E?m("span",{children:[c("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Giri yaplyor..."]}):"Personel Girii Yap"})]})]})]})]})}),c("div",{className:"text-center mt-4",children:m("a",{href:"/",className:"text-muted small text-decoration-none",children:[c("i",{className:"bi bi-arrow-left me-1"}),"Giri sayfasna geri dn"]})})]})]})})})};function L0(t){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L0(t)}function Sq(t,e){if(L0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(L0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kq(t){var e=Sq(t,"string");return L0(e)=="symbol"?e:e+""}function ut(t,e,r){return(e=kq(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wb,pk;function Tq(){if(pk)return Wb;pk=1;var t=function(r,n,i,a,s,o,l,A){if(!r){var u;if(n===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,a,s,o,l,A],h=0;u=new Error(n.replace(/%s/g,function(){return d[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return Wb=t,Wb}var Iq=Tq(),Mi=JD(Iq),_r=D.createContext(null);function Fq(){Mi(!!D.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=D.useContext(_r);return Mi(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function Pq(t,e,r){return Object.keys(t).reduce(function(i,a){return e(i,t[a],a)},r)}function Lq(t,e){Object.keys(t).forEach(r=>e(t[r],r))}function Dq(t,e,r,n){var i={},a=(s,o)=>{var l=r[o];l!==e[o]&&(i[o]=l,s(n,l))};return Lq(t,a),i}function Rq(t,e,r){var n=Pq(r,function(a,s,o){return typeof t[o]=="function"&&a.push(google.maps.event.addListener(e,s,t[o])),a},[]);return n}function Uq(t){google.maps.event.removeListener(t)}function Rr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(Uq)}function Ir(t){var{updaterMap:e,eventMap:r,prevProps:n,nextProps:i,instance:a}=t,s=Rq(i,a,r);return Dq(e,n,i,a),s}var gk={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},vk={extraMapTypes(t,e){e.forEach(function(n,i){t.mapTypes.set(String(i),n)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function Oq(t){var{children:e,options:r,id:n,mapContainerStyle:i,mapContainerClassName:a,center:s,onClick:o,onDblClick:l,onDrag:A,onDragEnd:u,onDragStart:d,onMouseMove:h,onMouseOut:f,onMouseOver:p,onMouseDown:g,onMouseUp:v,onRightClick:C,onCenterChanged:I,onLoad:F,onUnmount:E}=t,[R,L]=D.useState(null),N=D.useRef(null),[P,x]=D.useState(null),[k,y]=D.useState(null),[S,_]=D.useState(null),[M,K]=D.useState(null),[z,ae]=D.useState(null),[te,G]=D.useState(null),[ue,de]=D.useState(null),[T,O]=D.useState(null),[V,Q]=D.useState(null),[X,ie]=D.useState(null),[ee,Z]=D.useState(null),[re,ce]=D.useState(null);return D.useEffect(()=>{r&&R!==null&&R.setOptions(r)},[R,r]),D.useEffect(()=>{R!==null&&typeof s<"u"&&R.setCenter(s)},[R,s]),D.useEffect(()=>{R&&l&&(k!==null&&google.maps.event.removeListener(k),y(google.maps.event.addListener(R,"dblclick",l)))},[l]),D.useEffect(()=>{R&&u&&(S!==null&&google.maps.event.removeListener(S),_(google.maps.event.addListener(R,"dragend",u)))},[u]),D.useEffect(()=>{R&&d&&(M!==null&&google.maps.event.removeListener(M),K(google.maps.event.addListener(R,"dragstart",d)))},[d]),D.useEffect(()=>{R&&g&&(z!==null&&google.maps.event.removeListener(z),ae(google.maps.event.addListener(R,"mousedown",g)))},[g]),D.useEffect(()=>{R&&h&&(te!==null&&google.maps.event.removeListener(te),G(google.maps.event.addListener(R,"mousemove",h)))},[h]),D.useEffect(()=>{R&&f&&(ue!==null&&google.maps.event.removeListener(ue),de(google.maps.event.addListener(R,"mouseout",f)))},[f]),D.useEffect(()=>{R&&p&&(T!==null&&google.maps.event.removeListener(T),O(google.maps.event.addListener(R,"mouseover",p)))},[p]),D.useEffect(()=>{R&&v&&(V!==null&&google.maps.event.removeListener(V),Q(google.maps.event.addListener(R,"mouseup",v)))},[v]),D.useEffect(()=>{R&&C&&(X!==null&&google.maps.event.removeListener(X),ie(google.maps.event.addListener(R,"rightclick",C)))},[C]),D.useEffect(()=>{R&&o&&(ee!==null&&google.maps.event.removeListener(ee),Z(google.maps.event.addListener(R,"click",o)))},[o]),D.useEffect(()=>{R&&A&&(re!==null&&google.maps.event.removeListener(re),ce(google.maps.event.addListener(R,"drag",A)))},[A]),D.useEffect(()=>{R&&I&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(R,"center_changed",I)))},[o]),D.useEffect(()=>{var Y=N.current===null?null:new google.maps.Map(N.current,r);return L(Y),Y!==null&&F&&F(Y),()=>{Y!==null&&E&&E(Y)}},[]),c("div",{id:n,ref:N,style:i,className:a,children:c(_r.Provider,{value:R,children:R!==null?e:null})})}D.memo(Oq);class LE extends D.PureComponent{constructor(){super(...arguments),ut(this,"state",{map:null}),ut(this,"registeredEvents",[]),ut(this,"mapRef",null),ut(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),ut(this,"panTo",e=>{var r=this.getInstance();r&&r.panTo(e)}),ut(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),ut(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=Ir({updaterMap:vk,eventMap:gk,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:vk,eventMap:gk,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),Rr(this.registeredEvents))}render(){return c("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:c(_r.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function wk(t,e,r,n,i,a,s){try{var o=t[a](s),l=o.value}catch(A){return void r(A)}o.done?e(l):Promise.resolve(l).then(n,i)}function ZD(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function s(l){wk(a,n,i,s,o,"next",l)}function o(l){wk(a,n,i,s,o,"throw",l)}s(void 0)})}}function eR(t){var{googleMapsApiKey:e,googleMapsClientId:r,version:n="weekly",language:i,region:a,libraries:s,channel:o,mapIds:l,authReferrerPolicy:A,apiUrl:u="https://maps.googleapis.com"}=t,d=[];return Mi(e&&r||!(e&&r),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?d.push("key=".concat(e)):r&&d.push("client=".concat(r)),n&&d.push("v=".concat(n)),i&&d.push("language=".concat(i)),a&&d.push("region=".concat(a)),s&&s.length&&d.push("libraries=".concat(s.sort().join(","))),o&&d.push("channel=".concat(o)),l&&l.length&&d.push("map_ids=".concat(l.join(","))),A&&d.push("auth_referrer_policy=".concat(A)),d.push("loading=async"),d.push("callback=initMap"),"".concat(u,"/maps/api/js?").concat(d.join("&"))}var vu=typeof document<"u";function tR(t){var{url:e,id:r,nonce:n}=t;return vu?new Promise(function(a,s){var o=document.getElementById(r),l=window;if(o){var A=o.getAttribute("data-state");if(o.src===e&&A!=="error"){if(A==="ready")return a(r);var u=l.initMap,d=o.onerror;l.initMap=function(){u&&u(),a(r)},o.onerror=function(f){d&&d(f),s(f)};return}else o.remove()}var h=document.createElement("script");h.type="text/javascript",h.src=e,h.id=r,h.async=!0,h.nonce=n||"",h.onerror=function(p){h.setAttribute("data-state","error"),s(p)},l.initMap=function(){h.setAttribute("data-state","ready"),a(r)},document.head.appendChild(h)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function bk(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function rR(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,a){return bk(i)||Reflect.apply(e,t,[i,a]),i};var r=t.appendChild.bind(t);t.appendChild=function(i){return bk(i)||Reflect.apply(r,t,[i]),i}}}var lm=!1;function nR(){return c("div",{children:"Loading..."})}var Y2={id:"script-loader",version:"weekly"};class Rw extends D.PureComponent{constructor(){super(...arguments),ut(this,"check",null),ut(this,"state",{loaded:!1}),ut(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),ut(this,"isCleaningUp",ZD(function*(){function e(r){if(!lm)r();else if(vu)var n=window.setInterval(function(){lm||(window.clearInterval(n),r())},1)}return new Promise(e)})),ut(this,"cleanup",()=>{lm=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(n){return typeof n.src=="string"&&n.src.includes("maps.googleapis")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(n){return n.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(n){return n.innerText!==void 0&&n.innerText.length>0&&n.innerText.includes(".gm-")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)})}),ut(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&rR(),Mi(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:eR(this.props)};tR(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(r=>{this.props.onError&&this.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),ut(this,"getRef",e=>{this.check=e})}componentDidMount(){if(vu){if(window.google&&window.google.maps&&!lm){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(r){console.error("Error at injecting script after cleaning up: ",r)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),vu&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(vu){this.cleanup();var e=()=>{this.check||(delete window.google,lm=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return m(kr,{children:[c("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||c(nR,{})]})}}ut(Rw,"defaultProps",Y2);function Mq(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}function DE(t,e){if(t==null)return{};var r,n,i=Mq(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}var yk;function Qq(t){var{id:e=Y2.id,version:r=Y2.version,nonce:n,googleMapsApiKey:i,googleMapsClientId:a,language:s,region:o,libraries:l,preventGoogleFontsLoading:A,channel:u,mapIds:d,authReferrerPolicy:h,apiUrl:f="https://maps.googleapis.com"}=t,p=D.useRef(!1),[g,v]=D.useState(!1),[C,I]=D.useState(void 0);D.useEffect(function(){return p.current=!0,()=>{p.current=!1}},[]),D.useEffect(function(){vu&&A&&rR()},[A]),D.useEffect(function(){g&&Mi(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[g]);var F=eR({version:r,googleMapsApiKey:i,googleMapsClientId:a,language:s,region:o,libraries:l,channel:u,mapIds:d,authReferrerPolicy:h,apiUrl:f});D.useEffect(function(){if(!vu)return;function L(){p.current&&(v(!0),yk=F)}if(window.google&&window.google.maps&&yk===F){L();return}tR({id:e,url:F,nonce:n}).then(L).catch(function(P){p.current&&I(P),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(a||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(P)})},[e,F,n]);var E=D.useRef(void 0);return D.useEffect(function(){E.current&&l!==E.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),E.current=l},[l]),{isLoaded:g,loadError:C,url:F}}var Hq=["loadingElement","onLoad","onError","onUnmount","children"],Vq=c(nR,{});function Kq(t){var{loadingElement:e,onLoad:r,onError:n,onUnmount:i,children:a}=t,s=DE(t,Hq),{isLoaded:o,loadError:l}=Qq(s);return D.useEffect(function(){o&&typeof r=="function"&&r()},[o,r]),D.useEffect(function(){l&&typeof n=="function"&&n(l)},[l,n]),D.useEffect(function(){return()=>{i&&i()}},[i]),o?a:e||Vq}D.memo(Kq);var xk;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(xk||(xk={}));function _k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Av(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_k(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ek={},Bk={options(t,e){t.setOptions(e)}};function jq(t){var{options:e,onLoad:r,onUnmount:n}=t,i=D.useContext(_r),[a,s]=D.useState(null);return D.useEffect(()=>{a!==null&&a.setMap(i)},[i]),D.useEffect(()=>{e&&a!==null&&a.setOptions(e)},[a,e]),D.useEffect(()=>{var o=new google.maps.TrafficLayer(Av(Av({},e),{},{map:i}));return s(o),r&&r(o),()=>{a!==null&&(n&&n(a),a.setMap(null))}},[]),null}D.memo(jq);class zq extends D.PureComponent{constructor(){super(...arguments),ut(this,"state",{trafficLayer:null}),ut(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),ut(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Av(Av({},this.props.options),{},{map:this.context}));this.registeredEvents=Ir({updaterMap:Bk,eventMap:Ek,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:Bk,eventMap:Ek,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Rr(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}ut(zq,"contextType",_r);function $q(t){var{onLoad:e,onUnmount:r}=t,n=D.useContext(_r),[i,a]=D.useState(null);return D.useEffect(()=>{i!==null&&i.setMap(n)},[n]),D.useEffect(()=>{var s=new google.maps.BicyclingLayer;return a(s),s.setMap(n),e&&e(s),()=>{s!==null&&(r&&r(s),s.setMap(null))}},[]),null}D.memo($q);class Gq extends D.PureComponent{constructor(){super(...arguments),ut(this,"state",{bicyclingLayer:null}),ut(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}ut(Gq,"contextType",_r);function Wq(t){var{onLoad:e,onUnmount:r}=t,n=D.useContext(_r),[i,a]=D.useState(null);return D.useEffect(()=>{i!==null&&i.setMap(n)},[n]),D.useEffect(()=>{var s=new google.maps.TransitLayer;return a(s),s.setMap(n),e&&e(s),()=>{i!==null&&(r&&r(i),i.setMap(null))}},[]),null}D.memo(Wq);class qq extends D.PureComponent{constructor(){super(...arguments),ut(this,"state",{transitLayer:null}),ut(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}ut(qq,"contextType",_r);function Ck(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ck(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ck(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Nk={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Sk={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function Xq(t){var{options:e,drawingMode:r,onCircleComplete:n,onMarkerComplete:i,onOverlayComplete:a,onPolygonComplete:s,onPolylineComplete:o,onRectangleComplete:l,onLoad:A,onUnmount:u}=t,d=D.useContext(_r),[h,f]=D.useState(null),[p,g]=D.useState(null),[v,C]=D.useState(null),[I,F]=D.useState(null),[E,R]=D.useState(null),[L,N]=D.useState(null),[P,x]=D.useState(null);return D.useEffect(()=>{h!==null&&h.setMap(d)},[d]),D.useEffect(()=>{e&&h!==null&&h.setOptions(e)},[h,e]),D.useEffect(()=>{h!==null&&h.setDrawingMode(r??null)},[h,r]),D.useEffect(()=>{h&&n&&(p!==null&&google.maps.event.removeListener(p),g(google.maps.event.addListener(h,"circlecomplete",n)))},[h,n]),D.useEffect(()=>{h&&i&&(v!==null&&google.maps.event.removeListener(v),C(google.maps.event.addListener(h,"markercomplete",i)))},[h,i]),D.useEffect(()=>{h&&a&&(I!==null&&google.maps.event.removeListener(I),F(google.maps.event.addListener(h,"overlaycomplete",a)))},[h,a]),D.useEffect(()=>{h&&s&&(E!==null&&google.maps.event.removeListener(E),R(google.maps.event.addListener(h,"polygoncomplete",s)))},[h,s]),D.useEffect(()=>{h&&o&&(L!==null&&google.maps.event.removeListener(L),N(google.maps.event.addListener(h,"polylinecomplete",o)))},[h,o]),D.useEffect(()=>{h&&l&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(h,"rectanglecomplete",l)))},[h,l]),D.useEffect(()=>{Mi(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var k=new google.maps.drawing.DrawingManager(uv(uv({},e),{},{map:d}));return r&&k.setDrawingMode(r),n&&g(google.maps.event.addListener(k,"circlecomplete",n)),i&&C(google.maps.event.addListener(k,"markercomplete",i)),a&&F(google.maps.event.addListener(k,"overlaycomplete",a)),s&&R(google.maps.event.addListener(k,"polygoncomplete",s)),o&&N(google.maps.event.addListener(k,"polylinecomplete",o)),l&&x(google.maps.event.addListener(k,"rectanglecomplete",l)),f(k),A&&A(k),()=>{h!==null&&(p&&google.maps.event.removeListener(p),v&&google.maps.event.removeListener(v),I&&google.maps.event.removeListener(I),E&&google.maps.event.removeListener(E),L&&google.maps.event.removeListener(L),P&&google.maps.event.removeListener(P),u&&u(h),h.setMap(null))}},[]),null}D.memo(Xq);class Yq extends D.PureComponent{constructor(e){super(e),ut(this,"registeredEvents",[]),ut(this,"state",{drawingManager:null}),ut(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Mi(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(uv(uv({},this.props.options),{},{map:this.context}));this.registeredEvents=Ir({updaterMap:Sk,eventMap:Nk,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:Sk,eventMap:Nk,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Rr(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}ut(Yq,"contextType",_r);function kk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Tk={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Ik={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},dv={};function Jq(t){var{position:e,options:r,clusterer:n,noClustererRedraw:i,children:a,draggable:s,visible:o,animation:l,clickable:A,cursor:u,icon:d,label:h,opacity:f,shape:p,title:g,zIndex:v,onClick:C,onDblClick:I,onDrag:F,onDragEnd:E,onDragStart:R,onMouseOut:L,onMouseOver:N,onMouseUp:P,onMouseDown:x,onRightClick:k,onClickableChanged:y,onCursorChanged:S,onAnimationChanged:_,onDraggableChanged:M,onFlatChanged:K,onIconChanged:z,onPositionChanged:ae,onShapeChanged:te,onTitleChanged:G,onVisibleChanged:ue,onZindexChanged:de,onLoad:T,onUnmount:O}=t,V=D.useContext(_r),[Q,X]=D.useState(null),[ie,ee]=D.useState(null),[Z,re]=D.useState(null),[ce,Y]=D.useState(null),[ge,q]=D.useState(null),[W,xe]=D.useState(null),[ye,Ue]=D.useState(null),[Me,$e]=D.useState(null),[fe,Oe]=D.useState(null),[Re,He]=D.useState(null),[pe,Le]=D.useState(null),[lt,Ae]=D.useState(null),[Ne,ve]=D.useState(null),[Ce,Ke]=D.useState(null),[Ve,ot]=D.useState(null),[pt,Bt]=D.useState(null),[Be,ze]=D.useState(null),[st,St]=D.useState(null),[Ot,Et]=D.useState(null),[dt,jt]=D.useState(null),[sr,qt]=D.useState(null),[Ur,en]=D.useState(null);D.useEffect(()=>{Q!==null&&Q.setMap(V)},[V]),D.useEffect(()=>{typeof r<"u"&&Q!==null&&Q.setOptions(r)},[Q,r]),D.useEffect(()=>{typeof s<"u"&&Q!==null&&Q.setDraggable(s)},[Q,s]),D.useEffect(()=>{e&&Q!==null&&Q.setPosition(e)},[Q,e]),D.useEffect(()=>{typeof o<"u"&&Q!==null&&Q.setVisible(o)},[Q,o]),D.useEffect(()=>{Q==null||Q.setAnimation(l)},[Q,l]),D.useEffect(()=>{Q&&A!==void 0&&Q.setClickable(A)},[Q,A]),D.useEffect(()=>{Q&&u!==void 0&&Q.setCursor(u)},[Q,u]),D.useEffect(()=>{Q&&d!==void 0&&Q.setIcon(d)},[Q,d]),D.useEffect(()=>{Q&&h!==void 0&&Q.setLabel(h)},[Q,h]),D.useEffect(()=>{Q&&f!==void 0&&Q.setOpacity(f)},[Q,f]),D.useEffect(()=>{Q&&p!==void 0&&Q.setShape(p)},[Q,p]),D.useEffect(()=>{Q&&g!==void 0&&Q.setTitle(g)},[Q,g]),D.useEffect(()=>{Q&&v!==void 0&&Q.setZIndex(v)},[Q,v]),D.useEffect(()=>{Q&&I&&(ie!==null&&google.maps.event.removeListener(ie),ee(google.maps.event.addListener(Q,"dblclick",I)))},[I]),D.useEffect(()=>{Q&&E&&(Z!==null&&google.maps.event.removeListener(Z),re(google.maps.event.addListener(Q,"dragend",E)))},[E]),D.useEffect(()=>{Q&&R&&(ce!==null&&google.maps.event.removeListener(ce),Y(google.maps.event.addListener(Q,"dragstart",R)))},[R]),D.useEffect(()=>{Q&&x&&(ge!==null&&google.maps.event.removeListener(ge),q(google.maps.event.addListener(Q,"mousedown",x)))},[x]),D.useEffect(()=>{Q&&L&&(W!==null&&google.maps.event.removeListener(W),xe(google.maps.event.addListener(Q,"mouseout",L)))},[L]),D.useEffect(()=>{Q&&N&&(ye!==null&&google.maps.event.removeListener(ye),Ue(google.maps.event.addListener(Q,"mouseover",N)))},[N]),D.useEffect(()=>{Q&&P&&(Me!==null&&google.maps.event.removeListener(Me),$e(google.maps.event.addListener(Q,"mouseup",P)))},[P]),D.useEffect(()=>{Q&&k&&(fe!==null&&google.maps.event.removeListener(fe),Oe(google.maps.event.addListener(Q,"rightclick",k)))},[k]),D.useEffect(()=>{Q&&C&&(Re!==null&&google.maps.event.removeListener(Re),He(google.maps.event.addListener(Q,"click",C)))},[C]),D.useEffect(()=>{Q&&F&&(pe!==null&&google.maps.event.removeListener(pe),Le(google.maps.event.addListener(Q,"drag",F)))},[F]),D.useEffect(()=>{Q&&y&&(lt!==null&&google.maps.event.removeListener(lt),Ae(google.maps.event.addListener(Q,"clickable_changed",y)))},[y]),D.useEffect(()=>{Q&&S&&(Ne!==null&&google.maps.event.removeListener(Ne),ve(google.maps.event.addListener(Q,"cursor_changed",S)))},[S]),D.useEffect(()=>{Q&&_&&(Ce!==null&&google.maps.event.removeListener(Ce),Ke(google.maps.event.addListener(Q,"animation_changed",_)))},[_]),D.useEffect(()=>{Q&&M&&(Ve!==null&&google.maps.event.removeListener(Ve),ot(google.maps.event.addListener(Q,"draggable_changed",M)))},[M]),D.useEffect(()=>{Q&&K&&(pt!==null&&google.maps.event.removeListener(pt),Bt(google.maps.event.addListener(Q,"flat_changed",K)))},[K]),D.useEffect(()=>{Q&&z&&(Be!==null&&google.maps.event.removeListener(Be),ze(google.maps.event.addListener(Q,"icon_changed",z)))},[z]),D.useEffect(()=>{Q&&ae&&(st!==null&&google.maps.event.removeListener(st),St(google.maps.event.addListener(Q,"position_changed",ae)))},[ae]),D.useEffect(()=>{Q&&te&&(Ot!==null&&google.maps.event.removeListener(Ot),Et(google.maps.event.addListener(Q,"shape_changed",te)))},[te]),D.useEffect(()=>{Q&&G&&(dt!==null&&google.maps.event.removeListener(dt),jt(google.maps.event.addListener(Q,"title_changed",G)))},[G]),D.useEffect(()=>{Q&&ue&&(sr!==null&&google.maps.event.removeListener(sr),qt(google.maps.event.addListener(Q,"visible_changed",ue)))},[ue]),D.useEffect(()=>{Q&&de&&(Ur!==null&&google.maps.event.removeListener(Ur),en(google.maps.event.addListener(Q,"zindex_changed",de)))},[de]),D.useEffect(()=>{var Pn=kh(kh(kh({},r||dv),n?dv:{map:V}),{},{position:e}),Mt=new google.maps.Marker(Pn);return n?n.addMarker(Mt,!!i):Mt.setMap(V),e&&Mt.setPosition(e),typeof o<"u"&&Mt.setVisible(o),typeof s<"u"&&Mt.setDraggable(s),typeof A<"u"&&Mt.setClickable(A),typeof u=="string"&&Mt.setCursor(u),d&&Mt.setIcon(d),typeof h<"u"&&Mt.setLabel(h),typeof f<"u"&&Mt.setOpacity(f),p&&Mt.setShape(p),typeof g=="string"&&Mt.setTitle(g),typeof v=="number"&&Mt.setZIndex(v),I&&ee(google.maps.event.addListener(Mt,"dblclick",I)),E&&re(google.maps.event.addListener(Mt,"dragend",E)),R&&Y(google.maps.event.addListener(Mt,"dragstart",R)),x&&q(google.maps.event.addListener(Mt,"mousedown",x)),L&&xe(google.maps.event.addListener(Mt,"mouseout",L)),N&&Ue(google.maps.event.addListener(Mt,"mouseover",N)),P&&$e(google.maps.event.addListener(Mt,"mouseup",P)),k&&Oe(google.maps.event.addListener(Mt,"rightclick",k)),C&&He(google.maps.event.addListener(Mt,"click",C)),F&&Le(google.maps.event.addListener(Mt,"drag",F)),y&&Ae(google.maps.event.addListener(Mt,"clickable_changed",y)),S&&ve(google.maps.event.addListener(Mt,"cursor_changed",S)),_&&Ke(google.maps.event.addListener(Mt,"animation_changed",_)),M&&ot(google.maps.event.addListener(Mt,"draggable_changed",M)),K&&Bt(google.maps.event.addListener(Mt,"flat_changed",K)),z&&ze(google.maps.event.addListener(Mt,"icon_changed",z)),ae&&St(google.maps.event.addListener(Mt,"position_changed",ae)),te&&Et(google.maps.event.addListener(Mt,"shape_changed",te)),G&&jt(google.maps.event.addListener(Mt,"title_changed",G)),ue&&qt(google.maps.event.addListener(Mt,"visible_changed",ue)),de&&en(google.maps.event.addListener(Mt,"zindex_changed",de)),X(Mt),T&&T(Mt),()=>{ie!==null&&google.maps.event.removeListener(ie),Z!==null&&google.maps.event.removeListener(Z),ce!==null&&google.maps.event.removeListener(ce),ge!==null&&google.maps.event.removeListener(ge),W!==null&&google.maps.event.removeListener(W),ye!==null&&google.maps.event.removeListener(ye),Me!==null&&google.maps.event.removeListener(Me),fe!==null&&google.maps.event.removeListener(fe),Re!==null&&google.maps.event.removeListener(Re),lt!==null&&google.maps.event.removeListener(lt),Ne!==null&&google.maps.event.removeListener(Ne),Ce!==null&&google.maps.event.removeListener(Ce),Ve!==null&&google.maps.event.removeListener(Ve),pt!==null&&google.maps.event.removeListener(pt),Be!==null&&google.maps.event.removeListener(Be),st!==null&&google.maps.event.removeListener(st),dt!==null&&google.maps.event.removeListener(dt),sr!==null&&google.maps.event.removeListener(sr),Ur!==null&&google.maps.event.removeListener(Ur),O&&O(Mt),n?n.removeMarker(Mt,!!i):Mt&&Mt.setMap(null)}},[]);var Qt=D.useMemo(()=>a?D.Children.map(a,Pn=>{if(!D.isValidElement(Pn))return Pn;var Mt=Pn;return D.cloneElement(Mt,{anchor:Q})}):null,[a,Q]);return c(kr,{children:Qt})||null}D.memo(Jq);class of extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[])}componentDidMount(){var e=this;return ZD(function*(){var r=kh(kh(kh({},e.props.options||dv),e.props.clusterer?dv:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(r),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Ir({updaterMap:Ik,eventMap:Tk,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:Ik,eventMap:Tk,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Rr(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?D.Children.map(this.props.children,r=>{if(!D.isValidElement(r))return r;var n=r;return D.cloneElement(n,{anchor:this.marker})}):null;return e||null}}ut(of,"contextType",_r);var Zq=function(){function t(e,r){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=r,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var r=this.cluster.getClusterer();if(google.maps.event.trigger(r,"click",this.cluster),google.maps.event.trigger(r,"clusterclick",this.cluster),r.getZoomOnClick()){var n=r.getMaxZoom(),i=this.cluster.getBounds(),a=r.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(i),this.timeOut=window.setTimeout(function(){var s=r.getMap();if(s!==null){"fitBounds"in s&&s.fitBounds(i);var o=s.getZoom()||0;n!==null&&o>n&&s.setZoom(n+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var r=this.getMap();r!==null&&(this.boundsChangedListener=google.maps.event.addListener(r,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,r,n,i,a,s;if(this.div&&this.center){var o=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,l=this.backgroundPosition.split(" "),A=parseInt(((e=l[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),u=parseInt(((r=l[1])===null||r===void 0?void 0:r.replace(/^\s+|\s+$/g,""))||"0",10),d=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(d!==null?"".concat(d.y,"px"):"0","; left: ").concat(d!==null?"".concat(d.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var h=document.createElement("img");h.alt=o,h.src=this.url,h.width=this.width,h.height=this.height,h.setAttribute("style","position: absolute; top: ".concat(u,"px; left: ").concat(A,"px")),this.cluster.getClusterer().enableRetinaIcons||(h.style.clip="rect(-".concat(u,"px, -").concat(A+this.width,"px, -").concat(u+this.height,", -").concat(A,")"));var f=document.createElement("div");f.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((n=this.sums)===null||n===void 0)&&n.text&&(f.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((a=this.sums)===null||a===void 0)&&a.html&&(f.innerHTML="".concat((s=this.sums)===null||s===void 0?void 0:s.html)),this.div.innerHTML="",this.div.appendChild(h),this.div.appendChild(f),this.div.title=o,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var r=this.cluster.getClusterer().getStyles(),n=r[Math.min(r.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var r=this.getProjection().fromLatLngToDivPixel(e);return r!==null&&(r.x-=this.anchorIcon[1],r.y-=this.anchorIcon[0]),r},t}(),eX=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Zq(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),r=this.getMarkers(),n=0,i=r;n<i.length;n++){var a=i[n],s=a.getPosition();s&&e.extend(s)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var r;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var n=e.getPosition();if(n){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+n.lat())/i,(this.center.lng()*(i-1)+n.lng())/i),this.calculateBounds()}}}else{var n=e.getPosition();n&&(this.center=n,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var a=this.markers.length,s=this.markerClusterer.getMaxZoom(),o=(r=this.map)===null||r===void 0?void 0:r.getZoom();if(s!==null&&typeof o<"u"&&o>s)e.getMap()!==this.map&&e.setMap(this.map);else if(a<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(a===this.minClusterSize)for(var l=0,A=this.markers;l<A.length;l++){var u=A[l];u.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var r=e.getPosition();if(r)return this.bounds.contains(r)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,r=this.markers.length,n=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(n!==null&&typeof i<"u"&&i>n){this.clusterIcon.hide();return}if(r<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var r=0;r<this.markers.length;r++)if(e===this.markers[r])return!0;return!1},t}();function tX(t,e){var r=t.length,n=r.toString().length,i=Math.min(n,e);return{text:r.toString(),index:i,title:""}}var rX=2e3,nX=500,iX="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",aX="png",sX=[53,56,66,78,90],oX="cluster",iR=function(){function t(e,r,n){r===void 0&&(r=[]),n===void 0&&(n={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=n.gridSize||60,this.minClusterSize=n.minimumClusterSize||2,this.maxZoom=n.maxZoom||null,this.styles=n.styles||[],this.title=n.title||"",this.zoomOnClick=!0,n.zoomOnClick!==void 0&&(this.zoomOnClick=n.zoomOnClick),this.averageCenter=!1,n.averageCenter!==void 0&&(this.averageCenter=n.averageCenter),this.ignoreHidden=!1,n.ignoreHidden!==void 0&&(this.ignoreHidden=n.ignoreHidden),this.enableRetinaIcons=!1,n.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=n.enableRetinaIcons),this.imagePath=n.imagePath||iX,this.imageExtension=n.imageExtension||aX,this.imageSizes=n.imageSizes||sX,this.calculator=n.calculator||tX,this.batchSize=n.batchSize||rX,this.batchSizeIE=n.batchSizeIE||nX,this.clusterClass=n.clusterClass||oX,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(r,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,r;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((r=this.getMap())===null||r===void 0?void 0:r.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,r=this.markers;e<r.length;e++){var n=r[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var i=0,a=this.clusters;i<a.length;i++){var s=a[i];s.remove()}this.clusters=[];for(var o=0,l=this.listeners;o<l.length;o++){var A=l[o];google.maps.event.removeListener(A)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),r=new google.maps.LatLngBounds,n=0,i=e;n<i.length;n++){var a=i[n],s=a.getPosition();s&&r.extend(s)}var o=this.getMap();o!==null&&"fitBounds"in o&&o.fitBounds(r)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,r){this.pushMarkerTo(e),r||this.redraw()},t.prototype.addMarkers=function(e,r){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];i&&this.pushMarkerTo(i)}r||this.redraw()},t.prototype.pushMarkerTo=function(e){var r=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){r.ready&&(e.isAdded=!1,r.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var r=-1;if(this.markers.indexOf)r=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){r=n;break}return r===-1?!1:(e.setMap(null),this.markers.splice(r,1),!0)},t.prototype.removeMarker=function(e,r){var n=this.removeMarker_(e);return!r&&n&&this.repaint(),n},t.prototype.removeMarkers=function(e,r){for(var n=!1,i=0,a=e;i<a.length;i++){var s=a[i];n=n||this.removeMarker_(s)}return!r&&n&&this.repaint(),n},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var n=0,i=e;n<i.length;n++){var a=i[n];a.remove()}},0)},t.prototype.getExtendedBounds=function(e){var r=this.getProjection(),n=r.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));n!==null&&(n.x+=this.gridSize,n.y-=this.gridSize);var i=r.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),n!==null){var a=r.fromDivPixelToLatLng(n);a!==null&&e.extend(a)}if(i!==null){var s=r.fromDivPixelToLatLng(i);s!==null&&e.extend(s)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var r=0,n=this.clusters;r<n.length;r++){var i=n[r];i.remove()}this.clusters=[];for(var a=0,s=this.markers;a<s.length;a++){var o=s[a];o.isAdded=!1,e&&o.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,r){var n=6371,i=(r.lat()-e.lat())*Math.PI/180,a=(r.lng()-e.lng())*Math.PI/180,s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(r.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return n*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},t.prototype.isMarkerInBounds=function(e,r){var n=e.getPosition();return n?r.contains(n):!1},t.prototype.addToClosestCluster=function(e){for(var r,n=4e4,i=null,a=0,s=this.clusters;a<s.length;a++){var o=s[a];r=o;var l=r.getCenter(),A=e.getPosition();if(l&&A){var u=this.distanceBetweenPoints(l,A);u<n&&(n=u,i=r)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(r=new eX(this),r.addMarker(e),this.clusters.push(r))},t.prototype.createClusters=function(e){var r=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),i=n!==null&&("getBounds"in n)?n.getBounds():null,a=(n==null?void 0:n.getZoom())||0,s=a>3?new google.maps.LatLngBounds(i==null?void 0:i.getSouthWest(),i==null?void 0:i.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),o=this.getExtendedBounds(s),l=Math.min(e+this.batchSize,this.markers.length),A=e;A<l;A++){var u=this.markers[A];u&&!u.isAdded&&this.isMarkerInBounds(u,o)&&(!this.ignoreHidden||this.ignoreHidden&&u.getVisible())&&this.addToClosestCluster(u)}if(l<this.markers.length)this.timerRefStatic=window.setTimeout(function(){r.createClusters(l)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var d=0,h=this.clusters;d<h.length;d++){var f=h[d];f.updateIcon()}}}},t.prototype.extend=function(e,r){return(function(i){for(var a in i.prototype){var s=a;this.prototype[s]=i.prototype[s]}return this}).apply(e,[r])},t}();function Fk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lX(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ro={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Jr={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},cX={};function AX(t){var{children:e,options:r,averageCenter:n,batchSizeIE:i,calculator:a,clusterClass:s,enableRetinaIcons:o,gridSize:l,ignoreHidden:A,imageExtension:u,imagePath:d,imageSizes:h,maxZoom:f,minimumClusterSize:p,styles:g,title:v,zoomOnClick:C,onClick:I,onClusteringBegin:F,onClusteringEnd:E,onMouseOver:R,onMouseOut:L,onLoad:N,onUnmount:P}=t,[x,k]=D.useState(null),y=D.useContext(_r),[S,_]=D.useState(null),[M,K]=D.useState(null),[z,ae]=D.useState(null),[te,G]=D.useState(null),[ue,de]=D.useState(null);return D.useEffect(()=>{x&&L&&(te!==null&&google.maps.event.removeListener(te),G(google.maps.event.addListener(x,ro.onMouseOut,L)))},[L]),D.useEffect(()=>{x&&R&&(ue!==null&&google.maps.event.removeListener(ue),de(google.maps.event.addListener(x,ro.onMouseOver,R)))},[R]),D.useEffect(()=>{x&&I&&(S!==null&&google.maps.event.removeListener(S),_(google.maps.event.addListener(x,ro.onClick,I)))},[I]),D.useEffect(()=>{x&&F&&(M!==null&&google.maps.event.removeListener(M),K(google.maps.event.addListener(x,ro.onClusteringBegin,F)))},[F]),D.useEffect(()=>{x&&E&&(z!==null&&google.maps.event.removeListener(z),K(google.maps.event.addListener(x,ro.onClusteringEnd,E)))},[E]),D.useEffect(()=>{typeof n<"u"&&x!==null&&Jr.averageCenter(x,n)},[x,n]),D.useEffect(()=>{typeof i<"u"&&x!==null&&Jr.batchSizeIE(x,i)},[x,i]),D.useEffect(()=>{typeof a<"u"&&x!==null&&Jr.calculator(x,a)},[x,a]),D.useEffect(()=>{typeof s<"u"&&x!==null&&Jr.clusterClass(x,s)},[x,s]),D.useEffect(()=>{typeof o<"u"&&x!==null&&Jr.enableRetinaIcons(x,o)},[x,o]),D.useEffect(()=>{typeof l<"u"&&x!==null&&Jr.gridSize(x,l)},[x,l]),D.useEffect(()=>{typeof A<"u"&&x!==null&&Jr.ignoreHidden(x,A)},[x,A]),D.useEffect(()=>{typeof u<"u"&&x!==null&&Jr.imageExtension(x,u)},[x,u]),D.useEffect(()=>{typeof d<"u"&&x!==null&&Jr.imagePath(x,d)},[x,d]),D.useEffect(()=>{typeof h<"u"&&x!==null&&Jr.imageSizes(x,h)},[x,h]),D.useEffect(()=>{typeof f<"u"&&x!==null&&Jr.maxZoom(x,f)},[x,f]),D.useEffect(()=>{typeof p<"u"&&x!==null&&Jr.minimumClusterSize(x,p)},[x,p]),D.useEffect(()=>{typeof g<"u"&&x!==null&&Jr.styles(x,g)},[x,g]),D.useEffect(()=>{typeof v<"u"&&x!==null&&Jr.title(x,v)},[x,v]),D.useEffect(()=>{typeof C<"u"&&x!==null&&Jr.zoomOnClick(x,C)},[x,C]),D.useEffect(()=>{if(y){var T=lX({},r||cX),O=new iR(y,[],T);return n&&Jr.averageCenter(O,n),i&&Jr.batchSizeIE(O,i),a&&Jr.calculator(O,a),s&&Jr.clusterClass(O,s),o&&Jr.enableRetinaIcons(O,o),l&&Jr.gridSize(O,l),A&&Jr.ignoreHidden(O,A),u&&Jr.imageExtension(O,u),d&&Jr.imagePath(O,d),h&&Jr.imageSizes(O,h),f&&Jr.maxZoom(O,f),p&&Jr.minimumClusterSize(O,p),g&&Jr.styles(O,g),v&&Jr.title(O,v),C&&Jr.zoomOnClick(O,C),L&&G(google.maps.event.addListener(O,ro.onMouseOut,L)),R&&de(google.maps.event.addListener(O,ro.onMouseOver,R)),I&&_(google.maps.event.addListener(O,ro.onClick,I)),F&&K(google.maps.event.addListener(O,ro.onClusteringBegin,F)),E&&ae(google.maps.event.addListener(O,ro.onClusteringEnd,E)),k(O),N&&N(O),()=>{te!==null&&google.maps.event.removeListener(te),ue!==null&&google.maps.event.removeListener(ue),S!==null&&google.maps.event.removeListener(S),M!==null&&google.maps.event.removeListener(M),z!==null&&google.maps.event.removeListener(z),P&&P(O)}}},[]),x!==null&&e(x)||null}D.memo(AX);class uX extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{markerClusterer:null}),ut(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new iR(this.context,[],this.props.options);this.registeredEvents=Ir({updaterMap:Jr,eventMap:ro,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:Jr,eventMap:ro,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Rr(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}ut(uX,"contextType",_r);function Pk(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var aR=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,r=function(u){u.returnValue=!1,u.preventDefault&&u.preventDefault(),e.enableEventPropagation||Pk(u)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var n=this.getPanes();if(n!==null&&n[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],s=0,o=a;s<o.length;s++){var l=o[s];this.eventListeners.push(google.maps.event.addListener(this.div,l,Pk))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",r),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var r=this.getMap();if(r instanceof google.maps.Map){var n=0,i=0,a=r.getBounds();a&&!a.contains(this.position)&&r.setCenter(this.position);var s=r.getDiv(),o=s.offsetWidth,l=s.offsetHeight,A=this.pixelOffset.width,u=this.pixelOffset.height,d=this.div.offsetWidth,h=this.div.offsetHeight,f=this.infoBoxClearance.width,p=this.infoBoxClearance.height,g=this.getProjection(),v=g.fromLatLngToContainerPixel(this.position);v!==null&&(v.x<-A+f?n=v.x+A-f:v.x+d+A+f>o&&(n=v.x+d+A+f-o),this.alignBottom?v.y<-u+p+h?i=v.y+u-p-h:v.y+u+p>l&&(i=v.y+u+p-l):v.y<-u+p?i=v.y+u-p:v.y+h+u+p>l&&(i=v.y+h+u+p-l)),n===0&&i===0||r.panBy(n,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.div.style[r]=e[r]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+n*100+')"',this.div.style.filter="alpha(opacity="+n*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var r=this.div.ownerDocument,n=r&&r.defaultView?r.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),r=e.fromLatLngToDivPixel(this.position);r!==null&&(this.div.style.left=r.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(r.y+this.pixelOffset.height)+"px":this.div.style.top=r.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,r){var n=this;r&&(this.position=r.getPosition(),this.moveListener=google.maps.event.addListener(r,"position_changed",function(){var i=r.getPosition();n.setPosition(i)}),this.mapListener=google.maps.event.addListener(r,"map_changed",function(){n.setMap(r.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,r=this.eventListeners;e<r.length;e++){var n=r[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,r){return(function(i){for(var a in i.prototype)Object.prototype.hasOwnProperty.call(this,a)||(this.prototype[a]=i.prototype[a]);return this}).apply(e,[r])},t}(),dX=["position"],hX=["position"];function Lk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lk(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Dk={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Rk={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},fX={};function mX(t){var{children:e,anchor:r,options:n,position:i,zIndex:a,onCloseClick:s,onDomReady:o,onContentChanged:l,onPositionChanged:A,onZindexChanged:u,onLoad:d,onUnmount:h}=t,f=D.useContext(_r),[p,g]=D.useState(null),[v,C]=D.useState(null),[I,F]=D.useState(null),[E,R]=D.useState(null),[L,N]=D.useState(null),[P,x]=D.useState(null),k=D.useRef(null);return D.useEffect(()=>{f&&p!==null&&(p.close(),r?p.open(f,r):p.getPosition()&&p.open(f))},[f,p,r]),D.useEffect(()=>{n&&p!==null&&p.setOptions(n)},[p,n]),D.useEffect(()=>{if(i&&p!==null){var y=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);p.setPosition(y)}},[i]),D.useEffect(()=>{typeof a=="number"&&p!==null&&p.setZIndex(a)},[a]),D.useEffect(()=>{p&&s&&(v!==null&&google.maps.event.removeListener(v),C(google.maps.event.addListener(p,"closeclick",s)))},[s]),D.useEffect(()=>{p&&o&&(I!==null&&google.maps.event.removeListener(I),F(google.maps.event.addListener(p,"domready",o)))},[o]),D.useEffect(()=>{p&&l&&(E!==null&&google.maps.event.removeListener(E),R(google.maps.event.addListener(p,"content_changed",l)))},[l]),D.useEffect(()=>{p&&A&&(L!==null&&google.maps.event.removeListener(L),N(google.maps.event.addListener(p,"position_changed",A)))},[A]),D.useEffect(()=>{p&&u&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(p,"zindex_changed",u)))},[u]),D.useEffect(()=>{if(f){var y=n||fX,{position:S}=y,_=DE(y,dX),M;S&&!(S instanceof google.maps.LatLng)&&(M=new google.maps.LatLng(S.lat,S.lng));var K=new aR(hv(hv({},_),M?{position:M}:{}));k.current=document.createElement("div"),g(K),s&&C(google.maps.event.addListener(K,"closeclick",s)),o&&F(google.maps.event.addListener(K,"domready",o)),l&&R(google.maps.event.addListener(K,"content_changed",l)),A&&N(google.maps.event.addListener(K,"position_changed",A)),u&&x(google.maps.event.addListener(K,"zindex_changed",u)),K.setContent(k.current),r?K.open(f,r):K.getPosition()?K.open(f):Mi(!1,"You must provide either an anchor or a position prop for <InfoBox>."),d&&d(K)}return()=>{p!==null&&(v&&google.maps.event.removeListener(v),E&&google.maps.event.removeListener(E),I&&google.maps.event.removeListener(I),L&&google.maps.event.removeListener(L),P&&google.maps.event.removeListener(P),h&&h(p),p.close())}},[]),k.current?sd.createPortal(D.Children.only(e),k.current):null}D.memo(mX);class pX extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"containerElement",null),ut(this,"state",{infoBox:null}),ut(this,"open",(e,r)=>{r?this.context!==null&&e.open(this.context,r):e.getPosition()?this.context!==null&&e.open(this.context):Mi(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),ut(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:r}=e,n=DE(e,hX),i;r&&!(r instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(r.lat,r.lng));var a=new aR(hv(hv({},n),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Ir({updaterMap:Rk,eventMap:Dk,prevProps:{},nextProps:this.props,instance:a}),this.setState({infoBox:a},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:r}=this.state;r!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:Rk,eventMap:Dk,prevProps:e,nextProps:this.props,instance:r}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:r}=this.state;r!==null&&(e&&e(r),Rr(this.registeredEvents),r.close())}render(){return this.containerElement?sd.createPortal(D.Children.only(this.props.children),this.containerElement):null}}ut(pX,"contextType",_r);var qb,Uk;function gX(){return Uk||(Uk=1,qb=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var s=a[i];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}),qb}var vX=gX(),Ok=JD(vX),Mk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Xb=1,cm=8;class RE{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[r,n]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=n>>4;if(i!==Xb)throw new Error("Got v".concat(i," data when expected v").concat(Xb,"."));var a=Mk[n&15];if(!a)throw new Error("Unrecognized array type.");var[s]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new RE(o,s,a,e)}constructor(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=Mk.indexOf(this.ArrayType),s=e*2*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-o%8)%8;if(a<0)throw new Error("Unexpected typed array class: ".concat(n,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,cm,e),this.coords=new this.ArrayType(this.data,cm+o+l,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(cm+s+o+l),this.ids=new this.IndexArrayType(this.data,cm,e),this.coords=new this.ArrayType(this.data,cm+o+l,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Xb<<4)+a]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=r,n}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return J2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:s,nodeSize:o}=this,l=[0,a.length-1,0],A=[];l.length;){var u=l.pop()||0,d=l.pop()||0,h=l.pop()||0;if(d-h<=o){for(var f=h;f<=d;f++){var p=s[2*f],g=s[2*f+1];p>=e&&p<=n&&g>=r&&g<=i&&A.push(a[f])}continue}var v=h+d>>1,C=s[2*v],I=s[2*v+1];C>=e&&C<=n&&I>=r&&I<=i&&A.push(a[v]),(u===0?e<=C:r<=I)&&(l.push(h),l.push(v-1),l.push(1-u)),(u===0?n>=C:i>=I)&&(l.push(v+1),l.push(d),l.push(1-u))}return A}within(e,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:a,nodeSize:s}=this,o=[0,i.length-1,0],l=[],A=n*n;o.length;){var u=o.pop()||0,d=o.pop()||0,h=o.pop()||0;if(d-h<=s){for(var f=h;f<=d;f++)Qk(a[2*f],a[2*f+1],e,r)<=A&&l.push(i[f]);continue}var p=h+d>>1,g=a[2*p],v=a[2*p+1];Qk(g,v,e,r)<=A&&l.push(i[p]),(u===0?e-n<=g:r-n<=v)&&(o.push(h),o.push(p-1),o.push(1-u)),(u===0?e+n>=g:r+n>=v)&&(o.push(p+1),o.push(d),o.push(1-u))}return l}}function J2(t,e,r,n,i,a){if(!(i-n<=r)){var s=n+i>>1;sR(t,e,s,n,i,a),J2(t,e,r,n,s-1,1-a),J2(t,e,r,s+1,i,1-a)}}function sR(t,e,r,n,i,a){for(;i>n;){if(i-n>600){var s=i-n+1,o=r-n+1,l=Math.log(s),A=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*A*(s-A)/s)*(o-s/2<0?-1:1),d=Math.max(n,Math.floor(r-o*A/s+u)),h=Math.min(i,Math.floor(r+(s-o)*A/s+u));sR(t,e,r,d,h,a)}var f=e[2*r+a],p=n,g=i;for(Am(t,e,n,r),e[2*i+a]>f&&Am(t,e,n,i);p<g;){for(Am(t,e,p,g),p++,g--;e[2*p+a]<f;)p++;for(;e[2*g+a]>f;)g--}e[2*n+a]===f?Am(t,e,n,g):(g++,Am(t,e,g,i)),g<=r&&(n=g+1),r<=g&&(i=g-1)}}function Am(t,e,r,n){Yb(t,r,n),Yb(e,2*r,2*n),Yb(e,2*r+1,2*n+1)}function Yb(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Qk(t,e,r,n){var i=t-r,a=e-n;return i*i+a*a}var wX={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},Hk=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),ru=2,Kc=3,Jb=4,Qc=5,oR=6;class bX{constructor(e){this.options=Object.assign(Object.create(wX),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:r,minZoom:n,maxZoom:i}=this.options;r&&console.time("total time");var a="prepare ".concat(e.length," points");r&&console.time(a),this.points=e;for(var s=[],o=0;o<e.length;o++){var l=e[o];if(l.geometry){var[A,u]=l.geometry.coordinates,d=Hk(vg(A)),h=Hk(wg(u));s.push(d,h,1/0,o,-1,1),this.options.reduce&&s.push(0)}}var f=this.trees[i+1]=this._createTree(s);r&&console.timeEnd(a);for(var p=i;p>=n;p--){var g=+Date.now();f=this.trees[p]=this._createTree(this._cluster(f,p)),r&&console.log("z%d: %d clusters in %dms",p,f.numItems,+Date.now()-g)}return r&&console.timeEnd("total time"),this}getClusters(e,r){var n=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),a=e[2]===180?180:((e[2]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,a=180;else if(n>a){var o=this.getClusters([n,i,180,s],r),l=this.getClusters([-180,i,a,s],r);return o.concat(l)}var A=this.trees[this._limitZoom(r)],u=A.range(vg(n),wg(s),vg(a),wg(i)),d=A.data,h=[];for(var f of u){var p=this.stride*f;h.push(d[p+Qc]>1?Vk(d,p,this.clusterProps):this.points[d[p+Kc]])}return h}getChildren(e){var r=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",a=this.trees[n];if(!a)throw new Error(i);var s=a.data;if(r*this.stride>=s.length)throw new Error(i);var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=s[r*this.stride],A=s[r*this.stride+1],u=a.within(l,A,o),d=[];for(var h of u){var f=h*this.stride;s[f+Jb]===e&&d.push(s[f+Qc]>1?Vk(s,f,this.clusterProps):this.points[s[f+Kc]])}if(d.length===0)throw new Error(i);return d}getLeaves(e,r,n){r=r||10,n=n||0;var i=[];return this._appendLeaves(i,e,r,n,0),i}getTile(e,r,n){var i=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:s,radius:o}=this.options,l=o/s,A=(n-l)/a,u=(n+1+l)/a,d={features:[]};return this._addTileFeatures(i.range((r-l)/a,A,(r+1+l)/a,u),i.data,r,n,a,d),r===0&&this._addTileFeatures(i.range(1-l/a,A,1,u),i.data,a,n,a,d),r===a-1&&this._addTileFeatures(i.range(0,A,l/a,u),i.data,-1,n,a,d),d.features.length?d:null}getClusterExpansionZoom(e){for(var r=this._getOriginZoom(e)-1;r<=this.options.maxZoom;){var n=this.getChildren(e);if(r++,n.length!==1)break;e=n[0].properties.cluster_id}return r}_appendLeaves(e,r,n,i,a){var s=this.getChildren(r);for(var o of s){var l=o.properties;if(l&&l.cluster?a+l.point_count<=i?a+=l.point_count:a=this._appendLeaves(e,l.cluster_id,n,i,a):a<i?a++:e.push(o),e.length===n)break}return a}_createTree(e){for(var r=new RE(e.length/this.stride|0,this.options.nodeSize,Float32Array),n=0;n<e.length;n+=this.stride)r.add(e[n],e[n+1]);return r.finish(),r.data=e,r}_addTileFeatures(e,r,n,i,a,s){for(var o of e){var l=o*this.stride,A=r[l+Qc]>1,u=void 0,d=void 0,h=void 0;if(A)u=lR(r,l,this.clusterProps),d=r[l],h=r[l+1];else{var f=this.points[r[l+Kc]];u=f.properties;var[p,g]=f.geometry.coordinates;d=vg(p),h=wg(g)}var v={type:1,geometry:[[Math.round(this.options.extent*(d*a-n)),Math.round(this.options.extent*(h*a-i))]],tags:u},C=void 0;A||this.options.generateId?C=r[l+Kc]:C=this.points[r[l+Kc]].id,C!==void 0&&(v.id=C),s.features.push(v)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,r){for(var{radius:n,extent:i,reduce:a,minPoints:s}=this.options,o=n/(i*Math.pow(2,r)),l=e.data,A=[],u=this.stride,d=0;d<l.length;d+=u)if(!(l[d+ru]<=r)){l[d+ru]=r;var h=l[d],f=l[d+1],p=e.within(l[d],l[d+1],o),g=l[d+Qc],v=g;for(var C of p){var I=C*u;l[I+ru]>r&&(v+=l[I+Qc])}if(v>g&&v>=s){var F=h*g,E=f*g,R=void 0,L=-1,N=((d/u|0)<<5)+(r+1)+this.points.length;for(var P of p){var x=P*u;if(!(l[x+ru]<=r)){l[x+ru]=r;var k=l[x+Qc];F+=l[x]*k,E+=l[x+1]*k,l[x+Jb]=N,a&&(R||(R=this._map(l,d,!0),L=this.clusterProps.length,this.clusterProps.push(R)),a(R,this._map(l,x)))}}l[d+Jb]=N,A.push(F/v,E/v,1/0,N,-1,v),a&&A.push(L)}else{for(var y=0;y<u;y++)A.push(l[d+y]);if(v>1)for(var S of p){var _=S*u;if(!(l[_+ru]<=r)){l[_+ru]=r;for(var M=0;M<u;M++)A.push(l[_+M])}}}}return A}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,r,n){if(e[r+Qc]>1){var i=this.clusterProps[e[r+oR]];return n?Object.assign({},i):i}var a=this.points[e[r+Kc]].properties,s=this.options.map(a);return n&&s===a?Object.assign({},s):s}}function Vk(t,e,r){return{type:"Feature",id:t[e+Kc],properties:lR(t,e,r),geometry:{type:"Point",coordinates:[yX(t[e]),xX(t[e+1])]}}}function lR(t,e,r){var n=t[e+Qc],i=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,a=t[e+oR],s=a===-1?{}:Object.assign({},r[a]);return Object.assign(s,{cluster:!0,cluster_id:t[e+Kc],point_count:n,point_count_abbreviated:i})}function vg(t){return t/360+.5}function wg(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function yX(t){return(t-.5)*360}function xX(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _X(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}class Fs{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,r){this.isAdvancedMarker(e)?e.map=r:e.setMap(r)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class Z2{constructor(e){var{markers:r,position:n}=e;this.markers=r,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var r of this.markers)e.extend(Fs.getPosition(r));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Fs.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Fs.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class EX{constructor(e){var{maxZoom:r=16}=e;this.maxZoom=r}noop(e){var{markers:r}=e;return BX(r)}}var BX=t=>{var e=t.map(r=>new Z2({position:Fs.getPosition(r),markers:[r]}));return e};class CX extends EX{constructor(e){var{maxZoom:r,radius:n=60}=e,i=_X(e,["maxZoom","radius"]);super({maxZoom:r}),this.state={zoom:-1},this.superCluster=new bX(Object.assign({maxZoom:this.maxZoom,radius:n},i))}calculate(e){var r=!1,n={zoom:e.map.getZoom()};if(!Ok(e.markers,this.markers)){r=!0,this.markers=[...e.markers];var i=this.markers.map(a=>{var s=Fs.getPosition(a),o=[s.lng(),s.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:o},properties:{marker:a}}});this.superCluster.load(i)}return r||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(r=!Ok(this.state,n)),this.state=n,r&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:r}}cluster(e){var{map:r}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(r.getZoom())).map(n=>this.transformCluster(n))}transformCluster(e){var{geometry:{coordinates:[r,n]},properties:i}=e;if(i.cluster)return new Z2({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(s=>s.properties.marker),position:{lat:n,lng:r}});var a=i.marker;return new Z2({markers:[a],position:Fs.getPosition(a)})}}class NX{constructor(e,r){this.markers={sum:e.length};var n=r.map(a=>a.count),i=n.reduce((a,s)=>a+s,0);this.clusters={count:r.length,markers:{mean:i/r.length,sum:i,min:Math.min(...n),max:Math.max(...n)}}}}class SX{render(e,r,n){var{count:i,position:a}=e,s=i>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",o='<svg fill="'.concat(s,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),l="Cluster of ".concat(i," markers"),A=Number(google.maps.Marker.MAX_ZINDEX)+i;if(Fs.isAdvancedMarkerAvailable(n)){var u=new DOMParser,d=u.parseFromString(o,"image/svg+xml").documentElement;d.setAttribute("transform","translate(0 25)");var h={map:n,position:a,zIndex:A,title:l,content:d};return new google.maps.marker.AdvancedMarkerElement(h)}var f={position:a,zIndex:A,title:l,icon:{url:"data:image/svg+xml;base64,".concat(btoa(o)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(f)}}function kX(t,e){for(var r in e.prototype)t.prototype[r]=e.prototype[r]}class UE{constructor(){kX(UE,google.maps.OverlayView)}}var Ym;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(Ym||(Ym={}));var TX=(t,e,r)=>{r.fitBounds(e.bounds)};class IX extends UE{constructor(e){var{map:r,markers:n=[],algorithmOptions:i={},algorithm:a=new CX(i),renderer:s=new SX,onClusterClick:o=TX}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=a,this.renderer=s,this.onClusterClick=o,r&&this.setMap(r)}addMarker(e,r){this.markers.includes(e)||(this.markers.push(e),r||this.render())}addMarkers(e,r){e.forEach(n=>{this.addMarker(n,!0)}),r||this.render()}removeMarker(e,r){var n=this.markers.indexOf(e);return n===-1?!1:(Fs.setMap(e,null),this.markers.splice(n,1),r||this.render(),!0)}removeMarkers(e,r){var n=!1;return e.forEach(i=>{n=this.removeMarker(i,!0)||n}),n&&!r&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Ym.CLUSTERING_BEGIN,this);var{clusters:r,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||n==null){var i=new Set;for(var a of r)a.markers.length==1&&i.add(a.markers[0]);var s=[];for(var o of this.clusters)o.marker!=null&&(o.markers.length==1?i.has(o.marker)||Fs.setMap(o.marker,null):s.push(o.marker));this.clusters=r,this.renderClusters(),requestAnimationFrame(()=>s.forEach(l=>Fs.setMap(l,null)))}google.maps.event.trigger(this,Ym.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Fs.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new NX(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,r),n.markers.forEach(i=>Fs.setMap(i,null)),this.onClusterClick&&n.marker.addListener("click",i=>{google.maps.event.trigger(this,Ym.CLUSTER_CLICK,n),this.onClusterClick(i,n,r)})),Fs.setMap(n.marker,r)})}}function Kk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function jk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FX(t){var e=Fq(),[r,n]=D.useState(null);return D.useEffect(()=>{if(e&&r===null){var i=new IX(jk(jk({},t),{},{map:e}));n(i)}},[e]),r}function PX(t){var{children:e,options:r}=t,n=FX(r);return n!==null?e(n):null}D.memo(PX);var zk={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},$k={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function LX(t){var{children:e,anchor:r,options:n,position:i,zIndex:a,onCloseClick:s,onDomReady:o,onContentChanged:l,onPositionChanged:A,onZindexChanged:u,onLoad:d,onUnmount:h}=t,f=D.useContext(_r),[p,g]=D.useState(null),[v,C]=D.useState(null),[I,F]=D.useState(null),[E,R]=D.useState(null),[L,N]=D.useState(null),[P,x]=D.useState(null),k=D.useRef(null);return D.useEffect(()=>{p!==null&&(p.close(),r?p.open(f,r):p.getPosition()&&p.open(f))},[f,p,r]),D.useEffect(()=>{n&&p!==null&&p.setOptions(n)},[p,n]),D.useEffect(()=>{i&&p!==null&&p.setPosition(i)},[i]),D.useEffect(()=>{typeof a=="number"&&p!==null&&p.setZIndex(a)},[a]),D.useEffect(()=>{p&&s&&(v!==null&&google.maps.event.removeListener(v),C(google.maps.event.addListener(p,"closeclick",s)))},[s]),D.useEffect(()=>{p&&o&&(I!==null&&google.maps.event.removeListener(I),F(google.maps.event.addListener(p,"domready",o)))},[o]),D.useEffect(()=>{p&&l&&(E!==null&&google.maps.event.removeListener(E),R(google.maps.event.addListener(p,"content_changed",l)))},[l]),D.useEffect(()=>{p&&A&&(L!==null&&google.maps.event.removeListener(L),N(google.maps.event.addListener(p,"position_changed",A)))},[A]),D.useEffect(()=>{p&&u&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(p,"zindex_changed",u)))},[u]),D.useEffect(()=>{var y=new google.maps.InfoWindow(n);return g(y),k.current=document.createElement("div"),s&&C(google.maps.event.addListener(y,"closeclick",s)),o&&F(google.maps.event.addListener(y,"domready",o)),l&&R(google.maps.event.addListener(y,"content_changed",l)),A&&N(google.maps.event.addListener(y,"position_changed",A)),u&&x(google.maps.event.addListener(y,"zindex_changed",u)),y.setContent(k.current),i&&y.setPosition(i),a&&y.setZIndex(a),r?y.open(f,r):y.getPosition()?y.open(f):Mi(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),d&&d(y),()=>{v&&google.maps.event.removeListener(v),E&&google.maps.event.removeListener(E),I&&google.maps.event.removeListener(I),L&&google.maps.event.removeListener(L),P&&google.maps.event.removeListener(P),h&&h(y),y.close()}},[]),k.current?sd.createPortal(D.Children.only(e),k.current):null}D.memo(LX);class Uw extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"containerElement",null),ut(this,"state",{infoWindow:null}),ut(this,"open",(e,r)=>{r?e.open(this.context,r):e.getPosition()?e.open(this.context):Mi(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),ut(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Ir({updaterMap:$k,eventMap:zk,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:$k,eventMap:zk,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Rr(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?sd.createPortal(D.Children.only(this.props.children),this.containerElement):null}}ut(Uw,"contextType",_r);function Gk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Wk={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},qk={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},DX={};function RX(t){var{options:e,draggable:r,editable:n,visible:i,path:a,onDblClick:s,onDragEnd:o,onDragStart:l,onMouseDown:A,onMouseMove:u,onMouseOut:d,onMouseOver:h,onMouseUp:f,onRightClick:p,onClick:g,onDrag:v,onLoad:C,onUnmount:I}=t,F=D.useContext(_r),[E,R]=D.useState(null),[L,N]=D.useState(null),[P,x]=D.useState(null),[k,y]=D.useState(null),[S,_]=D.useState(null),[M,K]=D.useState(null),[z,ae]=D.useState(null),[te,G]=D.useState(null),[ue,de]=D.useState(null),[T,O]=D.useState(null),[V,Q]=D.useState(null),[X,ie]=D.useState(null);return D.useEffect(()=>{E!==null&&E.setMap(F)},[F]),D.useEffect(()=>{typeof e<"u"&&E!==null&&E.setOptions(e)},[E,e]),D.useEffect(()=>{typeof r<"u"&&E!==null&&E.setDraggable(r)},[E,r]),D.useEffect(()=>{typeof n<"u"&&E!==null&&E.setEditable(n)},[E,n]),D.useEffect(()=>{typeof i<"u"&&E!==null&&E.setVisible(i)},[E,i]),D.useEffect(()=>{typeof a<"u"&&E!==null&&E.setPath(a)},[E,a]),D.useEffect(()=>{E&&s&&(L!==null&&google.maps.event.removeListener(L),N(google.maps.event.addListener(E,"dblclick",s)))},[s]),D.useEffect(()=>{E&&o&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(E,"dragend",o)))},[o]),D.useEffect(()=>{E&&l&&(k!==null&&google.maps.event.removeListener(k),y(google.maps.event.addListener(E,"dragstart",l)))},[l]),D.useEffect(()=>{E&&A&&(S!==null&&google.maps.event.removeListener(S),_(google.maps.event.addListener(E,"mousedown",A)))},[A]),D.useEffect(()=>{E&&u&&(M!==null&&google.maps.event.removeListener(M),K(google.maps.event.addListener(E,"mousemove",u)))},[u]),D.useEffect(()=>{E&&d&&(z!==null&&google.maps.event.removeListener(z),ae(google.maps.event.addListener(E,"mouseout",d)))},[d]),D.useEffect(()=>{E&&h&&(te!==null&&google.maps.event.removeListener(te),G(google.maps.event.addListener(E,"mouseover",h)))},[h]),D.useEffect(()=>{E&&f&&(ue!==null&&google.maps.event.removeListener(ue),de(google.maps.event.addListener(E,"mouseup",f)))},[f]),D.useEffect(()=>{E&&p&&(T!==null&&google.maps.event.removeListener(T),O(google.maps.event.addListener(E,"rightclick",p)))},[p]),D.useEffect(()=>{E&&g&&(V!==null&&google.maps.event.removeListener(V),Q(google.maps.event.addListener(E,"click",g)))},[g]),D.useEffect(()=>{E&&v&&(X!==null&&google.maps.event.removeListener(X),ie(google.maps.event.addListener(E,"drag",v)))},[v]),D.useEffect(()=>{var ee=new google.maps.Polyline(fv(fv({},e||DX),{},{map:F}));return a&&ee.setPath(a),typeof i<"u"&&ee.setVisible(i),typeof n<"u"&&ee.setEditable(n),typeof r<"u"&&ee.setDraggable(r),s&&N(google.maps.event.addListener(ee,"dblclick",s)),o&&x(google.maps.event.addListener(ee,"dragend",o)),l&&y(google.maps.event.addListener(ee,"dragstart",l)),A&&_(google.maps.event.addListener(ee,"mousedown",A)),u&&K(google.maps.event.addListener(ee,"mousemove",u)),d&&ae(google.maps.event.addListener(ee,"mouseout",d)),h&&G(google.maps.event.addListener(ee,"mouseover",h)),f&&de(google.maps.event.addListener(ee,"mouseup",f)),p&&O(google.maps.event.addListener(ee,"rightclick",p)),g&&Q(google.maps.event.addListener(ee,"click",g)),v&&ie(google.maps.event.addListener(ee,"drag",v)),R(ee),C&&C(ee),()=>{L!==null&&google.maps.event.removeListener(L),P!==null&&google.maps.event.removeListener(P),k!==null&&google.maps.event.removeListener(k),S!==null&&google.maps.event.removeListener(S),M!==null&&google.maps.event.removeListener(M),z!==null&&google.maps.event.removeListener(z),te!==null&&google.maps.event.removeListener(te),ue!==null&&google.maps.event.removeListener(ue),T!==null&&google.maps.event.removeListener(T),V!==null&&google.maps.event.removeListener(V),I&&I(ee),ee.setMap(null)}},[]),null}D.memo(RX);class UX extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{polyline:null}),ut(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(fv(fv({},this.props.options),{},{map:this.context}));this.registeredEvents=Ir({updaterMap:qk,eventMap:Wk,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:qk,eventMap:Wk,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Rr(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}ut(UX,"contextType",_r);function Xk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Yk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xk(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Jk={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Zk={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function OX(t){var{options:e,draggable:r,editable:n,visible:i,path:a,paths:s,onDblClick:o,onDragEnd:l,onDragStart:A,onMouseDown:u,onMouseMove:d,onMouseOut:h,onMouseOver:f,onMouseUp:p,onRightClick:g,onClick:v,onDrag:C,onLoad:I,onUnmount:F,onEdit:E}=t,R=D.useContext(_r),[L,N]=D.useState(null),[P,x]=D.useState(null),[k,y]=D.useState(null),[S,_]=D.useState(null),[M,K]=D.useState(null),[z,ae]=D.useState(null),[te,G]=D.useState(null),[ue,de]=D.useState(null),[T,O]=D.useState(null),[V,Q]=D.useState(null),[X,ie]=D.useState(null),[ee,Z]=D.useState(null);return D.useEffect(()=>{L!==null&&L.setMap(R)},[R]),D.useEffect(()=>{typeof e<"u"&&L!==null&&L.setOptions(e)},[L,e]),D.useEffect(()=>{typeof r<"u"&&L!==null&&L.setDraggable(r)},[L,r]),D.useEffect(()=>{typeof n<"u"&&L!==null&&L.setEditable(n)},[L,n]),D.useEffect(()=>{typeof i<"u"&&L!==null&&L.setVisible(i)},[L,i]),D.useEffect(()=>{typeof a<"u"&&L!==null&&L.setPath(a)},[L,a]),D.useEffect(()=>{typeof s<"u"&&L!==null&&L.setPaths(s)},[L,s]),D.useEffect(()=>{L&&typeof o=="function"&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(L,"dblclick",o)))},[o]),D.useEffect(()=>{L&&(google.maps.event.addListener(L.getPath(),"insert_at",()=>{E==null||E(L)}),google.maps.event.addListener(L.getPath(),"set_at",()=>{E==null||E(L)}),google.maps.event.addListener(L.getPath(),"remove_at",()=>{E==null||E(L)}))},[L,E]),D.useEffect(()=>{L&&typeof l=="function"&&(k!==null&&google.maps.event.removeListener(k),y(google.maps.event.addListener(L,"dragend",l)))},[l]),D.useEffect(()=>{L&&typeof A=="function"&&(S!==null&&google.maps.event.removeListener(S),_(google.maps.event.addListener(L,"dragstart",A)))},[A]),D.useEffect(()=>{L&&typeof u=="function"&&(M!==null&&google.maps.event.removeListener(M),K(google.maps.event.addListener(L,"mousedown",u)))},[u]),D.useEffect(()=>{L&&typeof d=="function"&&(z!==null&&google.maps.event.removeListener(z),ae(google.maps.event.addListener(L,"mousemove",d)))},[d]),D.useEffect(()=>{L&&typeof h=="function"&&(te!==null&&google.maps.event.removeListener(te),G(google.maps.event.addListener(L,"mouseout",h)))},[h]),D.useEffect(()=>{L&&typeof f=="function"&&(ue!==null&&google.maps.event.removeListener(ue),de(google.maps.event.addListener(L,"mouseover",f)))},[f]),D.useEffect(()=>{L&&typeof p=="function"&&(T!==null&&google.maps.event.removeListener(T),O(google.maps.event.addListener(L,"mouseup",p)))},[p]),D.useEffect(()=>{L&&typeof g=="function"&&(V!==null&&google.maps.event.removeListener(V),Q(google.maps.event.addListener(L,"rightclick",g)))},[g]),D.useEffect(()=>{L&&typeof v=="function"&&(X!==null&&google.maps.event.removeListener(X),ie(google.maps.event.addListener(L,"click",v)))},[v]),D.useEffect(()=>{L&&typeof C=="function"&&(ee!==null&&google.maps.event.removeListener(ee),Z(google.maps.event.addListener(L,"drag",C)))},[C]),D.useEffect(()=>{var re=new google.maps.Polygon(Yk(Yk({},e),{},{map:R}));return a&&re.setPath(a),s&&re.setPaths(s),typeof i<"u"&&re.setVisible(i),typeof n<"u"&&re.setEditable(n),typeof r<"u"&&re.setDraggable(r),o&&x(google.maps.event.addListener(re,"dblclick",o)),l&&y(google.maps.event.addListener(re,"dragend",l)),A&&_(google.maps.event.addListener(re,"dragstart",A)),u&&K(google.maps.event.addListener(re,"mousedown",u)),d&&ae(google.maps.event.addListener(re,"mousemove",d)),h&&G(google.maps.event.addListener(re,"mouseout",h)),f&&de(google.maps.event.addListener(re,"mouseover",f)),p&&O(google.maps.event.addListener(re,"mouseup",p)),g&&Q(google.maps.event.addListener(re,"rightclick",g)),v&&ie(google.maps.event.addListener(re,"click",v)),C&&Z(google.maps.event.addListener(re,"drag",C)),N(re),I&&I(re),()=>{P!==null&&google.maps.event.removeListener(P),k!==null&&google.maps.event.removeListener(k),S!==null&&google.maps.event.removeListener(S),M!==null&&google.maps.event.removeListener(M),z!==null&&google.maps.event.removeListener(z),te!==null&&google.maps.event.removeListener(te),ue!==null&&google.maps.event.removeListener(ue),T!==null&&google.maps.event.removeListener(T),V!==null&&google.maps.event.removeListener(V),X!==null&&google.maps.event.removeListener(X),F&&F(re),re.setMap(null)}},[]),null}D.memo(OX);class MX extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Ir({updaterMap:Zk,eventMap:Jk,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:Zk,eventMap:Jk,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Rr(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}ut(MX,"contextType",_r);function e5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var t5={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},r5={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function QX(t){var{options:e,bounds:r,draggable:n,editable:i,visible:a,onDblClick:s,onDragEnd:o,onDragStart:l,onMouseDown:A,onMouseMove:u,onMouseOut:d,onMouseOver:h,onMouseUp:f,onRightClick:p,onClick:g,onDrag:v,onBoundsChanged:C,onLoad:I,onUnmount:F}=t,E=D.useContext(_r),[R,L]=D.useState(null),[N,P]=D.useState(null),[x,k]=D.useState(null),[y,S]=D.useState(null),[_,M]=D.useState(null),[K,z]=D.useState(null),[ae,te]=D.useState(null),[G,ue]=D.useState(null),[de,T]=D.useState(null),[O,V]=D.useState(null),[Q,X]=D.useState(null),[ie,ee]=D.useState(null),[Z,re]=D.useState(null);return D.useEffect(()=>{R!==null&&R.setMap(E)},[E]),D.useEffect(()=>{typeof e<"u"&&R!==null&&R.setOptions(e)},[R,e]),D.useEffect(()=>{typeof n<"u"&&R!==null&&R.setDraggable(n)},[R,n]),D.useEffect(()=>{typeof i<"u"&&R!==null&&R.setEditable(i)},[R,i]),D.useEffect(()=>{typeof a<"u"&&R!==null&&R.setVisible(a)},[R,a]),D.useEffect(()=>{typeof r<"u"&&R!==null&&R.setBounds(r)},[R,r]),D.useEffect(()=>{R&&s&&(N!==null&&google.maps.event.removeListener(N),P(google.maps.event.addListener(R,"dblclick",s)))},[s]),D.useEffect(()=>{R&&o&&(x!==null&&google.maps.event.removeListener(x),k(google.maps.event.addListener(R,"dragend",o)))},[o]),D.useEffect(()=>{R&&l&&(y!==null&&google.maps.event.removeListener(y),S(google.maps.event.addListener(R,"dragstart",l)))},[l]),D.useEffect(()=>{R&&A&&(_!==null&&google.maps.event.removeListener(_),M(google.maps.event.addListener(R,"mousedown",A)))},[A]),D.useEffect(()=>{R&&u&&(K!==null&&google.maps.event.removeListener(K),z(google.maps.event.addListener(R,"mousemove",u)))},[u]),D.useEffect(()=>{R&&d&&(ae!==null&&google.maps.event.removeListener(ae),te(google.maps.event.addListener(R,"mouseout",d)))},[d]),D.useEffect(()=>{R&&h&&(G!==null&&google.maps.event.removeListener(G),ue(google.maps.event.addListener(R,"mouseover",h)))},[h]),D.useEffect(()=>{R&&f&&(de!==null&&google.maps.event.removeListener(de),T(google.maps.event.addListener(R,"mouseup",f)))},[f]),D.useEffect(()=>{R&&p&&(O!==null&&google.maps.event.removeListener(O),V(google.maps.event.addListener(R,"rightclick",p)))},[p]),D.useEffect(()=>{R&&g&&(Q!==null&&google.maps.event.removeListener(Q),X(google.maps.event.addListener(R,"click",g)))},[g]),D.useEffect(()=>{R&&v&&(ie!==null&&google.maps.event.removeListener(ie),ee(google.maps.event.addListener(R,"drag",v)))},[v]),D.useEffect(()=>{R&&C&&(Z!==null&&google.maps.event.removeListener(Z),re(google.maps.event.addListener(R,"bounds_changed",C)))},[C]),D.useEffect(()=>{var ce=new google.maps.Rectangle(mv(mv({},e),{},{map:E}));return typeof a<"u"&&ce.setVisible(a),typeof i<"u"&&ce.setEditable(i),typeof n<"u"&&ce.setDraggable(n),typeof r<"u"&&ce.setBounds(r),s&&P(google.maps.event.addListener(ce,"dblclick",s)),o&&k(google.maps.event.addListener(ce,"dragend",o)),l&&S(google.maps.event.addListener(ce,"dragstart",l)),A&&M(google.maps.event.addListener(ce,"mousedown",A)),u&&z(google.maps.event.addListener(ce,"mousemove",u)),d&&te(google.maps.event.addListener(ce,"mouseout",d)),h&&ue(google.maps.event.addListener(ce,"mouseover",h)),f&&T(google.maps.event.addListener(ce,"mouseup",f)),p&&V(google.maps.event.addListener(ce,"rightclick",p)),g&&X(google.maps.event.addListener(ce,"click",g)),v&&ee(google.maps.event.addListener(ce,"drag",v)),C&&re(google.maps.event.addListener(ce,"bounds_changed",C)),L(ce),I&&I(ce),()=>{N!==null&&google.maps.event.removeListener(N),x!==null&&google.maps.event.removeListener(x),y!==null&&google.maps.event.removeListener(y),_!==null&&google.maps.event.removeListener(_),K!==null&&google.maps.event.removeListener(K),ae!==null&&google.maps.event.removeListener(ae),G!==null&&google.maps.event.removeListener(G),de!==null&&google.maps.event.removeListener(de),O!==null&&google.maps.event.removeListener(O),Q!==null&&google.maps.event.removeListener(Q),ie!==null&&google.maps.event.removeListener(ie),Z!==null&&google.maps.event.removeListener(Z),F&&F(ce),ce.setMap(null)}},[]),null}D.memo(QX);class HX extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{rectangle:null}),ut(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(mv(mv({},this.props.options),{},{map:this.context}));this.registeredEvents=Ir({updaterMap:r5,eventMap:t5,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:r5,eventMap:t5,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Rr(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}ut(HX,"contextType",_r);function n5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n5(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var i5={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},a5={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},VX={};function KX(t){var{options:e,center:r,radius:n,draggable:i,editable:a,visible:s,onDblClick:o,onDragEnd:l,onDragStart:A,onMouseDown:u,onMouseMove:d,onMouseOut:h,onMouseOver:f,onMouseUp:p,onRightClick:g,onClick:v,onDrag:C,onCenterChanged:I,onRadiusChanged:F,onLoad:E,onUnmount:R}=t,L=D.useContext(_r),[N,P]=D.useState(null),[x,k]=D.useState(null),[y,S]=D.useState(null),[_,M]=D.useState(null),[K,z]=D.useState(null),[ae,te]=D.useState(null),[G,ue]=D.useState(null),[de,T]=D.useState(null),[O,V]=D.useState(null),[Q,X]=D.useState(null),[ie,ee]=D.useState(null),[Z,re]=D.useState(null),[ce,Y]=D.useState(null),[ge,q]=D.useState(null);return D.useEffect(()=>{N!==null&&N.setMap(L)},[L]),D.useEffect(()=>{typeof e<"u"&&N!==null&&N.setOptions(e)},[N,e]),D.useEffect(()=>{typeof i<"u"&&N!==null&&N.setDraggable(i)},[N,i]),D.useEffect(()=>{typeof a<"u"&&N!==null&&N.setEditable(a)},[N,a]),D.useEffect(()=>{typeof s<"u"&&N!==null&&N.setVisible(s)},[N,s]),D.useEffect(()=>{typeof n=="number"&&N!==null&&N.setRadius(n)},[N,n]),D.useEffect(()=>{typeof r<"u"&&N!==null&&N.setCenter(r)},[N,r]),D.useEffect(()=>{N&&o&&(x!==null&&google.maps.event.removeListener(x),k(google.maps.event.addListener(N,"dblclick",o)))},[o]),D.useEffect(()=>{N&&l&&(y!==null&&google.maps.event.removeListener(y),S(google.maps.event.addListener(N,"dragend",l)))},[l]),D.useEffect(()=>{N&&A&&(_!==null&&google.maps.event.removeListener(_),M(google.maps.event.addListener(N,"dragstart",A)))},[A]),D.useEffect(()=>{N&&u&&(K!==null&&google.maps.event.removeListener(K),z(google.maps.event.addListener(N,"mousedown",u)))},[u]),D.useEffect(()=>{N&&d&&(ae!==null&&google.maps.event.removeListener(ae),te(google.maps.event.addListener(N,"mousemove",d)))},[d]),D.useEffect(()=>{N&&h&&(G!==null&&google.maps.event.removeListener(G),ue(google.maps.event.addListener(N,"mouseout",h)))},[h]),D.useEffect(()=>{N&&f&&(de!==null&&google.maps.event.removeListener(de),T(google.maps.event.addListener(N,"mouseover",f)))},[f]),D.useEffect(()=>{N&&p&&(O!==null&&google.maps.event.removeListener(O),V(google.maps.event.addListener(N,"mouseup",p)))},[p]),D.useEffect(()=>{N&&g&&(Q!==null&&google.maps.event.removeListener(Q),X(google.maps.event.addListener(N,"rightclick",g)))},[g]),D.useEffect(()=>{N&&v&&(ie!==null&&google.maps.event.removeListener(ie),ee(google.maps.event.addListener(N,"click",v)))},[v]),D.useEffect(()=>{N&&C&&(Z!==null&&google.maps.event.removeListener(Z),re(google.maps.event.addListener(N,"drag",C)))},[C]),D.useEffect(()=>{N&&I&&(ce!==null&&google.maps.event.removeListener(ce),Y(google.maps.event.addListener(N,"center_changed",I)))},[v]),D.useEffect(()=>{N&&F&&(ge!==null&&google.maps.event.removeListener(ge),q(google.maps.event.addListener(N,"radius_changed",F)))},[F]),D.useEffect(()=>{var W=new google.maps.Circle(pv(pv({},e||VX),{},{map:L}));return typeof n=="number"&&W.setRadius(n),typeof r<"u"&&W.setCenter(r),typeof n=="number"&&W.setRadius(n),typeof s<"u"&&W.setVisible(s),typeof a<"u"&&W.setEditable(a),typeof i<"u"&&W.setDraggable(i),o&&k(google.maps.event.addListener(W,"dblclick",o)),l&&S(google.maps.event.addListener(W,"dragend",l)),A&&M(google.maps.event.addListener(W,"dragstart",A)),u&&z(google.maps.event.addListener(W,"mousedown",u)),d&&te(google.maps.event.addListener(W,"mousemove",d)),h&&ue(google.maps.event.addListener(W,"mouseout",h)),f&&T(google.maps.event.addListener(W,"mouseover",f)),p&&V(google.maps.event.addListener(W,"mouseup",p)),g&&X(google.maps.event.addListener(W,"rightclick",g)),v&&ee(google.maps.event.addListener(W,"click",v)),C&&re(google.maps.event.addListener(W,"drag",C)),I&&Y(google.maps.event.addListener(W,"center_changed",I)),F&&q(google.maps.event.addListener(W,"radius_changed",F)),P(W),E&&E(W),()=>{x!==null&&google.maps.event.removeListener(x),y!==null&&google.maps.event.removeListener(y),_!==null&&google.maps.event.removeListener(_),K!==null&&google.maps.event.removeListener(K),ae!==null&&google.maps.event.removeListener(ae),G!==null&&google.maps.event.removeListener(G),de!==null&&google.maps.event.removeListener(de),O!==null&&google.maps.event.removeListener(O),Q!==null&&google.maps.event.removeListener(Q),ie!==null&&google.maps.event.removeListener(ie),ce!==null&&google.maps.event.removeListener(ce),ge!==null&&google.maps.event.removeListener(ge),R&&R(W),W.setMap(null)}},[]),null}D.memo(KX);class jX extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{circle:null}),ut(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(pv(pv({},this.props.options),{},{map:this.context}));this.registeredEvents=Ir({updaterMap:a5,eventMap:i5,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:a5,eventMap:i5,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Rr(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}ut(jX,"contextType",_r);function s5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s5(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var o5={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},l5={add(t,e){t.add(e)},addgeojson(t,e,r){t.addGeoJson(e,r)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,r,n){t.loadGeoJson(e,r,n)},overridestyle(t,e,r){t.overrideStyle(e,r)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function zX(t){var{options:e,onClick:r,onDblClick:n,onMouseDown:i,onMouseMove:a,onMouseOut:s,onMouseOver:o,onMouseUp:l,onRightClick:A,onAddFeature:u,onRemoveFeature:d,onRemoveProperty:h,onSetGeometry:f,onSetProperty:p,onLoad:g,onUnmount:v}=t,C=D.useContext(_r),[I,F]=D.useState(null),[E,R]=D.useState(null),[L,N]=D.useState(null),[P,x]=D.useState(null),[k,y]=D.useState(null),[S,_]=D.useState(null),[M,K]=D.useState(null),[z,ae]=D.useState(null),[te,G]=D.useState(null),[ue,de]=D.useState(null),[T,O]=D.useState(null),[V,Q]=D.useState(null),[X,ie]=D.useState(null),[ee,Z]=D.useState(null);return D.useEffect(()=>{I!==null&&I.setMap(C)},[C]),D.useEffect(()=>{I&&n&&(E!==null&&google.maps.event.removeListener(E),R(google.maps.event.addListener(I,"dblclick",n)))},[n]),D.useEffect(()=>{I&&i&&(L!==null&&google.maps.event.removeListener(L),N(google.maps.event.addListener(I,"mousedown",i)))},[i]),D.useEffect(()=>{I&&a&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(I,"mousemove",a)))},[a]),D.useEffect(()=>{I&&s&&(k!==null&&google.maps.event.removeListener(k),y(google.maps.event.addListener(I,"mouseout",s)))},[s]),D.useEffect(()=>{I&&o&&(S!==null&&google.maps.event.removeListener(S),_(google.maps.event.addListener(I,"mouseover",o)))},[o]),D.useEffect(()=>{I&&l&&(M!==null&&google.maps.event.removeListener(M),K(google.maps.event.addListener(I,"mouseup",l)))},[l]),D.useEffect(()=>{I&&A&&(z!==null&&google.maps.event.removeListener(z),ae(google.maps.event.addListener(I,"rightclick",A)))},[A]),D.useEffect(()=>{I&&r&&(te!==null&&google.maps.event.removeListener(te),G(google.maps.event.addListener(I,"click",r)))},[r]),D.useEffect(()=>{I&&u&&(ue!==null&&google.maps.event.removeListener(ue),de(google.maps.event.addListener(I,"addfeature",u)))},[u]),D.useEffect(()=>{I&&d&&(T!==null&&google.maps.event.removeListener(T),O(google.maps.event.addListener(I,"removefeature",d)))},[d]),D.useEffect(()=>{I&&h&&(V!==null&&google.maps.event.removeListener(V),Q(google.maps.event.addListener(I,"removeproperty",h)))},[h]),D.useEffect(()=>{I&&f&&(X!==null&&google.maps.event.removeListener(X),ie(google.maps.event.addListener(I,"setgeometry",f)))},[f]),D.useEffect(()=>{I&&p&&(ee!==null&&google.maps.event.removeListener(ee),Z(google.maps.event.addListener(I,"setproperty",p)))},[p]),D.useEffect(()=>{if(C!==null){var re=new google.maps.Data(gv(gv({},e),{},{map:C}));n&&R(google.maps.event.addListener(re,"dblclick",n)),i&&N(google.maps.event.addListener(re,"mousedown",i)),a&&x(google.maps.event.addListener(re,"mousemove",a)),s&&y(google.maps.event.addListener(re,"mouseout",s)),o&&_(google.maps.event.addListener(re,"mouseover",o)),l&&K(google.maps.event.addListener(re,"mouseup",l)),A&&ae(google.maps.event.addListener(re,"rightclick",A)),r&&G(google.maps.event.addListener(re,"click",r)),u&&de(google.maps.event.addListener(re,"addfeature",u)),d&&O(google.maps.event.addListener(re,"removefeature",d)),h&&Q(google.maps.event.addListener(re,"removeproperty",h)),f&&ie(google.maps.event.addListener(re,"setgeometry",f)),p&&Z(google.maps.event.addListener(re,"setproperty",p)),F(re),g&&g(re)}return()=>{I&&(E!==null&&google.maps.event.removeListener(E),L!==null&&google.maps.event.removeListener(L),P!==null&&google.maps.event.removeListener(P),k!==null&&google.maps.event.removeListener(k),S!==null&&google.maps.event.removeListener(S),M!==null&&google.maps.event.removeListener(M),z!==null&&google.maps.event.removeListener(z),te!==null&&google.maps.event.removeListener(te),ue!==null&&google.maps.event.removeListener(ue),T!==null&&google.maps.event.removeListener(T),V!==null&&google.maps.event.removeListener(V),X!==null&&google.maps.event.removeListener(X),ee!==null&&google.maps.event.removeListener(ee),v&&v(I),I.setMap(null))}},[]),null}D.memo(zX);class $X extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{data:null}),ut(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(gv(gv({},this.props.options),{},{map:this.context}));this.registeredEvents=Ir({updaterMap:l5,eventMap:o5,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:l5,eventMap:o5,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Rr(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}ut($X,"contextType",_r);function c5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function A5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c5(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var u5={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},d5={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class GX extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{kmlLayer:null}),ut(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(A5(A5({},this.props.options),{},{map:this.context}));this.registeredEvents=Ir({updaterMap:d5,eventMap:u5,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:d5,eventMap:u5,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Rr(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}ut(GX,"contextType",_r);function cR(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function WX(t,e){return new e(t.lat,t.lng)}function qX(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function XX(t,e,r){return t instanceof e?t:r(t,e)}function YX(t,e,r){return t instanceof e?t:r(t,e)}function JX(t,e,r){var n=t&&t.fromLatLngToDivPixel(r.getNorthEast()),i=t&&t.fromLatLngToDivPixel(r.getSouthWest());return n&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(n.y+e.y,"px"),width:"".concat(n.x-i.x-e.x,"px"),height:"".concat(i.y-n.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function ZX(t,e,r){var n=t&&t.fromLatLngToDivPixel(r);if(n){var{x:i,y:a}=n;return{left:"".concat(i+e.x,"px"),top:"".concat(a+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function AR(t,e,r,n){return r!==void 0?JX(t,e,YX(r,google.maps.LatLngBounds,qX)):ZX(t,e,XX(n,google.maps.LatLng,WX))}function eY(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function h5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tY(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h5(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rY(t,e,r,n,i){class a extends google.maps.OverlayView{constructor(o,l,A,u){super(),this.container=o,this.pane=l,this.position=A,this.bounds=u}onAdd(){var o,l=(o=this.getPanes())===null||o===void 0?void 0:o[this.pane];l==null||l.appendChild(this.container)}draw(){var o=this.getProjection(),l=tY({},this.container?cR(this.container,i):{x:0,y:0}),A=AR(o,l,this.bounds,this.position);for(var[u,d]of Object.entries(A))this.container.style[u]=d}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new a(t,e,r,n)}function f5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nY(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f5(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m5(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function p5(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function iY(t){var{position:e,bounds:r,mapPaneName:n,zIndex:i,onLoad:a,onUnmount:s,getPixelPositionOffset:o,children:l}=t,A=D.useContext(_r),u=D.useMemo(()=>{var h=document.createElement("div");return h.style.position="absolute",h},[]),d=D.useMemo(()=>rY(u,n,e,r,o),[u,n,e,r]);return D.useEffect(()=>(a==null||a(d),d==null||d.setMap(A),()=>{s==null||s(d),d==null||d.setMap(null)}),[A,d]),D.useEffect(()=>{u.style.zIndex="".concat(i)},[i,u]),sd.createPortal(l,u)}D.memo(iY);class Sf extends D.PureComponent{constructor(e){super(e),ut(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),ut(this,"updatePane",()=>{var n=this.props.mapPaneName,i=this.overlayView.getPanes();Mi(!!n,"OverlayView requires props.mapPaneName but got %s",n),i?this.setState({paneEl:i[n]}):this.setState({paneEl:null})}),ut(this,"onAdd",()=>{var n,i;this.updatePane(),(n=(i=this.props).onLoad)===null||n===void 0||n.call(i,this.overlayView)}),ut(this,"onPositionElement",()=>{var n=this.overlayView.getProjection(),i=nY({x:0,y:0},this.containerRef.current?cR(this.containerRef.current,this.props.getPixelPositionOffset):{}),a=AR(n,i,this.props.bounds,this.props.position);if(!eY(a,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var s,o,l,A;this.setState({containerStyle:{top:(s=a.top)!==null&&s!==void 0?s:0,left:(o=a.left)!==null&&o!==void 0?o:0,width:(l=a.width)!==null&&l!==void 0?l:0,height:(A=a.height)!==null&&A!==void 0?A:0,position:"absolute"}})}}),ut(this,"draw",()=>{this.onPositionElement()}),ut(this,"onRemove",()=>{var n,i;this.setState(()=>({paneEl:null})),(n=(i=this.props).onUnmount)===null||n===void 0||n.call(i,this.overlayView)}),this.containerRef=D.createRef();var r=new google.maps.OverlayView;r.onAdd=this.onAdd,r.draw=this.draw,r.onRemove=this.onRemove,this.overlayView=r}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var r=m5(e.position),n=m5(this.props.position),i=p5(e.bounds),a=p5(this.props.bounds);(r!==n||i!==a)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?sd.createPortal(c("div",{ref:this.containerRef,style:this.state.containerStyle,children:D.Children.only(this.props.children)}),e):null}}ut(Sf,"FLOAT_PANE","floatPane");ut(Sf,"MAP_PANE","mapPane");ut(Sf,"MARKER_LAYER","markerLayer");ut(Sf,"OVERLAY_LAYER","overlayLayer");ut(Sf,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");ut(Sf,"contextType",_r);function aY(){}function g5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function v5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g5(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var w5={onDblClick:"dblclick",onClick:"click"},b5={opacity(t,e){t.setOpacity(e)}};function sY(t){var{url:e,bounds:r,options:n,visible:i}=t,a=D.useContext(_r),s=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),o=D.useMemo(()=>new google.maps.GroundOverlay(e,s,n),[]);return D.useEffect(()=>{o!==null&&o.setMap(a)},[a]),D.useEffect(()=>{typeof e<"u"&&o!==null&&(o.set("url",e),o.setMap(a))},[o,e]),D.useEffect(()=>{typeof i<"u"&&o!==null&&o.setOpacity(i?1:0)},[o,i]),D.useEffect(()=>{var l=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));typeof r<"u"&&o!==null&&(o.set("bounds",l),o.setMap(a))},[o,r]),null}D.memo(sY);class uR extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{groundOverlay:null}),ut(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Mi(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,v5(v5({},this.props.options),{},{map:this.context}));this.registeredEvents=Ir({updaterMap:b5,eventMap:w5,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:b5,eventMap:w5,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}ut(uR,"defaultProps",{onLoad:aY});ut(uR,"contextType",_r);function y5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y5(Object(r),!0).forEach(function(n){ut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var x5={},_5={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function oY(t){var{data:e,onLoad:r,onUnmount:n,options:i}=t,a=D.useContext(_r),[s,o]=D.useState(null);return D.useEffect(()=>{google.maps.visualization||Mi(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),D.useEffect(()=>{Mi(!!e,"data property is required in HeatmapLayer %s",e)},[e]),D.useEffect(()=>{s!==null&&s.setMap(a)},[a]),D.useEffect(()=>{i&&s!==null&&s.setOptions(i)},[s,i]),D.useEffect(()=>{var l=new google.maps.visualization.HeatmapLayer(vv(vv({},i),{},{data:e,map:a}));return o(l),r&&r(l),()=>{s!==null&&(n&&n(s),s.setMap(null))}},[]),null}D.memo(oY);class lY extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{heatmapLayer:null}),ut(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Mi(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Mi(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(vv(vv({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Ir({updaterMap:_5,eventMap:x5,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:_5,eventMap:x5,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Rr(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}ut(lY,"contextType",_r);var E5={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},B5={register(t,e,r){t.registerPanoProvider(e,r)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class cY extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{streetViewPanorama:null}),ut(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,r,n=(e=(r=this.context)===null||r===void 0?void 0:r.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=Ir({updaterMap:B5,eventMap:E5,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({streetViewPanorama:n}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:B5,eventMap:E5,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Rr(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}ut(cY,"contextType",_r);class AY extends D.PureComponent{constructor(){super(...arguments),ut(this,"state",{streetViewService:null}),ut(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}ut(AY,"contextType",_r);var C5={onDirectionsChanged:"directions_changed"},N5={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class OE extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"state",{directionsRenderer:null}),ut(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Ir({updaterMap:N5,eventMap:C5,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:N5,eventMap:C5,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Rr(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}ut(OE,"contextType",_r);var S5={onPlacesChanged:"places_changed"},k5={bounds(t,e){t.setBounds(e)}};class uY extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"containerElement",D.createRef()),ut(this,"state",{searchBox:null}),ut(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Mi(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var r=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Ir({updaterMap:k5,eventMap:S5,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{searchBox:r}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:k5,eventMap:S5,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Rr(this.registeredEvents))}render(){return c("div",{ref:this.containerElement,children:D.Children.only(this.props.children)})}}ut(uY,"contextType",_r);var T5={onPlaceChanged:"place_changed"},I5={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class dR extends D.PureComponent{constructor(){super(...arguments),ut(this,"registeredEvents",[]),ut(this,"containerElement",D.createRef()),ut(this,"state",{autocomplete:null}),ut(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Mi(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var r=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(r){var n=new google.maps.places.Autocomplete(r,this.props.options);this.registeredEvents=Ir({updaterMap:I5,eventMap:T5,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({autocomplete:n}),this.setAutocompleteCallback)}}componentDidUpdate(e){Rr(this.registeredEvents),this.registeredEvents=Ir({updaterMap:I5,eventMap:T5,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Rr(this.registeredEvents)}render(){return c("div",{ref:this.containerElement,className:this.props.className,children:D.Children.only(this.props.children)})}}ut(dR,"defaultProps",{className:""});ut(dR,"contextType",_r);const dY=()=>{const t=DA(),[e,r]=D.useState({activeSites:0,activeCompanies:0,activeAgreements:0,totalRevenue:0,totalExpenses:0,netCash:0}),[n,i]=D.useState([]),[a,s]=D.useState(!0),[o,l]=D.useState([]),[A,u]=D.useState(null),[d,h]=D.useState(!0),[f,p]=D.useState(null),[g,v]=D.useState(null),[C,I]=D.useState(!1),[F,E]=D.useState([]),[R,L]=D.useState(null),N=D.useRef(null),P=D.useRef(null),x={lat:38.6748,lng:39.2233},k="AIzaSyAO5-L4SrMA1e5q3ugtjYCI1gVI7KZoD6g";D.useEffect(()=>{(async()=>{try{const[O,V,Q]=await Promise.all([rq(),nq(),Yi()]);r(O),i(V);const X=Q.filter(ie=>ie.locationLat&&ie.locationLng&&!isNaN(parseFloat(ie.locationLat))&&!isNaN(parseFloat(ie.locationLng)));l(X)}catch(O){console.error("Error fetching dashboard data:",O)}finally{s(!1),h(!1)}})()},[]);const y=D.useCallback(T=>{if(N.current=T,window.google&&window.google.maps){const O=new window.google.maps.DirectionsService;P.current=O,L(O)}if(o.length>0&&window.google&&window.google.maps){const O=new window.google.maps.LatLngBounds;o.forEach(Q=>{O.extend({lat:parseFloat(Q.locationLat),lng:parseFloat(Q.locationLng)})}),T.fitBounds(O);const V=window.google.maps.event.addListener(T,"bounds_changed",()=>{T.getZoom()>15&&T.setZoom(15),window.google.maps.event.removeListener(V)})}},[o]),S=()=>new Promise((T,O)=>{if(!navigator.geolocation){O(new Error("Geolocation desteklenmiyor"));return}navigator.geolocation.getCurrentPosition(V=>{T({lat:V.coords.latitude,lng:V.coords.longitude})},V=>{O(V)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),_=(T,O)=>{const Q=(O.lat-T.lat)*Math.PI/180,X=(O.lng-T.lng)*Math.PI/180,ie=Math.sin(Q/2)*Math.sin(Q/2)+Math.cos(T.lat*Math.PI/180)*Math.cos(O.lat*Math.PI/180)*Math.sin(X/2)*Math.sin(X/2);return 6371*(2*Math.atan2(Math.sqrt(ie),Math.sqrt(1-ie)))},M=(T,O)=>{if(O.length===0)return[];const V=[],Q=[...O];let X=T;for(;Q.length>0;){let ie=0,ee=_(X,Q[0]);for(let re=1;re<Q.length;re++){const ce=_(X,Q[re]);ce<ee&&(ee=ce,ie=re)}const Z=Q.splice(ie,1)[0];V.push(Z),X=Z}return V},K=async()=>{if(!P.current||o.length===0){window.showAlert&&window.showAlert("Hata","Rota oluturulamad. Ltfen sitelerin yklendiinden emin olun.","error");return}try{I(!0);const T=await S();p(T);const O=o.map(ie=>({lat:parseFloat(ie.locationLat),lng:parseFloat(ie.locationLng),site:ie})),V=M(T,O);if(V.length===0){window.showAlert&&window.showAlert("Bilgi","Rota oluturulacak site bulunamad.","info"),I(!1);return}const Q=V.slice(0,-1).map(ie=>({location:new window.google.maps.LatLng(ie.lat,ie.lng),stopover:!0})),X=V[V.length-1];P.current.route({origin:new window.google.maps.LatLng(T.lat,T.lng),destination:new window.google.maps.LatLng(X.lat,X.lng),waypoints:Q,optimizeWaypoints:!1,travelMode:window.google.maps.TravelMode.DRIVING},(ie,ee)=>{if(ee===window.google.maps.DirectionsStatus.OK){v(ie);const Z=[{...T,isStart:!0,order:0},...V.map((re,ce)=>({...re.site,order:ce+1,isStart:!1}))];if(E(Z),N.current){const re=new window.google.maps.LatLngBounds;re.extend(new window.google.maps.LatLng(T.lat,T.lng)),V.forEach(ce=>{re.extend(new window.google.maps.LatLng(ce.lat,ce.lng))}),N.current.fitBounds(re)}if(window.showAlert){const re=ie.routes[0].legs.reduce((Y,ge)=>Y+ge.distance.value,0)/1e3,ce=ie.routes[0].legs.reduce((Y,ge)=>Y+ge.duration.value,0)/60;window.showAlert("Baarl",`Rota oluturuldu! Toplam mesafe: ${re.toFixed(1)} km, Tahmini sre: ${Math.round(ce)} dakika`,"success")}}else{console.error("Directions request failed:",ee);let Z="Rota oluturulurken bir hata olutu.";ee==="REQUEST_DENIED"?Z=`Directions API aktif deil. Google Cloud Console'dan "Directions API" ve "Routes API" servislerini aktifletirmeniz gerekiyor.`:ee==="OVER_QUERY_LIMIT"?Z="API kullanm limiti ald. Ltfen daha sonra tekrar deneyin.":ee==="ZERO_RESULTS"&&(Z="Bu noktalar arasnda rota bulunamad."),window.showAlert&&window.showAlert("Hata",Z,"error")}I(!1)})}catch(T){console.error("Error creating route:",T),window.showAlert&&window.showAlert("Hata","Konumunuz alnamad. Ltfen taraycnzn konum iznini kontrol edin.","error"),I(!1)}},z=()=>{if(v(null),p(null),E([]),N.current&&o.length>0){const T=new window.google.maps.LatLngBounds;o.forEach(O=>{T.extend({lat:parseFloat(O.locationLat),lng:parseFloat(O.locationLng)})}),N.current.fitBounds(T)}},ae=T=>{if(!T.locationLat||!T.locationLng){window.showAlert&&window.showAlert("Hata","Bu site iin konum bilgisi bulunmamaktadr.","error");return}const O=`https://www.google.com/maps/dir/?api=1&destination=${T.locationLat},${T.locationLng}`;window.open(O,"_blank")},te=T=>{u(T)},G=()=>{u(null)},ue=T=>{const O=`https://www.google.com/maps/dir/?api=1&destination=${T.locationLat},${T.locationLng}`;window.open(O,"_blank")},de=T=>isNaN(T)||T===null||T===void 0?"0,00":new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(T);return a?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"spinner-border text-primary",role:"status"}),c("p",{className:"mt-3 text-muted",children:"Ykleniyor..."})]})}):m("div",{className:"container-fluid py-4",children:[c("div",{className:"page-header mb-4",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h2",{className:"h3 fw-bold mb-1",children:"Ynetim Paneli"}),c("p",{className:"mb-0",children:"Sistem durumu ve son aktiviteler"})]}),m("div",{className:"d-flex align-items-center",children:[m("div",{className:"me-3 text-end",children:[c("p",{className:"mb-0 small",style:{opacity:.9},children:"Ho geldiniz"}),c("p",{className:"mb-0 fw-medium",children:"Ynetici"})]}),c("div",{className:"rounded-circle bg-white bg-opacity-25 d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:c("i",{className:"bi bi-person text-white"})})]})]})}),m("div",{className:"row mb-4 g-4",children:[c("div",{className:"col-md-3",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[c("div",{className:"rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-geo-alt text-primary fs-4"})}),m("div",{className:"text-end",children:[c("p",{className:"mb-0 small text-muted",children:"Toplam Site"}),c("h3",{className:"mb-0 fw-bold text-dark",children:e.activeSites})]})]}),c("div",{className:"progress",style:{height:"4px"},children:c("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:"75%"}})})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[c("div",{className:"rounded-circle bg-success bg-opacity-10 d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-building text-success fs-4"})}),m("div",{className:"text-end",children:[c("p",{className:"mb-0 small text-muted",children:"Aktif Firma"}),c("h3",{className:"mb-0 fw-bold text-dark",children:e.activeCompanies})]})]}),c("div",{className:"progress",style:{height:"4px"},children:c("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:"60%"}})})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[c("div",{className:"rounded-circle bg-info bg-opacity-10 d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-file-text text-info fs-4"})}),m("div",{className:"text-end",children:[c("p",{className:"mb-0 small text-muted",children:"Aktif Anlama"}),c("h3",{className:"mb-0 fw-bold text-dark",children:e.activeAgreements})]})]}),c("div",{className:"progress",style:{height:"4px"},children:c("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:"85%"}})})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[c("div",{className:"rounded-circle bg-warning bg-opacity-10 d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-cash-stack text-warning fs-4"})}),m("div",{className:"text-end",children:[c("p",{className:"mb-0 small text-muted",children:"Kasa Bakiyesi"}),c("h3",{className:"mb-0 fw-bold text-dark",children:de(e.netCash)})]})]}),c("div",{className:"progress",style:{height:"4px"},children:c("div",{className:"progress-bar bg-warning",role:"progressbar",style:{width:"50%"}})})]})})})]}),c("div",{className:"row mb-4 g-4",children:c("div",{className:"col-12",children:m("div",{className:"card border-0 shadow-sm",style:{borderRadius:"16px",overflow:"hidden"},children:[c("div",{className:"card-header bg-white border-0 py-3",children:c("h5",{className:"mb-0 fw-bold text-dark",children:"Hzl lemler"})}),c("div",{className:"card-body",children:m("div",{className:"row g-3",children:[c("div",{className:"col-md-3 col-6",children:c("div",{className:"card border-0 shadow-sm h-100 quick-action-card",style:{borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>t("/cashier"),children:m("div",{className:"card-body text-center py-4",children:[c("div",{className:"rounded-circle bg-success bg-opacity-10 d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"50px",height:"50px"},children:c("i",{className:"bi bi-plus-circle text-success fs-4"})}),c("h6",{className:"mb-0 fw-medium",children:"Gelir Ekle"})]})})}),c("div",{className:"col-md-3 col-6",children:c("div",{className:"card border-0 shadow-sm h-100 quick-action-card",style:{borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>t("/cashier"),children:m("div",{className:"card-body text-center py-4",children:[c("div",{className:"rounded-circle bg-danger bg-opacity-10 d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"50px",height:"50px"},children:c("i",{className:"bi bi-dash-circle text-danger fs-4"})}),c("h6",{className:"mb-0 fw-medium",children:"Gider Ekle"})]})})}),c("div",{className:"col-md-3 col-6",children:c("div",{className:"card border-0 shadow-sm h-100 quick-action-card",style:{borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>t("/agreements"),children:m("div",{className:"card-body text-center py-4",children:[c("div",{className:"rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"50px",height:"50px"},children:c("i",{className:"bi bi-file-earmark-text text-primary fs-4"})}),c("h6",{className:"mb-0 fw-medium",children:"Anlama Ekle"})]})})}),c("div",{className:"col-md-3 col-6",children:c("div",{className:"card border-0 shadow-sm h-100 quick-action-card",style:{borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>t("/sites"),children:m("div",{className:"card-body text-center py-4",children:[c("div",{className:"rounded-circle bg-info bg-opacity-10 d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"50px",height:"50px"},children:c("i",{className:"bi bi-geo-alt text-info fs-4"})}),c("h6",{className:"mb-0 fw-medium",children:"Site Ekle"})]})})})]})})]})})}),c("div",{className:"row mb-4",children:c("div",{className:"col-12",children:m("div",{className:"card border-0 shadow-sm",style:{borderRadius:"16px",overflow:"hidden"},children:[m("div",{className:"card-header bg-white border-0 py-3 d-flex justify-content-between align-items-center",children:[m("div",{children:[m("h5",{className:"mb-0 fw-bold text-dark",children:[c("i",{className:"bi bi-map me-2"}),"Elaz - Site Haritas"]}),m("small",{className:"text-muted",children:[o.length," site haritada gsteriliyor"]})]}),c("div",{className:"d-flex gap-2",children:g?m("button",{className:"btn btn-sm btn-outline-danger",onClick:z,children:[c("i",{className:"bi bi-x-circle me-1"}),"Rotay Temizle"]}):c("button",{className:"btn btn-sm btn-primary",onClick:K,disabled:C||o.length===0,children:C?m(kr,{children:[c("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Rota Hesaplanyor..."]}):m(kr,{children:[c("i",{className:"bi bi-route me-1"}),"Rota Olutur"]})})})]}),g&&F.length>0&&m("div",{className:"card-body border-bottom bg-light",children:[m("h6",{className:"fw-bold mb-3",children:[c("i",{className:"bi bi-list-ol me-2"}),"Rota Sras (",F.length-1," Site)"]}),c("div",{className:"row g-2",style:{maxHeight:"150px",overflowY:"auto"},children:F.map((T,O)=>T.isStart?null:c("div",{className:"col-md-6 col-lg-4",children:c("div",{className:"card border-0 shadow-sm h-100",children:c("div",{className:"card-body p-2",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{className:"flex-grow-1",children:[m("div",{className:"d-flex align-items-center mb-1",children:[c("span",{className:"badge bg-primary me-2",children:O}),c("strong",{className:"small",children:T.name})]}),T.neighborhood&&c("small",{className:"text-muted d-block",children:T.neighborhood})]}),c("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>ae(T),title:"Yol Tarifi Al",children:c("i",{className:"bi bi-navigation"})})]})})})},T.id||O))})]}),m("div",{className:"card-body p-0",style:{height:"600px",position:"relative"},children:[!d&&k&&c(Rw,{googleMapsApiKey:k,children:m(LE,{mapContainerStyle:{width:"100%",height:"100%"},center:x,zoom:12,options:{zoomControl:!0,streetViewControl:!1,mapTypeControl:!0,fullscreenControl:!0},onLoad:y,children:[f&&c(of,{position:f,icon:window.google&&window.google.maps?{url:"https://maps.google.com/mapfiles/ms/icons/green-dot.png",scaledSize:new window.google.maps.Size(40,40)}:void 0,title:"Balang Noktas (Sizin Konumunuz)"}),o.map(T=>c(of,{position:{lat:parseFloat(T.locationLat),lng:parseFloat(T.locationLng)},onClick:()=>te(T),icon:window.google&&window.google.maps?{url:T.siteType==="business_center"?"https://maps.google.com/mapfiles/ms/icons/blue-dot.png":"https://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new window.google.maps.Size(32,32)}:void 0},T.id)),g&&c(OE,{directions:g}),A&&c(Uw,{position:{lat:parseFloat(A.locationLat),lng:parseFloat(A.locationLng)},onCloseClick:G,children:m("div",{style:{maxWidth:"250px"},children:[m("h6",{className:"fw-bold mb-2",children:[c("i",{className:`bi ${A.siteType==="business_center"?"bi-briefcase":"bi-building"} me-1`}),A.name]}),A.neighborhood&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-geo-alt me-1"}),c("strong",{children:"Mahalle:"})," ",A.neighborhood]}),A.manager&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-person me-1"}),c("strong",{children:"Ynetici:"})," ",A.manager]}),A.phone&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-telephone me-1"}),c("strong",{children:"Telefon:"})," ",A.phone]}),A.location&&c("p",{className:"mb-2 small text-muted",children:A.location}),m("div",{className:"d-flex gap-2 mt-2 flex-wrap",children:[m("button",{className:"btn btn-sm btn-primary",onClick:()=>ue(A),children:[c("i",{className:"bi bi-map me-1"}),"Yol Tarifi"]}),A.blocks&&m("span",{className:"badge bg-info",children:[A.blocks," Blok"]}),A.panels&&m("span",{className:"badge bg-success",children:[A.panels," Panel"]})]})]})})]})}),d&&c("div",{className:"d-flex align-items-center justify-content-center h-100",children:m("div",{className:"text-center",children:[c("div",{className:"spinner-border text-primary",role:"status"}),c("p",{className:"mt-3 text-muted",children:"Harita ykleniyor..."})]})})]})]})})})]})};function dn(t){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(t)}var Qo=Uint8Array,Ms=Uint16Array,ME=Int32Array,QE=new Qo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),HE=new Qo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),F5=new Qo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hR=function(t,e){for(var r=new Ms(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new ME(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},fR=hR(QE,2),hY=fR.b,ex=fR.r;hY[28]=258,ex[258]=28;var fY=hR(HE,0),P5=fY.r,tx=new Ms(32768);for(var Mn=0;Mn<32768;++Mn){var Uc=(Mn&43690)>>1|(Mn&21845)<<1;Uc=(Uc&52428)>>2|(Uc&13107)<<2,Uc=(Uc&61680)>>4|(Uc&3855)<<4,tx[Mn]=((Uc&65280)>>8|(Uc&255)<<8)>>1}var Jm=function(t,e,r){for(var n=t.length,i=0,a=new Ms(e);i<n;++i)t[i]&&++a[t[i]-1];var s=new Ms(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(r){o=new Ms(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var A=i<<4|t[i],u=e-t[i],d=s[t[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[tx[d]>>l]=A}else for(o=new Ms(n),i=0;i<n;++i)t[i]&&(o[i]=tx[s[t[i]-1]++]>>15-t[i]);return o},Yu=new Qo(288);for(var Mn=0;Mn<144;++Mn)Yu[Mn]=8;for(var Mn=144;Mn<256;++Mn)Yu[Mn]=9;for(var Mn=256;Mn<280;++Mn)Yu[Mn]=7;for(var Mn=280;Mn<288;++Mn)Yu[Mn]=8;var wv=new Qo(32);for(var Mn=0;Mn<32;++Mn)wv[Mn]=5;var mY=Jm(Yu,9,0),pY=Jm(wv,5,0),mR=function(t){return(t+7)/8|0},gY=function(t,e,r){return(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length),new Qo(t.subarray(e,r))},Kl=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},um=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Zb=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,a=r.slice();if(!i)return{t:gR,l:0};if(i==1){var s=new Qo(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(R,L){return R.f-L.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],A=0,u=1,d=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=r[r[A].f<r[d].f?A++:d++],l=r[A!=u&&r[A].f<r[d].f?A++:d++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=a[0].s,n=1;n<i;++n)a[n].s>h&&(h=a[n].s);var f=new Ms(h+1),p=rx(r[u-1],f,0);if(p>e){var n=0,g=0,v=p-e,C=1<<v;for(a.sort(function(L,N){return f[N.s]-f[L.s]||L.f-N.f});n<i;++n){var I=a[n].s;if(f[I]>e)g+=C-(1<<p-f[I]),f[I]=e;else break}for(g>>=v;g>0;){var F=a[n].s;f[F]<e?g-=1<<e-f[F]++-1:++n}for(;n>=0&&g;--n){var E=a[n].s;f[E]==e&&(--f[E],++g)}p=e}return{t:new Qo(f),l:p}},rx=function(t,e,r){return t.s==-1?Math.max(rx(t.l,e,r+1),rx(t.r,e,r+1)):e[t.s]=r},L5=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Ms(++e),n=0,i=t[0],a=1,s=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=t[o]}return{c:r.subarray(0,n),n:e}},dm=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},pR=function(t,e,r){var n=r.length,i=mR(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<n;++a)t[i+a+4]=r[a];return(i+4+n)*8},D5=function(t,e,r,n,i,a,s,o,l,A,u){Kl(e,u++,r),++i[256];for(var d=Zb(i,15),h=d.t,f=d.l,p=Zb(a,15),g=p.t,v=p.l,C=L5(h),I=C.c,F=C.n,E=L5(g),R=E.c,L=E.n,N=new Ms(19),P=0;P<I.length;++P)++N[I[P]&31];for(var P=0;P<R.length;++P)++N[R[P]&31];for(var x=Zb(N,7),k=x.t,y=x.l,S=19;S>4&&!k[F5[S-1]];--S);var _=A+5<<3,M=dm(i,Yu)+dm(a,wv)+s,K=dm(i,h)+dm(a,g)+s+14+3*S+dm(N,k)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&_<=M&&_<=K)return pR(e,u,t.subarray(l,l+A));var z,ae,te,G;if(Kl(e,u,1+(K<M)),u+=2,K<M){z=Jm(h,f,0),ae=h,te=Jm(g,v,0),G=g;var ue=Jm(k,y,0);Kl(e,u,F-257),Kl(e,u+5,L-1),Kl(e,u+10,S-4),u+=14;for(var P=0;P<S;++P)Kl(e,u+3*P,k[F5[P]]);u+=3*S;for(var de=[I,R],T=0;T<2;++T)for(var O=de[T],P=0;P<O.length;++P){var V=O[P]&31;Kl(e,u,ue[V]),u+=k[V],V>15&&(Kl(e,u,O[P]>>5&127),u+=O[P]>>12)}}else z=mY,ae=Yu,te=pY,G=wv;for(var P=0;P<o;++P){var Q=n[P];if(Q>255){var V=Q>>18&31;um(e,u,z[V+257]),u+=ae[V+257],V>7&&(Kl(e,u,Q>>23&31),u+=QE[V]);var X=Q&31;um(e,u,te[X]),u+=G[X],X>3&&(um(e,u,Q>>5&8191),u+=HE[X])}else um(e,u,z[Q]),u+=ae[Q]}return um(e,u,z[256]),u+ae[256]},vY=new ME([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gR=new Qo(0),wY=function(t,e,r,n,i,a){var s=a.z||t.length,o=new Qo(n+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(n,o.length-i),A=a.l,u=(a.r||0)&7;if(e){u&&(l[0]=a.r>>3);for(var d=vY[e-1],h=d>>13,f=d&8191,p=(1<<r)-1,g=a.p||new Ms(32768),v=a.h||new Ms(p+1),C=Math.ceil(r/3),I=2*C,F=function(q){return(t[q]^t[q+1]<<C^t[q+2]<<I)&p},E=new ME(25e3),R=new Ms(288),L=new Ms(32),N=0,P=0,x=a.i||0,k=0,y=a.w||0,S=0;x+2<s;++x){var _=F(x),M=x&32767,K=v[_];if(g[M]=K,v[_]=M,y<=x){var z=s-x;if((N>7e3||k>24576)&&(z>423||!A)){u=D5(t,l,0,E,R,L,P,k,S,x-S,u),k=N=P=0,S=x;for(var ae=0;ae<286;++ae)R[ae]=0;for(var ae=0;ae<30;++ae)L[ae]=0}var te=2,G=0,ue=f,de=M-K&32767;if(z>2&&_==F(x-de))for(var T=Math.min(h,z)-1,O=Math.min(32767,x),V=Math.min(258,z);de<=O&&--ue&&M!=K;){if(t[x+te]==t[x+te-de]){for(var Q=0;Q<V&&t[x+Q]==t[x+Q-de];++Q);if(Q>te){if(te=Q,G=de,Q>T)break;for(var X=Math.min(de,Q-2),ie=0,ae=0;ae<X;++ae){var ee=x-de+ae&32767,Z=g[ee],re=ee-Z&32767;re>ie&&(ie=re,K=ee)}}}M=K,K=g[M],de+=M-K&32767}if(G){E[k++]=268435456|ex[te]<<18|P5[G];var ce=ex[te]&31,Y=P5[G]&31;P+=QE[ce]+HE[Y],++R[257+ce],++L[Y],y=x+te,++N}else E[k++]=t[x],++R[t[x]]}}for(x=Math.max(x,y);x<s;++x)E[k++]=t[x],++R[t[x]];u=D5(t,l,A,E,R,L,P,k,S,x-S,u),A||(a.r=u&7|l[u/8|0]<<3,u-=7,a.h=v,a.p=g,a.i=x,a.w=y)}else{for(var x=a.w||0;x<s+A;x+=65535){var ge=x+65535;ge>=s&&(l[u/8|0]=A,ge=s),u=pR(l,u+1,t.subarray(x,ge))}a.i=s}return gY(o,0,n+mR(u)+i)},vR=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,a=r.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=n+=r[s];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},bY=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new Qo(a.length+t.length);s.set(a),s.set(t,a.length),t=s,i.w=a.length}return wY(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},wR=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},yY=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=vR();i.p(e.dictionary),wR(t,2,i.d())}};function nx(t,e){e||(e={});var r=vR();r.p(t);var n=bY(t,e,e.dictionary?6:2,4);return yY(n,e),wR(n,n.length-4,r.d()),n}var xY=typeof TextDecoder<"u"&&new TextDecoder,_Y=0;try{xY.decode(gR,{stream:!0}),_Y=1}catch{}function EY(t){if(Array.isArray(t))return t}function BY(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,A=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){A=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(A)throw i}}return o}}function R5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function CY(t,e){if(t){if(typeof t=="string")return R5(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R5(t,e):void 0}}function NY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U5(t,e){return EY(t)||BY(t,e)||CY(t,e)||NY()}function O5(t,e="utf8"){return new TextDecoder(e).decode(t)}const SY=new TextEncoder;function kY(t){return SY.encode(t)}const TY=1024*8,IY=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),ey={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class VE{constructor(e=TY,r={}){cn(this,"buffer");cn(this,"byteLength");cn(this,"byteOffset");cn(this,"length");cn(this,"offset");cn(this,"lastWrittenByte");cn(this,"littleEndian");cn(this,"_data");cn(this,"_mark");cn(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=r.offset?r.offset>>>0:0,a=e.byteLength-i;let s=i;(ArrayBuffer.isView(e)||e instanceof VE)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=ey[r].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===IY&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new ey[r](o.buffer);return this.offset+=n,l.reverse(),l}const s=new ey[r](a);return this.offset+=n,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return O5(this.readBytes(e))}decodeText(e=1,r="utf8"){return O5(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(kY(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const FY=4,M5=0,Q5=1,PY=2;function kf(t){let e=t.length;for(;--e>=0;)t[e]=0}const LY=0,bR=1,DY=2,RY=3,UY=258,KE=29,kp=256,D0=kp+1+KE,Th=30,jE=19,yR=2*D0+1,wu=15,ty=16,OY=7,zE=256,xR=16,_R=17,ER=18,ix=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),C1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),MY=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),BR=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),QY=512,Gl=new Array((D0+2)*2);kf(Gl);const Zm=new Array(Th*2);kf(Zm);const R0=new Array(QY);kf(R0);const U0=new Array(UY-RY+1);kf(U0);const $E=new Array(KE);kf($E);const bv=new Array(Th);kf(bv);function ry(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let CR,NR,SR;function ny(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const kR=t=>t<256?R0[t]:R0[256+(t>>>7)],O0=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},us=(t,e,r)=>{t.bi_valid>ty-r?(t.bi_buf|=e<<t.bi_valid&65535,O0(t,t.bi_buf),t.bi_buf=e>>ty-t.bi_valid,t.bi_valid+=r-ty):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},cl=(t,e,r)=>{us(t,r[e*2],r[e*2+1])},TR=(t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},HY=t=>{t.bi_valid===16?(O0(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},VY=(t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let A,u,d,h,f,p,g=0;for(h=0;h<=wu;h++)t.bl_count[h]=0;for(r[t.heap[t.heap_max]*2+1]=0,A=t.heap_max+1;A<yR;A++)u=t.heap[A],h=r[r[u*2+1]*2+1]+1,h>l&&(h=l,g++),r[u*2+1]=h,!(u>n)&&(t.bl_count[h]++,f=0,u>=o&&(f=s[u-o]),p=r[u*2],t.opt_len+=p*(h+f),a&&(t.static_len+=p*(i[u*2+1]+f)));if(g!==0){do{for(h=l-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(h=l;h!==0;h--)for(u=t.bl_count[h];u!==0;)d=t.heap[--A],!(d>n)&&(r[d*2+1]!==h&&(t.opt_len+=(h-r[d*2+1])*r[d*2],r[d*2+1]=h),u--)}},IR=(t,e,r)=>{const n=new Array(wu+1);let i=0,a,s;for(a=1;a<=wu;a++)i=i+r[a-1]<<1,n[a]=i;for(s=0;s<=e;s++){let o=t[s*2+1];o!==0&&(t[s*2]=TR(n[o]++,o))}},KY=()=>{let t,e,r,n,i;const a=new Array(wu+1);for(r=0,n=0;n<KE-1;n++)for($E[n]=r,t=0;t<1<<ix[n];t++)U0[r++]=n;for(U0[r-1]=n,i=0,n=0;n<16;n++)for(bv[n]=i,t=0;t<1<<C1[n];t++)R0[i++]=n;for(i>>=7;n<Th;n++)for(bv[n]=i<<7,t=0;t<1<<C1[n]-7;t++)R0[256+i++]=n;for(e=0;e<=wu;e++)a[e]=0;for(t=0;t<=143;)Gl[t*2+1]=8,t++,a[8]++;for(;t<=255;)Gl[t*2+1]=9,t++,a[9]++;for(;t<=279;)Gl[t*2+1]=7,t++,a[7]++;for(;t<=287;)Gl[t*2+1]=8,t++,a[8]++;for(IR(Gl,D0+1,a),t=0;t<Th;t++)Zm[t*2+1]=5,Zm[t*2]=TR(t,5);CR=new ry(Gl,ix,kp+1,D0,wu),NR=new ry(Zm,C1,0,Th,wu),SR=new ry(new Array(0),MY,0,jE,OY)},FR=t=>{let e;for(e=0;e<D0;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Th;e++)t.dyn_dtree[e*2]=0;for(e=0;e<jE;e++)t.bl_tree[e*2]=0;t.dyn_ltree[zE*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},PR=t=>{t.bi_valid>8?O0(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},H5=(t,e,r,n)=>{const i=e*2,a=r*2;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]},iy=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&H5(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!H5(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},V5=(t,e,r)=>{let n,i,a=0,s,o;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+a++]&255,n+=(t.pending_buf[t.sym_buf+a++]&255)<<8,i=t.pending_buf[t.sym_buf+a++],n===0?cl(t,i,e):(s=U0[i],cl(t,s+kp+1,e),o=ix[s],o!==0&&(i-=$E[s],us(t,i,o)),n--,s=kR(n),cl(t,s,r),o=C1[s],o!==0&&(n-=bv[s],us(t,n,o)));while(a<t.sym_next);cl(t,zE,e)},ax=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems;let s,o,l=-1,A;for(t.heap_len=0,t.heap_max=yR,s=0;s<a;s++)r[s*2]!==0?(t.heap[++t.heap_len]=l=s,t.depth[s]=0):r[s*2+1]=0;for(;t.heap_len<2;)A=t.heap[++t.heap_len]=l<2?++l:0,r[A*2]=1,t.depth[A]=0,t.opt_len--,i&&(t.static_len-=n[A*2+1]);for(e.max_code=l,s=t.heap_len>>1;s>=1;s--)iy(t,r,s);A=a;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],iy(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,r[A*2]=r[s*2]+r[o*2],t.depth[A]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,r[s*2+1]=r[o*2+1]=A,t.heap[1]=A++,iy(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],VY(t,e),IR(r,l,t.bl_count)},K5=(t,e,r)=>{let n,i=-1,a,s=e[0*2+1],o=0,l=7,A=4;for(s===0&&(l=138,A=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=e[(n+1)*2+1],!(++o<l&&a===s)&&(o<A?t.bl_tree[a*2]+=o:a!==0?(a!==i&&t.bl_tree[a*2]++,t.bl_tree[xR*2]++):o<=10?t.bl_tree[_R*2]++:t.bl_tree[ER*2]++,o=0,i=a,s===0?(l=138,A=3):a===s?(l=6,A=3):(l=7,A=4))},j5=(t,e,r)=>{let n,i=-1,a,s=e[0*2+1],o=0,l=7,A=4;for(s===0&&(l=138,A=3),n=0;n<=r;n++)if(a=s,s=e[(n+1)*2+1],!(++o<l&&a===s)){if(o<A)do cl(t,a,t.bl_tree);while(--o!==0);else a!==0?(a!==i&&(cl(t,a,t.bl_tree),o--),cl(t,xR,t.bl_tree),us(t,o-3,2)):o<=10?(cl(t,_R,t.bl_tree),us(t,o-3,3)):(cl(t,ER,t.bl_tree),us(t,o-11,7));o=0,i=a,s===0?(l=138,A=3):a===s?(l=6,A=3):(l=7,A=4)}},jY=t=>{let e;for(K5(t,t.dyn_ltree,t.l_desc.max_code),K5(t,t.dyn_dtree,t.d_desc.max_code),ax(t,t.bl_desc),e=jE-1;e>=3&&t.bl_tree[BR[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},zY=(t,e,r,n)=>{let i;for(us(t,e-257,5),us(t,r-1,5),us(t,n-4,4),i=0;i<n;i++)us(t,t.bl_tree[BR[i]*2+1],3);j5(t,t.dyn_ltree,e-1),j5(t,t.dyn_dtree,r-1)},$Y=t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return M5;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return Q5;for(r=32;r<kp;r++)if(t.dyn_ltree[r*2]!==0)return Q5;return M5};let z5=!1;const GY=t=>{z5||(KY(),z5=!0),t.l_desc=new ny(t.dyn_ltree,CR),t.d_desc=new ny(t.dyn_dtree,NR),t.bl_desc=new ny(t.bl_tree,SR),t.bi_buf=0,t.bi_valid=0,FR(t)},LR=(t,e,r,n)=>{us(t,(LY<<1)+(n?1:0),3),PR(t),O0(t,r),O0(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},WY=t=>{us(t,bR<<1,3),cl(t,zE,Gl),HY(t)},qY=(t,e,r,n)=>{let i,a,s=0;t.level>0?(t.strm.data_type===PY&&(t.strm.data_type=$Y(t)),ax(t,t.l_desc),ax(t,t.d_desc),s=jY(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&e!==-1?LR(t,e,r,n):t.strategy===FY||a===i?(us(t,(bR<<1)+(n?1:0),3),V5(t,Gl,Zm)):(us(t,(DY<<1)+(n?1:0),3),zY(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),V5(t,t.dyn_ltree,t.dyn_dtree)),FR(t),n&&PR(t)},XY=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(U0[r]+kp+1)*2]++,t.dyn_dtree[kR(e)*2]++),t.sym_next===t.sym_end);var YY=GY,JY=LR,ZY=qY,eJ=XY,tJ=WY,rJ={_tr_init:YY,_tr_stored_block:JY,_tr_flush_block:ZY,_tr_tally:eJ,_tr_align:tJ};const nJ=(t,e,r,n)=>{let i=t&65535|0,a=t>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var M0=nJ;const iJ=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},aJ=new Uint32Array(iJ()),sJ=(t,e,r,n)=>{const i=aJ,a=n+r;t^=-1;for(let s=n;s<a;s++)t=t>>>8^i[(t^e[s])&255];return t^-1};var Ki=sJ,lf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Tp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:oJ,_tr_stored_block:sx,_tr_flush_block:lJ,_tr_tally:pA,_tr_align:cJ}=rJ,{Z_NO_FLUSH:gA,Z_PARTIAL_FLUSH:AJ,Z_FULL_FLUSH:uJ,Z_FINISH:oo,Z_BLOCK:$5,Z_OK:ia,Z_STREAM_END:G5,Z_STREAM_ERROR:xl,Z_DATA_ERROR:dJ,Z_BUF_ERROR:ay,Z_DEFAULT_COMPRESSION:hJ,Z_FILTERED:fJ,Z_HUFFMAN_ONLY:bg,Z_RLE:mJ,Z_FIXED:pJ,Z_DEFAULT_STRATEGY:gJ,Z_UNKNOWN:vJ,Z_DEFLATED:Ow}=Tp,wJ=9,bJ=15,yJ=8,xJ=29,_J=256,ox=_J+1+xJ,EJ=30,BJ=19,CJ=2*ox+1,NJ=15,Kr=3,iA=258,_l=iA+Kr+1,SJ=32,cf=42,GE=57,lx=69,cx=73,Ax=91,ux=103,bu=113,Bm=666,Wa=1,Tf=2,Ju=3,If=4,kJ=3,yu=(t,e)=>(t.msg=lf[e],e),W5=t=>t*2-(t>4?9:0),Jc=t=>{let e=t.length;for(;--e>=0;)t[e]=0},TJ=t=>{let e,r,n,i=t.w_size;e=t.hash_size,n=e;do r=t.head[--n],t.head[n]=r>=i?r-i:0;while(--e);e=i,n=e;do r=t.prev[--n],t.prev[n]=r>=i?r-i:0;while(--e)};let IJ=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,vA=IJ;const Ts=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},Qs=(t,e)=>{lJ(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Ts(t.strm)},tn=(t,e)=>{t.pending_buf[t.pending++]=e},hm=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},dx=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),t.state.wrap===1?t.adler=M0(t.adler,e,i,r):t.state.wrap===2&&(t.adler=Ki(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},DR=(t,e)=>{let r=t.max_chain_length,n=t.strstart,i,a,s=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-_l?t.strstart-(t.w_size-_l):0,A=t.window,u=t.w_mask,d=t.prev,h=t.strstart+iA;let f=A[n+s-1],p=A[n+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(i=e,!(A[i+s]!==p||A[i+s-1]!==f||A[i]!==A[n]||A[++i]!==A[n+1])){n+=2,i++;do;while(A[++n]===A[++i]&&A[++n]===A[++i]&&A[++n]===A[++i]&&A[++n]===A[++i]&&A[++n]===A[++i]&&A[++n]===A[++i]&&A[++n]===A[++i]&&A[++n]===A[++i]&&n<h);if(a=iA-(h-n),n=h-iA,a>s){if(t.match_start=e,s=a,a>=o)break;f=A[n+s-1],p=A[n+s]}}while((e=d[e&u])>l&&--r!==0);return s<=t.lookahead?s:t.lookahead},Af=t=>{const e=t.w_size;let r,n,i;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-_l)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),TJ(t),n+=e),t.strm.avail_in===0)break;if(r=dx(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=Kr)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=vA(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=vA(t,t.ins_h,t.window[i+Kr-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<Kr)););}while(t.lookahead<_l&&t.strm.avail_in!==0)},RR=(t,e)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,i,a,s=0,o=t.strm.avail_in;do{if(n=65535,a=t.bi_valid+42>>3,t.strm.avail_out<a||(a=t.strm.avail_out-a,i=t.strstart-t.block_start,n>i+t.strm.avail_in&&(n=i+t.strm.avail_in),n>a&&(n=a),n<r&&(n===0&&e!==oo||e===gA||n!==i+t.strm.avail_in)))break;s=e===oo&&n===i+t.strm.avail_in?1:0,sx(t,0,0,s),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,Ts(t.strm),i&&(i>n&&(i=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,n-=i),n&&(dx(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(s===0);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?If:e!==gA&&e!==oo&&t.strm.avail_in===0&&t.strstart===t.block_start?Tf:(a=t.window_size-t.strstart,t.strm.avail_in>a&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,a+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),a>t.strm.avail_in&&(a=t.strm.avail_in),a&&(dx(t.strm,t.window,t.strstart,a),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.high_water<t.strstart&&(t.high_water=t.strstart),a=t.bi_valid+42>>3,a=t.pending_buf_size-a>65535?65535:t.pending_buf_size-a,r=a>t.w_size?t.w_size:a,i=t.strstart-t.block_start,(i>=r||(i||e===oo)&&e!==gA&&t.strm.avail_in===0&&i<=a)&&(n=i>a?a:i,s=e===oo&&t.strm.avail_in===0&&n===i?1:0,sx(t,t.block_start,n,s),t.block_start+=n,Ts(t.strm)),s?Ju:Wa)},sy=(t,e)=>{let r,n;for(;;){if(t.lookahead<_l){if(Af(t),t.lookahead<_l&&e===gA)return Wa;if(t.lookahead===0)break}if(r=0,t.lookahead>=Kr&&(t.ins_h=vA(t,t.ins_h,t.window[t.strstart+Kr-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-_l&&(t.match_length=DR(t,r)),t.match_length>=Kr)if(n=pA(t,t.strstart-t.match_start,t.match_length-Kr),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Kr){t.match_length--;do t.strstart++,t.ins_h=vA(t,t.ins_h,t.window[t.strstart+Kr-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=vA(t,t.ins_h,t.window[t.strstart+1]);else n=pA(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Qs(t,!1),t.strm.avail_out===0))return Wa}return t.insert=t.strstart<Kr-1?t.strstart:Kr-1,e===oo?(Qs(t,!0),t.strm.avail_out===0?Ju:If):t.sym_next&&(Qs(t,!1),t.strm.avail_out===0)?Wa:Tf},Gd=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<_l){if(Af(t),t.lookahead<_l&&e===gA)return Wa;if(t.lookahead===0)break}if(r=0,t.lookahead>=Kr&&(t.ins_h=vA(t,t.ins_h,t.window[t.strstart+Kr-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Kr-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-_l&&(t.match_length=DR(t,r),t.match_length<=5&&(t.strategy===fJ||t.match_length===Kr&&t.strstart-t.match_start>4096)&&(t.match_length=Kr-1)),t.prev_length>=Kr&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-Kr,n=pA(t,t.strstart-1-t.prev_match,t.prev_length-Kr),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=vA(t,t.ins_h,t.window[t.strstart+Kr-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Kr-1,t.strstart++,n&&(Qs(t,!1),t.strm.avail_out===0))return Wa}else if(t.match_available){if(n=pA(t,0,t.window[t.strstart-1]),n&&Qs(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Wa}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=pA(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Kr-1?t.strstart:Kr-1,e===oo?(Qs(t,!0),t.strm.avail_out===0?Ju:If):t.sym_next&&(Qs(t,!1),t.strm.avail_out===0)?Wa:Tf},FJ=(t,e)=>{let r,n,i,a;const s=t.window;for(;;){if(t.lookahead<=iA){if(Af(t),t.lookahead<=iA&&e===gA)return Wa;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Kr&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){a=t.strstart+iA;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=iA-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Kr?(r=pA(t,1,t.match_length-Kr),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=pA(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Qs(t,!1),t.strm.avail_out===0))return Wa}return t.insert=0,e===oo?(Qs(t,!0),t.strm.avail_out===0?Ju:If):t.sym_next&&(Qs(t,!1),t.strm.avail_out===0)?Wa:Tf},PJ=(t,e)=>{let r;for(;;){if(t.lookahead===0&&(Af(t),t.lookahead===0)){if(e===gA)return Wa;break}if(t.match_length=0,r=pA(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Qs(t,!1),t.strm.avail_out===0))return Wa}return t.insert=0,e===oo?(Qs(t,!0),t.strm.avail_out===0?Ju:If):t.sym_next&&(Qs(t,!1),t.strm.avail_out===0)?Wa:Tf};function el(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const Cm=[new el(0,0,0,0,RR),new el(4,4,8,4,sy),new el(4,5,16,8,sy),new el(4,6,32,32,sy),new el(4,4,16,16,Gd),new el(8,16,32,32,Gd),new el(8,16,128,128,Gd),new el(8,32,128,256,Gd),new el(32,128,258,1024,Gd),new el(32,258,258,4096,Gd)],LJ=t=>{t.window_size=2*t.w_size,Jc(t.head),t.max_lazy_match=Cm[t.level].max_lazy,t.good_match=Cm[t.level].good_length,t.nice_match=Cm[t.level].nice_length,t.max_chain_length=Cm[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Kr-1,t.match_available=0,t.ins_h=0};function DJ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ow,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(CJ*2),this.dyn_dtree=new Uint16Array((2*EJ+1)*2),this.bl_tree=new Uint16Array((2*BJ+1)*2),Jc(this.dyn_ltree),Jc(this.dyn_dtree),Jc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(NJ+1),this.heap=new Uint16Array(2*ox+1),Jc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ox+1),Jc(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ip=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==cf&&e.status!==GE&&e.status!==lx&&e.status!==cx&&e.status!==Ax&&e.status!==ux&&e.status!==bu&&e.status!==Bm?1:0},UR=t=>{if(Ip(t))return yu(t,xl);t.total_in=t.total_out=0,t.data_type=vJ;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?GE:e.wrap?cf:bu,t.adler=e.wrap===2?0:1,e.last_flush=-2,oJ(e),ia},OR=t=>{const e=UR(t);return e===ia&&LJ(t.state),e},RJ=(t,e)=>Ip(t)||t.state.wrap!==2?xl:(t.state.gzhead=e,ia),MR=(t,e,r,n,i,a)=>{if(!t)return xl;let s=1;if(e===hJ&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>wJ||r!==Ow||n<8||n>15||e<0||e>9||a<0||a>pJ||n===8&&s!==1)return yu(t,xl);n===8&&(n=9);const o=new DJ;return t.state=o,o.strm=t,o.status=cf,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+Kr-1)/Kr),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=e,o.strategy=a,o.method=r,OR(t)},UJ=(t,e)=>MR(t,e,Ow,bJ,yJ,gJ),OJ=(t,e)=>{if(Ip(t)||e>$5||e<0)return t?yu(t,xl):xl;const r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===Bm&&e!==oo)return yu(t,t.avail_out===0?ay:xl);const n=r.last_flush;if(r.last_flush=e,r.pending!==0){if(Ts(t),t.avail_out===0)return r.last_flush=-1,ia}else if(t.avail_in===0&&W5(e)<=W5(n)&&e!==oo)return yu(t,ay);if(r.status===Bm&&t.avail_in!==0)return yu(t,ay);if(r.status===cf&&r.wrap===0&&(r.status=bu),r.status===cf){let i=Ow+(r.w_bits-8<<4)<<8,a=-1;if(r.strategy>=bg||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,i|=a<<6,r.strstart!==0&&(i|=SJ),i+=31-i%31,hm(r,i),r.strstart!==0&&(hm(r,t.adler>>>16),hm(r,t.adler&65535)),t.adler=1,r.status=bu,Ts(t),r.pending!==0)return r.last_flush=-1,ia}if(r.status===GE){if(t.adler=0,tn(r,31),tn(r,139),tn(r,8),r.gzhead)tn(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),tn(r,r.gzhead.time&255),tn(r,r.gzhead.time>>8&255),tn(r,r.gzhead.time>>16&255),tn(r,r.gzhead.time>>24&255),tn(r,r.level===9?2:r.strategy>=bg||r.level<2?4:0),tn(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(tn(r,r.gzhead.extra.length&255),tn(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Ki(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=lx;else if(tn(r,0),tn(r,0),tn(r,0),tn(r,0),tn(r,0),tn(r,r.level===9?2:r.strategy>=bg||r.level<2?4:0),tn(r,kJ),r.status=bu,Ts(t),r.pending!==0)return r.last_flush=-1,ia}if(r.status===lx){if(r.gzhead.extra){let i=r.pending,a=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+a>r.pending_buf_size;){let o=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(t.adler=Ki(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=o,Ts(t),r.pending!==0)return r.last_flush=-1,ia;i=0,a-=o}let s=new Uint8Array(r.gzhead.extra);r.pending_buf.set(s.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending+=a,r.gzhead.hcrc&&r.pending>i&&(t.adler=Ki(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=cx}if(r.status===cx){if(r.gzhead.name){let i=r.pending,a;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(t.adler=Ki(t.adler,r.pending_buf,r.pending-i,i)),Ts(t),r.pending!==0)return r.last_flush=-1,ia;i=0}r.gzindex<r.gzhead.name.length?a=r.gzhead.name.charCodeAt(r.gzindex++)&255:a=0,tn(r,a)}while(a!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=Ki(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=Ax}if(r.status===Ax){if(r.gzhead.comment){let i=r.pending,a;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(t.adler=Ki(t.adler,r.pending_buf,r.pending-i,i)),Ts(t),r.pending!==0)return r.last_flush=-1,ia;i=0}r.gzindex<r.gzhead.comment.length?a=r.gzhead.comment.charCodeAt(r.gzindex++)&255:a=0,tn(r,a)}while(a!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=Ki(t.adler,r.pending_buf,r.pending-i,i))}r.status=ux}if(r.status===ux){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Ts(t),r.pending!==0))return r.last_flush=-1,ia;tn(r,t.adler&255),tn(r,t.adler>>8&255),t.adler=0}if(r.status=bu,Ts(t),r.pending!==0)return r.last_flush=-1,ia}if(t.avail_in!==0||r.lookahead!==0||e!==gA&&r.status!==Bm){let i=r.level===0?RR(r,e):r.strategy===bg?PJ(r,e):r.strategy===mJ?FJ(r,e):Cm[r.level].func(r,e);if((i===Ju||i===If)&&(r.status=Bm),i===Wa||i===Ju)return t.avail_out===0&&(r.last_flush=-1),ia;if(i===Tf&&(e===AJ?cJ(r):e!==$5&&(sx(r,0,0,!1),e===uJ&&(Jc(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Ts(t),t.avail_out===0))return r.last_flush=-1,ia}return e!==oo?ia:r.wrap<=0?G5:(r.wrap===2?(tn(r,t.adler&255),tn(r,t.adler>>8&255),tn(r,t.adler>>16&255),tn(r,t.adler>>24&255),tn(r,t.total_in&255),tn(r,t.total_in>>8&255),tn(r,t.total_in>>16&255),tn(r,t.total_in>>24&255)):(hm(r,t.adler>>>16),hm(r,t.adler&65535)),Ts(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?ia:G5)},MJ=t=>{if(Ip(t))return xl;const e=t.state.status;return t.state=null,e===bu?yu(t,dJ):ia},QJ=(t,e)=>{let r=e.length;if(Ip(t))return xl;const n=t.state,i=n.wrap;if(i===2||i===1&&n.status!==cf||n.lookahead)return xl;if(i===1&&(t.adler=M0(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){i===0&&(Jc(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(e.subarray(r-n.w_size,r),0),e=l,r=n.w_size}const a=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Af(n);n.lookahead>=Kr;){let l=n.strstart,A=n.lookahead-(Kr-1);do n.ins_h=vA(n,n.ins_h,n.window[l+Kr-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--A);n.strstart=l,n.lookahead=Kr-1,Af(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Kr-1,n.match_available=0,t.next_in=s,t.input=o,t.avail_in=a,n.wrap=i,ia};var HJ=UJ,VJ=MR,KJ=OR,jJ=UR,zJ=RJ,$J=OJ,GJ=MJ,WJ=QJ,qJ="pako deflate (from Nodeca project)",e0={deflateInit:HJ,deflateInit2:VJ,deflateReset:KJ,deflateResetKeep:jJ,deflateSetHeader:zJ,deflate:$J,deflateEnd:GJ,deflateSetDictionary:WJ,deflateInfo:qJ};const XJ=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var YJ=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)XJ(r,n)&&(t[n]=r[n])}}return t},JJ=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,a=t.length;n<a;n++){let s=t[n];r.set(s,i),i+=s.length}return r},Mw={assign:YJ,flattenChunks:JJ};let QR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{QR=!1}const Q0=new Uint8Array(256);for(let t=0;t<256;t++)Q0[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Q0[254]=Q0[254]=1;var ZJ=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,a,s=t.length,o=0;for(i=0;i<s;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|r&63):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|r&63):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|r&63);return e};const eZ=(t,e)=>{if(e<65534&&t.subarray&&QR)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var tZ=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const a=new Array(r*2);for(i=0,n=0;n<r;){let s=t[n++];if(s<128){a[i++]=s;continue}let o=Q0[s];if(o>4){a[i++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<r;)s=s<<6|t[n++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return eZ(a,i)},rZ=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Q0[t[r]]>e?r:e},H0={string2buf:ZJ,buf2string:tZ,utf8border:rZ};function nZ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var HR=nZ;const VR=Object.prototype.toString,{Z_NO_FLUSH:iZ,Z_SYNC_FLUSH:aZ,Z_FULL_FLUSH:sZ,Z_FINISH:oZ,Z_OK:yv,Z_STREAM_END:lZ,Z_DEFAULT_COMPRESSION:cZ,Z_DEFAULT_STRATEGY:AZ,Z_DEFLATED:uZ}=Tp;function WE(t){this.options=Mw.assign({level:cZ,method:uZ,chunkSize:16384,windowBits:15,memLevel:8,strategy:AZ},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new HR,this.strm.avail_out=0;let r=e0.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==yv)throw new Error(lf[r]);if(e.header&&e0.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=H0.string2buf(e.dictionary):VR.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=e0.deflateSetDictionary(this.strm,n),r!==yv)throw new Error(lf[r]);this._dict_set=!0}}WE.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,a;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?oZ:iZ,typeof t=="string"?r.input=H0.string2buf(t):VR.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===aZ||a===sZ)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=e0.deflate(r,a),i===lZ)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=e0.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===yv;if(r.avail_out===0){this.onData(r.output);continue}if(a>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};WE.prototype.onData=function(t){this.chunks.push(t)};WE.prototype.onEnd=function(t){t===yv&&(this.result=Mw.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const yg=16209,dZ=16191;var hZ=function(e,r){let n,i,a,s,o,l,A,u,d,h,f,p,g,v,C,I,F,E,R,L,N,P,x,k;const y=e.state;n=e.next_in,x=e.input,i=n+(e.avail_in-5),a=e.next_out,k=e.output,s=a-(r-e.avail_out),o=a+(e.avail_out-257),l=y.dmax,A=y.wsize,u=y.whave,d=y.wnext,h=y.window,f=y.hold,p=y.bits,g=y.lencode,v=y.distcode,C=(1<<y.lenbits)-1,I=(1<<y.distbits)-1;e:do{p<15&&(f+=x[n++]<<p,p+=8,f+=x[n++]<<p,p+=8),F=g[f&C];t:for(;;){if(E=F>>>24,f>>>=E,p-=E,E=F>>>16&255,E===0)k[a++]=F&65535;else if(E&16){R=F&65535,E&=15,E&&(p<E&&(f+=x[n++]<<p,p+=8),R+=f&(1<<E)-1,f>>>=E,p-=E),p<15&&(f+=x[n++]<<p,p+=8,f+=x[n++]<<p,p+=8),F=v[f&I];r:for(;;){if(E=F>>>24,f>>>=E,p-=E,E=F>>>16&255,E&16){if(L=F&65535,E&=15,p<E&&(f+=x[n++]<<p,p+=8,p<E&&(f+=x[n++]<<p,p+=8)),L+=f&(1<<E)-1,L>l){e.msg="invalid distance too far back",y.mode=yg;break e}if(f>>>=E,p-=E,E=a-s,L>E){if(E=L-E,E>u&&y.sane){e.msg="invalid distance too far back",y.mode=yg;break e}if(N=0,P=h,d===0){if(N+=A-E,E<R){R-=E;do k[a++]=h[N++];while(--E);N=a-L,P=k}}else if(d<E){if(N+=A+d-E,E-=d,E<R){R-=E;do k[a++]=h[N++];while(--E);if(N=0,d<R){E=d,R-=E;do k[a++]=h[N++];while(--E);N=a-L,P=k}}}else if(N+=d-E,E<R){R-=E;do k[a++]=h[N++];while(--E);N=a-L,P=k}for(;R>2;)k[a++]=P[N++],k[a++]=P[N++],k[a++]=P[N++],R-=3;R&&(k[a++]=P[N++],R>1&&(k[a++]=P[N++]))}else{N=a-L;do k[a++]=k[N++],k[a++]=k[N++],k[a++]=k[N++],R-=3;while(R>2);R&&(k[a++]=k[N++],R>1&&(k[a++]=k[N++]))}}else if(E&64){e.msg="invalid distance code",y.mode=yg;break e}else{F=v[(F&65535)+(f&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){y.mode=dZ;break e}else{e.msg="invalid literal/length code",y.mode=yg;break e}else{F=g[(F&65535)+(f&(1<<E)-1)];continue t}break}}while(n<i&&a<o);R=p>>3,n-=R,p-=R<<3,f&=(1<<p)-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=a<o?257+(o-a):257-(a-o),y.hold=f,y.bits=p};const Wd=15,q5=852,X5=592,Y5=0,oy=1,J5=2,fZ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mZ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pZ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gZ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vZ=(t,e,r,n,i,a,s,o)=>{const l=o.bits;let A=0,u=0,d=0,h=0,f=0,p=0,g=0,v=0,C=0,I=0,F,E,R,L,N,P=null,x;const k=new Uint16Array(Wd+1),y=new Uint16Array(Wd+1);let S=null,_,M,K;for(A=0;A<=Wd;A++)k[A]=0;for(u=0;u<n;u++)k[e[r+u]]++;for(f=l,h=Wd;h>=1&&k[h]===0;h--);if(f>h&&(f=h),h===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(d=1;d<h&&k[d]===0;d++);for(f<d&&(f=d),v=1,A=1;A<=Wd;A++)if(v<<=1,v-=k[A],v<0)return-1;if(v>0&&(t===Y5||h!==1))return-1;for(y[1]=0,A=1;A<Wd;A++)y[A+1]=y[A]+k[A];for(u=0;u<n;u++)e[r+u]!==0&&(s[y[e[r+u]]++]=u);if(t===Y5?(P=S=s,x=20):t===oy?(P=fZ,S=mZ,x=257):(P=pZ,S=gZ,x=0),I=0,u=0,A=d,N=a,p=f,g=0,R=-1,C=1<<f,L=C-1,t===oy&&C>q5||t===J5&&C>X5)return 1;for(;;){_=A-g,s[u]+1<x?(M=0,K=s[u]):s[u]>=x?(M=S[s[u]-x],K=P[s[u]-x]):(M=32+64,K=0),F=1<<A-g,E=1<<p,d=E;do E-=F,i[N+(I>>g)+E]=_<<24|M<<16|K|0;while(E!==0);for(F=1<<A-1;I&F;)F>>=1;if(F!==0?(I&=F-1,I+=F):I=0,u++,--k[A]===0){if(A===h)break;A=e[r+s[u]]}if(A>f&&(I&L)!==R){for(g===0&&(g=f),N+=d,p=A-g,v=1<<p;p+g<h&&(v-=k[p+g],!(v<=0));)p++,v<<=1;if(C+=1<<p,t===oy&&C>q5||t===J5&&C>X5)return 1;R=I&L,i[R]=f<<24|p<<16|N-a|0}}return I!==0&&(i[N+I]=A-g<<24|64<<16|0),o.bits=f,0};var t0=vZ;const wZ=0,KR=1,jR=2,{Z_FINISH:Z5,Z_BLOCK:bZ,Z_TREES:xg,Z_OK:Zu,Z_STREAM_END:yZ,Z_NEED_DICT:xZ,Z_STREAM_ERROR:mo,Z_DATA_ERROR:zR,Z_MEM_ERROR:$R,Z_BUF_ERROR:_Z,Z_DEFLATED:eT}=Tp,Qw=16180,tT=16181,rT=16182,nT=16183,iT=16184,aT=16185,sT=16186,oT=16187,lT=16188,cT=16189,xv=16190,jl=16191,ly=16192,AT=16193,cy=16194,uT=16195,dT=16196,hT=16197,fT=16198,_g=16199,Eg=16200,mT=16201,pT=16202,gT=16203,vT=16204,wT=16205,Ay=16206,bT=16207,yT=16208,Kn=16209,GR=16210,WR=16211,EZ=852,BZ=592,CZ=15,NZ=CZ,xT=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function SZ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gd=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Qw||e.mode>WR?1:0},qR=t=>{if(gd(t))return mo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Qw,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(EZ),e.distcode=e.distdyn=new Int32Array(BZ),e.sane=1,e.back=-1,Zu},XR=t=>{if(gd(t))return mo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,qR(t)},YR=(t,e)=>{let r;if(gd(t))return mo;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?mo:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,XR(t))},JR=(t,e)=>{if(!t)return mo;const r=new SZ;t.state=r,r.strm=t,r.window=null,r.mode=Qw;const n=YR(t,e);return n!==Zu&&(t.state=null),n},kZ=t=>JR(t,NZ);let _T=!0,uy,dy;const TZ=t=>{if(_T){uy=new Int32Array(512),dy=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(t0(KR,t.lens,0,288,uy,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;t0(jR,t.lens,0,32,dy,0,t.work,{bits:5}),_T=!1}t.lencode=uy,t.lenbits=9,t.distcode=dy,t.distbits=5},ZR=(t,e,r,n)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(e.subarray(r-n,r-n+i),a.wnext),n-=i,n?(a.window.set(e.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},IZ=(t,e)=>{let r,n,i,a,s,o,l,A,u,d,h,f,p,g,v=0,C,I,F,E,R,L,N,P;const x=new Uint8Array(4);let k,y;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gd(t)||!t.output||!t.input&&t.avail_in!==0)return mo;r=t.state,r.mode===jl&&(r.mode=ly),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,A=r.hold,u=r.bits,d=o,h=l,P=Zu;e:for(;;)switch(r.mode){case Qw:if(r.wrap===0){r.mode=ly;break}for(;u<16;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(r.wrap&2&&A===35615){r.wbits===0&&(r.wbits=15),r.check=0,x[0]=A&255,x[1]=A>>>8&255,r.check=Ki(r.check,x,2,0),A=0,u=0,r.mode=tT;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((A&255)<<8)+(A>>8))%31){t.msg="incorrect header check",r.mode=Kn;break}if((A&15)!==eT){t.msg="unknown compression method",r.mode=Kn;break}if(A>>>=4,u-=4,N=(A&15)+8,r.wbits===0&&(r.wbits=N),N>15||N>r.wbits){t.msg="invalid window size",r.mode=Kn;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=A&512?cT:jl,A=0,u=0;break;case tT:for(;u<16;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(r.flags=A,(r.flags&255)!==eT){t.msg="unknown compression method",r.mode=Kn;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Kn;break}r.head&&(r.head.text=A>>8&1),r.flags&512&&r.wrap&4&&(x[0]=A&255,x[1]=A>>>8&255,r.check=Ki(r.check,x,2,0)),A=0,u=0,r.mode=rT;case rT:for(;u<32;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}r.head&&(r.head.time=A),r.flags&512&&r.wrap&4&&(x[0]=A&255,x[1]=A>>>8&255,x[2]=A>>>16&255,x[3]=A>>>24&255,r.check=Ki(r.check,x,4,0)),A=0,u=0,r.mode=nT;case nT:for(;u<16;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=A&255,r.head.os=A>>8),r.flags&512&&r.wrap&4&&(x[0]=A&255,x[1]=A>>>8&255,r.check=Ki(r.check,x,2,0)),A=0,u=0,r.mode=iT;case iT:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}r.length=A,r.head&&(r.head.extra_len=A),r.flags&512&&r.wrap&4&&(x[0]=A&255,x[1]=A>>>8&255,r.check=Ki(r.check,x,2,0)),A=0,u=0}else r.head&&(r.head.extra=null);r.mode=aT;case aT:if(r.flags&1024&&(f=r.length,f>o&&(f=o),f&&(r.head&&(N=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+f),N)),r.flags&512&&r.wrap&4&&(r.check=Ki(r.check,n,f,a)),o-=f,a+=f,r.length-=f),r.length))break e;r.length=0,r.mode=sT;case sT:if(r.flags&2048){if(o===0)break e;f=0;do N=n[a+f++],r.head&&N&&r.length<65536&&(r.head.name+=String.fromCharCode(N));while(N&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Ki(r.check,n,f,a)),o-=f,a+=f,N)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=oT;case oT:if(r.flags&4096){if(o===0)break e;f=0;do N=n[a+f++],r.head&&N&&r.length<65536&&(r.head.comment+=String.fromCharCode(N));while(N&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=Ki(r.check,n,f,a)),o-=f,a+=f,N)break e}else r.head&&(r.head.comment=null);r.mode=lT;case lT:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(r.wrap&4&&A!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Kn;break}A=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=jl;break;case cT:for(;u<32;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}t.adler=r.check=xT(A),A=0,u=0,r.mode=xv;case xv:if(r.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=A,r.bits=u,xZ;t.adler=r.check=1,r.mode=jl;case jl:if(e===bZ||e===xg)break e;case ly:if(r.last){A>>>=u&7,u-=u&7,r.mode=Ay;break}for(;u<3;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}switch(r.last=A&1,A>>>=1,u-=1,A&3){case 0:r.mode=AT;break;case 1:if(TZ(r),r.mode=_g,e===xg){A>>>=2,u-=2;break e}break;case 2:r.mode=dT;break;case 3:t.msg="invalid block type",r.mode=Kn}A>>>=2,u-=2;break;case AT:for(A>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if((A&65535)!==(A>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Kn;break}if(r.length=A&65535,A=0,u=0,r.mode=cy,e===xg)break e;case cy:r.mode=uT;case uT:if(f=r.length,f){if(f>o&&(f=o),f>l&&(f=l),f===0)break e;i.set(n.subarray(a,a+f),s),o-=f,a+=f,l-=f,s+=f,r.length-=f;break}r.mode=jl;break;case dT:for(;u<14;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(r.nlen=(A&31)+257,A>>>=5,u-=5,r.ndist=(A&31)+1,A>>>=5,u-=5,r.ncode=(A&15)+4,A>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Kn;break}r.have=0,r.mode=hT;case hT:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}r.lens[S[r.have++]]=A&7,A>>>=3,u-=3}for(;r.have<19;)r.lens[S[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,k={bits:r.lenbits},P=t0(wZ,r.lens,0,19,r.lencode,0,r.work,k),r.lenbits=k.bits,P){t.msg="invalid code lengths set",r.mode=Kn;break}r.have=0,r.mode=fT;case fT:for(;r.have<r.nlen+r.ndist;){for(;v=r.lencode[A&(1<<r.lenbits)-1],C=v>>>24,I=v>>>16&255,F=v&65535,!(C<=u);){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(F<16)A>>>=C,u-=C,r.lens[r.have++]=F;else{if(F===16){for(y=C+2;u<y;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(A>>>=C,u-=C,r.have===0){t.msg="invalid bit length repeat",r.mode=Kn;break}N=r.lens[r.have-1],f=3+(A&3),A>>>=2,u-=2}else if(F===17){for(y=C+3;u<y;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}A>>>=C,u-=C,N=0,f=3+(A&7),A>>>=3,u-=3}else{for(y=C+7;u<y;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}A>>>=C,u-=C,N=0,f=11+(A&127),A>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Kn;break}for(;f--;)r.lens[r.have++]=N}}if(r.mode===Kn)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Kn;break}if(r.lenbits=9,k={bits:r.lenbits},P=t0(KR,r.lens,0,r.nlen,r.lencode,0,r.work,k),r.lenbits=k.bits,P){t.msg="invalid literal/lengths set",r.mode=Kn;break}if(r.distbits=6,r.distcode=r.distdyn,k={bits:r.distbits},P=t0(jR,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,k),r.distbits=k.bits,P){t.msg="invalid distances set",r.mode=Kn;break}if(r.mode=_g,e===xg)break e;case _g:r.mode=Eg;case Eg:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=A,r.bits=u,hZ(t,h),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,A=r.hold,u=r.bits,r.mode===jl&&(r.back=-1);break}for(r.back=0;v=r.lencode[A&(1<<r.lenbits)-1],C=v>>>24,I=v>>>16&255,F=v&65535,!(C<=u);){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(I&&!(I&240)){for(E=C,R=I,L=F;v=r.lencode[L+((A&(1<<E+R)-1)>>E)],C=v>>>24,I=v>>>16&255,F=v&65535,!(E+C<=u);){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}A>>>=E,u-=E,r.back+=E}if(A>>>=C,u-=C,r.back+=C,r.length=F,I===0){r.mode=wT;break}if(I&32){r.back=-1,r.mode=jl;break}if(I&64){t.msg="invalid literal/length code",r.mode=Kn;break}r.extra=I&15,r.mode=mT;case mT:if(r.extra){for(y=r.extra;u<y;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}r.length+=A&(1<<r.extra)-1,A>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=pT;case pT:for(;v=r.distcode[A&(1<<r.distbits)-1],C=v>>>24,I=v>>>16&255,F=v&65535,!(C<=u);){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(!(I&240)){for(E=C,R=I,L=F;v=r.distcode[L+((A&(1<<E+R)-1)>>E)],C=v>>>24,I=v>>>16&255,F=v&65535,!(E+C<=u);){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}A>>>=E,u-=E,r.back+=E}if(A>>>=C,u-=C,r.back+=C,I&64){t.msg="invalid distance code",r.mode=Kn;break}r.offset=F,r.extra=I&15,r.mode=gT;case gT:if(r.extra){for(y=r.extra;u<y;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}r.offset+=A&(1<<r.extra)-1,A>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Kn;break}r.mode=vT;case vT:if(l===0)break e;if(f=h-l,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Kn;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=i,p=s-r.offset,f=r.length;f>l&&(f=l),l-=f,r.length-=f;do i[s++]=g[p++];while(--f);r.length===0&&(r.mode=Eg);break;case wT:if(l===0)break e;i[s++]=r.length,l--,r.mode=Eg;break;case Ay:if(r.wrap){for(;u<32;){if(o===0)break e;o--,A|=n[a++]<<u,u+=8}if(h-=l,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Ki(r.check,i,h,s-h):M0(r.check,i,h,s-h)),h=l,r.wrap&4&&(r.flags?A:xT(A))!==r.check){t.msg="incorrect data check",r.mode=Kn;break}A=0,u=0}r.mode=bT;case bT:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,A+=n[a++]<<u,u+=8}if(r.wrap&4&&A!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Kn;break}A=0,u=0}r.mode=yT;case yT:P=yZ;break e;case Kn:P=zR;break e;case GR:return $R;case WR:default:return mo}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,r.hold=A,r.bits=u,(r.wsize||h!==t.avail_out&&r.mode<Kn&&(r.mode<Ay||e!==Z5))&&ZR(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Ki(r.check,i,h,t.next_out-h):M0(r.check,i,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===jl?128:0)+(r.mode===_g||r.mode===cy?256:0),(d===0&&h===0||e===Z5)&&P===Zu&&(P=_Z),P},FZ=t=>{if(gd(t))return mo;let e=t.state;return e.window&&(e.window=null),t.state=null,Zu},PZ=(t,e)=>{if(gd(t))return mo;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Zu):mo},LZ=(t,e)=>{const r=e.length;let n,i,a;return gd(t)||(n=t.state,n.wrap!==0&&n.mode!==xv)?mo:n.mode===xv&&(i=1,i=M0(i,e,r,0),i!==n.check)?zR:(a=ZR(t,e,r,r),a?(n.mode=GR,$R):(n.havedict=1,Zu))};var DZ=XR,RZ=YR,UZ=qR,OZ=kZ,MZ=JR,QZ=IZ,HZ=FZ,VZ=PZ,KZ=LZ,jZ="pako inflate (from Nodeca project)",Wl={inflateReset:DZ,inflateReset2:RZ,inflateResetKeep:UZ,inflateInit:OZ,inflateInit2:MZ,inflate:QZ,inflateEnd:HZ,inflateGetHeader:VZ,inflateSetDictionary:KZ,inflateInfo:jZ};function zZ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var $Z=zZ;const eU=Object.prototype.toString,{Z_NO_FLUSH:GZ,Z_FINISH:WZ,Z_OK:V0,Z_STREAM_END:hy,Z_NEED_DICT:fy,Z_STREAM_ERROR:qZ,Z_DATA_ERROR:ET,Z_MEM_ERROR:XZ}=Tp;function Fp(t){this.options=Mw.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new HR,this.strm.avail_out=0;let r=Wl.inflateInit2(this.strm,e.windowBits);if(r!==V0)throw new Error(lf[r]);if(this.header=new $Z,Wl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=H0.string2buf(e.dictionary):eU.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Wl.inflateSetDictionary(this.strm,e.dictionary),r!==V0)))throw new Error(lf[r])}Fp.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?WZ:GZ,eU.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Wl.inflate(r,s),a===fy&&i&&(a=Wl.inflateSetDictionary(r,i),a===V0?a=Wl.inflate(r,s):a===ET&&(a=fy));r.avail_in>0&&a===hy&&r.state.wrap>0&&t[r.next_in]!==0;)Wl.inflateReset(r),a=Wl.inflate(r,s);switch(a){case qZ:case ET:case fy:case XZ:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||a===hy))if(this.options.to==="string"){let l=H0.utf8border(r.output,r.next_out),A=r.next_out-l,u=H0.buf2string(r.output,l);r.next_out=A,r.avail_out=n-A,A&&r.output.set(r.output.subarray(l,l+A),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===V0&&o===0)){if(a===hy)return a=Wl.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Fp.prototype.onData=function(t){this.chunks.push(t)};Fp.prototype.onEnd=function(t){t===V0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Mw.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function qE(t,e){const r=new Fp(e);if(r.push(t),r.err)throw r.msg||lf[r.err];return r.result}function YZ(t,e){return e=e||{},e.raw=!0,qE(t,e)}var JZ=Fp,ZZ=qE,eee=YZ,tee=qE,ree=Tp,nee={Inflate:JZ,inflate:ZZ,inflateRaw:eee,ungzip:tee,constants:ree};const{Inflate:iee,inflate:aee,inflateRaw:dwe,ungzip:hwe}=nee;var BT=iee,see=aee;const tU=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;tU[t]=e}const CT=4294967295;function oee(t,e,r){let n=t;for(let i=0;i<r;i++)n=tU[(n^e[i])&255]^n>>>8;return n}function lee(t,e){return(oee(CT,t,e)^CT)>>>0}function NT(t,e,r){const n=t.readUint32(),i=lee(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function rU(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function nU(t,e,r,n){let i=0;for(;i<n;i++)e[i]=t[i];for(;i<r;i++)e[i]=t[i]+e[i-n]&255}function iU(t,e,r,n){let i=0;if(r.length===0)for(;i<n;i++)e[i]=t[i];else for(;i<n;i++)e[i]=t[i]+r[i]&255}function aU(t,e,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=t[a]+(r[a]>>1)&255;for(;a<n;a++)e[a]=t[a]+(e[a-i]+r[a]>>1)&255}}function sU(t,e,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)e[a]=t[a];for(;a<n;a++)e[a]=t[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=t[a]+r[a]&255;for(;a<n;a++)e[a]=t[a]+cee(e[a-i],r[a],r[a-i])&255}}function cee(t,e,r){const n=t+e-r,i=Math.abs(n-t),a=Math.abs(n-e),s=Math.abs(n-r);return i<=a&&i<=s?t:a<=s?e:r}function Aee(t,e,r,n,i,a){switch(t){case 0:rU(e,r,i);break;case 1:nU(e,r,i,a);break;case 2:iU(e,r,n,i);break;case 3:aU(e,r,n,i,a);break;case 4:sU(e,r,n,i,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const uee=new Uint16Array([255]),dee=new Uint8Array(uee.buffer),hee=dee[0]===255;function fee(t){const{data:e,width:r,height:n,channels:i,depth:a}=t,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(n*r*o);let A=0;for(let u=0;u<7;u++){const d=s[u],h=Math.ceil((r-d.x)/d.xStep),f=Math.ceil((n-d.y)/d.yStep);if(h<=0||f<=0)continue;const p=h*o,g=new Uint8Array(p);for(let v=0;v<f;v++){const C=e[A++],I=e.subarray(A,A+p);A+=p;const F=new Uint8Array(p);Aee(C,I,F,g,p,o),g.set(F);for(let E=0;E<h;E++){const R=d.x+E*d.xStep,L=d.y+v*d.yStep;if(!(R>=r||L>=n))for(let N=0;N<o;N++)l[(L*r+R)*o+N]=F[E*o+N]}}}if(a===16){const u=new Uint16Array(l.buffer);if(hee)for(let d=0;d<u.length;d++)u[d]=mee(u[d]);return u}else return l}function mee(t){return(t&255)<<8|t>>8&255}const pee=new Uint16Array([255]),gee=new Uint8Array(pee.buffer),vee=gee[0]===255,wee=new Uint8Array(0);function ST(t){const{data:e,width:r,height:n,channels:i,depth:a}=t,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*r),l=new Uint8Array(n*o);let A=wee,u=0,d,h;for(let f=0;f<n;f++){switch(d=e.subarray(u+1,u+1+o),h=l.subarray(f*o,(f+1)*o),e[u]){case 0:rU(d,h,o);break;case 1:nU(d,h,o,s);break;case 2:iU(d,h,A,o);break;case 3:aU(d,h,A,o,s);break;case 4:sU(d,h,A,o,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}A=h,u+=o+1}if(a===16){const f=new Uint16Array(l.buffer);if(vee)for(let p=0;p<f.length;p++)f[p]=bee(f[p]);return f}else return l}function bee(t){return(t&255)<<8|t>>8&255}const N1=Uint8Array.of(137,80,78,71,13,10,26,10);function kT(t){if(!yee(t.readBytes(N1.length)))throw new Error("wrong PNG signature")}function yee(t){if(t.length<N1.length)return!1;for(let e=0;e<N1.length;e++)if(t[e]!==N1[e])return!1;return!0}const xee="tEXt",_ee=0,oU=new TextDecoder("latin1");function Eee(t){if(Cee(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Bee=/^[\u0000-\u00FF]*$/;function Cee(t){if(!Bee.test(t))throw new Error("invalid latin1 text")}function Nee(t,e,r){const n=lU(e);t[n]=See(e,r-n.length-1)}function lU(t){for(t.mark();t.readByte()!==_ee;);const e=t.offset;t.reset();const r=oU.decode(t.readBytes(e-t.offset-1));return t.skip(1),Eee(r),r}function See(t,e){return oU.decode(t.readBytes(e))}const Ss={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},my={UNKNOWN:-1,DEFLATE:0},TT={UNKNOWN:-1,ADAPTIVE:0},py={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Bg={NONE:0,BACKGROUND:1,PREVIOUS:2},gy={SOURCE:0,OVER:1};class kee extends VE{constructor(r,n={}){super(r);cn(this,"_checkCrc");cn(this,"_inflator");cn(this,"_png");cn(this,"_apng");cn(this,"_end");cn(this,"_hasPalette");cn(this,"_palette");cn(this,"_hasTransparency");cn(this,"_transparency");cn(this,"_compressionMethod");cn(this,"_filterMethod");cn(this,"_interlaceMethod");cn(this,"_colorType");cn(this,"_isAnimated");cn(this,"_numberOfFrames");cn(this,"_numberOfPlays");cn(this,"_frames");cn(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new BT,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=my.UNKNOWN,this._filterMethod=TT.UNKNOWN,this._interlaceMethod=py.UNKNOWN,this._colorType=Ss.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(kT(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(kT(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case xee:Nee(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?NT(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?NT(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=Tee(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Ss.GREYSCALE:i=1;break;case Ss.TRUECOLOUR:i=3;break;case Ss.INDEXED_COLOUR:i=1;break;case Ss.GREYSCALE_ALPHA:i=2;break;case Ss.TRUECOLOUR_ALPHA:i=4;break;case Ss.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==my.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ss.GREYSCALE:case Ss.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ss.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ss.UNKNOWN:case Ss.GREYSCALE_ALPHA:case Ss.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=lU(this),i=this.readUint8();if(i!==my.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:see(a)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=ST({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(r-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case Bg.NONE:break;case Bg.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*r.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case Bg.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,A=(s*n.width+o)*this._png.channels;return{index:l,frameIndex:A}};switch(n.blendOp){case gy.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:A}=a(s,o);for(let u=0;u<this._png.channels;u++)r.data[l+u]=n.data[A+u]}break;case gy.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:A}=a(s,o);for(let u=0;u<this._png.channels;u++){const d=n.data[A+this._png.channels-1]/i,h=u%(this._png.channels-1)===0?1:n.data[A+u],f=Math.floor(d*h+(1-d)*r.data[l+u]);r.data[l+u]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==TT.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===py.NO_INTERLACE)this._png.data=ST({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===py.ADAM7)this._png.data=fee({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Bg.NONE,blendOp:gy.SOURCE,data:r}),this._inflator=new BT,this._writingDataChunks=!1}}function Tee(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var IT;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(IT||(IT={}));function Iee(t,e){return new kee(t,e).decode()}var fr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function vy(){fr.console&&typeof fr.console.log=="function"&&fr.console.log.apply(fr.console,arguments)}var Bn={log:vy,warn:function(t){fr.console&&(typeof fr.console.warn=="function"?fr.console.warn.apply(fr.console,arguments):vy.call(null,arguments))},error:function(t){fr.console&&(typeof fr.console.error=="function"?fr.console.error.apply(fr.console,arguments):vy(t))}};function wy(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ou(n.response,e,r)},n.onerror=function(){Bn.error("could not download file")},n.send()}function FT(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Cg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ou=fr.saveAs||((typeof window>"u"?"undefined":dn(window))!=="object"||window!==fr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=fr.URL||fr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?FT(i.href)?wy(t,e,r):Cg(i,i.target="_blank"):Cg(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Cg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(FT(t))wy(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Cg(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:dn(a)!=="object"&&(Bn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return wy(t,e,r);var i=t.type==="application/octet-stream",a=/constructor/i.test(fr.HTMLElement)||fr.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":dn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(t)}else{var l=fr.URL||fr.webkitURL,A=l.createObjectURL(t);n?n.location=A:location.href=A,n=null,setTimeout(function(){l.revokeObjectURL(A)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cU(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,s=i.exec(t);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),A=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),A.length==1&&(A="0"+A),"#"+o+l+A}}var S1=fr.atob.bind(fr),PT=fr.btoa.bind(fr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function by(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];r=fa(r,n,i,a,e[0],7,-680876936),a=fa(a,r,n,i,e[1],12,-389564586),i=fa(i,a,r,n,e[2],17,606105819),n=fa(n,i,a,r,e[3],22,-1044525330),r=fa(r,n,i,a,e[4],7,-176418897),a=fa(a,r,n,i,e[5],12,1200080426),i=fa(i,a,r,n,e[6],17,-1473231341),n=fa(n,i,a,r,e[7],22,-45705983),r=fa(r,n,i,a,e[8],7,1770035416),a=fa(a,r,n,i,e[9],12,-1958414417),i=fa(i,a,r,n,e[10],17,-42063),n=fa(n,i,a,r,e[11],22,-1990404162),r=fa(r,n,i,a,e[12],7,1804603682),a=fa(a,r,n,i,e[13],12,-40341101),i=fa(i,a,r,n,e[14],17,-1502002290),r=ma(r,n=fa(n,i,a,r,e[15],22,1236535329),i,a,e[1],5,-165796510),a=ma(a,r,n,i,e[6],9,-1069501632),i=ma(i,a,r,n,e[11],14,643717713),n=ma(n,i,a,r,e[0],20,-373897302),r=ma(r,n,i,a,e[5],5,-701558691),a=ma(a,r,n,i,e[10],9,38016083),i=ma(i,a,r,n,e[15],14,-660478335),n=ma(n,i,a,r,e[4],20,-405537848),r=ma(r,n,i,a,e[9],5,568446438),a=ma(a,r,n,i,e[14],9,-1019803690),i=ma(i,a,r,n,e[3],14,-187363961),n=ma(n,i,a,r,e[8],20,1163531501),r=ma(r,n,i,a,e[13],5,-1444681467),a=ma(a,r,n,i,e[2],9,-51403784),i=ma(i,a,r,n,e[7],14,1735328473),r=pa(r,n=ma(n,i,a,r,e[12],20,-1926607734),i,a,e[5],4,-378558),a=pa(a,r,n,i,e[8],11,-2022574463),i=pa(i,a,r,n,e[11],16,1839030562),n=pa(n,i,a,r,e[14],23,-35309556),r=pa(r,n,i,a,e[1],4,-1530992060),a=pa(a,r,n,i,e[4],11,1272893353),i=pa(i,a,r,n,e[7],16,-155497632),n=pa(n,i,a,r,e[10],23,-1094730640),r=pa(r,n,i,a,e[13],4,681279174),a=pa(a,r,n,i,e[0],11,-358537222),i=pa(i,a,r,n,e[3],16,-722521979),n=pa(n,i,a,r,e[6],23,76029189),r=pa(r,n,i,a,e[9],4,-640364487),a=pa(a,r,n,i,e[12],11,-421815835),i=pa(i,a,r,n,e[15],16,530742520),r=ga(r,n=pa(n,i,a,r,e[2],23,-995338651),i,a,e[0],6,-198630844),a=ga(a,r,n,i,e[7],10,1126891415),i=ga(i,a,r,n,e[14],15,-1416354905),n=ga(n,i,a,r,e[5],21,-57434055),r=ga(r,n,i,a,e[12],6,1700485571),a=ga(a,r,n,i,e[3],10,-1894986606),i=ga(i,a,r,n,e[10],15,-1051523),n=ga(n,i,a,r,e[1],21,-2054922799),r=ga(r,n,i,a,e[8],6,1873313359),a=ga(a,r,n,i,e[15],10,-30611744),i=ga(i,a,r,n,e[6],15,-1560198380),n=ga(n,i,a,r,e[13],21,1309151649),r=ga(r,n,i,a,e[4],6,-145523070),a=ga(a,r,n,i,e[11],10,-1120210379),i=ga(i,a,r,n,e[2],15,718787259),n=ga(n,i,a,r,e[9],21,-343485551),t[0]=aA(r,t[0]),t[1]=aA(n,t[1]),t[2]=aA(i,t[2]),t[3]=aA(a,t[3])}function Hw(t,e,r,n,i,a){return e=aA(aA(e,t),aA(n,a)),aA(e<<i|e>>>32-i,r)}function fa(t,e,r,n,i,a,s){return Hw(e&r|~e&n,t,e,i,a,s)}function ma(t,e,r,n,i,a,s){return Hw(e&n|r&~n,t,e,i,a,s)}function pa(t,e,r,n,i,a,s){return Hw(e^r^n,t,e,i,a,s)}function ga(t,e,r,n,i,a,s){return Hw(r^(e|~n),t,e,i,a,s)}function AU(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)by(n,Fee(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(by(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,by(n,i),n}function Fee(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var LT="0123456789abcdef".split("");function Pee(t){for(var e="",r=0;r<4;r++)e+=LT[t>>8*r+4&15]+LT[t>>8*r&15];return e}function Lee(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function hx(t){return AU(t).map(Lee).join("")}var Dee=function(t){for(var e=0;e<t.length;e++)t[e]=Pee(t[e]);return t.join("")}(AU("hello"))!="5d41402abc4b2a76b9719d911017c592";function aA(t,e){if(Dee){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function fx(t,e){var r,n,i,a;if(t!==r){for(var s=(i=t,a=1+(256/t.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var A=0;for(l=0;l<256;l++){var u=o[l];A=(A+u+s.charCodeAt(l))%256,o[l]=o[A],o[A]=u}r=t,n=o}else o=n;var d=e.length,h=0,f=0,p="";for(l=0;l<d;l++)f=(f+(u=o[h=(h+1)%256]))%256,o[h]=o[f],o[f]=u,s=o[(o[h]+o[f])%256],p+=String.fromCharCode(e.charCodeAt(l)^s);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var DT={print:4,modify:8,copy:16,"annot-forms":32};function Ah(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(DT.perm!==void 0)throw new Error("Invalid permission: "+o);i+=DT[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=hx(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=fx(this.encryptionKey,this.padding)}function uh(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[n]}return e}function RT(t){if(dn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[r]){var s=e[r][a];try{s[0].apply(t,n)}catch(o){fr.console&&Bn.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function _v(t){if(!(this instanceof _v))return new _v(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function uU(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function hu(t,e,r,n,i){if(!(this instanceof hu))return new hu(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,uU.call(this,n,i)}function wh(t,e,r,n,i){if(!(this instanceof wh))return new wh(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,uU.call(this,n,i)}function Xt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,A="S",u=null;dn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,a=t.compress||t.compressPdf||a,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),A=t.defaultPathOperation||"S"),s=t.filters||(a===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=RT;var p="1.3",g=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(U){p=U};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return v};var C=f.__private__.getPageFormat=function(U){return v[U]};i=i||"a4";var I="compat",F="advanced",E=I;function R(){this.saveGraphicsState(),W(new Qt(ve,0,0,-ve,0,Ma()*ve).toString()+" cm"),this.setFontSize(this.getFontSize()/ve),A="n",E=F}function L(){this.restoreGraphicsState(),A="S",E=I}var N=f.__private__.combineFontStyleAndFontWeight=function(U,se){if(U=="bold"&&se=="normal"||U=="bold"&&se==400||U=="normal"&&se=="italic"||U=="bold"&&se=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return se&&(U=se==400||se==="normal"?U==="italic"?"italic":"normal":se!=700&&se!=="bold"||U!=="normal"?(se==700?"bold":se)+""+U:"bold"),U};f.advancedAPI=function(U){var se=E===I;return se&&R.call(this),typeof U!="function"||(U(this),se&&L.call(this)),this},f.compatAPI=function(U){var se=E===F;return se&&L.call(this),typeof U!="function"||(U(this),se&&R.call(this)),this},f.isAdvancedAPI=function(){return E===F};var P,x=function(U){if(E!==F)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=f.roundToPrecision=f.__private__.roundToPrecision=function(U,se){var Te=e||se;if(isNaN(U)||isNaN(Te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Te).replace(/0+$/,"")};P=f.hpf=f.__private__.hpf=typeof l=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return k(U,l)}:l==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return k(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return k(U,16)};var y=f.f2=f.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return k(U,2)},S=f.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return k(U,3)},_=f.scale=f.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return E===I?U*ve:E===F?U:void 0},M=function(U){return _(function(se){return E===I?Ma()-se:E===F?se:void 0}(U))};f.__private__.setPrecision=f.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var K,z="00000000000000000000000000000000",ae=f.__private__.getFileId=function(){return z},te=f.__private__.setFileId=function(U){return z=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(_n=new Ah(u.userPermissions,u.userPassword,u.ownerPassword,z)),z};f.setFileId=function(U){return te(U),this},f.getFileId=function(){return ae()};var G=f.__private__.convertDateToPDFDate=function(U){var se=U.getTimezoneOffset(),Te=se<0?"+":"-",Qe=Math.floor(Math.abs(se/60)),We=Math.abs(se%60),ft=[Te,V(Qe),"'",V(We),"'"].join("");return["D:",U.getFullYear(),V(U.getMonth()+1),V(U.getDate()),V(U.getHours()),V(U.getMinutes()),V(U.getSeconds()),ft].join("")},ue=f.__private__.convertPDFDateToDate=function(U){var se=parseInt(U.substr(2,4),10),Te=parseInt(U.substr(6,2),10)-1,Qe=parseInt(U.substr(8,2),10),We=parseInt(U.substr(10,2),10),ft=parseInt(U.substr(12,2),10),wt=parseInt(U.substr(14,2),10);return new Date(se,Te,Qe,We,ft,wt,0)},de=f.__private__.setCreationDate=function(U){var se;if(U===void 0&&(U=new Date),U instanceof Date)se=G(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");se=U}return K=se},T=f.__private__.getCreationDate=function(U){var se=K;return U==="jsDate"&&(se=ue(K)),se};f.setCreationDate=function(U){return de(U),this},f.getCreationDate=function(U){return T(U)};var O,V=f.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},Q=f.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},X=0,ie=[],ee=[],Z=0,re=[],ce=[],Y=!1,ge=ee;f.__private__.setCustomOutputDestination=function(U){Y=!0,ge=U};var q=function(U){Y||(ge=U)};f.__private__.resetCustomOutputDestination=function(){Y=!1,ge=ee};var W=f.__private__.out=function(U){return U=U.toString(),Z+=U.length+1,ge.push(U),ge},xe=f.__private__.write=function(U){return W(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},ye=f.__private__.getArrayBuffer=function(U){for(var se=U.length,Te=new ArrayBuffer(se),Qe=new Uint8Array(Te);se--;)Qe[se]=U.charCodeAt(se);return Te},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ue};var Me=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(U){return Me=E===F?U/ve:U,this};var $e,fe=f.__private__.getFontSize=f.getFontSize=function(){return E===I?Me:Me*ve},Oe=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(U){return Oe=U,this},f.__private__.getR2L=f.getR2L=function(){return Oe};var Re,He=f.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))$e=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');$e=U}else $e=parseInt(U,10)};f.__private__.getZoomMode=function(){return $e};var pe,Le=f.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');Re=U};f.__private__.getPageMode=function(){return Re};var lt=f.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');pe=U};f.__private__.getLayoutMode=function(){return pe},f.__private__.setDisplayMode=f.setDisplayMode=function(U,se,Te){return He(U),lt(se),Le(Te),this};var Ae={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(U){if(Object.keys(Ae).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ae[U]},f.__private__.getDocumentProperties=function(){return Ae},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(U){for(var se in Ae)Ae.hasOwnProperty(se)&&U[se]&&(Ae[se]=U[se]);return this},f.__private__.setDocumentProperty=function(U,se){if(Object.keys(Ae).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ae[U]=se};var Ne,ve,Ce,Ke,Ve,ot={},pt={},Bt=[],Be={},ze={},st={},St={},Ot=null,Et=0,dt=[],jt=new RT(f),sr=t.hotfixes||[],qt={},Ur={},en=[],Qt=function U(se,Te,Qe,We,ft,wt){if(!(this instanceof U))return new U(se,Te,Qe,We,ft,wt);isNaN(se)&&(se=1),isNaN(Te)&&(Te=0),isNaN(Qe)&&(Qe=0),isNaN(We)&&(We=1),isNaN(ft)&&(ft=0),isNaN(wt)&&(wt=0),this._matrix=[se,Te,Qe,We,ft,wt]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(U)},Qt.prototype.multiply=function(U){var se=U.sx*this.sx+U.shy*this.shx,Te=U.sx*this.shy+U.shy*this.sy,Qe=U.shx*this.sx+U.sy*this.shx,We=U.shx*this.shy+U.sy*this.sy,ft=U.tx*this.sx+U.ty*this.shx+this.tx,wt=U.tx*this.shy+U.ty*this.sy+this.ty;return new Qt(se,Te,Qe,We,ft,wt)},Qt.prototype.decompose=function(){var U=this.sx,se=this.shy,Te=this.shx,Qe=this.sy,We=this.tx,ft=this.ty,wt=Math.sqrt(U*U+se*se),zt=(U/=wt)*Te+(se/=wt)*Qe;Te-=U*zt,Qe-=se*zt;var Yt=Math.sqrt(Te*Te+Qe*Qe);return zt/=Yt,U*(Qe/=Yt)<se*(Te/=Yt)&&(U=-U,se=-se,zt=-zt,wt=-wt),{scale:new Qt(wt,0,0,Yt,0,0),translate:new Qt(1,0,0,1,We,ft),rotate:new Qt(U,se,-se,U,0,0),skew:new Qt(1,0,zt,1,0,0)}},Qt.prototype.toString=function(U){return this.join(" ")},Qt.prototype.inversed=function(){var U=this.sx,se=this.shy,Te=this.shx,Qe=this.sy,We=this.tx,ft=this.ty,wt=1/(U*Qe-se*Te),zt=Qe*wt,Yt=-se*wt,nr=-Te*wt,mr=U*wt;return new Qt(zt,Yt,nr,mr,-zt*We-nr*ft,-Yt*We-mr*ft)},Qt.prototype.applyToPoint=function(U){var se=U.x*this.sx+U.y*this.shx+this.tx,Te=U.x*this.shy+U.y*this.sy+this.ty;return new Dl(se,Te)},Qt.prototype.applyToRectangle=function(U){var se=this.applyToPoint(U),Te=this.applyToPoint(new Dl(U.x+U.w,U.y+U.h));return new xo(se.x,se.y,Te.x-se.x,Te.y-se.y)},Qt.prototype.clone=function(){var U=this.sx,se=this.shy,Te=this.shx,Qe=this.sy,We=this.tx,ft=this.ty;return new Qt(U,se,Te,Qe,We,ft)},f.Matrix=Qt;var Pn=f.matrixMult=function(U,se){return se.multiply(U)},Mt=new Qt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Mt;var yn=function(U,se){if(!ze[U]){var Te=(se instanceof hu?"Sh":"P")+(Object.keys(Be).length+1).toString(10);se.id=Te,ze[U]=Te,Be[Te]=se,jt.publish("addPattern",se)}};f.ShadingPattern=hu,f.TilingPattern=wh,f.addShadingPattern=function(U,se){return x("addShadingPattern()"),yn(U,se),this},f.beginTilingPattern=function(U){x("beginTilingPattern()"),Ul(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},f.endTilingPattern=function(U,se){x("endTilingPattern()"),se.stream=ce[O].join(`
`),yn(U,se),jt.publish("endTilingPattern",se),en.pop().restore()};var xn,Or=f.__private__.newObject=function(){var U=Fr();return le(U,!0),U},Fr=f.__private__.newObjectDeferred=function(){return X++,ie[X]=function(){return Z},X},le=function(U,se){return se=typeof se=="boolean"&&se,ie[U]=Z,se&&W(U+" 0 obj"),U},Ie=f.__private__.newAdditionalObject=function(){var U={objId:Fr(),content:""};return re.push(U),U},_e=Fr(),Se=Fr(),ke=f.__private__.decodeColorString=function(U){var se=U.split(" ");if(se.length!==2||se[1]!=="g"&&se[1]!=="G")se.length!==5||se[4]!=="k"&&se[4]!=="K"||(se=[(1-se[0])*(1-se[3]),(1-se[1])*(1-se[3]),(1-se[2])*(1-se[3]),"r"]);else{var Te=parseFloat(se[0]);se=[Te,Te,Te,"r"]}for(var Qe="#",We=0;We<3;We++)Qe+=("0"+Math.floor(255*parseFloat(se[We])).toString(16)).slice(-2);return Qe},De=f.__private__.encodeColorString=function(U){var se;typeof U=="string"&&(U={ch1:U});var Te=U.ch1,Qe=U.ch2,We=U.ch3,ft=U.ch4,wt=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Te=="string"&&Te.charAt(0)!=="#"){var zt=new cU(Te);if(zt.ok)Te=zt.toHex();else if(!/^\d*\.?\d*$/.test(Te))throw new Error('Invalid color "'+Te+'" passed to jsPDF.encodeColorString.')}if(typeof Te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Te)&&(Te="#"+Te[1]+Te[1]+Te[2]+Te[2]+Te[3]+Te[3]),typeof Te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Te)){var Yt=parseInt(Te.substr(1),16);Te=Yt>>16&255,Qe=Yt>>8&255,We=255&Yt}if(Qe===void 0||ft===void 0&&Te===Qe&&Qe===We)se=typeof Te=="string"?Te+" "+wt[0]:U.precision===2?y(Te/255)+" "+wt[0]:S(Te/255)+" "+wt[0];else if(ft===void 0||dn(ft)==="object"){if(ft&&!isNaN(ft.a)&&ft.a===0)return["1.","1.","1.",wt[1]].join(" ");se=typeof Te=="string"?[Te,Qe,We,wt[1]].join(" "):U.precision===2?[y(Te/255),y(Qe/255),y(We/255),wt[1]].join(" "):[S(Te/255),S(Qe/255),S(We/255),wt[1]].join(" ")}else se=typeof Te=="string"?[Te,Qe,We,ft,wt[2]].join(" "):U.precision===2?[y(Te),y(Qe),y(We),y(ft),wt[2]].join(" "):[S(Te),S(Qe),S(We),S(ft),wt[2]].join(" ");return se},Je=f.__private__.getFilters=function(){return s},ct=f.__private__.putStream=function(U){var se=(U=U||{}).data||"",Te=U.filters||Je(),Qe=U.alreadyAppliedFilters||[],We=U.addLength1||!1,ft=se.length,wt=U.objectId,zt=function(Wr){return Wr};if(u!==null&&wt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(zt=_n.encryptor(wt,0));var Yt={};Te===!0&&(Te=["FlateEncode"]);var nr=U.additionalKeyValues||[],mr=(Yt=Xt.API.processDataByFilters!==void 0?Xt.API.processDataByFilters(se,Te):{data:se,reverseChain:[]}).reverseChain+(Array.isArray(Qe)?Qe.join(" "):Qe.toString());if(Yt.data.length!==0&&(nr.push({key:"Length",value:Yt.data.length}),We===!0&&nr.push({key:"Length1",value:ft})),mr.length!=0)if(mr.split("/").length-1==1)nr.push({key:"Filter",value:mr});else{nr.push({key:"Filter",value:"["+mr+"]"});for(var jr=0;jr<nr.length;jr+=1)if(nr[jr].key==="DecodeParms"){for(var Nn=[],Wn=0;Wn<Yt.reverseChain.split("/").length-1;Wn+=1)Nn.push("null");Nn.push(nr[jr].value),nr[jr].value="["+Nn.join(" ")+"]"}}W("<<");for(var Gr=0;Gr<nr.length;Gr++)W("/"+nr[Gr].key+" "+nr[Gr].value);W(">>"),Yt.data.length!==0&&(W("stream"),W(zt(Yt.data)),W("endstream"))},Ze=f.__private__.putPage=function(U){var se=U.number,Te=U.data,Qe=U.objId,We=U.contentsObjId;le(Qe,!0),W("<</Type /Page"),W("/Parent "+U.rootDictionaryObjId+" 0 R"),W("/Resources "+U.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(P(U.mediaBox.bottomLeftX))+" "+parseFloat(P(U.mediaBox.bottomLeftY))+" "+P(U.mediaBox.topRightX)+" "+P(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&W("/CropBox ["+P(U.cropBox.bottomLeftX)+" "+P(U.cropBox.bottomLeftY)+" "+P(U.cropBox.topRightX)+" "+P(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&W("/BleedBox ["+P(U.bleedBox.bottomLeftX)+" "+P(U.bleedBox.bottomLeftY)+" "+P(U.bleedBox.topRightX)+" "+P(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&W("/TrimBox ["+P(U.trimBox.bottomLeftX)+" "+P(U.trimBox.bottomLeftY)+" "+P(U.trimBox.topRightX)+" "+P(U.trimBox.topRightY)+"]"),U.artBox!==null&&W("/ArtBox ["+P(U.artBox.bottomLeftX)+" "+P(U.artBox.bottomLeftY)+" "+P(U.artBox.topRightX)+" "+P(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&W("/UserUnit "+U.userUnit),jt.publish("putPage",{objId:Qe,pageContext:dt[se],pageNumber:se,page:Te}),W("/Contents "+We+" 0 R"),W(">>"),W("endobj");var ft=Te.join(`
`);return E===F&&(ft+=`
Q`),le(We,!0),ct({data:ft,filters:Je(),objectId:We}),W("endobj"),Qe},et=f.__private__.putPages=function(){var U,se,Te=[];for(U=1;U<=Et;U++)dt[U].objId=Fr(),dt[U].contentsObjId=Fr();for(U=1;U<=Et;U++)Te.push(Ze({number:U,data:ce[U],objId:dt[U].objId,contentsObjId:dt[U].contentsObjId,mediaBox:dt[U].mediaBox,cropBox:dt[U].cropBox,bleedBox:dt[U].bleedBox,trimBox:dt[U].trimBox,artBox:dt[U].artBox,userUnit:dt[U].userUnit,rootDictionaryObjId:_e,resourceDictionaryObjId:Se}));le(_e,!0),W("<</Type /Pages");var Qe="/Kids [";for(se=0;se<Et;se++)Qe+=Te[se]+" 0 R ";W(Qe+"]"),W("/Count "+Et),W(">>"),W("endobj"),jt.publish("postPutPages")},it=function(U){jt.publish("putFont",{font:U,out:W,newObject:Or,putStream:ct}),U.isAlreadyPutted!==!0&&(U.objectNumber=Or(),W("<<"),W("/Type /Font"),W("/BaseFont /"+uh(U.postScriptName)),W("/Subtype /Type1"),typeof U.encoding=="string"&&W("/Encoding /"+U.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},xt=function(U){U.objectNumber=Or();var se=[];se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Form"}),se.push({key:"BBox",value:"["+[P(U.x),P(U.y),P(U.x+U.width),P(U.y+U.height)].join(" ")+"]"}),se.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Te=U.pages[1].join(`
`);ct({data:Te,additionalKeyValues:se,objectId:U.objectNumber}),W("endobj")},kt=function(U,se){se||(se=21);var Te=Or(),Qe=function(wt,zt){var Yt,nr=[],mr=1/(zt-1);for(Yt=0;Yt<1;Yt+=mr)nr.push(Yt);if(nr.push(1),wt[0].offset!=0){var jr={offset:0,color:wt[0].color};wt.unshift(jr)}if(wt[wt.length-1].offset!=1){var Nn={offset:1,color:wt[wt.length-1].color};wt.push(Nn)}for(var Wn="",Gr=0,Wr=0;Wr<nr.length;Wr++){for(Yt=nr[Wr];Yt>wt[Gr+1].offset;)Gr++;var qn=wt[Gr].offset,_i=(Yt-qn)/(wt[Gr+1].offset-qn),ua=wt[Gr].color,b=wt[Gr+1].color;Wn+=Q(Math.round((1-_i)*ua[0]+_i*b[0]).toString(16))+Q(Math.round((1-_i)*ua[1]+_i*b[1]).toString(16))+Q(Math.round((1-_i)*ua[2]+_i*b[2]).toString(16))}return Wn.trim()}(U.colors,se),We=[];We.push({key:"FunctionType",value:"0"}),We.push({key:"Domain",value:"[0.0 1.0]"}),We.push({key:"Size",value:"["+se+"]"}),We.push({key:"BitsPerSample",value:"8"}),We.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),We.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ct({data:Qe,additionalKeyValues:We,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Te}),W("endobj"),U.objectNumber=Or(),W("<< /ShadingType "+U.type),W("/ColorSpace /DeviceRGB");var ft="/Coords ["+P(parseFloat(U.coords[0]))+" "+P(parseFloat(U.coords[1]))+" ";U.type===2?ft+=P(parseFloat(U.coords[2]))+" "+P(parseFloat(U.coords[3])):ft+=P(parseFloat(U.coords[2]))+" "+P(parseFloat(U.coords[3]))+" "+P(parseFloat(U.coords[4]))+" "+P(parseFloat(U.coords[5])),W(ft+="]"),U.matrix&&W("/Matrix ["+U.matrix.toString()+"]"),W("/Function "+Te+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},Ut=function(U,se){var Te=Fr(),Qe=Or();se.push({resourcesOid:Te,objectOid:Qe}),U.objectNumber=Qe;var We=[];We.push({key:"Type",value:"/Pattern"}),We.push({key:"PatternType",value:"1"}),We.push({key:"PaintType",value:"1"}),We.push({key:"TilingType",value:"1"}),We.push({key:"BBox",value:"["+U.boundingBox.map(P).join(" ")+"]"}),We.push({key:"XStep",value:P(U.xStep)}),We.push({key:"YStep",value:P(U.yStep)}),We.push({key:"Resources",value:Te+" 0 R"}),U.matrix&&We.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),ct({data:U.stream,additionalKeyValues:We,objectId:U.objectNumber}),W("endobj")},Ct=function(U){for(var se in U.objectNumber=Or(),W("<<"),U)switch(se){case"opacity":W("/ca "+y(U[se]));break;case"stroke-opacity":W("/CA "+y(U[se]))}W(">>"),W("endobj")},It=function(U){le(U.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var se in W("/Font <<"),ot)ot.hasOwnProperty(se)&&(d===!1||d===!0&&h.hasOwnProperty(se))&&W("/"+se+" "+ot[se].objectNumber+" 0 R");W(">>")}(),function(){if(Object.keys(Be).length>0){for(var se in W("/Shading <<"),Be)Be.hasOwnProperty(se)&&Be[se]instanceof hu&&Be[se].objectNumber>=0&&W("/"+se+" "+Be[se].objectNumber+" 0 R");jt.publish("putShadingPatternDict"),W(">>")}}(),function(se){if(Object.keys(Be).length>0){for(var Te in W("/Pattern <<"),Be)Be.hasOwnProperty(Te)&&Be[Te]instanceof f.TilingPattern&&Be[Te].objectNumber>=0&&Be[Te].objectNumber<se&&W("/"+Te+" "+Be[Te].objectNumber+" 0 R");jt.publish("putTilingPatternDict"),W(">>")}}(U.objectOid),function(){if(Object.keys(st).length>0){var se;for(se in W("/ExtGState <<"),st)st.hasOwnProperty(se)&&st[se].objectNumber>=0&&W("/"+se+" "+st[se].objectNumber+" 0 R");jt.publish("putGStateDict"),W(">>")}}(),function(){for(var se in W("/XObject <<"),qt)qt.hasOwnProperty(se)&&qt[se].objectNumber>=0&&W("/"+se+" "+qt[se].objectNumber+" 0 R");jt.publish("putXobjectDict"),W(">>")}(),W(">>"),W("endobj")},or=function(U){pt[U.fontName]=pt[U.fontName]||{},pt[U.fontName][U.fontStyle]=U.id},rn=function(U,se,Te,Qe,We){var ft={id:"F"+(Object.keys(ot).length+1).toString(10),postScriptName:U,fontName:se,fontStyle:Te,encoding:Qe,isStandardFont:We||!1,metadata:{}};return jt.publish("addFont",{font:ft,instance:this}),ot[ft.id]=ft,or(ft),ft.id},Er=f.__private__.pdfEscape=f.pdfEscape=function(U,se){return function(Te,Qe){var We,ft,wt,zt,Yt,nr,mr,jr,Nn;if(wt=(Qe=Qe||{}).sourceEncoding||"Unicode",Yt=Qe.outputEncoding,(Qe.autoencode||Yt)&&ot[Ne].metadata&&ot[Ne].metadata[wt]&&ot[Ne].metadata[wt].encoding&&(zt=ot[Ne].metadata[wt].encoding,!Yt&&ot[Ne].encoding&&(Yt=ot[Ne].encoding),!Yt&&zt.codePages&&(Yt=zt.codePages[0]),typeof Yt=="string"&&(Yt=zt[Yt]),Yt)){for(mr=!1,nr=[],We=0,ft=Te.length;We<ft;We++)(jr=Yt[Te.charCodeAt(We)])?nr.push(String.fromCharCode(jr)):nr.push(Te[We]),nr[We].charCodeAt(0)>>8&&(mr=!0);Te=nr.join("")}for(We=Te.length;mr===void 0&&We!==0;)Te.charCodeAt(We-1)>>8&&(mr=!0),We--;if(!mr)return Te;for(nr=Qe.noBOM?[]:[254,255],We=0,ft=Te.length;We<ft;We++){if((Nn=(jr=Te.charCodeAt(We))>>8)>>8)throw new Error("Character at position "+We+" of string '"+Te+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");nr.push(Nn),nr.push(jr-(Nn<<8))}return String.fromCharCode.apply(void 0,nr)}(U,se).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ln=f.__private__.beginPage=function(U){ce[++Et]=[],dt[Et]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},Ja(Et),q(ce[O])},ps=function(U,se){var Te,Qe,We;switch(r=se||r,typeof U=="string"&&(Te=C(U.toLowerCase()),Array.isArray(Te)&&(Qe=Te[0],We=Te[1])),Array.isArray(U)&&(Qe=U[0]*ve,We=U[1]*ve),isNaN(Qe)&&(Qe=i[0],We=i[1]),(Qe>14400||We>14400)&&(Bn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Qe=Math.min(14400,Qe),We=Math.min(14400,We)),i=[Qe,We],r.substr(0,1)){case"l":We>Qe&&(i=[We,Qe]);break;case"p":Qe>We&&(i=[We,Qe])}Ln(i),Hf(GA),W(sn),$o!==0&&W($o+" J"),es!==0&&W(es+" j"),jt.publish("addPage",{pageNumber:Et})},Fa=function(U){U>0&&U<=Et&&(ce.splice(U,1),dt.splice(U,1),Et--,O>Et&&(O=Et),this.setPage(O))},Ja=function(U){U>0&&U<=Et&&(O=U)},Pa=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return ce.length-1},wo=function(U,se,Te){var Qe,We=void 0;return Te=Te||{},U=U!==void 0?U:ot[Ne].fontName,se=se!==void 0?se:ot[Ne].fontStyle,Qe=U.toLowerCase(),pt[Qe]!==void 0&&pt[Qe][se]!==void 0?We=pt[Qe][se]:pt[U]!==void 0&&pt[U][se]!==void 0?We=pt[U][se]:Te.disableWarning===!1&&Bn.warn("Unable to look up font label for font '"+U+"', '"+se+"'. Refer to getFontList() for available fonts."),We||Te.noFallback||(We=pt.times[se])==null&&(We=pt.times.normal),We},Ii=f.__private__.putInfo=function(){var U=Or(),se=function(Qe){return Qe};for(var Te in u!==null&&(se=_n.encryptor(U,0)),W("<<"),W("/Producer ("+Er(se("jsPDF "+Xt.version))+")"),Ae)Ae.hasOwnProperty(Te)&&Ae[Te]&&W("/"+Te.substr(0,1).toUpperCase()+Te.substr(1)+" ("+Er(se(Ae[Te]))+")");W("/CreationDate ("+Er(se(K))+")"),W(">>"),W("endobj")},Uf=f.__private__.putCatalog=function(U){var se=(U=U||{}).rootDictionaryObjId||_e;switch(Or(),W("<<"),W("/Type /Catalog"),W("/Pages "+se+" 0 R"),$e||($e="fullwidth"),$e){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Te=""+$e;Te.substr(Te.length-1)==="%"&&($e=parseInt($e)/100),typeof $e=="number"&&W("/OpenAction [3 0 R /XYZ null null "+y($e)+"]")}switch(pe||(pe="continuous"),pe){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}Re&&W("/PageMode /"+Re),jt.publish("putCatalog"),W(">>"),W("endobj")},an=f.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(X+1)),W("/Root "+X+" 0 R"),W("/Info "+(X-1)+" 0 R"),u!==null&&W("/Encrypt "+_n.oid+" 0 R"),W("/ID [ <"+z+"> <"+z+"> ]"),W(">>")},La=f.__private__.putHeader=function(){W("%PDF-"+p),W("%")},jo=f.__private__.putXRef=function(){var U="0000000000";W("xref"),W("0 "+(X+1)),W("0000000000 65535 f ");for(var se=1;se<=X;se++)typeof ie[se]=="function"?W((U+ie[se]()).slice(-10)+" 00000 n "):ie[se]!==void 0?W((U+ie[se]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},Da=f.__private__.buildDocument=function(){var U;X=0,Z=0,ee=[],ie=[],re=[],_e=Fr(),Se=Fr(),q(ee),jt.publish("buildDocument"),La(),et(),function(){jt.publish("putAdditionalObjects");for(var Te=0;Te<re.length;Te++){var Qe=re[Te];le(Qe.objId,!0),W(Qe.content),W("endobj")}jt.publish("postPutAdditionalObjects")}(),U=[],function(){for(var Te in ot)ot.hasOwnProperty(Te)&&(d===!1||d===!0&&h.hasOwnProperty(Te))&&it(ot[Te])}(),function(){var Te;for(Te in st)st.hasOwnProperty(Te)&&Ct(st[Te])}(),function(){for(var Te in qt)qt.hasOwnProperty(Te)&&xt(qt[Te])}(),function(Te){var Qe;for(Qe in Be)Be.hasOwnProperty(Qe)&&(Be[Qe]instanceof hu?kt(Be[Qe]):Be[Qe]instanceof wh&&Ut(Be[Qe],Te))}(U),jt.publish("putResources"),U.forEach(It),It({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),jt.publish("postPutResources"),u!==null&&(_n.oid=Or(),W("<<"),W("/Filter /Standard"),W("/V "+_n.v),W("/R "+_n.r),W("/U <"+_n.toHexString(_n.U)+">"),W("/O <"+_n.toHexString(_n.O)+">"),W("/P "+_n.P),W(">>"),W("endobj")),Ii(),Uf();var se=Z;return jo(),an(),W("startxref"),W(""+se),W("%%EOF"),q(ce[O]),ee.join(`
`)},bo=f.__private__.getBlob=function(U){return new Blob([ye(U)],{type:"application/pdf"})},Pr=f.output=f.__private__.output=(xn=function(U,se){switch(typeof(se=se||{})=="string"?se={filename:se}:se.filename=se.filename||"generated.pdf",U){case void 0:return Da();case"save":f.save(se.filename);break;case"arraybuffer":return ye(Da());case"blob":return bo(Da());case"bloburi":case"bloburl":if(fr.URL!==void 0&&typeof fr.URL.createObjectURL=="function")return fr.URL&&fr.URL.createObjectURL(bo(Da()))||void 0;Bn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Te="",Qe=Da();try{Te=PT(Qe)}catch{Te=PT(unescape(encodeURIComponent(Qe)))}return"data:application/pdf;filename="+se.filename+";base64,"+Te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(fr)==="[object Window]"){var We="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ft=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';se.pdfObjectUrl&&(We=se.pdfObjectUrl,ft="");var wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+We+'"'+ft+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(se)+");<\/script></body></html>",zt=fr.open();return zt!==null&&zt.document.write(wt),zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(fr)==="[object Window]"){var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(se.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+se.filename+'" width="500px" height="400px" /></body></html>',nr=fr.open();if(nr!==null){nr.document.write(Yt);var mr=this;nr.document.documentElement.querySelector("#pdfViewer").onload=function(){nr.document.title=se.filename,nr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mr.output("bloburl"))}}return nr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(fr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var jr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",se)+'"></iframe></body></html>',Nn=fr.open();if(Nn!==null&&(Nn.document.write(jr),Nn.document.title=se.filename),Nn||typeof safari>"u")return Nn;break;case"datauri":case"dataurl":return fr.document.location.href=this.output("datauristring",se);default:return null}},xn.foo=function(){try{return xn.apply(this,arguments)}catch(Te){var U=Te.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var se="Error in function "+U.split(`
`)[0].split("<")[0]+": "+Te.message;if(!fr.console)throw new Error(se);fr.console.error(se,Te),fr.alert&&alert(se)}},xn.foo.bar=xn,xn.foo),$s=function(U){return Array.isArray(sr)===!0&&sr.indexOf(U)>-1};switch(n){case"pt":ve=1;break;case"mm":ve=72/25.4;break;case"cm":ve=72/2.54;break;case"in":ve=72;break;case"px":ve=$s("px_scaling")==1?.75:96/72;break;case"pc":case"em":ve=12;break;case"ex":ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ve=n}var _n=null;de(),te();var yo=f.__private__.getPageInfo=f.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[U].objId,pageNumber:U,pageContext:dt[U]}},Of=f.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var se in dt)if(dt[se].objId===U)break;return yo(se)},Cd=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:dt[O].objId,pageNumber:O,pageContext:dt[O]}};f.addPage=function(){return ps.apply(this,arguments),this},f.setPage=function(){return Ja.apply(this,arguments),q.call(this,ce[O]),this},f.insertPage=function(U){return this.addPage(),this.movePage(O,U),this},f.movePage=function(U,se){var Te,Qe;if(U>se){Te=ce[U],Qe=dt[U];for(var We=U;We>se;We--)ce[We]=ce[We-1],dt[We]=dt[We-1];ce[se]=Te,dt[se]=Qe,this.setPage(se)}else if(U<se){Te=ce[U],Qe=dt[U];for(var ft=U;ft<se;ft++)ce[ft]=ce[ft+1],dt[ft]=dt[ft+1];ce[se]=Te,dt[se]=Qe,this.setPage(se)}return this},f.deletePage=function(){return Fa.apply(this,arguments),this},f.__private__.text=f.text=function(U,se,Te,Qe,We){var ft,wt,zt,Yt,nr,mr,jr,Nn,Wn,Gr=(Qe=Qe||{}).scope||this;if(typeof U=="number"&&typeof se=="number"&&(typeof Te=="string"||Array.isArray(Te))){var Wr=Te;Te=se,se=U,U=Wr}if(arguments[3]instanceof Qt==0?(zt=arguments[4],Yt=arguments[5],dn(jr=arguments[3])==="object"&&jr!==null||(typeof zt=="string"&&(Yt=zt,zt=null),typeof jr=="string"&&(Yt=jr,jr=null),typeof jr=="number"&&(zt=jr,jr=null),Qe={flags:jr,angle:zt,align:Yt})):(x("The transform parameter of text() with a Matrix value"),Wn=We),isNaN(se)||isNaN(Te)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return Gr;var qn,_i="",ua=typeof Qe.lineHeightFactor=="number"?Qe.lineHeightFactor:Il,b=Gr.internal.scaleFactor;function j(Sn){return Sn=Sn.split("	").join(Array(Qe.TabLen||9).join(" ")),Er(Sn,jr)}function ne(Sn){for(var kn,ci=Sn.concat(),Ai=[],Ml=ci.length;Ml--;)typeof(kn=ci.shift())=="string"?Ai.push(kn):Array.isArray(Sn)&&(kn.length===1||kn[1]===void 0&&kn[2]===void 0)?Ai.push(kn[0]):Ai.push([kn[0],kn[1],kn[2]]);return Ai}function be(Sn,kn){var ci;if(typeof Sn=="string")ci=kn(Sn)[0];else if(Array.isArray(Sn)){for(var Ai,Ml,Md=Sn.concat(),Zo=[],Gf=Md.length;Gf--;)typeof(Ai=Md.shift())=="string"?Zo.push(kn(Ai)[0]):Array.isArray(Ai)&&typeof Ai[0]=="string"&&(Ml=kn(Ai[0],Ai[1],Ai[2]),Zo.push([Ml[0],Ml[1],Ml[2]]));ci=Zo}return ci}var qe=!1,at=!0;if(typeof U=="string")qe=!0;else if(Array.isArray(U)){var Tt=U.concat();wt=[];for(var cr,Cr=Tt.length;Cr--;)(typeof(cr=Tt.shift())!="string"||Array.isArray(cr)&&typeof cr[0]!="string")&&(at=!1);qe=at}if(qe===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var Lr=Me/Gr.internal.scaleFactor,gn=Lr*(ua-1);switch(Qe.baseline){case"bottom":Te-=gn;break;case"top":Te+=Lr-gn;break;case"hanging":Te+=Lr-2*gn;break;case"middle":Te+=Lr/2-gn}if((mr=Qe.maxWidth||0)>0&&(typeof U=="string"?U=Gr.splitTextToSize(U,mr):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(Sn,kn){return Sn.concat(Gr.splitTextToSize(kn,mr))},[]))),ft={text:U,x:se,y:Te,options:Qe,mutex:{pdfEscape:Er,activeFontKey:Ne,fonts:ot,activeFontSize:Me}},jt.publish("preProcessText",ft),U=ft.text,zt=(Qe=ft.options).angle,Wn instanceof Qt==0&&zt&&typeof zt=="number"){zt*=Math.PI/180,Qe.rotationDirection===0&&(zt=-zt),E===F&&(zt=-zt);var Zi=Math.cos(zt),ws=Math.sin(zt);Wn=new Qt(Zi,ws,-ws,Zi,0,0)}else zt&&zt instanceof Qt&&(Wn=zt);E!==F||Wn||(Wn=Mt),(nr=Qe.charSpace||Ll)!==void 0&&(_i+=P(_(nr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Nn=Qe.horizontalScale)!==void 0&&(_i+=P(100*Nn)+` Tz
`),Qe.lang;var Vn=-1,bs=Qe.renderingMode!==void 0?Qe.renderingMode:Qe.stroke,_o=Gr.internal.getCurrentPageInfo().pageContext;switch(bs){case 0:case!1:case"fill":Vn=0;break;case 1:case!0:case"stroke":Vn=1;break;case 2:case"fillThenStroke":Vn=2;break;case 3:case"invisible":Vn=3;break;case 4:case"fillAndAddForClipping":Vn=4;break;case 5:case"strokeAndAddPathForClipping":Vn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vn=6;break;case 7:case"addToPathForClipping":Vn=7}var _c=_o.usedRenderingMode!==void 0?_o.usedRenderingMode:-1;Vn!==-1?_i+=Vn+` Tr
`:_c!==-1&&(_i+=`0 Tr
`),Vn!==-1&&(_o.usedRenderingMode=Vn),Yt=Qe.align||"left";var Fi,qs=Me*ua,Vf=Gr.internal.pageSize.getWidth(),Kf=ot[Ne];nr=Qe.charSpace||Ll,mr=Qe.maxWidth||0,jr=Object.assign({autoencode:!0,noBOM:!0},Qe.flags);var Ec=[],Dd=function(Sn){return Gr.getStringUnitWidth(Sn,{font:Kf,charSpace:nr,fontSize:Me,doKerning:!1})*Me/b};if(Object.prototype.toString.call(U)==="[object Array]"){var ts;wt=ne(U),Yt!=="left"&&(Fi=wt.map(Dd));var rs,YA=0;if(Yt==="right"){se-=Fi[0],U=[],Cr=wt.length;for(var qo=0;qo<Cr;qo++)qo===0?(rs=Ua(se),ts=Oa(Te)):(rs=_(YA-Fi[qo]),ts=-qs),U.push([wt[qo],rs,ts]),YA=Fi[qo]}else if(Yt==="center"){se-=Fi[0]/2,U=[],Cr=wt.length;for(var Bc=0;Bc<Cr;Bc++)Bc===0?(rs=Ua(se),ts=Oa(Te)):(rs=_((YA-Fi[Bc])/2),ts=-qs),U.push([wt[Bc],rs,ts]),YA=Fi[Bc]}else if(Yt==="left"){U=[],Cr=wt.length;for(var jf=0;jf<Cr;jf++)U.push(wt[jf])}else if(Yt==="justify"&&Kf.encoding==="Identity-H"){U=[],Cr=wt.length,mr=mr!==0?mr:Vf;for(var Cc=0,li=0;li<Cr;li++)if(ts=li===0?Oa(Te):-qs,rs=li===0?Ua(se):Cc,li<Cr-1){var lb=_((mr-Fi[li])/(wt[li].split(" ").length-1)),Xo=wt[li].split(" ");U.push([Xo[0]+" ",rs,ts]),Cc=0;for(var Yo=1;Yo<Xo.length;Yo++){var Rd=(Dd(Xo[Yo-1]+" "+Xo[Yo])-Dd(Xo[Yo]))*b+lb;Yo==Xo.length-1?U.push([Xo[Yo],Rd,0]):U.push([Xo[Yo]+" ",Rd,0]),Cc-=Rd}}else U.push([wt[li],rs,ts]);U.push(["",Cc,0])}else{if(Yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Cr=wt.length,mr=mr!==0?mr:Vf,li=0;li<Cr;li++)ts=li===0?Oa(Te):-qs,rs=li===0?Ua(se):0,li<Cr-1?Ec.push(P(_((mr-Fi[li])/(wt[li].split(" ").length-1)))):Ec.push(0),U.push([wt[li],rs,ts])}}(typeof Qe.R2L=="boolean"?Qe.R2L:Oe)===!0&&(U=be(U,function(Sn,kn,ci){return[Sn.split("").reverse().join(""),kn,ci]})),ft={text:U,x:se,y:Te,options:Qe,mutex:{pdfEscape:Er,activeFontKey:Ne,fonts:ot,activeFontSize:Me}},jt.publish("postProcessText",ft),U=ft.text,qn=ft.mutex.isHex||!1;var zf=ot[Ne].encoding;zf!=="WinAnsiEncoding"&&zf!=="StandardEncoding"||(U=be(U,function(Sn,kn,ci){return[j(Sn),kn,ci]})),wt=ne(U),U=[];for(var Ud,Od,JA,ZA=Array.isArray(wt[0])?1:0,Ol="",$f=function(Sn,kn,ci){var Ai="";return ci instanceof Qt?(ci=typeof Qe.angle=="number"?Pn(ci,new Qt(1,0,0,1,Sn,kn)):Pn(new Qt(1,0,0,1,Sn,kn),ci),E===F&&(ci=Pn(new Qt(1,0,0,-1,0,0),ci)),Ai=ci.join(" ")+` Tm
`):Ai=P(Sn)+" "+P(kn)+` Td
`,Ai},ys=0;ys<wt.length;ys++){switch(Ol="",ZA){case 1:JA=(qn?"<":"(")+wt[ys][0]+(qn?">":")"),Ud=parseFloat(wt[ys][1]),Od=parseFloat(wt[ys][2]);break;case 0:JA=(qn?"<":"(")+wt[ys]+(qn?">":")"),Ud=Ua(se),Od=Oa(Te)}Ec!==void 0&&Ec[ys]!==void 0&&(Ol=Ec[ys]+` Tw
`),ys===0?U.push(Ol+$f(Ud,Od,Wn)+JA):ZA===0?U.push(Ol+JA):ZA===1&&U.push(Ol+$f(Ud,Od,Wn)+JA)}U=ZA===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var Jo=`BT
/`;return Jo+=Ne+" "+Me+` Tf
`,Jo+=P(Me*ua)+` TL
`,Jo+=Fl+`
`,Jo+=_i,Jo+=U,W(Jo+="ET"),h[Ne]=!0,Gr};var Mf=f.__private__.clip=f.clip=function(U){return W(U==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Mf("evenodd")},f.__private__.discardPath=f.discardPath=function(){return W("n"),this};var Gs=f.__private__.isValidStyle=function(U){var se=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(se=!0),se};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(U){return Gs(U)&&(A=U),this};var Nd=f.__private__.getStyle=f.getStyle=function(U){var se=A;switch(U){case"D":case"S":se="S";break;case"F":se="f";break;case"FD":case"DF":se="B";break;case"f":case"f*":case"B":case"B*":se=U}return se},Sd=f.close=function(){return W("h"),this};f.stroke=function(){return W("S"),this},f.fill=function(U){return Za("f",U),this},f.fillEvenOdd=function(U){return Za("f*",U),this},f.fillStroke=function(U){return Za("B",U),this},f.fillStrokeEvenOdd=function(U){return Za("B*",U),this};var Za=function(U,se){dn(se)==="object"?Td(se,U):W(U)},gs=function(U){U===null||E===F&&U===void 0||(U=Nd(U),W(U))};function kd(U,se,Te,Qe,We){var ft=new wh(se||this.boundingBox,Te||this.xStep,Qe||this.yStep,this.gState,We||this.matrix);ft.stream=this.stream;var wt=U+"$$"+this.cloneIndex+++"$$";return yn(wt,ft),ft}var Td=function(U,se){var Te=ze[U.key],Qe=Be[Te];if(Qe instanceof hu)W("q"),W(Id(se)),Qe.gState&&f.setGState(Qe.gState),W(U.matrix.toString()+" cm"),W("/"+Te+" sh"),W("Q");else if(Qe instanceof wh){var We=new Qt(1,0,0,-1,0,Ma());U.matrix&&(We=We.multiply(U.matrix||Mt),Te=kd.call(Qe,U.key,U.boundingBox,U.xStep,U.yStep,We).id),W("q"),W("/Pattern cs"),W("/"+Te+" scn"),Qe.gState&&f.setGState(Qe.gState),W(se),W("Q")}},Id=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},bc=f.moveTo=function(U,se){return W(P(_(U))+" "+P(M(se))+" m"),this},zo=f.lineTo=function(U,se){return W(P(_(U))+" "+P(M(se))+" l"),this},Ra=f.curveTo=function(U,se,Te,Qe,We,ft){return W([P(_(U)),P(M(se)),P(_(Te)),P(M(Qe)),P(_(We)),P(M(ft)),"c"].join(" ")),this};f.__private__.line=f.line=function(U,se,Te,Qe,We){if(isNaN(U)||isNaN(se)||isNaN(Te)||isNaN(Qe)||!Gs(We))throw new Error("Invalid arguments passed to jsPDF.line");return E===I?this.lines([[Te-U,Qe-se]],U,se,[1,1],We||"S"):this.lines([[Te-U,Qe-se]],U,se,[1,1]).stroke()},f.__private__.lines=f.lines=function(U,se,Te,Qe,We,ft){var wt,zt,Yt,nr,mr,jr,Nn,Wn,Gr,Wr,qn,_i;if(typeof U=="number"&&(_i=Te,Te=se,se=U,U=_i),Qe=Qe||[1,1],ft=ft||!1,isNaN(se)||isNaN(Te)||!Array.isArray(U)||!Array.isArray(Qe)||!Gs(We)||typeof ft!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(bc(se,Te),wt=Qe[0],zt=Qe[1],nr=U.length,Wr=se,qn=Te,Yt=0;Yt<nr;Yt++)(mr=U[Yt]).length===2?(Wr=mr[0]*wt+Wr,qn=mr[1]*zt+qn,zo(Wr,qn)):(jr=mr[0]*wt+Wr,Nn=mr[1]*zt+qn,Wn=mr[2]*wt+Wr,Gr=mr[3]*zt+qn,Wr=mr[4]*wt+Wr,qn=mr[5]*zt+qn,Ra(jr,Nn,Wn,Gr,Wr,qn));return ft&&Sd(),gs(We),this},f.path=function(U){for(var se=0;se<U.length;se++){var Te=U[se],Qe=Te.c;switch(Te.op){case"m":bc(Qe[0],Qe[1]);break;case"l":zo(Qe[0],Qe[1]);break;case"c":Ra.apply(this,Qe);break;case"h":Sd()}}return this},f.__private__.rect=f.rect=function(U,se,Te,Qe,We){if(isNaN(U)||isNaN(se)||isNaN(Te)||isNaN(Qe)||!Gs(We))throw new Error("Invalid arguments passed to jsPDF.rect");return E===I&&(Qe=-Qe),W([P(_(U)),P(M(se)),P(_(Te)),P(_(Qe)),"re"].join(" ")),gs(We),this},f.__private__.triangle=f.triangle=function(U,se,Te,Qe,We,ft,wt){if(isNaN(U)||isNaN(se)||isNaN(Te)||isNaN(Qe)||isNaN(We)||isNaN(ft)||!Gs(wt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Te-U,Qe-se],[We-Te,ft-Qe],[U-We,se-ft]],U,se,[1,1],wt,!0),this},f.__private__.roundedRect=f.roundedRect=function(U,se,Te,Qe,We,ft,wt){if(isNaN(U)||isNaN(se)||isNaN(Te)||isNaN(Qe)||isNaN(We)||isNaN(ft)||!Gs(wt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zt=4/3*(Math.SQRT2-1);return We=Math.min(We,.5*Te),ft=Math.min(ft,.5*Qe),this.lines([[Te-2*We,0],[We*zt,0,We,ft-ft*zt,We,ft],[0,Qe-2*ft],[0,ft*zt,-We*zt,ft,-We,ft],[2*We-Te,0],[-We*zt,0,-We,-ft*zt,-We,-ft],[0,2*ft-Qe],[0,-ft*zt,We*zt,-ft,We,-ft]],U+We,se,[1,1],wt,!0),this},f.__private__.ellipse=f.ellipse=function(U,se,Te,Qe,We){if(isNaN(U)||isNaN(se)||isNaN(Te)||isNaN(Qe)||!Gs(We))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ft=4/3*(Math.SQRT2-1)*Te,wt=4/3*(Math.SQRT2-1)*Qe;return bc(U+Te,se),Ra(U+Te,se-wt,U+ft,se-Qe,U,se-Qe),Ra(U-ft,se-Qe,U-Te,se-wt,U-Te,se),Ra(U-Te,se+wt,U-ft,se+Qe,U,se+Qe),Ra(U+ft,se+Qe,U+Te,se+wt,U+Te,se),gs(We),this},f.__private__.circle=f.circle=function(U,se,Te,Qe){if(isNaN(U)||isNaN(se)||isNaN(Te)||!Gs(Qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,se,Te,Te,Qe)},f.setFont=function(U,se,Te){return Te&&(se=N(se,Te)),Ne=wo(U,se,{disableWarning:!1}),this};var Qf=f.__private__.getFont=f.getFont=function(){return ot[wo.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var U,se,Te={};for(U in pt)if(pt.hasOwnProperty(U))for(se in Te[U]=[],pt[U])pt[U].hasOwnProperty(se)&&Te[U].push(se);return Te},f.addFont=function(U,se,Te,Qe,We){var ft=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ft.indexOf(arguments[3])!==-1?We=arguments[3]:arguments[3]&&ft.indexOf(arguments[3])==-1&&(Te=N(Te,Qe)),rn.call(this,U,se,Te,We=We||"Identity-H")};var Il,GA=t.lineWidth||.200025,ar=f.__private__.getLineWidth=f.getLineWidth=function(){return GA},Hf=f.__private__.setLineWidth=f.setLineWidth=function(U){return GA=U,W(P(_(U))+" w"),this};f.__private__.setLineDash=Xt.API.setLineDash=Xt.API.setLineDashPattern=function(U,se){if(U=U||[],se=se||0,isNaN(se)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Te){return P(_(Te))}).join(" "),se=P(_(se)),W("["+U+"] "+se+" d"),this};var WA=f.__private__.getLineHeight=f.getLineHeight=function(){return Me*Il};f.__private__.getLineHeight=f.getLineHeight=function(){return Me*Il};var yc=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Il=U),this},Fd=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Il};yc(t.lineHeight);var Ua=f.__private__.getHorizontalCoordinate=function(U){return _(U)},Oa=f.__private__.getVerticalCoordinate=function(U){return E===F?U:dt[O].mediaBox.topRightY-dt[O].mediaBox.bottomLeftY-_(U)},Pd=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(U){return P(Ua(U))},qA=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(U){return P(Oa(U))},sn=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ke(sn)},f.__private__.setStrokeColor=f.setDrawColor=function(U,se,Te,Qe){return sn=De({ch1:U,ch2:se,ch3:Te,ch4:Qe,pdfColorType:"draw",precision:2}),W(sn),this};var XA=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ke(XA)},f.__private__.setFillColor=f.setFillColor=function(U,se,Te,Qe){return XA=De({ch1:U,ch2:se,ch3:Te,ch4:Qe,pdfColorType:"fill",precision:2}),W(XA),this};var Fl=t.textColor||"0 g",Pl=f.__private__.getTextColor=f.getTextColor=function(){return ke(Fl)};f.__private__.setTextColor=f.setTextColor=function(U,se,Te,Qe){return Fl=De({ch1:U,ch2:se,ch3:Te,ch4:Qe,pdfColorType:"text",precision:3}),this};var Ll=t.charSpace,Ld=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Ll||0)};f.__private__.setCharSpace=f.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ll=U,this};var $o=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(U){var se=f.CapJoinStyles[U];if(se===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $o=se,W(se+" J"),this};var es=0;f.__private__.setLineJoin=f.setLineJoin=function(U){var se=f.CapJoinStyles[U];if(se===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return es=se,W(se+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(P(_(U))+" M"),this},f.GState=_v,f.setGState=function(U){(U=typeof U=="string"?st[St[U]]:Go(null,U)).equals(Ot)||(W("/"+U.id+" gs"),Ot=U)};var Go=function(U,se){if(!U||!St[U]){var Te=!1;for(var Qe in st)if(st.hasOwnProperty(Qe)&&st[Qe].equals(se)){Te=!0;break}if(Te)se=st[Qe];else{var We="GS"+(Object.keys(st).length+1).toString(10);st[We]=se,se.id=We}return U&&(St[U]=se.id),jt.publish("addGState",se),se}};f.addGState=function(U,se){return Go(U,se),this},f.saveGraphicsState=function(){return W("q"),Bt.push({key:Ne,size:Me,color:Fl}),this},f.restoreGraphicsState=function(){W("Q");var U=Bt.pop();return Ne=U.key,Me=U.size,Fl=U.color,Ot=null,this},f.setCurrentTransformationMatrix=function(U){return W(U.toString()+" cm"),this},f.comment=function(U){return W("#"+U),this};var Dl=function(U,se){var Te=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Te},set:function(ft){isNaN(ft)||(Te=parseFloat(ft))}});var Qe=se||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Qe},set:function(ft){isNaN(ft)||(Qe=parseFloat(ft))}});var We="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return We},set:function(ft){We=ft.toString()}}),this},xo=function(U,se,Te,Qe){Dl.call(this,U,se),this.type="rect";var We=Te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return We},set:function(wt){isNaN(wt)||(We=parseFloat(wt))}});var ft=Qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ft},set:function(wt){isNaN(wt)||(ft=parseFloat(wt))}}),this},Rl=function(){this.page=Et,this.currentPage=O,this.pages=ce.slice(0),this.pagesContext=dt.slice(0),this.x=Ce,this.y=Ke,this.matrix=Ve,this.width=xc(O),this.height=Ma(O),this.outputDestination=ge,this.id="",this.objectNumber=-1};Rl.prototype.restore=function(){Et=this.page,O=this.currentPage,dt=this.pagesContext,ce=this.pages,Ce=this.x,Ke=this.y,Ve=this.matrix,Wo(O,this.width),vs(O,this.height),ge=this.outputDestination};var Ul=function(U,se,Te,Qe,We){en.push(new Rl),Et=O=0,ce=[],Ce=U,Ke=se,Ve=We,Ln([Te,Qe])};for(var Ws in f.beginFormObject=function(U,se,Te,Qe,We){return Ul(U,se,Te,Qe,We),this},f.endFormObject=function(U){return function(se){if(Ur[se])en.pop().restore();else{var Te=new Rl,Qe="Xo"+(Object.keys(qt).length+1).toString(10);Te.id=Qe,Ur[se]=Qe,qt[Qe]=Te,jt.publish("addFormObject",Te),en.pop().restore()}}(U),this},f.doFormObject=function(U,se){var Te=qt[Ur[U]];return W("q"),W(se.toString()+" cm"),W("/"+Te.id+" Do"),W("Q"),this},f.getFormObject=function(U){var se=qt[Ur[U]];return{x:se.x,y:se.y,width:se.width,height:se.height,matrix:se.matrix}},f.save=function(U,se){return U=U||"generated.pdf",(se=se||{}).returnPromise=se.returnPromise||!1,se.returnPromise===!1?(ou(bo(Da()),U),typeof ou.unload=="function"&&fr.setTimeout&&setTimeout(ou.unload,911),this):new Promise(function(Te,Qe){try{var We=ou(bo(Da()),U);typeof ou.unload=="function"&&fr.setTimeout&&setTimeout(ou.unload,911),Te(We)}catch(ft){Qe(ft.message)}})},Xt.API)Xt.API.hasOwnProperty(Ws)&&(Ws==="events"&&Xt.API.events.length?function(U,se){var Te,Qe,We;for(We=se.length-1;We!==-1;We--)Te=se[We][0],Qe=se[We][1],U.subscribe.apply(U,[Te].concat(typeof Qe=="function"?[Qe]:Qe))}(jt,Xt.API.events):f[Ws]=Xt.API[Ws]);var xc=f.getPageWidth=function(U){return(dt[U=U||O].mediaBox.topRightX-dt[U].mediaBox.bottomLeftX)/ve},Wo=f.setPageWidth=function(U,se){dt[U].mediaBox.topRightX=se*ve+dt[U].mediaBox.bottomLeftX},Ma=f.getPageHeight=function(U){return(dt[U=U||O].mediaBox.topRightY-dt[U].mediaBox.bottomLeftY)/ve},vs=f.setPageHeight=function(U,se){dt[U].mediaBox.topRightY=se*ve+dt[U].mediaBox.bottomLeftY};return f.internal={pdfEscape:Er,getStyle:Nd,getFont:Qf,getFontSize:fe,getCharSpace:Ld,getTextColor:Pl,getLineHeight:WA,getLineHeightFactor:Fd,getLineWidth:ar,write:xe,getHorizontalCoordinate:Ua,getVerticalCoordinate:Oa,getCoordinateString:Pd,getVerticalCoordinateString:qA,collections:{},newObject:Or,newAdditionalObject:Ie,newObjectDeferred:Fr,newObjectDeferredBegin:le,getFilters:Je,putStream:ct,events:jt,scaleFactor:ve,pageSize:{getWidth:function(){return xc(O)},setWidth:function(U){Wo(O,U)},getHeight:function(){return Ma(O)},setHeight:function(U){vs(O,U)}},encryptionOptions:u,encryption:_n,getEncryptor:function(U){return u!==null?_n.encryptor(U,0):function(se){return se}},output:Pr,getNumberOfPages:Pa,pages:ce,out:W,f2:y,f3:S,getPageInfo:yo,getPageInfoByObjId:Of,getCurrentPageInfo:Cd,getPDFVersion:g,Point:Dl,Rectangle:xo,Matrix:Qt,hasHotfix:$s},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return xc(O)},set:function(U){Wo(O,U)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ma(O)},set:function(U){vs(O,U)},enumerable:!0,configurable:!0}),(function(U){for(var se=0,Te=Ue.length;se<Te;se++){var Qe=rn.call(this,U[se][0],U[se][1],U[se][2],Ue[se][3],!0);d===!1&&(h[Qe]=!0);var We=U[se][0].split("-");or({id:Qe,fontName:We[0],fontStyle:We[1]||""})}jt.publish("addFonts",{fonts:ot,dictionary:pt})}).call(f,Ue),Ne="F1",ps(i,r),jt.publish("initialized"),f}Ah.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Ah.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ah.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Ah.prototype.processOwnerPassword=function(t,e){return fx(hx(e).substr(0,5),t)},Ah.prototype.encryptor=function(t,e){var r=hx(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return fx(r,n)}},_v.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||dn(t)!==dn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Xt.API={events:[]},Xt.version="3.0.2";var ti=Xt.API,XE=1,vd=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pr=function(t){return t.toFixed(2)},Oc=function(t){return t.toFixed(5)};ti.__acroform__={};var ms=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},UT=function(t){return t*XE},il=function(t){var e=new hU,r=Gt.internal.getHeight(t)||0,n=Gt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(pr(n)),Number(pr(r))],e},Ree=ti.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Uee=ti.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Oee=ti.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},pi=ti.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Oee(t,e-1)},gi=ti.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Ree(t,e-1)},vi=ti.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Uee(t,e-1)},Mee=ti.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],a=t[1],s=t[2],o=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=r(i+s)||0,l.upperRight_Y=n(a)||0,[Number(pr(l.lowerLeft_X)),Number(pr(l.lowerLeft_Y)),Number(pr(l.upperRight_X)),Number(pr(l.upperRight_Y))]},Qee=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=mx(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+pr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=il(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},mx=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(y){return y.split(`
`)}):i.map(function(y){return[y]});var a=r,s=Gt.internal.getHeight(t)||0;s=s<0?-s:s;var o=Gt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(y,S,_){if(y+1<i.length){var M=S+" "+i[y+1][0];return Ng(M,t,_).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var A,u,d=Ng("3",t,a).height,h=t.multiline?s-a:(s-d)/2,f=h+=2,p=0,g=0,v=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ng(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var C="",I=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var E=!1;if(i[F].length!==1&&v!==i[F].length-1){if((d+2)*(I+2)+2>s)continue e;C+=i[F][v],E=!0,g=F,F--}else{C=(C+=i[F][v]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var R=parseInt(F),L=l(R,C,a),N=F>=i.length-1;if(L&&!N){C+=" ",v=0;continue}if(L||N){if(N)g=R;else if(t.multiline&&(d+2)*(I+2)+2>s)continue e}else{if(!t.multiline||(d+2)*(I+2)+2>s)continue e;g=R}}for(var P="",x=p;x<=g;x++){var k=i[x];if(t.multiline){if(x===g){P+=k[v]+" ",v=(v+1)%k.length;continue}if(x===p){P+=k[k.length-1]+" ";continue}}P+=k[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,u=Ng(P,t,a).width,t.textAlign){case"right":A=o-u-2;break;case"center":A=(o-u)/2;break;default:A=2}e+=pr(A)+" "+pr(f)+` Td
`,e+="("+vd(P)+`) Tj
`,e+=-pr(A)+` 0 Td
`,f=-(a+2),u=0,p=E?g:g+1,I++,C=""}break}return n.text=e,n.fontSize=a,n},Ng=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},Hee={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Vee=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Kee=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ho.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Hee)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");XE=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new fU,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&Vee(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var s in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],l=[],A=o.Rect;if(o.Rect&&(o.Rect=Mee(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Gt.createDefaultAppearanceStream(o),dn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=A,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=Qee(o);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var d="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var f=o.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var s in f)if(f.hasOwnProperty(s)){var p=f[s];typeof p=="function"&&(p=p.call(i,o)),d+="/"+s+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=f)=="function"&&(p=p.call(i,o)),d+="/"+s+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&function(g,v){for(var C in g)if(g.hasOwnProperty(C)){var I=C,F=g[C];v.internal.newObjectDeferredBegin(F.objId,!0),dn(F)==="object"&&typeof F.putStream=="function"&&F.putStream(),delete g[I]}}(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},dU=ti.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(s){return s};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),dn(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+vd(n(t[a].toString()))+")"):i+=t[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},yy=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+vd(n(t))+")"},fl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fl.prototype.toString=function(){return this.objId+" 0 R"},fl.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},fl.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:dU(i,this.objId,this.scope)}):i instanceof fl?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var hU=function(){fl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ms(hU,fl);var fU=function(){fl.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+vd(r(t))+")"}},set:function(r){t=r}})};ms(fU,fl);var Ho=function t(){fl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!pi(e,3)},set:function(C){C?this.F=gi(e,3):this.F=vi(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');r=C}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(C){n=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(C){n[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(C){n[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(C){n[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(C){n[3]=C}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Ev)return;a="FieldObject"+t.FieldNum++}var C=function(I){return I};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+vd(C(a))+")"},set:function(C){a=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(C){a=C}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(C){s=C}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(C){o=C}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return A===void 0?50/XE:A},set:function(C){A=C}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Ev||this instanceof ku))return yy(d,this.objId,this.scope)},set:function(C){C=C.toString(),d=C}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Gi==0?yy(h,this.objId,this.scope):h},set:function(C){C=C.toString(),h=this instanceof Gi==0?C.substr(0,1)==="("?qd(C.substr(1,C.length-2)):qd(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gi==1?qd(h.substr(1,h.length-1)):h},set:function(C){C=C.toString(),h=this instanceof Gi==1?"/"+C:C}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Gi==0?yy(f,this.objId,this.scope):f},set:function(C){C=C.toString(),f=this instanceof Gi==0?C.substr(0,1)==="("?qd(C.substr(1,C.length-2)):qd(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gi==1?qd(f.substr(1,f.length-1)):f},set:function(C){C=C.toString(),f=this instanceof Gi==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(C){C=!!C,g=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(C){p=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,1)},set:function(C){C?this.Ff=gi(this.Ff,1):this.Ff=vi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,2)},set:function(C){C?this.Ff=gi(this.Ff,2):this.Ff=vi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,3)},set:function(C){C?this.Ff=gi(this.Ff,3):this.Ff=vi(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');v=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(v){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};ms(Ho,fl);var Ih=function(){Ho.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return dU(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,A=[];l=s.exec(a);)A.push(l[o]);return A}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,18)},set:function(r){r?this.Ff=gi(this.Ff,18):this.Ff=vi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=gi(this.Ff,19):this.Ff=vi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,20)},set:function(r){r?(this.Ff=gi(this.Ff,20),e.sort()):this.Ff=vi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,22)},set:function(r){r?this.Ff=gi(this.Ff,22):this.Ff=vi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,23)},set:function(r){r?this.Ff=gi(this.Ff,23):this.Ff=vi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,27)},set:function(r){r?this.Ff=gi(this.Ff,27):this.Ff=vi(this.Ff,27)}}),this.hasAppearanceStream=!1};ms(Ih,Ho);var Fh=function(){Ih.call(this),this.fontName="helvetica",this.combo=!1};ms(Fh,Ih);var Ph=function(){Fh.call(this),this.combo=!0};ms(Ph,Fh);var k1=function(){Ph.call(this),this.edit=!0};ms(k1,Ph);var Gi=function(){Ho.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,15)},set:function(r){r?this.Ff=gi(this.Ff,15):this.Ff=vi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,16)},set:function(r){r?this.Ff=gi(this.Ff,16):this.Ff=vi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,17)},set:function(r){r?this.Ff=gi(this.Ff,17):this.Ff=vi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,26)},set:function(r){r?this.Ff=gi(this.Ff,26):this.Ff=vi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+vd(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){dn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ms(Gi,Ho);var T1=function(){Gi.call(this),this.pushButton=!0};ms(T1,Gi);var Lh=function(){Gi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ms(Lh,Gi);var Ev=function(){var t,e;Ho.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),n)s.push("/"+a+" ("+vd(i(n[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){dn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Gt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ms(Ev,Ho),Lh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Lh.prototype.createOption=function(t){var e=new Ev;return e.Parent=this,e.optionName=t,this.Kids.push(e),jee.call(this.scope,e),e};var I1=function(){Gi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Gt.CheckBox.createAppearanceStream()};ms(I1,Gi);var ku=function(){Ho.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,13)},set:function(e){e?this.Ff=gi(this.Ff,13):this.Ff=vi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,21)},set:function(e){e?this.Ff=gi(this.Ff,21):this.Ff=vi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,23)},set:function(e){e?this.Ff=gi(this.Ff,23):this.Ff=vi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,24)},set:function(e){e?this.Ff=gi(this.Ff,24):this.Ff=vi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,25)},set:function(e){e?this.Ff=gi(this.Ff,25):this.Ff=vi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,26)},set:function(e){e?this.Ff=gi(this.Ff,26):this.Ff=vi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ms(ku,Ho);var F1=function(){ku.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,14)},set:function(t){t?this.Ff=gi(this.Ff,14):this.Ff=vi(this.Ff,14)}}),this.password=!0};ms(F1,ku);var Gt={CheckBox:{createAppearanceStream:function(){return{N:{On:Gt.CheckBox.YesNormal},D:{On:Gt.CheckBox.YesPushDown,Off:Gt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=il(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=mx(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+pr(Gt.internal.getWidth(t))+" "+pr(Gt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+pr(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=il(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],a=Gt.internal.getHeight(t),s=Gt.internal.getWidth(t),o=mx(t,t.caption);return i.push("1 g"),i.push("0 0 "+pr(s)+" "+pr(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+pr(s-1)+" "+pr(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+pr(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=il(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pr(Gt.internal.getWidth(t))+" "+pr(Gt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Gt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Gt.RadioButton.Circle.YesNormal,e.D[t]=Gt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=il(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Gt.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Oc(Gt.internal.getWidth(t)/2)+" "+Oc(Gt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=il(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Gt.internal.Bezier_C).toFixed(5)),s=Number((n*Gt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Oc(Gt.internal.getWidth(t)/2)+" "+Oc(Gt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Oc(Gt.internal.getWidth(t)/2)+" "+Oc(Gt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=il(t);e.scope=t.scope;var r=[],n=Gt.internal.getWidth(t)<=Gt.internal.getHeight(t)?Gt.internal.getWidth(t)/4:Gt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Gt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Oc(Gt.internal.getWidth(t)/2)+" "+Oc(Gt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Gt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Gt.RadioButton.Cross.YesNormal,e.D[t]=Gt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=il(t);e.scope=t.scope;var r=[],n=Gt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+pr(Gt.internal.getWidth(t)-2)+" "+pr(Gt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(pr(n.x1.x)+" "+pr(n.x1.y)+" m"),r.push(pr(n.x2.x)+" "+pr(n.x2.y)+" l"),r.push(pr(n.x4.x)+" "+pr(n.x4.y)+" m"),r.push(pr(n.x3.x)+" "+pr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=il(t);e.scope=t.scope;var r=Gt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+pr(Gt.internal.getWidth(t))+" "+pr(Gt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+pr(Gt.internal.getWidth(t)-2)+" "+pr(Gt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(pr(r.x1.x)+" "+pr(r.x1.y)+" m"),n.push(pr(r.x2.x)+" "+pr(r.x2.y)+" l"),n.push(pr(r.x4.x)+" "+pr(r.x4.y)+" m"),n.push(pr(r.x3.x)+" "+pr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=il(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pr(Gt.internal.getWidth(t))+" "+pr(Gt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Gt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Gt.internal.getWidth(t),r=Gt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Gt.internal.getWidth=function(t){var e=0;return dn(t)==="object"&&(e=UT(t.Rect[2])),e},Gt.internal.getHeight=function(t){var e=0;return dn(t)==="object"&&(e=UT(t.Rect[3])),e};var jee=ti.addField=function(t){if(Kee(this,t),!(t instanceof Ho))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ti.AcroFormChoiceField=Ih,ti.AcroFormListBox=Fh,ti.AcroFormComboBox=Ph,ti.AcroFormEditBox=k1,ti.AcroFormButton=Gi,ti.AcroFormPushButton=T1,ti.AcroFormRadioButton=Lh,ti.AcroFormCheckBox=I1,ti.AcroFormTextField=ku,ti.AcroFormPasswordField=F1,ti.AcroFormAppearance=Gt,ti.AcroForm={ChoiceField:Ih,ListBox:Fh,ComboBox:Ph,EditBox:k1,Button:Gi,PushButton:T1,RadioButton:Lh,CheckBox:I1,TextField:ku,PasswordField:F1,Appearance:Gt},Xt.AcroForm={ChoiceField:Ih,ListBox:Fh,ComboBox:Ph,EditBox:k1,Button:Gi,PushButton:T1,RadioButton:Lh,CheckBox:I1,TextField:ku,PasswordField:F1,Appearance:Gt};function mU(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(y,S){var _,M,K,z,ae,te=r;if((S=S||r)==="RGBA"||y.data!==void 0&&y.data instanceof Uint8ClampedArray&&"height"in y&&"width"in y)return"RGBA";if(L(y))for(ae in n)for(K=n[ae],_=0;_<K.length;_+=1){for(z=!0,M=0;M<K[_].length;M+=1)if(K[_][M]!==void 0&&K[_][M]!==y[M]){z=!1;break}if(z===!0){te=ae;break}}else for(ae in n)for(K=n[ae],_=0;_<K.length;_+=1){for(z=!0,M=0;M<K[_].length;M+=1)if(K[_][M]!==void 0&&K[_][M]!==y.charCodeAt(M)){z=!1;break}if(z===!0){te=ae;break}}return te===r&&S!==r&&(te=S),te},a=function y(S){for(var _=this.internal.write,M=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var z=[];if(z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Image"}),z.push({key:"Width",value:S.width}),z.push({key:"Height",value:S.height}),S.colorSpace===C.INDEXED?z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(z.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===C.DEVICE_CMYK&&z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),z.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&z.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var ae="",te=0,G=S.transparency.length;te<G;te++)ae+=S.transparency[te]+" "+S.transparency[te]+" ";z.push({key:"Mask",value:"["+ae+"]"})}S.sMask!==void 0&&z.push({key:"SMask",value:S.objectId+1+" 0 R"});var ue=S.filter!==void 0?["/"+S.filter]:void 0;if(M({data:S.data,additionalKeyValues:z,alreadyAppliedFilters:ue,objectId:S.objectId}),_("endobj"),"sMask"in S&&S.sMask!==void 0){var de=(S.predictor!=null?"/Predictor "+S.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+S.width,T={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:de,data:S.sMask};"filter"in S&&(T.filter=S.filter),y.call(this,T)}if(S.colorSpace===C.INDEXED){var O=this.internal.newObject();M({data:P(new Uint8Array(S.palette)),objectId:O}),_("endobj")}},s=function(){var y=this.internal.collections[e+"images"];for(var S in y)a.call(this,y[S])},o=function(){var y,S=this.internal.collections[e+"images"],_=this.internal.write;for(var M in S)_("/I"+(y=S[M]).index,y.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},A=function(){var y=this.internal.collections[e+"images"];return l.call(this),y},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(y){return typeof t["process"+y.toUpperCase()]=="function"},h=function(y){return dn(y)==="object"&&y.nodeType===1},f=function(y,S){if(y.nodeName==="IMG"&&y.hasAttribute("src")){var _=""+y.getAttribute("src");if(_.indexOf("data:image/")===0)return S1(unescape(_).split("base64,").pop());var M=t.loadFile(_,!0);if(M!==void 0)return M}if(y.nodeName==="CANVAS"){if(y.width===0||y.height===0)throw new Error("Given canvas must have data. Canvas width: "+y.width+", height: "+y.height);var K;switch(S){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;default:K="image/jpeg"}return S1(y.toDataURL(K,1).split("base64,").pop())}},p=function(y){var S=this.internal.collections[e+"images"];if(S){for(var _ in S)if(y===S[_].alias)return S[_]}},g=function(y,S,_){return y||S||(y=-96,S=-96),y<0&&(y=-1*_.width*72/y/this.internal.scaleFactor),S<0&&(S=-1*_.height*72/S/this.internal.scaleFactor),y===0&&(y=S*_.width/_.height),S===0&&(S=y*_.height/_.width),[y,S]},v=function(y,S,_,M,K,z){var ae=g.call(this,_,M,K),te=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,ue=A.call(this);if(_=ae[0],M=ae[1],ue[K.index]=K,z){z*=Math.PI/180;var de=Math.cos(z),T=Math.sin(z),O=function(Q){return Q.toFixed(4)},V=[O(de),O(T),O(-1*T),O(de),0,0,"cm"]}this.internal.write("q"),z?(this.internal.write([1,"0","0",1,te(y),G(S+M),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([te(_),"0","0",te(M),"0","0","cm"].join(" "))):this.internal.write([te(_),"0","0",te(M),te(y),G(S+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},C=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=t.__addimage__.sHashCode=function(y){var S,_,M=0;if(typeof y=="string")for(_=y.length,S=0;S<_;S++)M=(M<<5)-M+y.charCodeAt(S),M|=0;else if(L(y))for(_=y.byteLength/2,S=0;S<_;S++)M=(M<<5)-M+y[S],M|=0;return M},E=t.__addimage__.validateStringAsBase64=function(y){(y=y||"").toString().trim();var S=!0;return y.length===0&&(S=!1),y.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(y.substr(0,y.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(y.substr(-2))===!1&&(S=!1),S},R=t.__addimage__.extractImageFromDataUrl=function(y){if(y==null||!(y=y.trim()).startsWith("data:"))return null;var S=y.indexOf(",");return S<0?null:y.substring(0,S).trim().endsWith("base64")?y.substring(S+1):null};t.__addimage__.isArrayBuffer=function(y){return y instanceof ArrayBuffer};var L=t.__addimage__.isArrayBufferView=function(y){return y instanceof Int8Array||y instanceof Uint8Array||y instanceof Uint8ClampedArray||y instanceof Int16Array||y instanceof Uint16Array||y instanceof Int32Array||y instanceof Uint32Array||y instanceof Float32Array||y instanceof Float64Array},N=t.__addimage__.binaryStringToUint8Array=function(y){for(var S=y.length,_=new Uint8Array(S),M=0;M<S;M++)_[M]=y.charCodeAt(M);return _},P=t.__addimage__.arrayBufferToBinaryString=function(y){for(var S="",_=L(y)?y:new Uint8Array(y),M=0;M<_.length;M+=8192)S+=String.fromCharCode.apply(null,_.subarray(M,M+8192));return S};t.addImage=function(){var y,S,_,M,K,z,ae,te,G;if(typeof arguments[1]=="number"?(S=r,_=arguments[1],M=arguments[2],K=arguments[3],z=arguments[4],ae=arguments[5],te=arguments[6],G=arguments[7]):(S=arguments[1],_=arguments[2],M=arguments[3],K=arguments[4],z=arguments[5],ae=arguments[6],te=arguments[7],G=arguments[8]),dn(y=arguments[0])==="object"&&!h(y)&&"imageData"in y){var ue=y;y=ue.imageData,S=ue.format||S||r,_=ue.x||_||0,M=ue.y||M||0,K=ue.w||ue.width||K,z=ue.h||ue.height||z,ae=ue.alias||ae,te=ue.compression||te,G=ue.rotation||ue.angle||G}var de=this.internal.getFilters();if(te===void 0&&de.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(_)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var T=x.call(this,y,S,ae,te);return v.call(this,_,M,K,z,T,G),this};var x=function(y,S,_,M){var K,z,ae;if(typeof y=="string"&&i(y)===r){y=unescape(y);var te=k(y,!1);(te!==""||(te=t.loadFile(y,!0))!==void 0)&&(y=te)}if(h(y)&&(y=f(y,S)),S=i(y,S),!d(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((ae=_)==null||ae.length===0)&&(_=function(G){return typeof G=="string"||L(G)?F(G):L(G.data)?F(G.data):null}(y)),(K=p.call(this,_))||(y instanceof Uint8Array||S==="RGBA"||(z=y,y=N(y)),K=this["process"+S.toUpperCase()](y,u.call(this),_,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in t.image_compression?G:I.NONE}(M),z)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},k=t.__addimage__.convertBase64ToBinaryString=function(y,S){S=typeof S!="boolean"||S;var _,M="";if(typeof y=="string"){var K;_=(K=R(y))!==null&&K!==void 0?K:y;try{M=S1(_)}catch(z){if(S)throw E(_)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};t.getImageProperties=function(y){var S,_,M="";if(h(y)&&(y=f(y)),typeof y=="string"&&i(y)===r&&((M=k(y,!1))===""&&(M=t.loadFile(y)||""),y=M),_=i(y),!d(_))throw new Error("addImage does not support files of type '"+_+"', please ensure that a plugin for '"+_+"' support is added.");if(y instanceof Uint8Array||(y=N(y)),!(S=this["process"+_.toUpperCase()](y)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=_,S}})(Xt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Xt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),A=r.pageContext.annotations,u=!1,d=0;d<A.length&&!u;d++)switch((n=A[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<A.length;h++){n=A[h];var f=this.internal.pdfEscape,p=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(g.objId),I=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+f(C(n.contents))+")",a+=" /Popup "+v.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+f(C(I))+") >>",g.content=a;var F=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(a+=" /Open true"),a+=" >>",v.content=a,this.internal.write(g.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var E=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(p(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var R=this.annotations._nameMap[n.options.name];n.options.pageNumber=R.page,n.options.top=R.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var L=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+L+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:A(n),w:l(r+i),h:A(n+a)},options:s,type:"link"})},t.textWithLink=function(r,n,i,a){var s,o,l=this.getTextWidth(r),A=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var u=this.splitTextToSize(r,o).length;s=Math.ceil(A*u)}else o=l,s=A;return this.text(r,n,i,a),i+=.2*A,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-A,o,s,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Xt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=t.__arabicParser__.isArabicEndLetter=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(g){return s(g)&&i.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=1};var A=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(g){var v=0,C=r,I="",F=0;for(v=0;v<g.length;v+=1)C[g.charCodeAt(v)]!==void 0?(F++,typeof(C=C[g.charCodeAt(v)])=="number"&&(I+=String.fromCharCode(C),C=r,F=0),v===g.length-1&&(C=r,I+=g.charAt(v-(F-1)),v-=F-1,F=0)):(C=r,I+=g.charAt(v-F),v-=F,F=0);return I};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(g,v,C){return s(g)?a(g)===!1?-1:!A(g)||!s(v)&&!s(C)||!s(C)&&o(v)||o(g)&&!s(v)||o(g)&&l(v)||o(g)&&o(v)?0:u(g)&&s(v)&&!o(v)&&s(C)&&A(C)?3:o(g)||!s(C)?1:2:-1},f=function(g){var v=0,C=0,I=0,F="",E="",R="",L=(g=g||"").split("\\s+"),N=[];for(v=0;v<L.length;v+=1){for(N.push(""),C=0;C<L[v].length;C+=1)F=L[v][C],E=L[v][C-1],R=L[v][C+1],s(F)?(I=h(F,E,R),N[v]+=I!==-1?String.fromCharCode(e[F.charCodeAt(0)][I]):F):N[v]+=F;N[v]=d(N[v])}return N.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var g,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(v)){var I=0;for(C=[],I=0;I<v.length;I+=1)Array.isArray(v[I])?C.push([f(v[I][0]),v[I][1],v[I][2]]):C.push([f(v[I])]);g=C}else g=f(v);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",p])}(Xt.API),Xt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Xt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var A=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return A},set:function(g){A=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(g){p=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,A){n.call(this);var u=(A=A||{}).fontSize||this.getFontSize(),d=A.font||this.getFont(),h=A.scaleFactor||this.internal.scaleFactor,f=0,p=0,g=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var C=A.maxWidth;C>0?typeof l=="string"?l=this.splitTextToSize(l,C):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(F,E){return F.concat(v.splitTextToSize(E,C))},[])):l=Array.isArray(l)?l:[l];for(var I=0;I<l.length;I++)f<(g=this.getStringUnitWidth(l[I],{font:d})*u)&&(f=g);return f!==0&&(p=l.length),{w:f/=h,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var A=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return A.lineNumber!==void 0&&(A.lineNumber===l.lineNumber?(l.x=(A.x||0)+(A.width||0),l.y=A.y||0):A.y+A.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=A.y+A.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,A,u,d,h){if(n.call(this),!u)throw new Error("No data for PDF table.");var f,p,g,v,C=[],I=[],F=[],E={},R={},L=[],N=[],P=(h=h||{}).autoSize||!1,x=h.printHeaders!==!1,k=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,y=h.margins||Object.assign({width:this.getPageWidth()},e),S=typeof h.padding=="number"?h.padding:3,_=h.headerBackgroundColor||"#c8c8c8",M=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=x,this.internal.__cell__.margins=y,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=_,this.internal.__cell__.headerTextColor=M,this.setFontSize(k),d==null)I=C=Object.keys(u[0]),F=C.map(function(){return"left"});else if(Array.isArray(d)&&dn(d[0])==="object")for(C=d.map(function(ue){return ue.name}),I=d.map(function(ue){return ue.prompt||ue.name||""}),F=d.map(function(ue){return ue.align||"left"}),f=0;f<d.length;f+=1)R[d[f].name]=.7499990551181103*d[f].width;else Array.isArray(d)&&typeof d[0]=="string"&&(I=C=d,F=C.map(function(){return"left"}));if(P||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<C.length;f+=1){for(E[v=C[f]]=u.map(function(ue){return ue[v]}),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(I[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=E[v],this.setFont(void 0,"normal"),g=0;g<p.length;g+=1)L.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[v]=Math.max.apply(null,L)+S+S,L=[]}if(x){var K={};for(f=0;f<C.length;f+=1)K[C[f]]={},K[C[f]].text=I[f],K[C[f]].align=F[f];var z=o.call(this,K,R);N=C.map(function(ue){return new a(l,A,R[ue],z,K[ue].text,void 0,K[ue].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var ae=d.reduce(function(ue,de){return ue[de.name]=de.align,ue},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var te=o.call(this,u[f],R);for(g=0;g<C.length;g+=1){var G=u[f][C[g]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:g,data:G},this),s.call(this,new a(l,A,R[C[g]],te,G,f+2,ae[C[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=A,this};var o=function(l,A){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var p=l[f];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,A[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,p){return Math.max(f,p)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,A){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),A&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(p)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Xt.API);var pU={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gU=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],px=mU(gU),vU=[100,200,300,400,500,600,700,800,900],zee=mU(vU);function xy(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return pU[a=a||"normal"]?a:"normal"}(t.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(t.weight),i=function(a){return typeof px[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function OT(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var $ee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},MT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function QT(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function HT(t){return t.trimLeft()}function Gee(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Wee(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Sg,VT,KT,Xd,kg,jT,zT,$T,_y=["times"];function GT(t,e,r,n){var i=4,a=qT;switch(n){case Xt.API.image_compression.FAST:i=1,a=WT;break;case Xt.API.image_compression.MEDIUM:i=6,a=XT;break;case Xt.API.image_compression.SLOW:i=9,a=YT}t=function(o,l,A,u){for(var d,h=o.length/l,f=new Uint8Array(o.length+h),p=[qee,WT,qT,XT,YT],g=0;g<h;g+=1){var v=g*l,C=o.subarray(v,v+l);if(u)f.set(u(C,A,d),v+g);else{for(var I=p.length,F=[],E=0;E<I;E+=1)F[E]=p[E](C,A,d);var R=Yee(F.concat());f.set(F[R],v+g)}d=C}return f}(t,e,r,a);var s=nx(t,{level:i});return Xt.API.__addimage__.arrayBufferToBinaryString(s)}function qee(t){var e=Array.apply([],t);return e.unshift(0),e}function WT(t,e){var r=t.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var a=t[i-e]||0;n[i+1]=t[i]-a+256&255}return n}function qT(t,e,r){var n=t.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var s=r&&r[a]||0;i[a+1]=t[a]-s+256&255}return i}function XT(t,e,r){var n=t.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var s=t[a-e]||0,o=r&&r[a]||0;i[a+1]=t[a]+256-(s+o>>>1)&255}return i}function YT(t,e,r){var n=t.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var s=Xee(t[a-e]||0,r&&r[a]||0,r&&r[a-e]||0);i[a+1]=t[a]-s+256&255}return i}function Xee(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),i=Math.abs(t-r),a=Math.abs(t+e-r-r);return n<=i&&n<=a?t:i<=a?e:r}function Yee(t){var e=t.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Ey(t,e,r){var n=e*r,i=Math.floor(n/8),a=16-(n-8*i+r),s=(1<<r)-1;return wU(t,i)>>a&s}function JT(t,e,r,n){var i=r*n,a=Math.floor(i/8),s=16-(i-8*a+n),o=(1<<n)-1,l=(e&o)<<s;(function(A,u,d){if(u+1<A.byteLength)A.setUint16(u,d,!1);else{var h=d>>8&255;A.setUint8(u,h)}})(t,a,wU(t,a)&~(o<<s)&65535|l)}function wU(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function Jee(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,s=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var A=!0,u=[],d=0,h=null,f=0,p=null;for(this.width=r,this.height=n;A&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((y=t[e++])>=0))throw Error("Invalid block size");if(y===0)break;e+=y}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],1&g||(h=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((y=t[e++])>=0))throw Error("Invalid block size");if(y===0)break;e+=y}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,E=t[e++],R=E>>6&1,L=1<<1+(7&E),N=o,P=l,x=!1;E>>7&&(x=!0,N=e,P=L,e+=3*L);var k=e;for(e++;;){var y;if(!((y=t[e++])>=0))throw Error("Invalid block size");if(y===0)break;e+=y}u.push({x:v,y:C,width:I,height:F,has_local_palette:x,palette_offset:N,palette_size:P,data_offset:k,data_length:e-k,transparent_index:h,interlaced:!!R,delay:d,disposal:f});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(S){if(S<0||S>=u.length)throw new Error("Frame index out of range.");return u[S]},this.decodeAndBlitFrameBGRA=function(S,_){var M=this.frameInfo(S),K=M.width*M.height,z=new Uint8Array(K);ZT(t,M.data_offset,z,K);var ae=M.palette_offset,te=M.transparent_index;te===null&&(te=256);var G=M.width,ue=r-G,de=G,T=4*(M.y*r+M.x),O=4*((M.y+M.height)*r+M.x),V=T,Q=4*ue;M.interlaced===!0&&(Q+=4*r*7);for(var X=8,ie=0,ee=z.length;ie<ee;++ie){var Z=z[ie];if(de===0&&(de=G,(V+=Q)>=O&&(Q=4*ue+4*r*(X-1),V=T+(G+ue)*(X<<1),X>>=1)),Z===te)V+=4;else{var re=t[ae+3*Z],ce=t[ae+3*Z+1],Y=t[ae+3*Z+2];_[V++]=Y,_[V++]=ce,_[V++]=re,_[V++]=255}--de}},this.decodeAndBlitFrameRGBA=function(S,_){var M=this.frameInfo(S),K=M.width*M.height,z=new Uint8Array(K);ZT(t,M.data_offset,z,K);var ae=M.palette_offset,te=M.transparent_index;te===null&&(te=256);var G=M.width,ue=r-G,de=G,T=4*(M.y*r+M.x),O=4*((M.y+M.height)*r+M.x),V=T,Q=4*ue;M.interlaced===!0&&(Q+=4*r*7);for(var X=8,ie=0,ee=z.length;ie<ee;++ie){var Z=z[ie];if(de===0&&(de=G,(V+=Q)>=O&&(Q=4*ue+4*r*(X-1),V=T+(G+ue)*(X<<1),X>>=1)),Z===te)V+=4;else{var re=t[ae+3*Z],ce=t[ae+3*Z+1],Y=t[ae+3*Z+2];_[V++]=re,_[V++]=ce,_[V++]=Y,_[V++]=255}--de}}}function ZT(t,e,r,n){for(var i=t[e++],a=1<<i,s=a+1,o=s+1,l=i+1,A=(1<<l)-1,u=0,d=0,h=0,f=t[e++],p=new Int32Array(4096),g=null;;){for(;u<16&&f!==0;)d|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var v=d&A;if(d>>=l,u-=l,v!==a){if(v===s)break;for(var C=v<o?v:g,I=0,F=C;F>a;)F=p[F]>>8,++I;var E=F;if(h+I+(C!==v?1:0)>n)return void Bn.log("Warning, gif stream longer than expected.");r[h++]=E;var R=h+=I;for(C!==v&&(r[h++]=E),F=C;I--;)F=p[F],r[--R]=255&F,F>>=8;g!==null&&o<4096&&(p[o++]=g<<8|E,o>=A+1&&l<12&&(++l,A=A<<1|1)),g=v}else o=s+1,A=(1<<(l=i+1))-1,g=null}return h!==n&&Bn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function By(t){var e,r,n,i,a,s=Math.floor,o=new Array(64),l=new Array(64),A=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),g=[],v=0,C=7,I=new Array(64),F=new Array(64),E=new Array(64),R=new Array(256),L=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],x=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],y=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(T,O){for(var V=0,Q=0,X=new Array,ie=1;ie<=16;ie++){for(var ee=1;ee<=T[ie];ee++)X[O[Q]]=[],X[O[Q]][0]=V,X[O[Q]][1]=ie,Q++,V++;V*=2}return X}function ae(T){for(var O=T[0],V=T[1]-1;V>=0;)O&1<<V&&(v|=1<<C),V--,--C<0&&(v==255?(te(255),te(0)):te(v),C=7,v=0)}function te(T){g.push(T)}function G(T){te(T>>8&255),te(255&T)}function ue(T,O,V,Q,X){for(var ie,ee=X[0],Z=X[240],re=function(Me,$e){var fe,Oe,Re,He,pe,Le,lt,Ae,Ne,ve,Ce=0;for(Ne=0;Ne<8;++Ne){fe=Me[Ce],Oe=Me[Ce+1],Re=Me[Ce+2],He=Me[Ce+3],pe=Me[Ce+4],Le=Me[Ce+5],lt=Me[Ce+6];var Ke=fe+(Ae=Me[Ce+7]),Ve=fe-Ae,ot=Oe+lt,pt=Oe-lt,Bt=Re+Le,Be=Re-Le,ze=He+pe,st=He-pe,St=Ke+ze,Ot=Ke-ze,Et=ot+Bt,dt=ot-Bt;Me[Ce]=St+Et,Me[Ce+4]=St-Et;var jt=.707106781*(dt+Ot);Me[Ce+2]=Ot+jt,Me[Ce+6]=Ot-jt;var sr=.382683433*((St=st+Be)-(dt=pt+Ve)),qt=.5411961*St+sr,Ur=1.306562965*dt+sr,en=.707106781*(Et=Be+pt),Qt=Ve+en,Pn=Ve-en;Me[Ce+5]=Pn+qt,Me[Ce+3]=Pn-qt,Me[Ce+1]=Qt+Ur,Me[Ce+7]=Qt-Ur,Ce+=8}for(Ce=0,Ne=0;Ne<8;++Ne){fe=Me[Ce],Oe=Me[Ce+8],Re=Me[Ce+16],He=Me[Ce+24],pe=Me[Ce+32],Le=Me[Ce+40],lt=Me[Ce+48];var Mt=fe+(Ae=Me[Ce+56]),yn=fe-Ae,xn=Oe+lt,Or=Oe-lt,Fr=Re+Le,le=Re-Le,Ie=He+pe,_e=He-pe,Se=Mt+Ie,ke=Mt-Ie,De=xn+Fr,Je=xn-Fr;Me[Ce]=Se+De,Me[Ce+32]=Se-De;var ct=.707106781*(Je+ke);Me[Ce+16]=ke+ct,Me[Ce+48]=ke-ct;var Ze=.382683433*((Se=_e+le)-(Je=Or+yn)),et=.5411961*Se+Ze,it=1.306562965*Je+Ze,xt=.707106781*(De=le+Or),kt=yn+xt,Ut=yn-xt;Me[Ce+40]=Ut+et,Me[Ce+24]=Ut-et,Me[Ce+8]=kt+it,Me[Ce+56]=kt-it,Ce++}for(Ne=0;Ne<64;++Ne)ve=Me[Ne]*$e[Ne],f[Ne]=ve>0?ve+.5|0:ve-.5|0;return f}(T,O),ce=0;ce<64;++ce)p[N[ce]]=re[ce];var Y=p[0]-V;V=p[0],Y==0?ae(Q[0]):(ae(Q[h[ie=32767+Y]]),ae(d[ie]));for(var ge=63;ge>0&&p[ge]==0;)ge--;if(ge==0)return ae(ee),V;for(var q,W=1;W<=ge;){for(var xe=W;p[W]==0&&W<=ge;)++W;var ye=W-xe;if(ye>=16){q=ye>>4;for(var Ue=1;Ue<=q;++Ue)ae(Z);ye&=15}ie=32767+p[W],ae(X[(ye<<4)+h[ie]]),ae(d[ie]),W++}return ge!=63&&ae(ee),V}function de(T){T=Math.min(Math.max(T,1),100),a!=T&&(function(O){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var X=s((V[Q]*O+50)/100);X=Math.min(Math.max(X,1),255),o[N[Q]]=X}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ee=0;ee<64;ee++){var Z=s((ie[ee]*O+50)/100);Z=Math.min(Math.max(Z,1),255),l[N[ee]]=Z}for(var re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ce=0,Y=0;Y<8;Y++)for(var ge=0;ge<8;ge++)A[ce]=1/(o[N[ce]]*re[Y]*re[ge]*8),u[ce]=1/(l[N[ce]]*re[Y]*re[ge]*8),ce++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),a=T)}this.encode=function(T,O){O&&de(O),g=new Array,v=0,C=7,G(65496),G(65504),G(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),G(1),G(1),te(0),te(0),function(){G(65499),G(132),te(0);for(var Oe=0;Oe<64;Oe++)te(o[Oe]);te(1);for(var Re=0;Re<64;Re++)te(l[Re])}(),function(Oe,Re){G(65472),G(17),te(8),G(Re),G(Oe),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)}(T.width,T.height),function(){G(65476),G(418),te(0);for(var Oe=0;Oe<16;Oe++)te(P[Oe+1]);for(var Re=0;Re<=11;Re++)te(x[Re]);te(16);for(var He=0;He<16;He++)te(k[He+1]);for(var pe=0;pe<=161;pe++)te(y[pe]);te(1);for(var Le=0;Le<16;Le++)te(S[Le+1]);for(var lt=0;lt<=11;lt++)te(_[lt]);te(17);for(var Ae=0;Ae<16;Ae++)te(M[Ae+1]);for(var Ne=0;Ne<=161;Ne++)te(K[Ne])}(),G(65498),G(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var V=0,Q=0,X=0;v=0,C=7,this.encode.displayName="_encode_";for(var ie,ee,Z,re,ce,Y,ge,q,W,xe=T.data,ye=T.width,Ue=T.height,Me=4*ye,$e=0;$e<Ue;){for(ie=0;ie<Me;){for(ce=Me*$e+ie,ge=-1,q=0,W=0;W<64;W++)Y=ce+(q=W>>3)*Me+(ge=4*(7&W)),$e+q>=Ue&&(Y-=Me*($e+1+q-Ue)),ie+ge>=Me&&(Y-=ie+ge-Me+4),ee=xe[Y++],Z=xe[Y++],re=xe[Y++],I[W]=(L[ee]+L[Z+256|0]+L[re+512|0]>>16)-128,F[W]=(L[ee+768|0]+L[Z+1024|0]+L[re+1280|0]>>16)-128,E[W]=(L[ee+1280|0]+L[Z+1536|0]+L[re+1792|0]>>16)-128;V=ue(I,A,V,e,n),Q=ue(F,u,Q,r,i),X=ue(E,u,X,r,i),ie+=32}$e+=8}if(C>=0){var fe=[];fe[1]=C+1,fe[0]=(1<<C+1)-1,ae(fe)}return G(65497),new Uint8Array(g)},t=t||50,function(){for(var T=String.fromCharCode,O=0;O<256;O++)R[O]=T(O)}(),e=z(P,x),r=z(S,_),n=z(k,y),i=z(M,K),function(){for(var T=1,O=2,V=1;V<=15;V++){for(var Q=T;Q<O;Q++)h[32767+Q]=V,d[32767+Q]=[],d[32767+Q][1]=V,d[32767+Q][0]=Q;for(var X=-(O-1);X<=-T;X++)h[32767+X]=V,d[32767+X]=[],d[32767+X][1]=V,d[32767+X][0]=O-1+X;T<<=1,O<<=1}}(),function(){for(var T=0;T<256;T++)L[T]=19595*T,L[T+256|0]=38470*T,L[T+512|0]=7471*T+32768,L[T+768|0]=-11059*T,L[T+1024|0]=-21709*T,L[T+1280|0]=32768*T+8421375,L[T+1536|0]=-27439*T,L[T+1792|0]=-5329*T}(),de(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function No(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function eI(t){function e(x){if(!x)throw Error("assert :P")}function r(x,k,y){for(var S=0;4>S;S++)if(x[k+S]!=y.charCodeAt(S))return!0;return!1}function n(x,k,y,S,_){for(var M=0;M<_;M++)x[k+M]=y[S+M]}function i(x,k,y,S){for(var _=0;_<S;_++)x[k+_]=y}function a(x){return new Int32Array(x)}function s(x,k){for(var y=[],S=0;S<x;S++)y.push(new k);return y}function o(x,k){var y=[];return function S(_,M,K){for(var z=K[M],ae=0;ae<z&&(_.push(K.length>M+1?[]:new k),!(K.length<M+1));ae++)S(_[ae],M+1,K)}(y,0,x),y}var l=function(){var x=this;function k(w,B){for(var H=1<<B-1>>>0;w&H;)H>>>=1;return H?(w&H-1)+H:w}function y(w,B,H,J,oe){e(!(J%H));do w[B+(J-=H)]=oe;while(0<J)}function S(w,B,H,J,oe){if(e(2328>=oe),512>=oe)var he=a(512);else if((he=a(oe))==null)return 0;return function(me,we,Ee,Fe,je,nt){var Pe,Ge,Xe=we,ht=1<<Ee,tt=a(16),mt=a(16);for(e(je!=0),e(Fe!=null),e(me!=null),e(0<Ee),Ge=0;Ge<je;++Ge){if(15<Fe[Ge])return 0;++tt[Fe[Ge]]}if(tt[0]==je)return 0;for(mt[1]=0,Pe=1;15>Pe;++Pe){if(tt[Pe]>1<<Pe)return 0;mt[Pe+1]=mt[Pe]+tt[Pe]}for(Ge=0;Ge<je;++Ge)Pe=Fe[Ge],0<Fe[Ge]&&(nt[mt[Pe]++]=Ge);if(mt[15]==1)return(Fe=new _).g=0,Fe.value=nt[0],y(me,Xe,1,ht,Fe),ht;var gt,Nt=-1,yt=ht-1,tr=0,$t=1,br=1,Jt=1<<Ee;for(Ge=0,Pe=1,je=2;Pe<=Ee;++Pe,je<<=1){if($t+=br<<=1,0>(br-=tt[Pe]))return 0;for(;0<tt[Pe];--tt[Pe])(Fe=new _).g=Pe,Fe.value=nt[Ge++],y(me,Xe+tr,je,Jt,Fe),tr=k(tr,Pe)}for(Pe=Ee+1,je=2;15>=Pe;++Pe,je<<=1){if($t+=br<<=1,0>(br-=tt[Pe]))return 0;for(;0<tt[Pe];--tt[Pe]){if(Fe=new _,(tr&yt)!=Nt){for(Xe+=Jt,gt=1<<(Nt=Pe)-Ee;15>Nt&&!(0>=(gt-=tt[Nt]));)++Nt,gt<<=1;ht+=Jt=1<<(gt=Nt-Ee),me[we+(Nt=tr&yt)].g=gt+Ee,me[we+Nt].value=Xe-we-Nt}Fe.g=Pe-Ee,Fe.value=nt[Ge++],y(me,Xe+(tr>>Ee),je,Jt,Fe),tr=k(tr,Pe)}}return $t!=2*mt[15]-1?0:ht}(w,B,H,J,oe,he)}function _(){this.value=this.g=0}function M(){this.value=this.g=0}function K(){this.G=s(5,_),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(qo,M)}function z(w,B,H,J){e(w!=null),e(B!=null),e(2147483648>J),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=B,w.pa=H,w.Jd=B,w.Yc=H+J,w.Zc=4<=J?H+J-4+1:H,ee(w)}function ae(w,B){for(var H=0;0<B--;)H|=re(w,128)<<B;return H}function te(w,B){var H=ae(w,B);return Z(w)?-H:H}function G(w,B,H,J){var oe,he=0;for(e(w!=null),e(B!=null),e(4294967288>J),w.Sb=J,w.Ra=0,w.u=0,w.h=0,4<J&&(J=4),oe=0;oe<J;++oe)he+=B[H+oe]<<8*oe;w.Ra=he,w.bb=J,w.oa=B,w.pa=H}function ue(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Cc-8>>>0,++w.bb,w.u-=8;Q(w)&&(w.h=1,w.u=0)}function de(w,B){if(e(0<=B),!w.h&&B<=jf){var H=V(w)&Bc[B];return w.u+=B,ue(w),H}return w.h=1,w.u=0}function T(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(w){return w.Ra>>>(w.u&Cc-1)>>>0}function Q(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Cc}function X(w,B){w.u=B,w.h=Q(w)}function ie(w){w.u>=li&&(e(w.u>=li),ue(w))}function ee(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function Z(w){return ae(w,1)}function re(w,B){var H=w.Ca;0>w.b&&ee(w);var J=w.b,oe=H*B>>>8,he=(w.I>>>J>oe)+0;for(he?(H-=oe,w.I-=oe+1<<J>>>0):H=oe+1,J=H,oe=0;256<=J;)oe+=8,J>>=8;return J=7^oe+lb[J],w.b-=J,w.Ca=(H<<J)-1,he}function ce(w,B,H){w[B+0]=H>>24&255,w[B+1]=H>>16&255,w[B+2]=H>>8&255,w[B+3]=255&H}function Y(w,B){return w[B+0]|w[B+1]<<8}function ge(w,B){return Y(w,B)|w[B+2]<<16}function q(w,B){return Y(w,B)|Y(w,B+2)<<16}function W(w,B){var H=1<<B;return e(w!=null),e(0<B),w.X=a(H),w.X==null?0:(w.Mb=32-B,w.Xa=B,1)}function xe(w,B){e(w!=null),e(B!=null),e(w.Xa==B.Xa),n(B.X,0,w.X,0,1<<B.Xa)}function ye(){this.X=[],this.Xa=this.Mb=0}function Ue(w,B,H,J){e(H!=null),e(J!=null);var oe=H[0],he=J[0];return oe==0&&(oe=(w*he+B/2)/B),he==0&&(he=(B*oe+w/2)/w),0>=oe||0>=he?0:(H[0]=oe,J[0]=he,1)}function Me(w,B){return w+(1<<B)-1>>>B}function $e(w,B){return((4278255360&w)+(4278255360&B)>>>0&4278255360)+((16711935&w)+(16711935&B)>>>0&16711935)>>>0}function fe(w,B){x[B]=function(H,J,oe,he,me,we,Ee){var Fe;for(Fe=0;Fe<me;++Fe){var je=x[w](we[Ee+Fe-1],oe,he+Fe);we[Ee+Fe]=$e(H[J+Fe],je)}}}function Oe(){this.ud=this.hd=this.jd=0}function Re(w,B){return((4278124286&(w^B))>>>1)+(w&B)>>>0}function He(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function pe(w,B){return He(w+(w-B+.5>>1))}function Le(w,B,H){return Math.abs(B-H)-Math.abs(w-H)}function lt(w,B,H,J,oe,he,me){for(J=he[me-1],H=0;H<oe;++H)he[me+H]=J=$e(w[B+H],J)}function Ae(w,B,H,J,oe){var he;for(he=0;he<H;++he){var me=w[B+he],we=me>>8&255,Ee=16711935&(Ee=(Ee=16711935&me)+((we<<16)+we));J[oe+he]=(4278255360&me)+Ee>>>0}}function Ne(w,B){B.jd=255&w,B.hd=w>>8&255,B.ud=w>>16&255}function ve(w,B,H,J,oe,he){var me;for(me=0;me<J;++me){var we=B[H+me],Ee=we>>>8,Fe=we,je=255&(je=(je=we>>>16)+((w.jd<<24>>24)*(Ee<<24>>24)>>>5));Fe=255&(Fe=(Fe+=(w.hd<<24>>24)*(Ee<<24>>24)>>>5)+((w.ud<<24>>24)*(je<<24>>24)>>>5)),oe[he+me]=(4278255360&we)+(je<<16)+Fe}}function Ce(w,B,H,J,oe){x[B]=function(he,me,we,Ee,Fe,je,nt,Pe,Ge){for(Ee=nt;Ee<Pe;++Ee)for(nt=0;nt<Ge;++nt)Fe[je++]=oe(we[J(he[me++])])},x[w]=function(he,me,we,Ee,Fe,je,nt){var Pe=8>>he.b,Ge=he.Ea,Xe=he.K[0],ht=he.w;if(8>Pe)for(he=(1<<he.b)-1,ht=(1<<Pe)-1;me<we;++me){var tt,mt=0;for(tt=0;tt<Ge;++tt)tt&he||(mt=J(Ee[Fe++])),je[nt++]=oe(Xe[mt&ht]),mt>>=Pe}else x["VP8LMapColor"+H](Ee,Fe,Xe,ht,je,nt,me,we,Ge)}}function Ke(w,B,H,J,oe){for(H=B+H;B<H;){var he=w[B++];J[oe++]=he>>16&255,J[oe++]=he>>8&255,J[oe++]=255&he}}function Ve(w,B,H,J,oe){for(H=B+H;B<H;){var he=w[B++];J[oe++]=he>>16&255,J[oe++]=he>>8&255,J[oe++]=255&he,J[oe++]=he>>24&255}}function ot(w,B,H,J,oe){for(H=B+H;B<H;){var he=(me=w[B++])>>16&240|me>>12&15,me=240&me|me>>28&15;J[oe++]=he,J[oe++]=me}}function pt(w,B,H,J,oe){for(H=B+H;B<H;){var he=(me=w[B++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;J[oe++]=he,J[oe++]=me}}function Bt(w,B,H,J,oe){for(H=B+H;B<H;){var he=w[B++];J[oe++]=255&he,J[oe++]=he>>8&255,J[oe++]=he>>16&255}}function Be(w,B,H,J,oe,he){if(he==0)for(H=B+H;B<H;)ce(J,((he=w[B++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),oe+=32;else n(J,oe,w,B,H)}function ze(w,B){x[B][0]=x[w+"0"],x[B][1]=x[w+"1"],x[B][2]=x[w+"2"],x[B][3]=x[w+"3"],x[B][4]=x[w+"4"],x[B][5]=x[w+"5"],x[B][6]=x[w+"6"],x[B][7]=x[w+"7"],x[B][8]=x[w+"8"],x[B][9]=x[w+"9"],x[B][10]=x[w+"10"],x[B][11]=x[w+"11"],x[B][12]=x[w+"12"],x[B][13]=x[w+"13"],x[B][14]=x[w+"0"],x[B][15]=x[w+"0"]}function st(w){return w==ub||w==db||w==Wp||w==hb}function St(){this.eb=[],this.size=this.A=this.fb=0}function Ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Et(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new St,this.f.kb=new Ot,this.sd=null}function dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function jt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function sr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function qt(w,B){var H=w.T,J=B.ba.f.RGBA,oe=J.eb,he=J.fb+w.ka*J.A,me=Ys[B.ba.S],we=w.y,Ee=w.O,Fe=w.f,je=w.N,nt=w.ea,Pe=w.W,Ge=B.cc,Xe=B.dc,ht=B.Mc,tt=B.Nc,mt=w.ka,gt=w.ka+w.T,Nt=w.U,yt=Nt+1>>1;for(mt==0?me(we,Ee,null,null,Fe,je,nt,Pe,Fe,je,nt,Pe,oe,he,null,null,Nt):(me(B.ec,B.fc,we,Ee,Ge,Xe,ht,tt,Fe,je,nt,Pe,oe,he-J.A,oe,he,Nt),++H);mt+2<gt;mt+=2)Ge=Fe,Xe=je,ht=nt,tt=Pe,je+=w.Rc,Pe+=w.Rc,he+=2*J.A,me(we,(Ee+=2*w.fa)-w.fa,we,Ee,Ge,Xe,ht,tt,Fe,je,nt,Pe,oe,he-J.A,oe,he,Nt);return Ee+=w.fa,w.j+gt<w.o?(n(B.ec,B.fc,we,Ee,Nt),n(B.cc,B.dc,Fe,je,yt),n(B.Mc,B.Nc,nt,Pe,yt),H--):1&gt||me(we,Ee,null,null,Fe,je,nt,Pe,Fe,je,nt,Pe,oe,he+J.A,null,null,Nt),H}function Ur(w,B,H){var J=w.F,oe=[w.J];if(J!=null){var he=w.U,me=B.ba.S,we=me==Gp||me==Wp;B=B.ba.f.RGBA;var Ee=[0],Fe=w.ka;Ee[0]=w.T,w.Kb&&(Fe==0?--Ee[0]:(--Fe,oe[0]-=w.width),w.j+w.ka+w.T==w.o&&(Ee[0]=w.o-w.j-Fe));var je=B.eb;Fe=B.fb+Fe*B.A,w=iC(J,oe[0],w.width,he,Ee,je,Fe+(we?0:3),B.A),e(H==Ee),w&&st(me)&&Wf(je,Fe,we,he,Ee,B.A)}return 0}function en(w){var B=w.ma,H=B.ba.S,J=11>H,oe=H==zp||H==$p||H==Gp||H==Ab||H==12||st(H);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!ts(B.Oa,w,oe?11:12))return 0;if(oe&&st(H)&&at(),w.da)alert("todo:use_scaling");else{if(J){if(B.Ib=sr,w.Kb){if(H=w.U+1>>1,B.memory=a(w.U+2*H),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+w.U,B.Mc=B.cc,B.Nc=B.dc+H,B.Ib=qt,at()}}else alert("todo:EmitYUV");oe&&(B.Jb=Ur,J&&be())}if(J&&!yC){for(w=0;256>w;++w)iM[w]=89858*(w-128)+Xp>>qp,oM[w]=-22014*(w-128)+Xp,sM[w]=-45773*(w-128),aM[w]=113618*(w-128)+Xp>>qp;for(w=Xf;w<pb;++w)B=76283*(w-16)+Xp>>qp,lM[w-Xf]=Fi(B,255),cM[w-Xf]=Fi(B+8>>4,15);yC=1}return 1}function Qt(w){var B=w.ma,H=w.U,J=w.T;return e(!(1&w.ka)),0>=H||0>=J?0:(H=B.Ib(w,B),B.Jb!=null&&B.Jb(w,B,H),B.Dc+=H,1)}function Pn(w){w.ma.memory=null}function Mt(w,B,H,J){return de(w,8)!=47?0:(B[0]=de(w,14)+1,H[0]=de(w,14)+1,J[0]=de(w,1),de(w,3)!=0?0:!w.h)}function yn(w,B){if(4>w)return w+1;var H=w-2>>1;return(2+(1&w)<<H)+de(B,H)+1}function xn(w,B){return 120<B?B-120:1<=(H=((H=j8[B-1])>>4)*w+(8-(15&H)))?H:1;var H}function Or(w,B,H){var J=V(H),oe=w[B+=255&J].g-8;return 0<oe&&(X(H,H.u+8),J=V(H),B+=w[B].value,B+=J&(1<<oe)-1),X(H,H.u+w[B].g),w[B].value}function Fr(w,B,H){return H.g+=w.g,H.value+=w.value<<B>>>0,e(8>=H.g),w.g}function le(w,B,H){var J=w.xc;return e((B=J==0?0:w.vc[w.md*(H>>J)+(B>>J)])<w.Wb),w.Ya[B]}function Ie(w,B,H,J){var oe=w.ab,he=w.c*B,me=w.C;B=me+B;var we=H,Ee=J;for(J=w.Ta,H=w.Ua;0<oe--;){var Fe=w.gc[oe],je=me,nt=B,Pe=we,Ge=Ee,Xe=(Ee=J,we=H,Fe.Ea);switch(e(je<nt),e(nt<=Fe.nc),Fe.hc){case 2:Rd(Pe,Ge,(nt-je)*Xe,Ee,we);break;case 0:var ht=je,tt=nt,mt=Ee,gt=we,Nt=(Jt=Fe).Ea;ht==0&&(Xo(Pe,Ge,null,null,1,mt,gt),lt(Pe,Ge+1,0,0,Nt-1,mt,gt+1),Ge+=Nt,gt+=Nt,++ht);for(var yt=1<<Jt.b,tr=yt-1,$t=Me(Nt,Jt.b),br=Jt.K,Jt=Jt.w+(ht>>Jt.b)*$t;ht<tt;){var Vr=br,Pi=Jt,yr=1;for(Yo(Pe,Ge,mt,gt-Nt,1,mt,gt);yr<Nt;){var Zt=(yr&~tr)+yt;Zt>Nt&&(Zt=Nt),(0,ZA[Vr[Pi++]>>8&15])(Pe,Ge+ +yr,mt,gt+yr-Nt,Zt-yr,mt,gt+yr),yr=Zt}Ge+=Nt,gt+=Nt,++ht&tr||(Jt+=$t)}nt!=Fe.nc&&n(Ee,we-Xe,Ee,we+(nt-je-1)*Xe,Xe);break;case 1:for(Xe=Pe,tt=Ge,Nt=(Pe=Fe.Ea)-(gt=Pe&~(mt=(Ge=1<<Fe.b)-1)),ht=Me(Pe,Fe.b),yt=Fe.K,Fe=Fe.w+(je>>Fe.b)*ht;je<nt;){for(tr=yt,$t=Fe,br=new Oe,Jt=tt+gt,Vr=tt+Pe;tt<Jt;)Ne(tr[$t++],br),Ol(br,Xe,tt,Ge,Ee,we),tt+=Ge,we+=Ge;tt<Vr&&(Ne(tr[$t++],br),Ol(br,Xe,tt,Nt,Ee,we),tt+=Nt,we+=Nt),++je&mt||(Fe+=ht)}break;case 3:if(Pe==Ee&&Ge==we&&0<Fe.b){for(tt=Ee,Pe=Xe=we+(nt-je)*Xe-(gt=(nt-je)*Me(Fe.Ea,Fe.b)),Ge=Ee,mt=we,ht=[],gt=(Nt=gt)-1;0<=gt;--gt)ht[gt]=Ge[mt+gt];for(gt=Nt-1;0<=gt;--gt)tt[Pe+gt]=ht[gt];zf(Fe,je,nt,Ee,Xe,Ee,we)}else zf(Fe,je,nt,Pe,Ge,Ee,we)}we=J,Ee=H}Ee!=H&&n(J,H,we,Ee,he)}function _e(w,B){var H=w.V,J=w.Ba+w.c*w.C,oe=B-w.C;if(e(B<=w.l.o),e(16>=oe),0<oe){var he=w.l,me=w.Ta,we=w.Ua,Ee=he.width;if(Ie(w,oe,H,J),oe=we=[we],e((H=w.C)<(J=B)),e(he.v<he.va),J>he.o&&(J=he.o),H<he.j){var Fe=he.j-H;H=he.j,oe[0]+=Fe*Ee}if(H>=J?H=0:(oe[0]+=4*he.v,he.ka=H-he.j,he.U=he.va-he.v,he.T=J-H,H=1),H){if(we=we[0],11>(H=w.ca).S){var je=H.f.RGBA,nt=(J=H.S,oe=he.U,he=he.T,Fe=je.eb,je.A),Pe=he;for(je=je.fb+w.Ma*je.A;0<Pe--;){var Ge=me,Xe=we,ht=oe,tt=Fe,mt=je;switch(J){case jp:$f(Ge,Xe,ht,tt,mt);break;case zp:ys(Ge,Xe,ht,tt,mt);break;case ub:ys(Ge,Xe,ht,tt,mt),Wf(tt,mt,0,ht,1,0);break;case uC:kn(Ge,Xe,ht,tt,mt);break;case $p:Be(Ge,Xe,ht,tt,mt,1);break;case db:Be(Ge,Xe,ht,tt,mt,1),Wf(tt,mt,0,ht,1,0);break;case Gp:Be(Ge,Xe,ht,tt,mt,0);break;case Wp:Be(Ge,Xe,ht,tt,mt,0),Wf(tt,mt,1,ht,1,0);break;case Ab:Jo(Ge,Xe,ht,tt,mt);break;case hb:Jo(Ge,Xe,ht,tt,mt),nC(tt,mt,ht,1,0);break;case dC:Sn(Ge,Xe,ht,tt,mt);break;default:e(0)}we+=Ee,je+=nt}w.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=H.height)}}w.C=B,e(w.C<=w.i)}function Se(w){var B;if(0<w.ua)return 0;for(B=0;B<w.Wb;++B){var H=w.Ya[B].G,J=w.Ya[B].H;if(0<H[1][J[1]+0].g||0<H[2][J[2]+0].g||0<H[3][J[3]+0].g)return 0}return 1}function ke(w,B,H,J,oe,he){if(w.Z!=0){var me=w.qd,we=w.rd;for(e(Sc[w.Z]!=null);B<H;++B)Sc[w.Z](me,we,J,oe,J,oe,he),me=J,we=oe,oe+=he;w.qd=me,w.rd=we}}function De(w,B){var H=w.l.ma,J=H.Z==0||H.Z==1?w.l.j:w.C;if(J=w.C<J?J:w.C,e(B<=w.l.o),B>J){var oe=w.l.width,he=H.ca,me=H.tb+oe*J,we=w.V,Ee=w.Ba+w.c*J,Fe=w.gc;e(w.ab==1),e(Fe[0].hc==3),Od(Fe[0],J,B,we,Ee,he,me),ke(H,J,B,he,me,oe)}w.C=w.Ma=B}function Je(w,B,H,J,oe,he,me){var we=w.$/J,Ee=w.$%J,Fe=w.m,je=w.s,nt=H+w.$,Pe=nt;oe=H+J*oe;var Ge=H+J*he,Xe=280+je.ua,ht=w.Pb?we:16777216,tt=0<je.ua?je.Wa:null,mt=je.wc,gt=nt<Ge?le(je,Ee,we):null;e(w.C<he),e(Ge<=oe);var Nt=!1;e:for(;;){for(;Nt||nt<Ge;){var yt=0;if(we>=ht){var tr=nt-H;e((ht=w).Pb),ht.wd=ht.m,ht.xd=tr,0<ht.s.ua&&xe(ht.s.Wa,ht.s.vb),ht=we+$8}if(Ee&mt||(gt=le(je,Ee,we)),e(gt!=null),gt.Qb&&(B[nt]=gt.qb,Nt=!0),!Nt)if(ie(Fe),gt.jc){yt=Fe,tr=B;var $t=nt,br=gt.pd[V(yt)&qo-1];e(gt.jc),256>br.g?(X(yt,yt.u+br.g),tr[$t]=br.value,yt=0):(X(yt,yt.u+br.g-256),e(256<=br.value),yt=br.value),yt==0&&(Nt=!0)}else yt=Or(gt.G[0],gt.H[0],Fe);if(Fe.h)break;if(Nt||256>yt){if(!Nt)if(gt.nd)B[nt]=(gt.qb|yt<<8)>>>0;else{if(ie(Fe),Nt=Or(gt.G[1],gt.H[1],Fe),ie(Fe),tr=Or(gt.G[2],gt.H[2],Fe),$t=Or(gt.G[3],gt.H[3],Fe),Fe.h)break;B[nt]=($t<<24|Nt<<16|yt<<8|tr)>>>0}if(Nt=!1,++nt,++Ee>=J&&(Ee=0,++we,me!=null&&we<=he&&!(we%16)&&me(w,we),tt!=null))for(;Pe<nt;)yt=B[Pe++],tt.X[(506832829*yt&4294967295)>>>tt.Mb]=yt}else if(280>yt){if(yt=yn(yt-256,Fe),tr=Or(gt.G[4],gt.H[4],Fe),ie(Fe),tr=xn(J,tr=yn(tr,Fe)),Fe.h)break;if(nt-H<tr||oe-nt<yt)break e;for($t=0;$t<yt;++$t)B[nt+$t]=B[nt+$t-tr];for(nt+=yt,Ee+=yt;Ee>=J;)Ee-=J,++we,me!=null&&we<=he&&!(we%16)&&me(w,we);if(e(nt<=oe),Ee&mt&&(gt=le(je,Ee,we)),tt!=null)for(;Pe<nt;)yt=B[Pe++],tt.X[(506832829*yt&4294967295)>>>tt.Mb]=yt}else{if(!(yt<Xe))break e;for(Nt=yt-280,e(tt!=null);Pe<nt;)yt=B[Pe++],tt.X[(506832829*yt&4294967295)>>>tt.Mb]=yt;yt=nt,e(!(Nt>>>(tr=tt).Xa)),B[yt]=tr.X[Nt],Nt=!0}Nt||e(Fe.h==Q(Fe))}if(w.Pb&&Fe.h&&nt<oe)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&xe(w.s.vb,w.s.Wa);else{if(Fe.h)break e;me!=null&&me(w,we>he?he:we),w.a=0,w.$=nt-H}return 1}return w.a=3,0}function ct(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var B=w.Wa;B!=null&&(B.X=null),w.vb=null,e(w!=null)}function Ze(){var w=new Nn;return w==null?null:(w.a=0,w.xb=mC,ze("Predictor","VP8LPredictors"),ze("Predictor","VP8LPredictors_C"),ze("PredictorAdd","VP8LPredictorsAdd"),ze("PredictorAdd","VP8LPredictorsAdd_C"),Rd=Ae,Ol=ve,$f=Ke,ys=Ve,Jo=ot,Sn=pt,kn=Bt,x.VP8LMapColor32b=Ud,x.VP8LMapColor8b=JA,w)}function et(w,B,H,J,oe){var he=1,me=[w],we=[B],Ee=J.m,Fe=J.s,je=null,nt=0;e:for(;;){if(H)for(;he&&de(Ee,1);){var Pe=me,Ge=we,Xe=J,ht=1,tt=Xe.m,mt=Xe.gc[Xe.ab],gt=de(tt,2);if(Xe.Oc&1<<gt)he=0;else{switch(Xe.Oc|=1<<gt,mt.hc=gt,mt.Ea=Pe[0],mt.nc=Ge[0],mt.K=[null],++Xe.ab,e(4>=Xe.ab),gt){case 0:case 1:mt.b=de(tt,3)+2,ht=et(Me(mt.Ea,mt.b),Me(mt.nc,mt.b),0,Xe,mt.K),mt.K=mt.K[0];break;case 3:var Nt,yt=de(tt,8)+1,tr=16<yt?0:4<yt?1:2<yt?2:3;if(Pe[0]=Me(mt.Ea,tr),mt.b=tr,Nt=ht=et(yt,1,0,Xe,mt.K)){var $t,br=yt,Jt=mt,Vr=1<<(8>>Jt.b),Pi=a(Vr);if(Pi==null)Nt=0;else{var yr=Jt.K[0],Zt=Jt.w;for(Pi[0]=Jt.K[0][0],$t=1;$t<1*br;++$t)Pi[$t]=$e(yr[Zt+$t],Pi[$t-1]);for(;$t<4*Vr;++$t)Pi[$t]=0;Jt.K[0]=null,Jt.K[0]=Pi,Nt=1}}ht=Nt;break;case 2:break;default:e(0)}he=ht}}if(me=me[0],we=we[0],he&&de(Ee,1)&&!(he=1<=(nt=de(Ee,4))&&11>=nt)){J.a=3;break e}var Rt;if(Rt=he)t:{var ui,gr,zr,Dn=J,ea=me,Qa=we,Zn=nt,da=H,Ha=Dn.m,Li=Dn.s,qr=[null],on=1,ei=0,ln=z8[Zn];r:for(;;){if(da&&de(Ha,1)){var ta=de(Ha,3)+2,Bo=Me(ea,ta),di=Me(Qa,ta),ns=Bo*di;if(!et(Bo,di,0,Dn,qr))break r;for(qr=qr[0],Li.xc=ta,ui=0;ui<ns;++ui){var En=qr[ui]>>8&65535;qr[ui]=En,En>=on&&(on=En+1)}}if(Ha.h)break r;for(gr=0;5>gr;++gr){var Di=hC[gr];!gr&&0<Zn&&(Di+=1<<Zn),ei<Di&&(ei=Di)}var _s=s(on*ln,_),Va=on,Es=s(Va,K);if(Es==null)var Bs=null;else e(65536>=Va),Bs=Es;var is=a(ei);if(Bs==null||is==null||_s==null){Dn.a=1;break r}var Cs=_s;for(ui=zr=0;ui<on;++ui){var Tn=Bs[ui],Ns=Tn.G,Co=Tn.H,eu=0,Hl=1,ra=0;for(gr=0;5>gr;++gr){Di=hC[gr],Ns[gr]=Cs,Co[gr]=zr,!gr&&0<Zn&&(Di+=1<<Zn);i:{var Jp,gb=Di,Zp=Dn,Yf=is,dM=Cs,hM=zr,vb=0,kc=Zp.m,fM=de(kc,1);if(i(Yf,0,0,gb),fM){var mM=de(kc,1)+1,pM=de(kc,1),EC=de(kc,pM==0?1:8);Yf[EC]=1,mM==2&&(Yf[EC=de(kc,8)]=1);var eg=1}else{var BC=a(19),CC=de(kc,4)+4;if(19<CC){Zp.a=3;var tg=0;break i}for(Jp=0;Jp<CC;++Jp)BC[K8[Jp]]=de(kc,3);var wb=void 0,Jf=void 0,NC=Zp,gM=BC,rg=gb,SC=Yf,bb=0,Tc=NC.m,kC=8,TC=s(128,_);n:for(;S(TC,0,7,gM,19);){if(de(Tc,1)){var vM=2+2*de(Tc,3);if((wb=2+de(Tc,vM))>rg)break n}else wb=rg;for(Jf=0;Jf<rg&&wb--;){ie(Tc);var IC=TC[0+(127&V(Tc))];X(Tc,Tc.u+IC.g);var Qd=IC.value;if(16>Qd)SC[Jf++]=Qd,Qd!=0&&(kC=Qd);else{var wM=Qd==16,FC=Qd-16,bM=H8[FC],PC=de(Tc,Q8[FC])+bM;if(Jf+PC>rg)break n;for(var yM=wM?kC:0;0<PC--;)SC[Jf++]=yM}}bb=1;break n}bb||(NC.a=3),eg=bb}(eg=eg&&!kc.h)&&(vb=S(dM,hM,8,Yf,gb)),eg&&vb!=0?tg=vb:(Zp.a=3,tg=0)}if(tg==0)break r;if(Hl&&V8[gr]==1&&(Hl=Cs[zr].g==0),eu+=Cs[zr].g,zr+=tg,3>=gr){var Zf,yb=is[0];for(Zf=1;Zf<Di;++Zf)is[Zf]>yb&&(yb=is[Zf]);ra+=yb}}if(Tn.nd=Hl,Tn.Qb=0,Hl&&(Tn.qb=(Ns[3][Co[3]+0].value<<24|Ns[1][Co[1]+0].value<<16|Ns[2][Co[2]+0].value)>>>0,eu==0&&256>Ns[0][Co[0]+0].value&&(Tn.Qb=1,Tn.qb+=Ns[0][Co[0]+0].value<<8)),Tn.jc=!Tn.Qb&&6>ra,Tn.jc){var ng,Vl=Tn;for(ng=0;ng<qo;++ng){var Ic=ng,Fc=Vl.pd[Ic],ig=Vl.G[0][Vl.H[0]+Ic];256<=ig.value?(Fc.g=ig.g+256,Fc.value=ig.value):(Fc.g=0,Fc.value=0,Ic>>=Fr(ig,8,Fc),Ic>>=Fr(Vl.G[1][Vl.H[1]+Ic],16,Fc),Ic>>=Fr(Vl.G[2][Vl.H[2]+Ic],0,Fc),Fr(Vl.G[3][Vl.H[3]+Ic],24,Fc))}}}Li.vc=qr,Li.Wb=on,Li.Ya=Bs,Li.yc=_s,Rt=1;break t}Rt=0}if(!(he=Rt)){J.a=3;break e}if(0<nt){if(Fe.ua=1<<nt,!W(Fe.Wa,nt)){J.a=1,he=0;break e}}else Fe.ua=0;var xb=J,LC=me,xM=we,_b=xb.s,Eb=_b.xc;if(xb.c=LC,xb.i=xM,_b.md=Me(LC,Eb),_b.wc=Eb==0?-1:(1<<Eb)-1,H){J.xb=Z8;break e}if((je=a(me*we))==null){J.a=1,he=0;break e}he=(he=Je(J,je,0,me,we,we,null))&&!Ee.h;break e}return he?(oe!=null?oe[0]=je:(e(je==null),e(H)),J.$=0,H||ct(Fe)):ct(Fe),he}function it(w,B){var H=w.c*w.i,J=H+B+16*B;return e(w.c<=B),w.V=a(J),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+H+B,1)}function xt(w,B){var H=w.C,J=B-H,oe=w.V,he=w.Ba+w.c*H;for(e(B<=w.l.o);0<J;){var me=16<J?16:J,we=w.l.ma,Ee=w.l.width,Fe=Ee*me,je=we.ca,nt=we.tb+Ee*H,Pe=w.Ta,Ge=w.Ua;Ie(w,me,oe,he),aC(Pe,Ge,je,nt,Fe),ke(we,H,H+me,je,nt,Ee),J-=me,oe+=me*w.c,H+=me}e(H==B),w.C=w.Ma=B}function kt(){this.ub=this.yd=this.td=this.Rb=0}function Ut(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function It(){this.Yb=function(){var w=[];return function B(H,J,oe){for(var he=oe[J],me=0;me<he&&(H.push(oe.length>J+1?[]:0),!(oe.length<J+1));me++)B(H[me],J+1,oe)}(w,0,[3,11]),w}()}function or(){this.jb=a(3),this.Wc=o([4,8],It),this.Xc=o([4,17],It)}function rn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Er(){this.ld=this.La=this.dd=this.tc=0}function Ln(){this.Na=this.la=0}function ps(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fa(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ja(){this.uc=this.M=this.Nb=0,this.wa=Array(new Er),this.Y=0,this.ya=Array(new Fa),this.aa=0,this.l=new Ii}function Pa(){this.y=a(16),this.f=a(8),this.ea=a(8)}function wo(){this.cb=this.a=0,this.sc="",this.m=new T,this.Od=new kt,this.Kc=new Ut,this.ed=new rn,this.Qa=new Ct,this.Ic=this.$c=this.Aa=0,this.D=new Ja,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,T),this.ia=0,this.pb=s(4,ps),this.Pa=new or,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Pa),this.Hd=0,this.rb=Array(new Ln),this.sb=0,this.wa=Array(new Er),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fa),this.L=this.aa=0,this.gd=o([4,2],Er),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ii(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Uf(){var w=new wo;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,qf||(qf=Da)),w}function an(w,B,H){return w.a==0&&(w.a=B,w.sc=H,w.cb=0),0}function La(w,B,H){return 3<=H&&w[B+0]==157&&w[B+1]==1&&w[B+2]==42}function jo(w,B){if(w==null)return 0;if(w.a=0,w.sc="OK",B==null)return an(w,2,"null VP8Io passed to VP8GetHeaders()");var H=B.data,J=B.w,oe=B.ha;if(4>oe)return an(w,7,"Truncated header.");var he=H[J+0]|H[J+1]<<8|H[J+2]<<16,me=w.Od;if(me.Rb=!(1&he),me.td=he>>1&7,me.yd=he>>4&1,me.ub=he>>5,3<me.td)return an(w,3,"Incorrect keyframe parameters.");if(!me.yd)return an(w,4,"Frame not displayable.");J+=3,oe-=3;var we=w.Kc;if(me.Rb){if(7>oe)return an(w,7,"cannot parse picture header");if(!La(H,J,oe))return an(w,3,"Bad code word");we.c=16383&(H[J+4]<<8|H[J+3]),we.Td=H[J+4]>>6,we.i=16383&(H[J+6]<<8|H[J+5]),we.Ud=H[J+6]>>6,J+=7,oe-=7,w.za=we.c+15>>4,w.Ub=we.i+15>>4,B.width=we.c,B.height=we.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,i((he=w.Pa).jb,0,255,he.jb.length),e((he=w.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,i(he.Zb,0,0,he.Zb.length),i(he.Lb,0,0,he.Lb)}if(me.ub>oe)return an(w,7,"bad partition length");z(he=w.m,H,J,me.ub),J+=me.ub,oe-=me.ub,me.Rb&&(we.Ld=Z(he),we.Kd=Z(he)),we=w.Qa;var Ee,Fe=w.Pa;if(e(he!=null),e(we!=null),we.Cb=Z(he),we.Cb){if(we.Bb=Z(he),Z(he)){for(we.Fb=Z(he),Ee=0;4>Ee;++Ee)we.Zb[Ee]=Z(he)?te(he,7):0;for(Ee=0;4>Ee;++Ee)we.Lb[Ee]=Z(he)?te(he,6):0}if(we.Bb)for(Ee=0;3>Ee;++Ee)Fe.jb[Ee]=Z(he)?ae(he,8):255}else we.Bb=0;if(he.Ka)return an(w,3,"cannot parse segment header");if((we=w.ed).zd=Z(he),we.Tb=ae(he,6),we.wb=ae(he,3),we.Pc=Z(he),we.Pc&&Z(he)){for(Fe=0;4>Fe;++Fe)Z(he)&&(we.vd[Fe]=te(he,6));for(Fe=0;4>Fe;++Fe)Z(he)&&(we.od[Fe]=te(he,6))}if(w.L=we.Tb==0?0:we.zd?1:2,he.Ka)return an(w,3,"cannot parse filter header");var je=oe;if(oe=Ee=J,J=Ee+je,we=je,w.Xb=(1<<ae(w.m,2))-1,je<3*(Fe=w.Xb))H=7;else{for(Ee+=3*Fe,we-=3*Fe,je=0;je<Fe;++je){var nt=H[oe+0]|H[oe+1]<<8|H[oe+2]<<16;nt>we&&(nt=we),z(w.Jc[+je],H,Ee,nt),Ee+=nt,we-=nt,oe+=3}z(w.Jc[+Fe],H,Ee,we),H=Ee<J?0:5}if(H!=0)return an(w,H,"cannot parse partitions");for(H=ae(Ee=w.m,7),oe=Z(Ee)?te(Ee,4):0,J=Z(Ee)?te(Ee,4):0,we=Z(Ee)?te(Ee,4):0,Fe=Z(Ee)?te(Ee,4):0,Ee=Z(Ee)?te(Ee,4):0,je=w.Qa,nt=0;4>nt;++nt){if(je.Cb){var Pe=je.Zb[nt];je.Fb||(Pe+=H)}else{if(0<nt){w.pb[nt]=w.pb[0];continue}Pe=H}var Ge=w.pb[nt];Ge.Sc[0]=fb[Fi(Pe+oe,127)],Ge.Sc[1]=mb[Fi(Pe+0,127)],Ge.Eb[0]=2*fb[Fi(Pe+J,127)],Ge.Eb[1]=101581*mb[Fi(Pe+we,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=fb[Fi(Pe+Fe,117)],Ge.Qc[1]=mb[Fi(Pe+Ee,127)],Ge.lc=Pe+Ee}if(!me.Rb)return an(w,4,"Not a key frame.");for(Z(he),me=w.Pa,H=0;4>H;++H){for(oe=0;8>oe;++oe)for(J=0;3>J;++J)for(we=0;11>we;++we)Fe=re(he,Y8[H][oe][J][we])?ae(he,8):q8[H][oe][J][we],me.Wc[H][oe].Yb[J][we]=Fe;for(oe=0;17>oe;++oe)me.Xc[H][oe]=me.Wc[H][J8[oe]]}return w.kc=Z(he),w.kc&&(w.Bd=ae(he,8)),w.cb=1}function Da(w,B,H,J,oe,he,me){var we=B[oe].Yb[H];for(H=0;16>oe;++oe){if(!re(w,we[H+0]))return oe;for(;!re(w,we[H+1]);)if(we=B[++oe].Yb[0],H=0,oe==16)return 16;var Ee=B[oe+1].Yb;if(re(w,we[H+2])){var Fe=w,je=0;if(re(Fe,(Pe=we)[(nt=H)+3]))if(re(Fe,Pe[nt+6])){for(we=0,nt=2*(je=re(Fe,Pe[nt+8]))+(Pe=re(Fe,Pe[nt+9+je])),je=0,Pe=G8[nt];Pe[we];++we)je+=je+re(Fe,Pe[we]);je+=3+(8<<nt)}else re(Fe,Pe[nt+7])?(je=7+2*re(Fe,165),je+=re(Fe,145)):je=5+re(Fe,159);else je=re(Fe,Pe[nt+4])?3+re(Fe,Pe[nt+5]):2;we=Ee[2]}else je=1,we=Ee[1];Ee=me+W8[oe],0>(Fe=w).b&&ee(Fe);var nt,Pe=Fe.b,Ge=(nt=Fe.Ca>>1)-(Fe.I>>Pe)>>31;--Fe.b,Fe.Ca+=Ge,Fe.Ca|=1,Fe.I-=(nt+1&Ge)<<Pe,he[Ee]=((je^Ge)-Ge)*J[(0<oe)+0]}return 16}function bo(w){var B=w.rb[w.sb-1];B.la=0,B.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Pr(w,B,H,J,oe){oe=w[B+H+32*J]+(oe>>3),w[B+H+32*J]=-256&oe?0>oe?0:255:oe}function $s(w,B,H,J,oe,he){Pr(w,B,0,H,J+oe),Pr(w,B,1,H,J+he),Pr(w,B,2,H,J-he),Pr(w,B,3,H,J-oe)}function _n(w){return(20091*w>>16)+w}function yo(w,B,H,J){var oe,he=0,me=a(16);for(oe=0;4>oe;++oe){var we=w[B+0]+w[B+8],Ee=w[B+0]-w[B+8],Fe=(35468*w[B+4]>>16)-_n(w[B+12]),je=_n(w[B+4])+(35468*w[B+12]>>16);me[he+0]=we+je,me[he+1]=Ee+Fe,me[he+2]=Ee-Fe,me[he+3]=we-je,he+=4,B++}for(oe=he=0;4>oe;++oe)we=(w=me[he+0]+4)+me[he+8],Ee=w-me[he+8],Fe=(35468*me[he+4]>>16)-_n(me[he+12]),Pr(H,J,0,0,we+(je=_n(me[he+4])+(35468*me[he+12]>>16))),Pr(H,J,1,0,Ee+Fe),Pr(H,J,2,0,Ee-Fe),Pr(H,J,3,0,we-je),he++,J+=32}function Of(w,B,H,J){var oe=w[B+0]+4,he=35468*w[B+4]>>16,me=_n(w[B+4]),we=35468*w[B+1]>>16;$s(H,J,0,oe+me,w=_n(w[B+1]),we),$s(H,J,1,oe+he,w,we),$s(H,J,2,oe-he,w,we),$s(H,J,3,oe-me,w,we)}function Cd(w,B,H,J,oe){yo(w,B,H,J),oe&&yo(w,B+16,H,J+4)}function Mf(w,B,H,J){Ai(w,B+0,H,J,1),Ai(w,B+32,H,J+128,1)}function Gs(w,B,H,J){var oe;for(w=w[B+0]+4,oe=0;4>oe;++oe)for(B=0;4>B;++B)Pr(H,J,B,oe,w)}function Nd(w,B,H,J){w[B+0]&&Zo(w,B+0,H,J),w[B+16]&&Zo(w,B+16,H,J+4),w[B+32]&&Zo(w,B+32,H,J+128),w[B+48]&&Zo(w,B+48,H,J+128+4)}function Sd(w,B,H,J){var oe,he=a(16);for(oe=0;4>oe;++oe){var me=w[B+0+oe]+w[B+12+oe],we=w[B+4+oe]+w[B+8+oe],Ee=w[B+4+oe]-w[B+8+oe],Fe=w[B+0+oe]-w[B+12+oe];he[0+oe]=me+we,he[8+oe]=me-we,he[4+oe]=Fe+Ee,he[12+oe]=Fe-Ee}for(oe=0;4>oe;++oe)me=(w=he[0+4*oe]+3)+he[3+4*oe],we=he[1+4*oe]+he[2+4*oe],Ee=he[1+4*oe]-he[2+4*oe],Fe=w-he[3+4*oe],H[J+0]=me+we>>3,H[J+16]=Fe+Ee>>3,H[J+32]=me-we>>3,H[J+48]=Fe-Ee>>3,J+=64}function Za(w,B,H){var J,oe=B-32,he=xs,me=255-w[oe-1];for(J=0;J<H;++J){var we,Ee=he,Fe=me+w[B-1];for(we=0;we<H;++we)w[B+we]=Ee[Fe+w[oe+we]];B+=32}}function gs(w,B){Za(w,B,4)}function kd(w,B){Za(w,B,8)}function Td(w,B){Za(w,B,16)}function Id(w,B){var H;for(H=0;16>H;++H)n(w,B+32*H,w,B-32,16)}function bc(w,B){var H;for(H=16;0<H;--H)i(w,B,w[B-1],16),B+=32}function zo(w,B,H){var J;for(J=0;16>J;++J)i(B,H+32*J,w,16)}function Ra(w,B){var H,J=16;for(H=0;16>H;++H)J+=w[B-1+32*H]+w[B+H-32];zo(J>>5,w,B)}function Qf(w,B){var H,J=8;for(H=0;16>H;++H)J+=w[B-1+32*H];zo(J>>4,w,B)}function Il(w,B){var H,J=8;for(H=0;16>H;++H)J+=w[B+H-32];zo(J>>4,w,B)}function GA(w,B){zo(128,w,B)}function ar(w,B,H){return w+2*B+H+2>>2}function Hf(w,B){var H,J=B-32;for(J=new Uint8Array([ar(w[J-1],w[J+0],w[J+1]),ar(w[J+0],w[J+1],w[J+2]),ar(w[J+1],w[J+2],w[J+3]),ar(w[J+2],w[J+3],w[J+4])]),H=0;4>H;++H)n(w,B+32*H,J,0,J.length)}function WA(w,B){var H=w[B-1],J=w[B-1+32],oe=w[B-1+64],he=w[B-1+96];ce(w,B+0,16843009*ar(w[B-1-32],H,J)),ce(w,B+32,16843009*ar(H,J,oe)),ce(w,B+64,16843009*ar(J,oe,he)),ce(w,B+96,16843009*ar(oe,he,he))}function yc(w,B){var H,J=4;for(H=0;4>H;++H)J+=w[B+H-32]+w[B-1+32*H];for(J>>=3,H=0;4>H;++H)i(w,B+32*H,J,4)}function Fd(w,B){var H=w[B-1+0],J=w[B-1+32],oe=w[B-1+64],he=w[B-1-32],me=w[B+0-32],we=w[B+1-32],Ee=w[B+2-32],Fe=w[B+3-32];w[B+0+96]=ar(J,oe,w[B-1+96]),w[B+1+96]=w[B+0+64]=ar(H,J,oe),w[B+2+96]=w[B+1+64]=w[B+0+32]=ar(he,H,J),w[B+3+96]=w[B+2+64]=w[B+1+32]=w[B+0+0]=ar(me,he,H),w[B+3+64]=w[B+2+32]=w[B+1+0]=ar(we,me,he),w[B+3+32]=w[B+2+0]=ar(Ee,we,me),w[B+3+0]=ar(Fe,Ee,we)}function Ua(w,B){var H=w[B+1-32],J=w[B+2-32],oe=w[B+3-32],he=w[B+4-32],me=w[B+5-32],we=w[B+6-32],Ee=w[B+7-32];w[B+0+0]=ar(w[B+0-32],H,J),w[B+1+0]=w[B+0+32]=ar(H,J,oe),w[B+2+0]=w[B+1+32]=w[B+0+64]=ar(J,oe,he),w[B+3+0]=w[B+2+32]=w[B+1+64]=w[B+0+96]=ar(oe,he,me),w[B+3+32]=w[B+2+64]=w[B+1+96]=ar(he,me,we),w[B+3+64]=w[B+2+96]=ar(me,we,Ee),w[B+3+96]=ar(we,Ee,Ee)}function Oa(w,B){var H=w[B-1+0],J=w[B-1+32],oe=w[B-1+64],he=w[B-1-32],me=w[B+0-32],we=w[B+1-32],Ee=w[B+2-32],Fe=w[B+3-32];w[B+0+0]=w[B+1+64]=he+me+1>>1,w[B+1+0]=w[B+2+64]=me+we+1>>1,w[B+2+0]=w[B+3+64]=we+Ee+1>>1,w[B+3+0]=Ee+Fe+1>>1,w[B+0+96]=ar(oe,J,H),w[B+0+64]=ar(J,H,he),w[B+0+32]=w[B+1+96]=ar(H,he,me),w[B+1+32]=w[B+2+96]=ar(he,me,we),w[B+2+32]=w[B+3+96]=ar(me,we,Ee),w[B+3+32]=ar(we,Ee,Fe)}function Pd(w,B){var H=w[B+0-32],J=w[B+1-32],oe=w[B+2-32],he=w[B+3-32],me=w[B+4-32],we=w[B+5-32],Ee=w[B+6-32],Fe=w[B+7-32];w[B+0+0]=H+J+1>>1,w[B+1+0]=w[B+0+64]=J+oe+1>>1,w[B+2+0]=w[B+1+64]=oe+he+1>>1,w[B+3+0]=w[B+2+64]=he+me+1>>1,w[B+0+32]=ar(H,J,oe),w[B+1+32]=w[B+0+96]=ar(J,oe,he),w[B+2+32]=w[B+1+96]=ar(oe,he,me),w[B+3+32]=w[B+2+96]=ar(he,me,we),w[B+3+64]=ar(me,we,Ee),w[B+3+96]=ar(we,Ee,Fe)}function qA(w,B){var H=w[B-1+0],J=w[B-1+32],oe=w[B-1+64],he=w[B-1+96];w[B+0+0]=H+J+1>>1,w[B+2+0]=w[B+0+32]=J+oe+1>>1,w[B+2+32]=w[B+0+64]=oe+he+1>>1,w[B+1+0]=ar(H,J,oe),w[B+3+0]=w[B+1+32]=ar(J,oe,he),w[B+3+32]=w[B+1+64]=ar(oe,he,he),w[B+3+64]=w[B+2+64]=w[B+0+96]=w[B+1+96]=w[B+2+96]=w[B+3+96]=he}function sn(w,B){var H=w[B-1+0],J=w[B-1+32],oe=w[B-1+64],he=w[B-1+96],me=w[B-1-32],we=w[B+0-32],Ee=w[B+1-32],Fe=w[B+2-32];w[B+0+0]=w[B+2+32]=H+me+1>>1,w[B+0+32]=w[B+2+64]=J+H+1>>1,w[B+0+64]=w[B+2+96]=oe+J+1>>1,w[B+0+96]=he+oe+1>>1,w[B+3+0]=ar(we,Ee,Fe),w[B+2+0]=ar(me,we,Ee),w[B+1+0]=w[B+3+32]=ar(H,me,we),w[B+1+32]=w[B+3+64]=ar(J,H,me),w[B+1+64]=w[B+3+96]=ar(oe,J,H),w[B+1+96]=ar(he,oe,J)}function XA(w,B){var H;for(H=0;8>H;++H)n(w,B+32*H,w,B-32,8)}function Fl(w,B){var H;for(H=0;8>H;++H)i(w,B,w[B-1],8),B+=32}function Pl(w,B,H){var J;for(J=0;8>J;++J)i(B,H+32*J,w,8)}function Ll(w,B){var H,J=8;for(H=0;8>H;++H)J+=w[B+H-32]+w[B-1+32*H];Pl(J>>4,w,B)}function Ld(w,B){var H,J=4;for(H=0;8>H;++H)J+=w[B+H-32];Pl(J>>3,w,B)}function $o(w,B){var H,J=4;for(H=0;8>H;++H)J+=w[B-1+32*H];Pl(J>>3,w,B)}function es(w,B){Pl(128,w,B)}function Go(w,B,H){var J=w[B-H],oe=w[B+0],he=3*(oe-J)+cb[1020+w[B-2*H]-w[B+H]],me=Kp[112+(he+4>>3)];w[B-H]=xs[255+J+Kp[112+(he+3>>3)]],w[B+0]=xs[255+oe-me]}function Dl(w,B,H,J){var oe=w[B+0],he=w[B+H];return Xs[255+w[B-2*H]-w[B-H]]>J||Xs[255+he-oe]>J}function xo(w,B,H,J){return 4*Xs[255+w[B-H]-w[B+0]]+Xs[255+w[B-2*H]-w[B+H]]<=J}function Rl(w,B,H,J,oe){var he=w[B-3*H],me=w[B-2*H],we=w[B-H],Ee=w[B+0],Fe=w[B+H],je=w[B+2*H],nt=w[B+3*H];return 4*Xs[255+we-Ee]+Xs[255+me-Fe]>J?0:Xs[255+w[B-4*H]-he]<=oe&&Xs[255+he-me]<=oe&&Xs[255+me-we]<=oe&&Xs[255+nt-je]<=oe&&Xs[255+je-Fe]<=oe&&Xs[255+Fe-Ee]<=oe}function Ul(w,B,H,J){var oe=2*J+1;for(J=0;16>J;++J)xo(w,B+J,H,oe)&&Go(w,B+J,H)}function Ws(w,B,H,J){var oe=2*J+1;for(J=0;16>J;++J)xo(w,B+J*H,1,oe)&&Go(w,B+J*H,1)}function xc(w,B,H,J){var oe;for(oe=3;0<oe;--oe)Ul(w,B+=4*H,H,J)}function Wo(w,B,H,J){var oe;for(oe=3;0<oe;--oe)Ws(w,B+=4,H,J)}function Ma(w,B,H,J,oe,he,me,we){for(he=2*he+1;0<oe--;){if(Rl(w,B,H,he,me))if(Dl(w,B,H,we))Go(w,B,H);else{var Ee=w,Fe=B,je=H,nt=Ee[Fe-2*je],Pe=Ee[Fe-je],Ge=Ee[Fe+0],Xe=Ee[Fe+je],ht=Ee[Fe+2*je],tt=27*(gt=cb[1020+3*(Ge-Pe)+cb[1020+nt-Xe]])+63>>7,mt=18*gt+63>>7,gt=9*gt+63>>7;Ee[Fe-3*je]=xs[255+Ee[Fe-3*je]+gt],Ee[Fe-2*je]=xs[255+nt+mt],Ee[Fe-je]=xs[255+Pe+tt],Ee[Fe+0]=xs[255+Ge-tt],Ee[Fe+je]=xs[255+Xe-mt],Ee[Fe+2*je]=xs[255+ht-gt]}B+=J}}function vs(w,B,H,J,oe,he,me,we){for(he=2*he+1;0<oe--;){if(Rl(w,B,H,he,me))if(Dl(w,B,H,we))Go(w,B,H);else{var Ee=w,Fe=B,je=H,nt=Ee[Fe-je],Pe=Ee[Fe+0],Ge=Ee[Fe+je],Xe=Kp[112+(4+(ht=3*(Pe-nt))>>3)],ht=Kp[112+(ht+3>>3)],tt=Xe+1>>1;Ee[Fe-2*je]=xs[255+Ee[Fe-2*je]+tt],Ee[Fe-je]=xs[255+nt+ht],Ee[Fe+0]=xs[255+Pe-Xe],Ee[Fe+je]=xs[255+Ge-tt]}B+=J}}function U(w,B,H,J,oe,he){Ma(w,B,H,1,16,J,oe,he)}function se(w,B,H,J,oe,he){Ma(w,B,1,H,16,J,oe,he)}function Te(w,B,H,J,oe,he){var me;for(me=3;0<me;--me)vs(w,B+=4*H,H,1,16,J,oe,he)}function Qe(w,B,H,J,oe,he){var me;for(me=3;0<me;--me)vs(w,B+=4,1,H,16,J,oe,he)}function We(w,B,H,J,oe,he,me,we){Ma(w,B,oe,1,8,he,me,we),Ma(H,J,oe,1,8,he,me,we)}function ft(w,B,H,J,oe,he,me,we){Ma(w,B,1,oe,8,he,me,we),Ma(H,J,1,oe,8,he,me,we)}function wt(w,B,H,J,oe,he,me,we){vs(w,B+4*oe,oe,1,8,he,me,we),vs(H,J+4*oe,oe,1,8,he,me,we)}function zt(w,B,H,J,oe,he,me,we){vs(w,B+4,1,oe,8,he,me,we),vs(H,J+4,1,oe,8,he,me,we)}function Yt(){this.ba=new Et,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new jt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function mr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jr(){this.ua=0,this.Wa=new ye,this.vb=new ye,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new _}function Nn(){this.xb=this.a=0,this.l=new Ii,this.ca=new Et,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jr,this.ab=0,this.gc=s(4,mr),this.Oc=0}function Wn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ii,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Gr(w,B,H,J,oe,he,me){for(w=w==null?0:w[B+0],B=0;B<me;++B)oe[he+B]=w+H[J+B]&255,w=oe[he+B]}function Wr(w,B,H,J,oe,he,me){var we;if(w==null)Gr(null,null,H,J,oe,he,me);else for(we=0;we<me;++we)oe[he+we]=w[B+we]+H[J+we]&255}function qn(w,B,H,J,oe,he,me){if(w==null)Gr(null,null,H,J,oe,he,me);else{var we,Ee=w[B+0],Fe=Ee,je=Ee;for(we=0;we<me;++we)Fe=je+(Ee=w[B+we])-Fe,je=H[J+we]+(-256&Fe?0>Fe?0:255:Fe)&255,Fe=Ee,oe[he+we]=je}}function _i(w,B,H,J){var oe=B.width,he=B.o;if(e(w!=null&&B!=null),0>H||0>=J||H+J>he)return null;if(!w.Cc){if(w.ga==null){var me;if(w.ga=new Wn,(me=w.ga==null)||(me=B.width*B.o,e(w.Gb.length==0),w.Gb=a(me),w.Uc=0,w.Gb==null?me=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,me=1),me=!me),!me){me=w.ga;var we=w.Fa,Ee=w.P,Fe=w.qc,je=w.mb,nt=w.nb,Pe=Ee+1,Ge=Fe-1,Xe=me.l;if(e(we!=null&&je!=null&&B!=null),Sc[0]=null,Sc[1]=Gr,Sc[2]=Wr,Sc[3]=qn,me.ca=je,me.tb=nt,me.c=B.width,me.i=B.height,e(0<me.c&&0<me.i),1>=Fe)B=0;else if(me.$a=3&we[Ee+0],me.Z=we[Ee+0]>>2&3,me.Lc=we[Ee+0]>>4&3,Ee=we[Ee+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||Ee)B=0;else if(Xe.put=Qt,Xe.ac=en,Xe.bc=Pn,Xe.ma=me,Xe.width=B.width,Xe.height=B.height,Xe.Da=B.Da,Xe.v=B.v,Xe.va=B.va,Xe.j=B.j,Xe.o=B.o,me.$a)e:{e(me.$a==1),B=Ze();t:for(;;){if(B==null){B=0;break e}if(e(me!=null),me.mc=B,B.c=me.c,B.i=me.i,B.l=me.l,B.l.ma=me,B.l.width=me.c,B.l.height=me.i,B.a=0,G(B.m,we,Pe,Ge),!et(me.c,me.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&Se(B.s)?(me.ic=1,we=B.c*B.i,B.Ta=null,B.Ua=0,B.V=a(we),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(me.ic=0,B=it(B,me.c)),!B))break t;B=1;break e}me.mc=null,B=0}else B=Ge>=me.c*me.i;me=!B}if(me)return null;w.ga.Lc!=1?w.Ga=0:J=he-H}e(w.ga!=null),e(H+J<=he);e:{if(B=(we=w.ga).c,he=we.l.o,we.$a==0){if(Pe=w.rc,Ge=w.Vc,Xe=w.Fa,Ee=w.P+1+H*B,Fe=w.mb,je=w.nb+H*B,e(Ee<=w.P+w.qc),we.Z!=0)for(e(Sc[we.Z]!=null),me=0;me<J;++me)Sc[we.Z](Pe,Ge,Xe,Ee,Fe,je,B),Pe=Fe,Ge=je,je+=B,Ee+=B;else for(me=0;me<J;++me)n(Fe,je,Xe,Ee,B),Pe=Fe,Ge=je,je+=B,Ee+=B;w.rc=Pe,w.Vc=Ge}else{if(e(we.mc!=null),B=H+J,e((me=we.mc)!=null),e(B<=me.i),me.C>=B)B=1;else if(we.ic||be(),we.ic){we=me.V,Pe=me.Ba,Ge=me.c;var ht=me.i,tt=(Xe=1,Ee=me.$/Ge,Fe=me.$%Ge,je=me.m,nt=me.s,me.$),mt=Ge*ht,gt=Ge*B,Nt=nt.wc,yt=tt<gt?le(nt,Fe,Ee):null;e(tt<=mt),e(B<=ht),e(Se(nt));t:for(;;){for(;!je.h&&tt<gt;){if(Fe&Nt||(yt=le(nt,Fe,Ee)),e(yt!=null),ie(je),256>(ht=Or(yt.G[0],yt.H[0],je)))we[Pe+tt]=ht,++tt,++Fe>=Ge&&(Fe=0,++Ee<=B&&!(Ee%16)&&De(me,Ee));else{if(!(280>ht)){Xe=0;break t}ht=yn(ht-256,je);var tr,$t=Or(yt.G[4],yt.H[4],je);if(ie(je),!(tt>=($t=xn(Ge,$t=yn($t,je)))&&mt-tt>=ht)){Xe=0;break t}for(tr=0;tr<ht;++tr)we[Pe+tt+tr]=we[Pe+tt+tr-$t];for(tt+=ht,Fe+=ht;Fe>=Ge;)Fe-=Ge,++Ee<=B&&!(Ee%16)&&De(me,Ee);tt<gt&&Fe&Nt&&(yt=le(nt,Fe,Ee))}e(je.h==Q(je))}De(me,Ee>B?B:Ee);break t}!Xe||je.h&&tt<mt?(Xe=0,me.a=je.h?5:3):me.$=tt,B=Xe}else B=Je(me,me.V,me.Ba,me.c,me.i,B,xt);if(!B){J=0;break e}}H+J>=he&&(w.Cc=1),J=1}if(!J)return null;if(w.Cc&&((J=w.ga)!=null&&(J.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+H*oe}function ua(w,B,H,J,oe,he){for(;0<oe--;){var me,we=w,Ee=B+(H?1:0),Fe=w,je=B+(H?0:3);for(me=0;me<J;++me){var nt=Fe[je+4*me];nt!=255&&(nt*=32897,we[Ee+4*me+0]=we[Ee+4*me+0]*nt>>23,we[Ee+4*me+1]=we[Ee+4*me+1]*nt>>23,we[Ee+4*me+2]=we[Ee+4*me+2]*nt>>23)}B+=he}}function b(w,B,H,J,oe){for(;0<J--;){var he;for(he=0;he<H;++he){var me=w[B+2*he+0],we=15&(Fe=w[B+2*he+1]),Ee=4369*we,Fe=(240&Fe|Fe>>4)*Ee>>16;w[B+2*he+0]=(240&me|me>>4)*Ee>>16&240|(15&me|me<<4)*Ee>>16>>4&15,w[B+2*he+1]=240&Fe|we}B+=oe}}function j(w,B,H,J,oe,he,me,we){var Ee,Fe,je=255;for(Fe=0;Fe<oe;++Fe){for(Ee=0;Ee<J;++Ee){var nt=w[B+Ee];he[me+4*Ee]=nt,je&=nt}B+=H,me+=we}return je!=255}function ne(w,B,H,J,oe){var he;for(he=0;he<oe;++he)H[J+he]=w[B+he]>>8}function be(){Wf=ua,nC=b,iC=j,aC=ne}function qe(w,B,H){x[w]=function(J,oe,he,me,we,Ee,Fe,je,nt,Pe,Ge,Xe,ht,tt,mt,gt,Nt){var yt,tr=Nt-1>>1,$t=we[Ee+0]|Fe[je+0]<<16,br=nt[Pe+0]|Ge[Xe+0]<<16;e(J!=null);var Jt=3*$t+br+131074>>2;for(B(J[oe+0],255&Jt,Jt>>16,ht,tt),he!=null&&(Jt=3*br+$t+131074>>2,B(he[me+0],255&Jt,Jt>>16,mt,gt)),yt=1;yt<=tr;++yt){var Vr=we[Ee+yt]|Fe[je+yt]<<16,Pi=nt[Pe+yt]|Ge[Xe+yt]<<16,yr=$t+Vr+br+Pi+524296,Zt=yr+2*(Vr+br)>>3;Jt=Zt+$t>>1,$t=(yr=yr+2*($t+Pi)>>3)+Vr>>1,B(J[oe+2*yt-1],255&Jt,Jt>>16,ht,tt+(2*yt-1)*H),B(J[oe+2*yt-0],255&$t,$t>>16,ht,tt+(2*yt-0)*H),he!=null&&(Jt=yr+br>>1,$t=Zt+Pi>>1,B(he[me+2*yt-1],255&Jt,Jt>>16,mt,gt+(2*yt-1)*H),B(he[me+2*yt+0],255&$t,$t>>16,mt,gt+(2*yt+0)*H)),$t=Vr,br=Pi}1&Nt||(Jt=3*$t+br+131074>>2,B(J[oe+Nt-1],255&Jt,Jt>>16,ht,tt+(Nt-1)*H),he!=null&&(Jt=3*br+$t+131074>>2,B(he[me+Nt-1],255&Jt,Jt>>16,mt,gt+(Nt-1)*H)))}}function at(){Ys[jp]=eM,Ys[zp]=pC,Ys[uC]=tM,Ys[$p]=gC,Ys[Gp]=vC,Ys[Ab]=wC,Ys[dC]=rM,Ys[ub]=pC,Ys[db]=gC,Ys[Wp]=vC,Ys[hb]=wC}function Tt(w){return w&~nM?0>w?0:255:w>>bC}function cr(w,B){return Tt((19077*w>>8)+(26149*B>>8)-14234)}function Cr(w,B,H){return Tt((19077*w>>8)-(6419*B>>8)-(13320*H>>8)+8708)}function Lr(w,B){return Tt((19077*w>>8)+(33050*B>>8)-17685)}function gn(w,B,H,J,oe){J[oe+0]=cr(w,H),J[oe+1]=Cr(w,B,H),J[oe+2]=Lr(w,B)}function Zi(w,B,H,J,oe){J[oe+0]=Lr(w,B),J[oe+1]=Cr(w,B,H),J[oe+2]=cr(w,H)}function ws(w,B,H,J,oe){var he=Cr(w,B,H);B=he<<3&224|Lr(w,B)>>3,J[oe+0]=248&cr(w,H)|he>>5,J[oe+1]=B}function Vn(w,B,H,J,oe){var he=240&Lr(w,B)|15;J[oe+0]=240&cr(w,H)|Cr(w,B,H)>>4,J[oe+1]=he}function bs(w,B,H,J,oe){J[oe+0]=255,gn(w,B,H,J,oe+1)}function _o(w,B,H,J,oe){Zi(w,B,H,J,oe),J[oe+3]=255}function _c(w,B,H,J,oe){gn(w,B,H,J,oe),J[oe+3]=255}function Fi(w,B){return 0>w?0:w>B?B:w}function qs(w,B,H){x[w]=function(J,oe,he,me,we,Ee,Fe,je,nt){for(var Pe=je+(-2&nt)*H;je!=Pe;)B(J[oe+0],he[me+0],we[Ee+0],Fe,je),B(J[oe+1],he[me+0],we[Ee+0],Fe,je+H),oe+=2,++me,++Ee,je+=2*H;1&nt&&B(J[oe+0],he[me+0],we[Ee+0],Fe,je)}}function Vf(w,B,H){return H==0?w==0?B==0?6:5:B==0?4:0:H}function Kf(w,B,H,J,oe){switch(w>>>30){case 3:Ai(B,H,J,oe,0);break;case 2:Ml(B,H,J,oe);break;case 1:Zo(B,H,J,oe)}}function Ec(w,B){var H,J,oe=B.M,he=B.Nb,me=w.oc,we=w.pc+40,Ee=w.oc,Fe=w.pc+584,je=w.oc,nt=w.pc+600;for(H=0;16>H;++H)me[we+32*H-1]=129;for(H=0;8>H;++H)Ee[Fe+32*H-1]=129,je[nt+32*H-1]=129;for(0<oe?me[we-1-32]=Ee[Fe-1-32]=je[nt-1-32]=129:(i(me,we-32-1,127,21),i(Ee,Fe-32-1,127,9),i(je,nt-32-1,127,9)),J=0;J<w.za;++J){var Pe=B.ya[B.aa+J];if(0<J){for(H=-1;16>H;++H)n(me,we+32*H-4,me,we+32*H+12,4);for(H=-1;8>H;++H)n(Ee,Fe+32*H-4,Ee,Fe+32*H+4,4),n(je,nt+32*H-4,je,nt+32*H+4,4)}var Ge=w.Gd,Xe=w.Hd+J,ht=Pe.ad,tt=Pe.Hc;if(0<oe&&(n(me,we-32,Ge[Xe].y,0,16),n(Ee,Fe-32,Ge[Xe].f,0,8),n(je,nt-32,Ge[Xe].ea,0,8)),Pe.Za){var mt=me,gt=we-32+16;for(0<oe&&(J>=w.za-1?i(mt,gt,Ge[Xe].y[15],4):n(mt,gt,Ge[Xe+1].y,0,4)),H=0;4>H;H++)mt[gt+128+H]=mt[gt+256+H]=mt[gt+384+H]=mt[gt+0+H];for(H=0;16>H;++H,tt<<=2)mt=me,gt=we+xC[H],Eo[Pe.Ob[H]](mt,gt),Kf(tt,ht,16*+H,mt,gt)}else if(mt=Vf(J,oe,Pe.Ob[0]),Nc[mt](me,we),tt!=0)for(H=0;16>H;++H,tt<<=2)Kf(tt,ht,16*+H,me,we+xC[H]);for(H=Pe.Gc,mt=Vf(J,oe,Pe.Dd),Ql[mt](Ee,Fe),Ql[mt](je,nt),tt=ht,mt=Ee,gt=Fe,255&(Pe=0|H)&&(170&Pe?Md(tt,256,mt,gt):Gf(tt,256,mt,gt)),Pe=je,tt=nt,255&(H>>=8)&&(170&H?Md(ht,320,Pe,tt):Gf(ht,320,Pe,tt)),oe<w.Ub-1&&(n(Ge[Xe].y,0,me,we+480,16),n(Ge[Xe].f,0,Ee,Fe+224,8),n(Ge[Xe].ea,0,je,nt+224,8)),H=8*he*w.B,Ge=w.sa,Xe=w.ta+16*J+16*he*w.R,ht=w.qa,Pe=w.ra+8*J+H,tt=w.Ha,mt=w.Ia+8*J+H,H=0;16>H;++H)n(Ge,Xe+H*w.R,me,we+32*H,16);for(H=0;8>H;++H)n(ht,Pe+H*w.B,Ee,Fe+32*H,8),n(tt,mt+H*w.B,je,nt+32*H,8)}}function Dd(w,B,H,J,oe,he,me,we,Ee){var Fe=[0],je=[0],nt=0,Pe=Ee!=null?Ee.kd:0,Ge=Ee??new nr;if(w==null||12>H)return 7;Ge.data=w,Ge.w=B,Ge.ha=H,B=[B],H=[H],Ge.gb=[Ge.gb];e:{var Xe=B,ht=H,tt=Ge.gb;if(e(w!=null),e(ht!=null),e(tt!=null),tt[0]=0,12<=ht[0]&&!r(w,Xe[0],"RIFF")){if(r(w,Xe[0]+8,"WEBP")){tt=3;break e}var mt=q(w,Xe[0]+4);if(12>mt||4294967286<mt){tt=3;break e}if(Pe&&mt>ht[0]-8){tt=7;break e}tt[0]=mt,Xe[0]+=12,ht[0]-=12}tt=0}if(tt!=0)return tt;for(mt=0<Ge.gb[0],H=H[0];;){e:{var gt=w;ht=B,tt=H;var Nt=Fe,yt=je,tr=Xe=[0];if((Jt=nt=[nt])[0]=0,8>tt[0])tt=7;else{if(!r(gt,ht[0],"VP8X")){if(q(gt,ht[0]+4)!=10){tt=3;break e}if(18>tt[0]){tt=7;break e}var $t=q(gt,ht[0]+8),br=1+ge(gt,ht[0]+12);if(2147483648<=br*(gt=1+ge(gt,ht[0]+15))){tt=3;break e}tr!=null&&(tr[0]=$t),Nt!=null&&(Nt[0]=br),yt!=null&&(yt[0]=gt),ht[0]+=18,tt[0]-=18,Jt[0]=1}tt=0}}if(nt=nt[0],Xe=Xe[0],tt!=0)return tt;if(ht=!!(2&Xe),!mt&&nt)return 3;if(he!=null&&(he[0]=!!(16&Xe)),me!=null&&(me[0]=ht),we!=null&&(we[0]=0),me=Fe[0],Xe=je[0],nt&&ht&&Ee==null){tt=0;break}if(4>H){tt=7;break}if(mt&&nt||!mt&&!nt&&!r(w,B[0],"ALPH")){H=[H],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{$t=w,tt=B,mt=H;var Jt=Ge.gb;Nt=Ge.na,yt=Ge.P,tr=Ge.Sa,br=22,e($t!=null),e(mt!=null),gt=tt[0];var Vr=mt[0];for(e(Nt!=null),e(tr!=null),Nt[0]=null,yt[0]=null,tr[0]=0;;){if(tt[0]=gt,mt[0]=Vr,8>Vr){tt=7;break e}var Pi=q($t,gt+4);if(4294967286<Pi){tt=3;break e}var yr=8+Pi+1&-2;if(br+=yr,0<Jt&&br>Jt){tt=3;break e}if(!r($t,gt,"VP8 ")||!r($t,gt,"VP8L")){tt=0;break e}if(Vr[0]<yr){tt=7;break e}r($t,gt,"ALPH")||(Nt[0]=$t,yt[0]=gt+8,tr[0]=Pi),gt+=yr,Vr-=yr}}if(H=H[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],tt!=0)break}H=[H],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if(Jt=w,tt=B,mt=H,Nt=Ge.gb[0],yt=Ge.Ja,tr=Ge.xa,$t=tt[0],gt=!r(Jt,$t,"VP8 "),br=!r(Jt,$t,"VP8L"),e(Jt!=null),e(mt!=null),e(yt!=null),e(tr!=null),8>mt[0])tt=7;else{if(gt||br){if(Jt=q(Jt,$t+4),12<=Nt&&Jt>Nt-12){tt=3;break e}if(Pe&&Jt>mt[0]-8){tt=7;break e}yt[0]=Jt,tt[0]+=8,mt[0]-=8,tr[0]=br}else tr[0]=5<=mt[0]&&Jt[$t+0]==47&&!(Jt[$t+4]>>5),yt[0]=mt[0];tt=0}if(H=H[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],B=B[0],tt!=0)break;if(4294967286<Ge.Ja)return 3;if(we==null||ht||(we[0]=Ge.xa?2:1),me=[me],Xe=[Xe],Ge.xa){if(5>H){tt=7;break}we=me,Pe=Xe,ht=he,w==null||5>H?w=0:5<=H&&w[B+0]==47&&!(w[B+4]>>5)?(mt=[0],Jt=[0],Nt=[0],G(yt=new O,w,B,H),Mt(yt,mt,Jt,Nt)?(we!=null&&(we[0]=mt[0]),Pe!=null&&(Pe[0]=Jt[0]),ht!=null&&(ht[0]=Nt[0]),w=1):w=0):w=0}else{if(10>H){tt=7;break}we=Xe,w==null||10>H||!La(w,B+3,H-3)?w=0:(Pe=w[B+0]|w[B+1]<<8|w[B+2]<<16,ht=16383&(w[B+7]<<8|w[B+6]),w=16383&(w[B+9]<<8|w[B+8]),1&Pe||3<(Pe>>1&7)||!(Pe>>4&1)||Pe>>5>=Ge.Ja||!ht||!w?w=0:(me&&(me[0]=ht),we&&(we[0]=w),w=1))}if(!w||(me=me[0],Xe=Xe[0],nt&&(Fe[0]!=me||je[0]!=Xe)))return 3;Ee!=null&&(Ee[0]=Ge,Ee.offset=B-Ee.w,e(4294967286>B-Ee.w),e(Ee.offset==Ee.ha-H));break}return tt==0||tt==7&&nt&&Ee==null?(he!=null&&(he[0]|=Ge.na!=null&&0<Ge.na.length),J!=null&&(J[0]=me),oe!=null&&(oe[0]=Xe),0):tt}function ts(w,B,H){var J=B.width,oe=B.height,he=0,me=0,we=J,Ee=oe;if(B.Da=w!=null&&0<w.Da,B.Da&&(we=w.cd,Ee=w.bd,he=w.v,me=w.j,11>H||(he&=-2,me&=-2),0>he||0>me||0>=we||0>=Ee||he+we>J||me+Ee>oe))return 0;if(B.v=he,B.j=me,B.va=he+we,B.o=me+Ee,B.U=we,B.T=Ee,B.da=w!=null&&0<w.da,B.da){if(!Ue(we,Ee,H=[w.ib],he=[w.hb]))return 0;B.ib=H[0],B.hb=he[0]}return B.ob=w!=null&&w.ob,B.Kb=w==null||!w.Sd,B.da&&(B.ob=B.ib<3*J/4&&B.hb<3*oe/4,B.Kb=0),1}function rs(w){if(w==null)return 2;if(11>w.S){var B=w.f.RGBA;B.fb+=(w.height-1)*B.A,B.A=-B.A}else B=w.f.kb,w=w.height,B.O+=(w-1)*B.fa,B.fa=-B.fa,B.N+=(w-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(w-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(w-1)*B.lb,B.lb=-B.lb);return 0}function YA(w,B,H,J){if(J==null||0>=w||0>=B)return 2;if(H!=null){if(H.Da){var oe=H.cd,he=H.bd,me=-2&H.v,we=-2&H.j;if(0>me||0>we||0>=oe||0>=he||me+oe>w||we+he>B)return 2;w=oe,B=he}if(H.da){if(!Ue(w,B,oe=[H.ib],he=[H.hb]))return 2;w=oe[0],B=he[0]}}J.width=w,J.height=B;e:{var Ee=J.width,Fe=J.height;if(w=J.S,0>=Ee||0>=Fe||!(w>=jp&&13>w))w=2;else{if(0>=J.Rd&&J.sd==null){me=he=oe=B=0;var je=(we=Ee*_C[w])*Fe;if(11>w||(he=(Fe+1)/2*(B=(Ee+1)/2),w==12&&(me=(oe=Ee)*Fe)),(Fe=a(je+2*he+me))==null){w=1;break e}J.sd=Fe,11>w?((Ee=J.f.RGBA).eb=Fe,Ee.fb=0,Ee.A=we,Ee.size=je):((Ee=J.f.kb).y=Fe,Ee.O=0,Ee.fa=we,Ee.Fd=je,Ee.f=Fe,Ee.N=0+je,Ee.Ab=B,Ee.Cd=he,Ee.ea=Fe,Ee.W=0+je+he,Ee.Db=B,Ee.Ed=he,w==12&&(Ee.F=Fe,Ee.J=0+je+2*he),Ee.Tc=me,Ee.lb=oe)}if(B=1,oe=J.S,he=J.width,me=J.height,oe>=jp&&13>oe)if(11>oe)w=J.f.RGBA,B&=(we=Math.abs(w.A))*(me-1)+he<=w.size,B&=we>=he*_C[oe],B&=w.eb!=null;else{w=J.f.kb,we=(he+1)/2,je=(me+1)/2,Ee=Math.abs(w.fa),Fe=Math.abs(w.Ab);var nt=Math.abs(w.Db),Pe=Math.abs(w.lb),Ge=Pe*(me-1)+he;B&=Ee*(me-1)+he<=w.Fd,B&=Fe*(je-1)+we<=w.Cd,B=(B&=nt*(je-1)+we<=w.Ed)&Ee>=he&Fe>=we&nt>=we,B&=w.y!=null,B&=w.f!=null,B&=w.ea!=null,oe==12&&(B&=Pe>=he,B&=Ge<=w.Tc,B&=w.F!=null)}else B=0;w=B?0:2}}return w!=0||H!=null&&H.fd&&(w=rs(J)),w}var qo=64,Bc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jf=24,Cc=32,li=8,lb=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];fe("Predictor0","PredictorAdd0"),x.Predictor0=function(){return 4278190080},x.Predictor1=function(w){return w},x.Predictor2=function(w,B,H){return B[H+0]},x.Predictor3=function(w,B,H){return B[H+1]},x.Predictor4=function(w,B,H){return B[H-1]},x.Predictor5=function(w,B,H){return Re(Re(w,B[H+1]),B[H+0])},x.Predictor6=function(w,B,H){return Re(w,B[H-1])},x.Predictor7=function(w,B,H){return Re(w,B[H+0])},x.Predictor8=function(w,B,H){return Re(B[H-1],B[H+0])},x.Predictor9=function(w,B,H){return Re(B[H+0],B[H+1])},x.Predictor10=function(w,B,H){return Re(Re(w,B[H-1]),Re(B[H+0],B[H+1]))},x.Predictor11=function(w,B,H){var J=B[H+0];return 0>=Le(J>>24&255,w>>24&255,(B=B[H-1])>>24&255)+Le(J>>16&255,w>>16&255,B>>16&255)+Le(J>>8&255,w>>8&255,B>>8&255)+Le(255&J,255&w,255&B)?J:w},x.Predictor12=function(w,B,H){var J=B[H+0];return(He((w>>24&255)+(J>>24&255)-((B=B[H-1])>>24&255))<<24|He((w>>16&255)+(J>>16&255)-(B>>16&255))<<16|He((w>>8&255)+(J>>8&255)-(B>>8&255))<<8|He((255&w)+(255&J)-(255&B)))>>>0},x.Predictor13=function(w,B,H){var J=B[H-1];return(pe((w=Re(w,B[H+0]))>>24&255,J>>24&255)<<24|pe(w>>16&255,J>>16&255)<<16|pe(w>>8&255,J>>8&255)<<8|pe(255&w,255&J))>>>0};var Xo=x.PredictorAdd0;x.PredictorAdd1=lt,fe("Predictor2","PredictorAdd2"),fe("Predictor3","PredictorAdd3"),fe("Predictor4","PredictorAdd4"),fe("Predictor5","PredictorAdd5"),fe("Predictor6","PredictorAdd6"),fe("Predictor7","PredictorAdd7"),fe("Predictor8","PredictorAdd8"),fe("Predictor9","PredictorAdd9"),fe("Predictor10","PredictorAdd10"),fe("Predictor11","PredictorAdd11"),fe("Predictor12","PredictorAdd12"),fe("Predictor13","PredictorAdd13");var Yo=x.PredictorAdd2;Ce("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),Ce("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Rd,zf=x.ColorIndexInverseTransform,Ud=x.MapARGB,Od=x.VP8LColorIndexInverseTransformAlpha,JA=x.MapAlpha,ZA=x.VP8LPredictorsAdd=[];ZA.length=16,(x.VP8LPredictors=[]).length=16,(x.VP8LPredictorsAdd_C=[]).length=16,(x.VP8LPredictors_C=[]).length=16;var Ol,$f,ys,Jo,Sn,kn,ci,Ai,Ml,Md,Zo,Gf,zB,$B,GB,WB,qB,XB,YB,JB,ZB,eC,tC,rC,Wf,nC,iC,aC,sC=a(511),oC=a(2041),lC=a(225),cC=a(767),AC=0,cb=oC,Kp=lC,xs=cC,Xs=sC,jp=0,zp=1,uC=2,$p=3,Gp=4,Ab=5,dC=6,ub=7,db=8,Wp=9,hb=10,Q8=[2,3,7],H8=[3,3,11],hC=[280,256,256,256,40],V8=[0,1,1,1,0],K8=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],j8=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],z8=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$8=8,fb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],mb=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],qf=null,G8=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],W8=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],fC=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],q8=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],X8=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Y8=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],J8=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Nc=[],Eo=[],Ql=[],Z8=1,mC=2,Sc=[],Ys=[];qe("UpsampleRgbLinePair",gn,3),qe("UpsampleBgrLinePair",Zi,3),qe("UpsampleRgbaLinePair",_c,4),qe("UpsampleBgraLinePair",_o,4),qe("UpsampleArgbLinePair",bs,4),qe("UpsampleRgba4444LinePair",Vn,2),qe("UpsampleRgb565LinePair",ws,2);var eM=x.UpsampleRgbLinePair,tM=x.UpsampleBgrLinePair,pC=x.UpsampleRgbaLinePair,gC=x.UpsampleBgraLinePair,vC=x.UpsampleArgbLinePair,wC=x.UpsampleRgba4444LinePair,rM=x.UpsampleRgb565LinePair,qp=16,Xp=1<<qp-1,Xf=-227,pb=482,bC=6,nM=(256<<bC)-1,yC=0,iM=a(256),aM=a(256),sM=a(256),oM=a(256),lM=a(pb-Xf),cM=a(pb-Xf);qs("YuvToRgbRow",gn,3),qs("YuvToBgrRow",Zi,3),qs("YuvToRgbaRow",_c,4),qs("YuvToBgraRow",_o,4),qs("YuvToArgbRow",bs,4),qs("YuvToRgba4444Row",Vn,2),qs("YuvToRgb565Row",ws,2);var xC=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Yp=[0,2,8],AM=[8,7,6,4,4,2,2,2,1,1,1,1],uM=1;this.WebPDecodeRGBA=function(w,B,H,J,oe){var he=zp,me=new Yt,we=new Et;me.ba=we,we.S=he,we.width=[we.width],we.height=[we.height];var Ee=we.width,Fe=we.height,je=new dt;if(je==null||w==null)var nt=2;else e(je!=null),nt=Dd(w,B,H,je.width,je.height,je.Pd,je.Qd,je.format,null);if(nt!=0?Ee=0:(Ee!=null&&(Ee[0]=je.width[0]),Fe!=null&&(Fe[0]=je.height[0]),Ee=1),Ee){we.width=we.width[0],we.height=we.height[0],J!=null&&(J[0]=we.width),oe!=null&&(oe[0]=we.height);e:{if(J=new Ii,(oe=new nr).data=w,oe.w=B,oe.ha=H,oe.kd=1,B=[0],e(oe!=null),((w=Dd(oe.data,oe.w,oe.ha,null,null,null,B,null,oe))==0||w==7)&&B[0]&&(w=4),(B=w)==0){if(e(me!=null),J.data=oe.data,J.w=oe.w+oe.offset,J.ha=oe.ha-oe.offset,J.put=Qt,J.ac=en,J.bc=Pn,J.ma=me,oe.xa){if((w=Ze())==null){me=1;break e}if(function(Pe,Ge){var Xe=[0],ht=[0],tt=[0];t:for(;;){if(Pe==null)return 0;if(Ge==null)return Pe.a=2,0;if(Pe.l=Ge,Pe.a=0,G(Pe.m,Ge.data,Ge.w,Ge.ha),!Mt(Pe.m,Xe,ht,tt)){Pe.a=3;break t}if(Pe.xb=mC,Ge.width=Xe[0],Ge.height=ht[0],!et(Xe[0],ht[0],1,Pe,null))break t;return 1}return e(Pe.a!=0),0}(w,J)){if(J=(B=YA(J.width,J.height,me.Oa,me.ba))==0){t:{J=w;r:for(;;){if(J==null){J=0;break t}if(e(J.s.yc!=null),e(J.s.Ya!=null),e(0<J.s.Wb),e((H=J.l)!=null),e((oe=H.ma)!=null),J.xb!=0){if(J.ca=oe.ba,J.tb=oe.tb,e(J.ca!=null),!ts(oe.Oa,H,$p)){J.a=2;break r}if(!it(J,H.width)||H.da)break r;if((H.da||st(J.ca.S))&&be(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&be()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!W(J.s.vb,J.s.Wa.Xa)){J.a=1;break r}J.xb=0}if(!Je(J,J.V,J.Ba,J.c,J.i,H.o,_e))break r;oe.Dc=J.Ma,J=1;break t}e(J.a!=0),J=0}J=!J}J&&(B=w.a)}else B=w.a}else{if((w=new Uf)==null){me=1;break e}if(w.Fa=oe.na,w.P=oe.P,w.qc=oe.Sa,jo(w,J)){if((B=YA(J.width,J.height,me.Oa,me.ba))==0){if(w.Aa=0,H=me.Oa,e((oe=w)!=null),H!=null){if(0<(Ee=0>(Ee=H.Md)?0:100<Ee?255:255*Ee/100)){for(Fe=je=0;4>Fe;++Fe)12>(nt=oe.pb[Fe]).lc&&(nt.ia=Ee*AM[0>nt.lc?0:nt.lc]>>3),je|=nt.ia;je&&(alert("todo:VP8InitRandom"),oe.ia=1)}oe.Ga=H.Id,100<oe.Ga?oe.Ga=100:0>oe.Ga&&(oe.Ga=0)}(function(Pe,Ge){if(Pe==null)return 0;if(Ge==null)return an(Pe,2,"NULL VP8Io parameter in VP8Decode().");if(!Pe.cb&&!jo(Pe,Ge))return 0;if(e(Pe.cb),Ge.ac==null||Ge.ac(Ge)){Ge.ob&&(Pe.L=0);var Xe=Yp[Pe.L];if(Pe.L==2?(Pe.yb=0,Pe.zb=0):(Pe.yb=Ge.v-Xe>>4,Pe.zb=Ge.j-Xe>>4,0>Pe.yb&&(Pe.yb=0),0>Pe.zb&&(Pe.zb=0)),Pe.Va=Ge.o+15+Xe>>4,Pe.Hb=Ge.va+15+Xe>>4,Pe.Hb>Pe.za&&(Pe.Hb=Pe.za),Pe.Va>Pe.Ub&&(Pe.Va=Pe.Ub),0<Pe.L){var ht=Pe.ed;for(Xe=0;4>Xe;++Xe){var tt;if(Pe.Qa.Cb){var mt=Pe.Qa.Lb[Xe];Pe.Qa.Fb||(mt+=ht.Tb)}else mt=ht.Tb;for(tt=0;1>=tt;++tt){var gt=Pe.gd[Xe][tt],Nt=mt;if(ht.Pc&&(Nt+=ht.vd[0],tt&&(Nt+=ht.od[0])),0<(Nt=0>Nt?0:63<Nt?63:Nt)){var yt=Nt;0<ht.wb&&(yt=4<ht.wb?yt>>2:yt>>1)>9-ht.wb&&(yt=9-ht.wb),1>yt&&(yt=1),gt.dd=yt,gt.tc=2*Nt+yt,gt.ld=40<=Nt?2:15<=Nt?1:0}else gt.tc=0;gt.La=tt}}}Xe=0}else an(Pe,6,"Frame setup failed"),Xe=Pe.a;if(Xe=Xe==0){if(Xe){Pe.$c=0,0<Pe.Aa||(Pe.Ic=uM);t:{Xe=Pe.Ic,ht=4*(yt=Pe.za);var tr=32*yt,$t=yt+1,br=0<Pe.L?yt*(0<Pe.Aa?2:1):0,Jt=(Pe.Aa==2?2:1)*yt;if((gt=ht+832+(tt=3*(16*Xe+Yp[Pe.L])/2*tr)+(mt=Pe.Fa!=null&&0<Pe.Fa.length?Pe.Kc.c*Pe.Kc.i:0))!=gt)Xe=0;else{if(gt>Pe.Vb){if(Pe.Vb=0,Pe.Ec=a(gt),Pe.Fc=0,Pe.Ec==null){Xe=an(Pe,1,"no memory during frame initialization.");break t}Pe.Vb=gt}gt=Pe.Ec,Nt=Pe.Fc,Pe.Ac=gt,Pe.Bc=Nt,Nt+=ht,Pe.Gd=s(tr,Pa),Pe.Hd=0,Pe.rb=s($t+1,Ln),Pe.sb=1,Pe.wa=br?s(br,Er):null,Pe.Y=0,Pe.D.Nb=0,Pe.D.wa=Pe.wa,Pe.D.Y=Pe.Y,0<Pe.Aa&&(Pe.D.Y+=yt),e(!0),Pe.oc=gt,Pe.pc=Nt,Nt+=832,Pe.ya=s(Jt,Fa),Pe.aa=0,Pe.D.ya=Pe.ya,Pe.D.aa=Pe.aa,Pe.Aa==2&&(Pe.D.aa+=yt),Pe.R=16*yt,Pe.B=8*yt,yt=(tr=Yp[Pe.L])*Pe.R,tr=tr/2*Pe.B,Pe.sa=gt,Pe.ta=Nt+yt,Pe.qa=Pe.sa,Pe.ra=Pe.ta+16*Xe*Pe.R+tr,Pe.Ha=Pe.qa,Pe.Ia=Pe.ra+8*Xe*Pe.B+tr,Pe.$c=0,Nt+=tt,Pe.mb=mt?gt:null,Pe.nb=mt?Nt:null,e(Nt+mt<=Pe.Fc+Pe.Vb),bo(Pe),i(Pe.Ac,Pe.Bc,0,ht),Xe=1}}if(Xe){if(Ge.ka=0,Ge.y=Pe.sa,Ge.O=Pe.ta,Ge.f=Pe.qa,Ge.N=Pe.ra,Ge.ea=Pe.Ha,Ge.Vd=Pe.Ia,Ge.fa=Pe.R,Ge.Rc=Pe.B,Ge.F=null,Ge.J=0,!AC){for(Xe=-255;255>=Xe;++Xe)sC[255+Xe]=0>Xe?-Xe:Xe;for(Xe=-1020;1020>=Xe;++Xe)oC[1020+Xe]=-128>Xe?-128:127<Xe?127:Xe;for(Xe=-112;112>=Xe;++Xe)lC[112+Xe]=-16>Xe?-16:15<Xe?15:Xe;for(Xe=-255;510>=Xe;++Xe)cC[255+Xe]=0>Xe?0:255<Xe?255:Xe;AC=1}ci=Sd,Ai=Cd,Md=Mf,Zo=Gs,Gf=Nd,Ml=Of,zB=U,$B=se,GB=We,WB=ft,qB=Te,XB=Qe,YB=wt,JB=zt,ZB=Ul,eC=Ws,tC=xc,rC=Wo,Eo[0]=yc,Eo[1]=gs,Eo[2]=Hf,Eo[3]=WA,Eo[4]=Fd,Eo[5]=Oa,Eo[6]=Ua,Eo[7]=Pd,Eo[8]=sn,Eo[9]=qA,Nc[0]=Ra,Nc[1]=Td,Nc[2]=Id,Nc[3]=bc,Nc[4]=Qf,Nc[5]=Il,Nc[6]=GA,Ql[0]=Ll,Ql[1]=kd,Ql[2]=XA,Ql[3]=Fl,Ql[4]=$o,Ql[5]=Ld,Ql[6]=es,Xe=1}else Xe=0}Xe&&(Xe=function(Vr,Pi){for(Vr.M=0;Vr.M<Vr.Va;++Vr.M){var yr,Zt=Vr.Jc[Vr.M&Vr.Xb],Rt=Vr.m,ui=Vr;for(yr=0;yr<ui.za;++yr){var gr=Rt,zr=ui,Dn=zr.Ac,ea=zr.Bc+4*yr,Qa=zr.zc,Zn=zr.ya[zr.aa+yr];if(zr.Qa.Bb?Zn.$b=re(gr,zr.Pa.jb[0])?2+re(gr,zr.Pa.jb[2]):re(gr,zr.Pa.jb[1]):Zn.$b=0,zr.kc&&(Zn.Ad=re(gr,zr.Bd)),Zn.Za=!re(gr,145)+0,Zn.Za){var da=Zn.Ob,Ha=0;for(zr=0;4>zr;++zr){var Li,qr=Qa[0+zr];for(Li=0;4>Li;++Li){qr=X8[Dn[ea+Li]][qr];for(var on=fC[re(gr,qr[0])];0<on;)on=fC[2*on+re(gr,qr[on])];qr=-on,Dn[ea+Li]=qr}n(da,Ha,Dn,ea,4),Ha+=4,Qa[0+zr]=qr}}else qr=re(gr,156)?re(gr,128)?1:3:re(gr,163)?2:0,Zn.Ob[0]=qr,i(Dn,ea,qr,4),i(Qa,0,qr,4);Zn.Dd=re(gr,142)?re(gr,114)?re(gr,183)?1:3:2:0}if(ui.m.Ka)return an(Vr,7,"Premature end-of-partition0 encountered.");for(;Vr.ja<Vr.za;++Vr.ja){if(ui=Zt,gr=(Rt=Vr).rb[Rt.sb-1],Dn=Rt.rb[Rt.sb+Rt.ja],yr=Rt.ya[Rt.aa+Rt.ja],ea=Rt.kc?yr.Ad:0)gr.la=Dn.la=0,yr.Za||(gr.Na=Dn.Na=0),yr.Hc=0,yr.Gc=0,yr.ia=0;else{var ei,ln;if(gr=Dn,Dn=ui,ea=Rt.Pa.Xc,Qa=Rt.ya[Rt.aa+Rt.ja],Zn=Rt.pb[Qa.$b],zr=Qa.ad,da=0,Ha=Rt.rb[Rt.sb-1],qr=Li=0,i(zr,da,0,384),Qa.Za)var ta=0,Bo=ea[3];else{on=a(16);var di=gr.Na+Ha.Na;if(di=qf(Dn,ea[1],di,Zn.Eb,0,on,0),gr.Na=Ha.Na=(0<di)+0,1<di)ci(on,0,zr,da);else{var ns=on[0]+3>>3;for(on=0;256>on;on+=16)zr[da+on]=ns}ta=1,Bo=ea[0]}var En=15&gr.la,Di=15&Ha.la;for(on=0;4>on;++on){var _s=1&Di;for(ns=ln=0;4>ns;++ns)En=En>>1|(_s=(di=qf(Dn,Bo,di=_s+(1&En),Zn.Sc,ta,zr,da))>ta)<<7,ln=ln<<2|(3<di?3:1<di?2:zr[da+0]!=0),da+=16;En>>=4,Di=Di>>1|_s<<7,Li=(Li<<8|ln)>>>0}for(Bo=En,ta=Di>>4,ei=0;4>ei;ei+=2){for(ln=0,En=gr.la>>4+ei,Di=Ha.la>>4+ei,on=0;2>on;++on){for(_s=1&Di,ns=0;2>ns;++ns)di=_s+(1&En),En=En>>1|(_s=0<(di=qf(Dn,ea[2],di,Zn.Qc,0,zr,da)))<<3,ln=ln<<2|(3<di?3:1<di?2:zr[da+0]!=0),da+=16;En>>=2,Di=Di>>1|_s<<5}qr|=ln<<4*ei,Bo|=En<<4<<ei,ta|=(240&Di)<<ei}gr.la=Bo,Ha.la=ta,Qa.Hc=Li,Qa.Gc=qr,Qa.ia=43690&qr?0:Zn.ia,ea=!(Li|qr)}if(0<Rt.L&&(Rt.wa[Rt.Y+Rt.ja]=Rt.gd[yr.$b][yr.Za],Rt.wa[Rt.Y+Rt.ja].La|=!ea),ui.Ka)return an(Vr,7,"Premature end-of-file encountered.")}if(bo(Vr),Rt=Pi,ui=1,yr=(Zt=Vr).D,gr=0<Zt.L&&Zt.M>=Zt.zb&&Zt.M<=Zt.Va,Zt.Aa==0)t:{if(yr.M=Zt.M,yr.uc=gr,Ec(Zt,yr),ui=1,yr=(ln=Zt.D).Nb,gr=(qr=Yp[Zt.L])*Zt.R,Dn=qr/2*Zt.B,on=16*yr*Zt.R,ns=8*yr*Zt.B,ea=Zt.sa,Qa=Zt.ta-gr+on,Zn=Zt.qa,zr=Zt.ra-Dn+ns,da=Zt.Ha,Ha=Zt.Ia-Dn+ns,Di=(En=ln.M)==0,Li=En>=Zt.Va-1,Zt.Aa==2&&Ec(Zt,ln),ln.uc)for(_s=(di=Zt).D.M,e(di.D.uc),ln=di.yb;ln<di.Hb;++ln){ta=ln,Bo=_s;var Va=(Es=(ra=di).D).Nb;ei=ra.R;var Es=Es.wa[Es.Y+ta],Bs=ra.sa,is=ra.ta+16*Va*ei+16*ta,Cs=Es.dd,Tn=Es.tc;if(Tn!=0)if(e(3<=Tn),ra.L==1)0<ta&&eC(Bs,is,ei,Tn+4),Es.La&&rC(Bs,is,ei,Tn),0<Bo&&ZB(Bs,is,ei,Tn+4),Es.La&&tC(Bs,is,ei,Tn);else{var Ns=ra.B,Co=ra.qa,eu=ra.ra+8*Va*Ns+8*ta,Hl=ra.Ha,ra=ra.Ia+8*Va*Ns+8*ta;Va=Es.ld,0<ta&&($B(Bs,is,ei,Tn+4,Cs,Va),WB(Co,eu,Hl,ra,Ns,Tn+4,Cs,Va)),Es.La&&(XB(Bs,is,ei,Tn,Cs,Va),JB(Co,eu,Hl,ra,Ns,Tn,Cs,Va)),0<Bo&&(zB(Bs,is,ei,Tn+4,Cs,Va),GB(Co,eu,Hl,ra,Ns,Tn+4,Cs,Va)),Es.La&&(qB(Bs,is,ei,Tn,Cs,Va),YB(Co,eu,Hl,ra,Ns,Tn,Cs,Va))}}if(Zt.ia&&alert("todo:DitherRow"),Rt.put!=null){if(ln=16*En,En=16*(En+1),Di?(Rt.y=Zt.sa,Rt.O=Zt.ta+on,Rt.f=Zt.qa,Rt.N=Zt.ra+ns,Rt.ea=Zt.Ha,Rt.W=Zt.Ia+ns):(ln-=qr,Rt.y=ea,Rt.O=Qa,Rt.f=Zn,Rt.N=zr,Rt.ea=da,Rt.W=Ha),Li||(En-=qr),En>Rt.o&&(En=Rt.o),Rt.F=null,Rt.J=null,Zt.Fa!=null&&0<Zt.Fa.length&&ln<En&&(Rt.J=_i(Zt,Rt,ln,En-ln),Rt.F=Zt.mb,Rt.F==null&&Rt.F.length==0)){ui=an(Zt,3,"Could not decode alpha data.");break t}ln<Rt.j&&(qr=Rt.j-ln,ln=Rt.j,e(!(1&qr)),Rt.O+=Zt.R*qr,Rt.N+=Zt.B*(qr>>1),Rt.W+=Zt.B*(qr>>1),Rt.F!=null&&(Rt.J+=Rt.width*qr)),ln<En&&(Rt.O+=Rt.v,Rt.N+=Rt.v>>1,Rt.W+=Rt.v>>1,Rt.F!=null&&(Rt.J+=Rt.v),Rt.ka=ln-Rt.j,Rt.U=Rt.va-Rt.v,Rt.T=En-ln,ui=Rt.put(Rt))}yr+1!=Zt.Ic||Li||(n(Zt.sa,Zt.ta-gr,ea,Qa+16*Zt.R,gr),n(Zt.qa,Zt.ra-Dn,Zn,zr+8*Zt.B,Dn),n(Zt.Ha,Zt.Ia-Dn,da,Ha+8*Zt.B,Dn))}if(!ui)return an(Vr,6,"Output aborted.")}return 1}(Pe,Ge)),Ge.bc!=null&&Ge.bc(Ge),Xe&=1}return Xe?(Pe.cb=0,Xe):0})(w,J)||(B=w.a)}}else B=w.a}B==0&&me.Oa!=null&&me.Oa.fd&&(B=rs(me.ba))}me=B}he=me!=0?null:11>he?we.f.RGBA.eb:we.f.kb.y}else he=null;return he};var _C=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(x,k){for(var y="",S=0;S<4;S++)y+=String.fromCharCode(x[k++]);return y}function u(x,k){return x[k+0]|x[k+1]<<8}function d(x,k){return(x[k+0]|x[k+1]<<8|x[k+2]<<16)>>>0}function h(x,k){return(x[k+0]|x[k+1]<<8|x[k+2]<<16|x[k+3]<<24)>>>0}new l;var f=[0],p=[0],g=[],v=new l,C=t,I=function(x,k){var y={},S=0,_=!1,M=0,K=0;if(y.frames=[],!function(T,O){for(var V=0;V<4;V++)if(T[O+V]!="RIFF".charCodeAt(V))return!0;return!1}(x,k)){for(h(x,k+=4),k+=8;k<x.length;){var z=A(x,k),ae=h(x,k+=4);k+=4;var te=ae+(1&ae);switch(z){case"VP8 ":case"VP8L":y.frames[S]===void 0&&(y.frames[S]={}),(de=y.frames[S]).src_off=_?K:k-8,de.src_size=M+ae+8,S++,_&&(_=!1,M=0,K=0);break;case"VP8X":(de=y.header={}).feature_flags=x[k];var G=k+4;de.canvas_width=1+d(x,G),G+=3,de.canvas_height=1+d(x,G),G+=3;break;case"ALPH":_=!0,M=te+8,K=k-8;break;case"ANIM":(de=y.header).bgcolor=h(x,k),G=k+4,de.loop_count=u(x,G),G+=2;break;case"ANMF":var ue,de;(de=y.frames[S]={}).offset_x=2*d(x,k),k+=3,de.offset_y=2*d(x,k),k+=3,de.width=1+d(x,k),k+=3,de.height=1+d(x,k),k+=3,de.duration=d(x,k),k+=3,ue=x[k++],de.dispose=1&ue,de.blend=ue>>1&1}z!="ANMF"&&(k+=te)}return y}}(C,0);I.response=C,I.rgbaoutput=!0,I.dataurl=!1;var F=I.header?I.header:null,E=I.frames?I.frames:null;if(F){F.loop_counter=F.loop_count,f=[F.canvas_height],p=[F.canvas_width];for(var R=0;R<E.length&&E[R].blend!=0;R++);}var L=E[0],N=v.WebPDecodeRGBA(C,L.src_off,L.src_size,p,f);L.rgba=N,L.imgwidth=p[0],L.imgheight=f[0];for(var P=0;P<p[0]*f[0]*4;P++)g[P]=N[P];return this.width=p,this.height=f,this.data=g,this}(function(t){var e,r,n,i,a,s,o,l,A,u=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new l,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new s,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new s,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,A=new u}]);var d=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var O=T;Object.defineProperty(this,"pdf",{get:function(){return O}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(q){V=!!q}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(q){Q=!!q}});var X=0;Object.defineProperty(this,"posX",{get:function(){return X},set:function(q){isNaN(q)||(X=q)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(q){isNaN(q)||(ie=q)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(q){var W;typeof q=="number"?W=[q,q,q,q]:((W=new Array(4))[0]=q[0],W[1]=q.length>=2?q[1]:W[0],W[2]=q.length>=3?q[2]:W[0],W[3]=q.length>=4?q[3]:W[1]),A.margin=W}});var ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ee},set:function(q){ee=q}});var Z=0;Object.defineProperty(this,"lastBreak",{get:function(){return Z},set:function(q){Z=q}});var re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return re},set:function(q){re=q}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(q){q instanceof u&&(A=q)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(q){A.path=q}});var ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return ce},set:function(q){ce=q}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(q){var W;W=h(q),this.ctx.fillStyle=W.style,this.ctx.isFillTransparent=W.a===0,this.ctx.fillOpacity=W.a,this.pdf.setFillColor(W.r,W.g,W.b,{a:W.a}),this.pdf.setTextColor(W.r,W.g,W.b,{a:W.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(q){var W=h(q);this.ctx.strokeStyle=W.style,this.ctx.isStrokeTransparent=W.a===0,this.ctx.strokeOpacity=W.a,W.a===0?this.pdf.setDrawColor(255,255,255):(W.a,this.pdf.setDrawColor(W.r,W.g,W.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(q){["butt","round","square"].indexOf(q)!==-1&&(this.ctx.lineCap=q,this.pdf.setLineCap(q))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(q){isNaN(q)||(this.ctx.lineWidth=q,this.pdf.setLineWidth(q))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(q){["bevel","round","miter"].indexOf(q)!==-1&&(this.ctx.lineJoin=q,this.pdf.setLineJoin(q))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(q){isNaN(q)||(this.ctx.miterLimit=q,this.pdf.setMiterLimit(q))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(q){this.ctx.textBaseline=q}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(q){["right","end","center","left","start"].indexOf(q)!==-1&&(this.ctx.textAlign=q)}});var Y=null,ge=null;Object.defineProperty(this,"fontFaces",{get:function(){return ge},set:function(q){Y=null,ge=q}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(q){var W;if(this.ctx.font=q,(W=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(q))!==null){var xe=W[1];W[2];var ye=W[3],Ue=W[4];W[5];var Me=W[6],$e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor($e==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:$e==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var fe=function(ve){var Ce,Ke,Ve=[],ot=ve.trim();if(ot==="")return _y;if(ot in MT)return[MT[ot]];for(;ot!=="";){switch(Ke=null,Ce=(ot=HT(ot)).charAt(0)){case'"':case"'":Ke=Gee(ot.substring(1),Ce);break;default:Ke=Wee(ot)}if(Ke===null||(Ve.push(Ke[0]),(ot=HT(Ke[1]))!==""&&ot.charAt(0)!==","))return _y;ot=ot.replace(/^,/,"")}return Ve}(Me);if(this.fontFaces){var Oe=function(ve,Ce){if(Y===null){var Ke=function(Ve){var ot=[];return Object.keys(Ve).forEach(function(pt){Ve[pt].forEach(function(Bt){var Be=null;switch(Bt){case"bold":Be={family:pt,weight:"bold"};break;case"italic":Be={family:pt,style:"italic"};break;case"bolditalic":Be={family:pt,weight:"bold",style:"italic"};break;case"":case"normal":Be={family:pt}}Be!==null&&(Be.ref={name:pt,style:Bt},ot.push(Be))})}),ot}(ve.getFontList());Y=function(Ve){for(var ot={},pt=0;pt<Ve.length;++pt){var Bt=xy(Ve[pt]),Be=Bt.family,ze=Bt.stretch,st=Bt.style,St=Bt.weight;ot[Be]=ot[Be]||{},ot[Be][ze]=ot[Be][ze]||{},ot[Be][ze][st]=ot[Be][ze][st]||{},ot[Be][ze][st][St]=Bt}return ot}(Ke.concat(Ce))}return Y}(this.pdf,this.fontFaces),Re=fe.map(function(ve){return{family:ve,stretch:"normal",weight:ye,style:xe}}),He=function(ve,Ce,Ke){for(var Ve=(Ke=Ke||{}).defaultFontFamily||"times",ot=Object.assign({},$ee,Ke.genericFontFamilies||{}),pt=null,Bt=null,Be=0;Be<Ce.length;++Be)if(ot[(pt=xy(Ce[Be])).family]&&(pt.family=ot[pt.family]),ve.hasOwnProperty(pt.family)){Bt=ve[pt.family];break}if(!(Bt=Bt||ve[Ve]))throw new Error("Could not find a font-family for the rule '"+QT(pt)+"' and default family '"+Ve+"'.");if(Bt=function(ze,st){if(st[ze])return st[ze];var St=px[ze],Ot=St<=px.normal?-1:1,Et=OT(st,gU,St,Ot);if(!Et)throw new Error("Could not find a matching font-stretch value for "+ze);return Et}(pt.stretch,Bt),Bt=function(ze,st){if(st[ze])return st[ze];for(var St=pU[ze],Ot=0;Ot<St.length;++Ot)if(st[St[Ot]])return st[St[Ot]];throw new Error("Could not find a matching font-style for "+ze)}(pt.style,Bt),!(Bt=function(ze,st){if(st[ze])return st[ze];if(ze===400&&st[500])return st[500];if(ze===500&&st[400])return st[400];var St=zee[ze],Ot=OT(st,vU,St,ze<400?-1:1);if(!Ot)throw new Error("Could not find a matching font-weight for value "+ze);return Ot}(pt.weight,Bt)))throw new Error("Failed to resolve a font for the rule '"+QT(pt)+"'.");return Bt}(Oe,Re);this.pdf.setFont(He.ref.name,He.ref.style)}else{var pe="";(ye==="bold"||parseInt(ye,10)>=700||xe==="bold")&&(pe="bold"),xe==="italic"&&(pe+="italic"),pe.length===0&&(pe="normal");for(var Le="",lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ae=0;Ae<fe.length;Ae++){if(this.pdf.internal.getFont(fe[Ae],pe,{noFallback:!0,disableWarning:!0})!==void 0){Le=fe[Ae];break}if(pe==="bolditalic"&&this.pdf.internal.getFont(fe[Ae],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Le=fe[Ae],pe="bold";else if(this.pdf.internal.getFont(fe[Ae],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Le=fe[Ae],pe="normal";break}}if(Le===""){for(var Ne=0;Ne<fe.length;Ne++)if(lt[fe[Ne]]){Le=lt[fe[Ne]];break}}Le=Le===""?"Times":Le,this.pdf.setFont(Le,pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(q){this.ctx.globalCompositeOperation=q}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(q){this.ctx.globalAlpha=q}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(q){this.ctx.lineDashOffset=q,de.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(q){this.ctx.lineDash=q,de.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(q){this.ctx.ignoreClearRect=!!q}})};d.prototype.setLineDash=function(T){this.lineDash=T},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){E.call(this,"fill",!1)},d.prototype.stroke=function(){E.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(T,O){if(isNaN(T)||isNaN(O))throw Bn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new s(T,O));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new s(T,O)},d.prototype.closePath=function(){var T=new s(0,0),O=0;for(O=this.path.length-1;O!==-1;O--)if(this.path[O].type==="begin"&&dn(this.path[O+1])==="object"&&typeof this.path[O+1].x=="number"){T=new s(this.path[O+1].x,this.path[O+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(T.x,T.y)},d.prototype.lineTo=function(T,O){if(isNaN(T)||isNaN(O))throw Bn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new s(T,O));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new s(V.x,V.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},d.prototype.quadraticCurveTo=function(T,O,V,Q){if(isNaN(V)||isNaN(Q)||isNaN(T)||isNaN(O))throw Bn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var X=this.ctx.transform.applyToPoint(new s(V,Q)),ie=this.ctx.transform.applyToPoint(new s(T,O));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:X.x,y:X.y}),this.ctx.lastPoint=new s(X.x,X.y)},d.prototype.bezierCurveTo=function(T,O,V,Q,X,ie){if(isNaN(X)||isNaN(ie)||isNaN(T)||isNaN(O)||isNaN(V)||isNaN(Q))throw Bn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ee=this.ctx.transform.applyToPoint(new s(X,ie)),Z=this.ctx.transform.applyToPoint(new s(T,O)),re=this.ctx.transform.applyToPoint(new s(V,Q));this.path.push({type:"bct",x1:Z.x,y1:Z.y,x2:re.x,y2:re.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(ee.x,ee.y)},d.prototype.arc=function(T,O,V,Q,X,ie){if(isNaN(T)||isNaN(O)||isNaN(V)||isNaN(Q)||isNaN(X))throw Bn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var ee=this.ctx.transform.applyToPoint(new s(T,O));T=ee.x,O=ee.y;var Z=this.ctx.transform.applyToPoint(new s(0,V)),re=this.ctx.transform.applyToPoint(new s(0,0));V=Math.sqrt(Math.pow(Z.x-re.x,2)+Math.pow(Z.y-re.y,2))}Math.abs(X-Q)>=2*Math.PI&&(Q=0,X=2*Math.PI),this.path.push({type:"arc",x:T,y:O,radius:V,startAngle:Q,endAngle:X,counterclockwise:ie})},d.prototype.arcTo=function(T,O,V,Q,X){throw new Error("arcTo not implemented.")},d.prototype.rect=function(T,O,V,Q){if(isNaN(T)||isNaN(O)||isNaN(V)||isNaN(Q))throw Bn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,O),this.lineTo(T+V,O),this.lineTo(T+V,O+Q),this.lineTo(T,O+Q),this.lineTo(T,O),this.lineTo(T+V,O),this.lineTo(T,O)},d.prototype.fillRect=function(T,O,V,Q){if(isNaN(T)||isNaN(O)||isNaN(V)||isNaN(Q))throw Bn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var X={};this.lineCap!=="butt"&&(X.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(X.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,O,V,Q),this.fill(),X.hasOwnProperty("lineCap")&&(this.lineCap=X.lineCap),X.hasOwnProperty("lineJoin")&&(this.lineJoin=X.lineJoin)}},d.prototype.strokeRect=function(T,O,V,Q){if(isNaN(T)||isNaN(O)||isNaN(V)||isNaN(Q))throw Bn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(T,O,V,Q),this.stroke())},d.prototype.clearRect=function(T,O,V,Q){if(isNaN(T)||isNaN(O)||isNaN(V)||isNaN(Q))throw Bn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,O,V,Q))},d.prototype.save=function(T){T=typeof T!="boolean"||T;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(O),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},d.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var O=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(O),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(T){var O,V,Q,X;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))O=0,V=0,Q=0,X=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(ie!==null)O=parseInt(ie[1]),V=parseInt(ie[2]),Q=parseInt(ie[3]),X=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)O=parseInt(ie[1]),V=parseInt(ie[2]),Q=parseInt(ie[3]),X=parseFloat(ie[4]);else{if(X=1,typeof T=="string"&&T.charAt(0)!=="#"){var ee=new cU(T);T=ee.ok?ee.toHex():"#000000"}T.length===4?(O=T.substring(1,2),O+=O,V=T.substring(2,3),V+=V,Q=T.substring(3,4),Q+=Q):(O=T.substring(1,3),V=T.substring(3,5),Q=T.substring(5,7)),O=parseInt(O,16),V=parseInt(V,16),Q=parseInt(Q,16)}}return{r:O,g:V,b:Q,a:X,style:T}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(T,O,V,Q){if(isNaN(O)||isNaN(V)||typeof T!="string")throw Bn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!f.call(this)){var X=te(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;S.call(this,{text:T,x:O,y:V,scale:ie,angle:X,align:this.textAlign,maxWidth:Q})}},d.prototype.strokeText=function(T,O,V,Q){if(isNaN(O)||isNaN(V)||typeof T!="string")throw Bn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){Q=isNaN(Q)?void 0:Q;var X=te(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;S.call(this,{text:T,x:O,y:V,scale:ie,renderingMode:"stroke",angle:X,align:this.textAlign,maxWidth:Q})}},d.prototype.measureText=function(T){if(typeof T!="string")throw Bn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var O=this.pdf,V=this.pdf.internal.scaleFactor,Q=O.internal.getFontSize(),X=O.getStringUnitWidth(T)*Q/O.internal.scaleFactor;return new function(ie){var ee=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ee}}),this}({width:X*=Math.round(96*V/72*1e4)/1e4})},d.prototype.scale=function(T,O){if(isNaN(T)||isNaN(O))throw Bn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new l(T,0,0,O,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.rotate=function(T){if(isNaN(T))throw Bn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var O=new l(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(O)},d.prototype.translate=function(T,O){if(isNaN(T)||isNaN(O))throw Bn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new l(1,0,0,1,T,O);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.transform=function(T,O,V,Q,X,ie){if(isNaN(T)||isNaN(O)||isNaN(V)||isNaN(Q)||isNaN(X)||isNaN(ie))throw Bn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ee=new l(T,O,V,Q,X,ie);this.ctx.transform=this.ctx.transform.multiply(ee)},d.prototype.setTransform=function(T,O,V,Q,X,ie){T=isNaN(T)?1:T,O=isNaN(O)?0:O,V=isNaN(V)?0:V,Q=isNaN(Q)?1:Q,X=isNaN(X)?0:X,ie=isNaN(ie)?0:ie,this.ctx.transform=new l(T,O,V,Q,X,ie)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(T,O,V,Q,X,ie,ee,Z,re){var ce=this.pdf.getImageProperties(T),Y=1,ge=1,q=1,W=1;Q!==void 0&&Z!==void 0&&(q=Z/Q,W=re/X,Y=ce.width/Q*Z/Q,ge=ce.height/X*re/X),ie===void 0&&(ie=O,ee=V,O=0,V=0),Q!==void 0&&Z===void 0&&(Z=Q,re=X),Q===void 0&&Z===void 0&&(Z=ce.width,re=ce.height);for(var xe,ye=this.ctx.transform.decompose(),Ue=te(ye.rotate.shx),Me=new l,$e=(Me=(Me=(Me=Me.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new o(ie-O*q,ee-V*W,Q*Y,X*ge)),fe=v.call(this,$e),Oe=[],Re=0;Re<fe.length;Re+=1)Oe.indexOf(fe[Re])===-1&&Oe.push(fe[Re]);if(F(Oe),this.autoPaging)for(var He=Oe[0],pe=Oe[Oe.length-1],Le=He;Le<pe+1;Le++){this.pdf.setPage(Le);var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=Le===1?this.posY+this.margin[0]:this.margin[0],Ne=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ce=Le===1?0:Ne+(Le-2)*ve;if(this.ctx.clip_path.length!==0){var Ke=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(xe,this.posX+this.margin[3],-Ce+Ae+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=Ke}var Ve=JSON.parse(JSON.stringify($e));Ve=I([Ve],this.posX+this.margin[3],-Ce+Ae+this.ctx.prevPageLastElemOffset)[0];var ot=(Le>He||Le<pe)&&g.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,ve,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,Ue),ot&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,Ue)};var v=function(T,O,V){var Q=[];O=O||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var X=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":Q.push(Math.floor((T.y+X)/V)+1);break;case"arc":Q.push(Math.floor((T.y+X-T.radius)/V)+1),Q.push(Math.floor((T.y+X+T.radius)/V)+1);break;case"qct":var ie=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);Q.push(Math.floor((ie.y+X)/V)+1),Q.push(Math.floor((ie.y+ie.h+X)/V)+1);break;case"bct":var ee=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);Q.push(Math.floor((ee.y+X)/V)+1),Q.push(Math.floor((ee.y+ee.h+X)/V)+1);break;case"rect":Q.push(Math.floor((T.y+X)/V)+1),Q.push(Math.floor((T.y+T.h+X)/V)+1)}for(var Z=0;Z<Q.length;Z+=1)for(;this.pdf.internal.getNumberOfPages()<Q[Z];)C.call(this);return Q},C=function(){var T=this.fillStyle,O=this.strokeStyle,V=this.font,Q=this.lineCap,X=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=O,this.font=V,this.lineCap=Q,this.lineWidth=X,this.lineJoin=ie},I=function(T,O,V){for(var Q=0;Q<T.length;Q++)switch(T[Q].type){case"bct":T[Q].x2+=O,T[Q].y2+=V;case"qct":T[Q].x1+=O,T[Q].y1+=V;default:T[Q].x+=O,T[Q].y+=V}return T},F=function(T){return T.sort(function(O,V){return O-V})},E=function(T,O){for(var V,Q,X=this.fillStyle,ie=this.strokeStyle,ee=this.lineCap,Z=this.lineWidth,re=Math.abs(Z*this.ctx.transform.scaleX),ce=this.lineJoin,Y=JSON.parse(JSON.stringify(this.path)),ge=JSON.parse(JSON.stringify(this.path)),q=[],W=0;W<ge.length;W++)if(ge[W].x!==void 0)for(var xe=v.call(this,ge[W]),ye=0;ye<xe.length;ye+=1)q.indexOf(xe[ye])===-1&&q.push(xe[ye]);for(var Ue=0;Ue<q.length;Ue++)for(;this.pdf.internal.getNumberOfPages()<q[Ue];)C.call(this);if(F(q),this.autoPaging)for(var Me=q[0],$e=q[q.length-1],fe=Me;fe<$e+1;fe++){this.pdf.setPage(fe),this.fillStyle=X,this.strokeStyle=ie,this.lineCap=ee,this.lineWidth=re,this.lineJoin=ce;var Oe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=fe===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Le=fe===1?0:He+(fe-2)*pe;if(this.ctx.clip_path.length!==0){var lt=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(V,this.posX+this.margin[3],-Le+Re+this.ctx.prevPageLastElemOffset),R.call(this,T,!0),this.path=lt}if(Q=JSON.parse(JSON.stringify(Y)),this.path=I(Q,this.posX+this.margin[3],-Le+Re+this.ctx.prevPageLastElemOffset),O===!1||fe===0){var Ae=(fe>Me||fe<$e)&&g.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Oe,pe,null).clip().discardPath()),R.call(this,T,O),Ae&&this.pdf.restoreGraphicsState()}this.lineWidth=Z}else this.lineWidth=re,R.call(this,T,O),this.lineWidth=Z;this.path=Y},R=function(T,O){if((T!=="stroke"||O||!p.call(this))&&(T==="stroke"||O||!f.call(this))){for(var V,Q,X=[],ie=this.path,ee=0;ee<ie.length;ee++){var Z=ie[ee];switch(Z.type){case"begin":X.push({begin:!0});break;case"close":X.push({close:!0});break;case"mt":X.push({start:Z,deltas:[],abs:[]});break;case"lt":var re=X.length;if(ie[ee-1]&&!isNaN(ie[ee-1].x)&&(V=[Z.x-ie[ee-1].x,Z.y-ie[ee-1].y],re>0)){for(;re>=0;re--)if(X[re-1].close!==!0&&X[re-1].begin!==!0){X[re-1].deltas.push(V),X[re-1].abs.push(Z);break}}break;case"bct":V=[Z.x1-ie[ee-1].x,Z.y1-ie[ee-1].y,Z.x2-ie[ee-1].x,Z.y2-ie[ee-1].y,Z.x-ie[ee-1].x,Z.y-ie[ee-1].y],X[X.length-1].deltas.push(V);break;case"qct":var ce=ie[ee-1].x+2/3*(Z.x1-ie[ee-1].x),Y=ie[ee-1].y+2/3*(Z.y1-ie[ee-1].y),ge=Z.x+2/3*(Z.x1-Z.x),q=Z.y+2/3*(Z.y1-Z.y),W=Z.x,xe=Z.y;V=[ce-ie[ee-1].x,Y-ie[ee-1].y,ge-ie[ee-1].x,q-ie[ee-1].y,W-ie[ee-1].x,xe-ie[ee-1].y],X[X.length-1].deltas.push(V);break;case"arc":X.push({deltas:[],abs:[],arc:!0}),Array.isArray(X[X.length-1].abs)&&X[X.length-1].abs.push(Z)}}Q=O?null:T==="stroke"?"stroke":"fill";for(var ye=!1,Ue=0;Ue<X.length;Ue++)if(X[Ue].arc)for(var Me=X[Ue].abs,$e=0;$e<Me.length;$e++){var fe=Me[$e];fe.type==="arc"?P.call(this,fe.x,fe.y,fe.radius,fe.startAngle,fe.endAngle,fe.counterclockwise,void 0,O,!ye):_.call(this,fe.x,fe.y),ye=!0}else if(X[Ue].close===!0)this.pdf.internal.out("h"),ye=!1;else if(X[Ue].begin!==!0){var Oe=X[Ue].start.x,Re=X[Ue].start.y;M.call(this,X[Ue].deltas,Oe,Re),ye=!0}Q&&x.call(this,Q),O&&k.call(this)}},L=function(T){var O=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=O*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-V;case"top":return T+O-V;case"hanging":return T+O-2*V;case"middle":return T+O/2-V;default:return T}},N=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(O,V){this.colorStops.push([O,V])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(T,O,V,Q,X,ie,ee,Z,re){for(var ce=z.call(this,V,Q,X,ie),Y=0;Y<ce.length;Y++){var ge=ce[Y];Y===0&&(re?y.call(this,ge.x1+T,ge.y1+O):_.call(this,ge.x1+T,ge.y1+O)),K.call(this,T,O,ge.x2,ge.y2,ge.x3,ge.y3,ge.x4,ge.y4)}Z?k.call(this):x.call(this,ee)},x=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},y=function(T,O){this.pdf.internal.out(r(T)+" "+n(O)+" m")},S=function(T){var O;switch(T.align){case"right":case"end":O="right";break;case"center":O="center";break;default:O="left"}var V=this.pdf.getTextDimensions(T.text),Q=L.call(this,T.y),X=N.call(this,Q)-V.h,ie=this.ctx.transform.applyToPoint(new s(T.x,Q)),ee=this.ctx.transform.decompose(),Z=new l;Z=(Z=(Z=Z.multiply(ee.translate)).multiply(ee.skew)).multiply(ee.scale);for(var re,ce,Y,ge=this.ctx.transform.applyToRectangle(new o(T.x,Q,V.w,V.h)),q=Z.applyToRectangle(new o(T.x,X,V.w,V.h)),W=v.call(this,q),xe=[],ye=0;ye<W.length;ye+=1)xe.indexOf(W[ye])===-1&&xe.push(W[ye]);if(F(xe),this.autoPaging)for(var Ue=xe[0],Me=xe[xe.length-1],$e=Ue;$e<Me+1;$e++){this.pdf.setPage($e);var fe=$e===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[2],He=Re-this.margin[0],pe=this.pdf.internal.pageSize.width-this.margin[1],Le=pe-this.margin[3],lt=$e===1?0:Oe+($e-2)*He;if(this.ctx.clip_path.length!==0){var Ae=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(re,this.posX+this.margin[3],-1*lt+fe),R.call(this,"fill",!0),this.path=Ae}var Ne=I([JSON.parse(JSON.stringify(q))],this.posX+this.margin[3],-lt+fe+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*T.scale),Y=this.lineWidth,this.lineWidth=Y*T.scale);var ve=this.autoPaging!=="text";if(ve||Ne.y+Ne.h<=Re){if(ve||Ne.y>=fe&&Ne.x<=pe){var Ce=ve?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||pe-Ne.x)[0],Ke=I([JSON.parse(JSON.stringify(ge))],this.posX+this.margin[3],-lt+fe+this.ctx.prevPageLastElemOffset)[0],Ve=ve&&($e>Ue||$e<Me)&&g.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,He,null).clip().discardPath()),this.pdf.text(Ce,Ke.x,Ke.y,{angle:T.angle,align:O,renderingMode:T.renderingMode}),Ve&&this.pdf.restoreGraphicsState()}}else Ne.y<Re&&(this.ctx.prevPageLastElemOffset+=Re-Ne.y);T.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=Y)}else T.scale>=.01&&(ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ce*T.scale),Y=this.lineWidth,this.lineWidth=Y*T.scale),this.pdf.text(T.text,ie.x+this.posX,ie.y+this.posY,{angle:T.angle,align:O,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(ce),this.lineWidth=Y)},_=function(T,O,V,Q){V=V||0,Q=Q||0,this.pdf.internal.out(r(T+V)+" "+n(O+Q)+" l")},M=function(T,O,V){return this.pdf.lines(T,O,V,null,null)},K=function(T,O,V,Q,X,ie,ee,Z){this.pdf.internal.out([e(i(V+T)),e(a(Q+O)),e(i(X+T)),e(a(ie+O)),e(i(ee+T)),e(a(Z+O)),"c"].join(" "))},z=function(T,O,V,Q){for(var X=2*Math.PI,ie=Math.PI/2;O>V;)O-=X;var ee=Math.abs(V-O);ee<X&&Q&&(ee=X-ee);for(var Z=[],re=Q?-1:1,ce=O;ee>1e-5;){var Y=ce+re*Math.min(ee,ie);Z.push(ae.call(this,T,ce,Y)),ee-=Math.abs(Y-ce),ce=Y}return Z},ae=function(T,O,V){var Q=(V-O)/2,X=T*Math.cos(Q),ie=T*Math.sin(Q),ee=X,Z=-ie,re=ee*ee+Z*Z,ce=re+ee*X+Z*ie,Y=4/3*(Math.sqrt(2*re*ce)-ce)/(ee*ie-Z*X),ge=ee-Y*Z,q=Z+Y*ee,W=ge,xe=-q,ye=Q+O,Ue=Math.cos(ye),Me=Math.sin(ye);return{x1:T*Math.cos(O),y1:T*Math.sin(O),x2:ge*Ue-q*Me,y2:ge*Me+q*Ue,x3:W*Ue-xe*Me,y3:W*Me+xe*Ue,x4:T*Math.cos(V),y4:T*Math.sin(V)}},te=function(T){return 180*T/Math.PI},G=function(T,O,V,Q,X,ie){var ee=T+.5*(V-T),Z=O+.5*(Q-O),re=X+.5*(V-X),ce=ie+.5*(Q-ie),Y=Math.min(T,X,ee,re),ge=Math.max(T,X,ee,re),q=Math.min(O,ie,Z,ce),W=Math.max(O,ie,Z,ce);return new o(Y,q,ge-Y,W-q)},ue=function(T,O,V,Q,X,ie,ee,Z){var re,ce,Y,ge,q,W,xe,ye,Ue,Me,$e,fe,Oe,Re,He=V-T,pe=Q-O,Le=X-V,lt=ie-Q,Ae=ee-X,Ne=Z-ie;for(ce=0;ce<41;ce++)Ue=(xe=(Y=T+(re=ce/40)*He)+re*((q=V+re*Le)-Y))+re*(q+re*(X+re*Ae-q)-xe),Me=(ye=(ge=O+re*pe)+re*((W=Q+re*lt)-ge))+re*(W+re*(ie+re*Ne-W)-ye),ce==0?($e=Ue,fe=Me,Oe=Ue,Re=Me):($e=Math.min($e,Ue),fe=Math.min(fe,Me),Oe=Math.max(Oe,Ue),Re=Math.max(Re,Me));return new o(Math.round($e),Math.round(fe),Math.round(Oe-$e),Math.round(Re-fe))},de=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,O,V=(T=this.ctx.lineDash,O=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:O}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(Xt.API),function(t){var e=function(s){var o,l,A,u,d,h,f,p,g,v;for(l=[],A=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>A;A+=4)(d=(s.charCodeAt(A)<<24)+(s.charCodeAt(A+1)<<16)+(s.charCodeAt(A+2)<<8)+s.charCodeAt(A+3))!==0?(h=(d=((d=((d=((d=(d-(v=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(f=d%85))/85)%85,l.push(h+33,f+33,p+33,g+33,v+33)):l.push(122);return function(C,I){for(var F=I;F>0;F--)C.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,A,u,d,h=String,f="length",p=255,g="charCodeAt",v="slice",C="replace";for(s[v](-2),s=s[v](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),A=[],u=0,d=(s+=o="uuuuu"[v](s[f]%5||5))[f];d>u;u+=5)l=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),A.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(I,F){for(var E=F;E>0;E--)I.pop()}(A,o[f]),h.fromCharCode.apply(h,A)},n=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",A=0;A<s.length;A+=2)l+=String.fromCharCode("0x"+(s[A]+s[A+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=nx(o)).reduce(function(A,u){return A+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var l=0,A=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":A=r(A),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":A=e(A),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":A=i(A),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":A=n(A),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":A=a(A),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:A,reverseChain:u.reverse().join(" ")}}}(Xt.API),function(t){t.loadFile=function(e,r,n){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,A,u){var d=new XMLHttpRequest,h=0,f=function(p){var g=p.length,v=[],C=String.fromCharCode;for(h=0;h<g;h+=1)v.push(C(255&p.charCodeAt(h)));return v.join("")};if(d.open("GET",l,!A),d.overrideMimeType("text/plain; charset=x-user-defined"),A===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),A&&d.status===200)return f(d.responseText)}(i,a,s)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(Xt.API),function(t){function e(){return(fr.html2canvas?Promise.resolve(fr.html2canvas):xh(()=>Promise.resolve().then(()=>Ose),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(fr.DOMPurify?Promise.resolve(fr.DOMPurify):xh(()=>import("./purify.es-31816194.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=dn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var A=document.createElement(o);for(var u in l.className&&(A.className=l.className),l.innerHTML&&l.dompurify&&(A.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)A.style[u]=l.style[u];return A},a=function o(l,A){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)A!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(o(d,A));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},s=function o(l){var A=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),A);return(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(A){switch(n(A)){case"string":return"string";case"element":return A.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(r).then(function(A){return this.set({src:i("div",{innerHTML:o,dompurify:A})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var A=Object.assign({},this.opt.html2canvas);return delete A.onrendered,l(this.prop.container,A)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var A=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,A.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,A.context2d.posX=this.opt.x,A.context2d.posY=this.opt.y,A.context2d.margin=this.opt.margin,A.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var p=u[f],g=p.src.find(function(v){return v.format==="truetype"});g&&A.addFont(g.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,A.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,A){return(A=A||"pdf").toLowerCase()==="img"||A.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(A){if(A in s.template.prop)return function(){this.prop[A]=o[A]};switch(A){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[A]=o[A]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var A=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(A):A})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(A,u){return Math.floor(A*u/72*96)}return this.then(function(){(o=o||Xt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,A,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),A!=null&&(this.progress.n=A),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,A,u){return this.setProgress(o?this.progress.val+o:null,l||null,A?this.progress.n+A:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var A=this;return this.thenCore(o,l,function(u,d){return A.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return A.updateProgress(null,u),h}).then(u,d).then(function(h){return A.updateProgress(1),h})})},s.prototype.thenCore=function(o,l,A){A=A||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),l&&(l=l.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),h=A.call(d,o,l);return s.convert(h,u.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(A){l=l.thenCore(A)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Xt.getPageSize=function(o,l,A){if(dn(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,A=u.format||A}l=l||"mm",A=A||"a4",o=(""+(o||"P")).toLowerCase();var d,h=(""+A).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var p,g=0,v=0;if(f.hasOwnProperty(h))g=f[h][1]/d,v=f[h][0]/d;else try{g=A[1],v=A[0]}catch{throw new Error("Invalid format: "+A)}if(o==="p"||o==="portrait")o="p",v>g&&(p=v,v=g,g=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>v&&(p=v,v=g,g=p)}return{width:v,height:g,unit:l,k:d,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(xy):null;var A=new s(l);return l.worker?A:A.from(o).doCallback()}}(Xt.API),Xt.API.addJS=function(t){return KT=t,this.internal.events.subscribe("postPutResources",function(){Sg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Sg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),VT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+KT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Sg!==void 0&&VT!==void 0&&this.internal.out("/Names <</JavaScript "+Sg+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=n.exec(s);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var A=this.internal.pages.length,u=[];for(a=0;a<A;a++){var d=r.internal.newObject();u.push(d);var h=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<u.length;a++)r.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var s={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var s=n.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var A=0;A<n.children.length;A++)this.renderItems(n.children[A])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}(Xt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,a,s,o){var l,A=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),p=d.length,g={width:0,height:0,numcomponents:1},v=4;v<p;v+=2){if(v+=f,e.indexOf(d.charCodeAt(v+1))!==-1){h=256*d.charCodeAt(v+5)+d.charCodeAt(v+6),g={width:256*d.charCodeAt(v+7)+d.charCodeAt(v+8),height:h,numcomponents:d.charCodeAt(v+9)};break}f=256*d.charCodeAt(v+2)+d.charCodeAt(v+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:A,index:n,alias:i}}return u}}(Xt.API),Xt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,a=Iee(t,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,A=a.palette,u=a.depth;i=A&&l===1?function(N){for(var P=N.width,x=N.height,k=N.data,y=N.palette,S=N.depth,_=!1,M=[],K=[],z=void 0,ae=!1,te=0,G=0;G<y.length;G++){var ue=U5(y[G],4),de=ue[0],T=ue[1],O=ue[2],V=ue[3];M.push(de,T,O),V!=null&&(V===0?(te++,K.length<1&&K.push(G)):V<255&&(ae=!0))}if(ae||te>1){_=!0,K=void 0;var Q=P*x;z=new Uint8Array(Q);for(var X=new DataView(k.buffer),ie=0;ie<Q;ie++){var ee=Ey(X,ie,S),Z=U5(y[ee],4)[3];z[ie]=Z}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:k,alphaBytes:z,needSMask:_,palette:M,mask:K}}(a):l===2||l===4?function(N){for(var P=N.data,x=N.width,k=N.height,y=N.channels,S=N.depth,_=y===2?"DeviceGray":"DeviceRGB",M=y-1,K=x*k,z=M,ae=K*z,te=1*K,G=Math.ceil(ae*S/8),ue=Math.ceil(te*S/8),de=new Uint8Array(G),T=new Uint8Array(ue),O=new DataView(P.buffer),V=new DataView(de.buffer),Q=new DataView(T.buffer),X=!1,ie=0;ie<K;ie++){for(var ee=ie*y,Z=0;Z<z;Z++)JT(V,Ey(O,ee+Z,S),ie*z+Z,S);var re=Ey(O,ee+z,S);re<(1<<S)-1&&(X=!0),JT(Q,re,1*ie,S)}return{colorSpace:_,colorsPerPixel:M,colorBytes:de,alphaBytes:T,needSMask:X}}(a):function(N){var P=N.data,x=N.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:x,colorsPerPixel:x==="DeviceGray"?1:3,colorBytes:P instanceof Uint8Array?P:new Uint8Array(P.buffer),needSMask:!1}}(a);var d,h,f,p=i,g=p.colorSpace,v=p.colorsPerPixel,C=p.colorBytes,I=p.alphaBytes,F=p.needSMask,E=p.palette,R=p.mask,L=null;return n!==Xt.API.image_compression.NONE&&typeof nx=="function"?(L=function(N){var P;switch(N){case Xt.API.image_compression.FAST:P=11;break;case Xt.API.image_compression.MEDIUM:P=13;break;case Xt.API.image_compression.SLOW:P=14;break;default:P=12}return P}(n),d=this.decode.FLATE_DECODE,h="/Predictor ".concat(L," "),t=GT(C,s*v,v,n),F&&(f=GT(I,s,1,n))):(d=void 0,h="",t=C,F&&(f=I)),h+="/Colors ".concat(v," /BitsPerComponent ").concat(u," /Columns ").concat(s),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:d,decodeParameters:h,transparency:R,palette:E,sMask:f,predictor:L,width:s,height:o,bitsPerComponent:u,colorSpace:g}}},function(t){t.processGIF89A=function(e,r,n,i){var a=new Jee(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var A={data:l,width:s,height:o},u=new By(100).encode(A,100);return t.processJPEG.call(this,u,r,n,i)},t.processGIF87A=t.processGIF89A}(Xt.API),No.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},No.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Bn.log("bit decode error:"+r)}},No.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}r!==0&&(this.pos+=4-r)}},No.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*i*4,o=a>>4,l=15&a,A=this.palette[o];if(this.data[s]=A.blue,this.data[s+1]=A.green,this.data[s+2]=A.red,this.data[s+3]=255,2*i+1>=this.width)break;A=this.palette[l],this.data[s+4]=A.blue,this.data[s+4+1]=A.green,this.data[s+4+2]=A.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},No.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},No.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,A=a>>15?255:0,u=n*this.width*4+4*i;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=A}this.pos+=t}},No.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&r)/r*255|0,A=(s>>11)/e*255|0,u=i*this.width*4+4*a;this.data[u]=A,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},No.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},No.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=s}},No.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var a=new No(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},A=new By(100).encode(l,100);return t.processJPEG.call(this,A,r,n,i)}}(Xt.API),eI.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var a=new eI(e),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},A=new By(100).encode(l,100);return t.processJPEG.call(this,A,r,n,i)}}(Xt.API),Xt.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,A=0;A<i;A+=4){var u=n[A],d=n[A+1],h=n[A+2],f=n[A+3];a[o++]=u,a[o++]=d,a[o++]=h,s[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:p,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Xt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xd=Xt.API,kg=Xd.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,A=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=A.fof?A.fof:1,d=e.doKerning!==!1,h=0,f=t.length,p=0,g=o[0]||l,v=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+s*(1e3/a)||0)/1e3):(h=d&&dn(A[n])==="object"&&!isNaN(parseInt(A[n][p],10))?A[n][p]/u:0,v.push((o[n]||g)/l+h)),p=n;return v},jT=Xd.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Xd.processArabic&&(t=Xd.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:kg.apply(this,arguments).reduce(function(a,s){return a+s},0)},zT=function(t,e,r,n){for(var i=[],a=0,s=t.length,o=0;a!==s&&o+e[a]<r;)o+=e[a],a++;i.push(t.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>n&&(i.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},$T=function(t,e,r){r||(r={});var n,i,a,s,o,l,A,u=[],d=[u],h=r.textIndent||0,f=0,p=0,g=t.split(" "),v=kg.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var C=Array(l).join(" "),I=[];g.map(function(E){(E=E.split(/\s*\n/)).length>1?I=I.concat(E.map(function(R,L){return(L&&R.length?`
`:"")+R})):I.push(E[0])}),g=I,l=jT.apply(this,[C,r])}for(a=0,s=g.length;a<s;a++){var F=0;if(n=g[a],l&&n[0]==`
`&&(n=n.substr(1),F=1),h+f+(p=(i=kg.apply(this,[n,r])).reduce(function(E,R){return E+R},0))>e||F){if(p>e){for(o=zT.apply(this,[n,i,e-(h+f),e]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);p=i.slice(n.length-(u[0]?u[0].length:0)).reduce(function(E,R){return E+R},0)}else u=[n];d.push(u),h=p+l,f=v}else u.push(n),h+=f+p,f=v}return A=l?function(E,R){return(R?C:"")+E.join(" ")}:function(E){return E.join(" ")},d.map(A)},Xd.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),h="Unicode";return d.metadata[h]?{widths:d.metadata[h].widths||{0:1},kerning:d.metadata[h].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var o,l,A=[];for(o=0,l=n.length;o<l;o++)A=A.concat($T.apply(this,[n[o],s,a]));return A},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[r[a]]=e[a],i[e[a]]=r[a];var s=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var f,p,g,v,C=["{"];for(var I in h){if(f=h[I],isNaN(parseInt(I,10))?p="'"+I+"'":(I=parseInt(I,10),p=(p=s(I).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof f=="number")f<0?(g=s(f).slice(3),v="-"):(g=s(f).slice(2),v=""),g=v+g.slice(0,-1)+i[g.slice(-1)];else{if(dn(f)!=="object")throw new Error("Don't know what to do with value type "+dn(f)+".");g=o(f)}C.push(p+g)}return C.push("}"),C.join("")},l=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,p,g,v,C={},I=1,F=C,E=[],R="",L="",N=h.length-1,P=1;P<N;P+=1)(v=h[P])=="'"?f?(g=f.join(""),f=void 0):f=[]:f?f.push(v):v=="{"?(E.push([F,g]),F={},g=void 0):v=="}"?((p=E.pop())[0][p[1]]=F,g=void 0,F=p[0]):v=="-"?I=-1:g===void 0?n.hasOwnProperty(v)?(R+=n[v],g=parseInt(R,16)*I,I=1,R=""):R+=v:n.hasOwnProperty(v)?(L+=n[v],F[g]=parseInt(L,16)*I,I=1,g=void 0,L=""):L+=v;return C},A={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:A,"Courier-Bold":A,"Courier-BoldOblique":A,"Courier-Oblique":A,Helvetica:A,"Helvetica-Bold":A,"Helvetica-BoldOblique":A,"Helvetica-Oblique":A,"Times-Roman":A,"Times-Bold":A,"Times-BoldItalic":A,"Times-Italic":A}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,p=d.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[f.postScriptName];g&&(f.metadata.Unicode.encoding=g,f.encoding=g.codePages[0])}])}(Xt.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(S1(o)),s.metadata=t.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,n)}}])}(Xt),Xt.API.addSvgAsImage=function(t,e,r,n,i,a,s,o){if(isNaN(e)||isNaN(r))throw Bn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Bn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var A=l.getContext("2d");A.fillStyle="#fff",A.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(fr.canvg?Promise.resolve(fr.canvg):xh(()=>import("./index.es-1b5d5308.js"),["assets/index.es-1b5d5308.js","assets/vendor-06819936.js"])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(A,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(u)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,r,n,i,s,o)})},Xt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},Xt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],A=0,u=0,d=0;function h(p,g){var v,C=!1;for(v=0;v<p.length;v+=1)p[v]===g&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=o.length;for(d=0;d<f;d+=1)r[o[d]].value=r[o[d]].defaultValue,r[o[d]].explicitSet=!1}if(dn(t)==="object"){for(i in t)if(a=t[i],h(o,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&h(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(A=0;A<a.length;A+=1)if(n=!0,a[A].length===1&&typeof a[A][0]=="number")l.push(String(a[A]-1));else if(a[A].length>1){for(u=0;u<a[A].length;u+=1)typeof a[A][u]!="number"&&(n=!1);n===!0&&l.push([a[A][0]-1,a[A][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,g=[];for(p in r)r[p].explicitSet===!0&&(r[p].type==="name"?g.push("/"+p+" /"+r[p].value):g.push("/"+p+" "+r[p].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),A=a.length+s.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+A+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Xt.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,A=["","0","00","000","0000"],u=[""],d=0,h=a.length;d<h;++d){if(o=s.metadata.characterToGlyph(a.charCodeAt(d)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(d),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(A[4-o.length],o)}return u.join("")},n=function(a){var s,o,l,A,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(o=Object.keys(a).sort(function(f,p){return f-p})).length;d<h;d++)s=o[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(A=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+A+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,A=s.newObject,u=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var g=A();u({data:f,addLength1:!0,objectId:g}),l("endobj");var v=A();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var C=A();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+uh(o.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var I=A();l("<<"),l("/Type /Font"),l("/BaseFont /"+uh(o.fontName)),l("/FontDescriptor "+C+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=A(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+uh(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+I+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,A=s.newObject,u=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var p=A();u({data:h,addLength1:!0,objectId:p}),l("endobj");var g=A();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var v=A();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+uh(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=A();for(var C=0;C<o.metadata.hmtx.widths.length;C++)o.metadata.hmtx.widths[C]=parseInt(o.metadata.hmtx.widths[C]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+uh(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,A=a.y,u=a.options||{},d=a.mutex||{},h=d.pdfEscape,f=d.activeFontKey,p=d.fonts,g=f,v="",C=0,I="",F=p[g].encoding;if(p[g].encoding!=="Identity-H")return{text:o,x:l,y:A,options:u,mutex:d};for(I=o,g=f,Array.isArray(o)&&(I=o[0]),C=0;C<I.length;C+=1)p[g].metadata.hasOwnProperty("cmap")&&(s=p[g].metadata.cmap.unicode.codeMap[I[C].charCodeAt(0)]),s||I[C].charCodeAt(0)<256&&p[g].metadata.hasOwnProperty("Unicode")?v+=I[C]:v+="";var E="";return parseInt(g.slice(1))<14||F==="WinAnsiEncoding"?E=h(v,g).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(E=r(v,p[g])),d.isHex=!0,{text:E,x:l,y:A,options:u,mutex:d}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var A=0;for(A=0;A<s.length;A+=1)Array.isArray(s[A])&&s[A].length===3?o.push([i(Object.assign({},l,{text:s[A][0]})).text,s[A][1],s[A][2]]):o.push(i(Object.assign({},l,{text:s[A]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}(Xt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Xt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,a,s,o,l,A,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,F=0;this.__bidiEngine__={};var E=function(y){var S=y.charCodeAt(),_=S>>8,M=g[_];return M!==void 0?d[256*M+(255&S)]:_===252||_===253?"AL":C.test(_)?"L":_===8?"R":"N"},R=function(y){for(var S,_=0;_<y.length;_++){if((S=E(y.charAt(_)))==="L")return!1;if(S==="R")return!0}return!1},L=function(y,S,_,M){var K,z,ae,te,G=S[M];switch(G){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"N":case"AN":break;case"EN":I&&(G="AN");break;case"AL":I=!0,G="R";break;case"WS":case"BN":G="N";break;case"CS":M<1||M+1>=S.length||(K=_[M-1])!=="EN"&&K!=="AN"||(z=S[M+1])!=="EN"&&z!=="AN"?G="N":I&&(z="AN"),G=z===K?z:"N";break;case"ES":G=(K=M>0?_[M-1]:"B")==="EN"&&M+1<S.length&&S[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&_[M-1]==="EN"){G="EN";break}if(I){G="N";break}for(ae=M+1,te=S.length;ae<te&&S[ae]==="ET";)ae++;G=ae<te&&S[ae]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(te=S.length,ae=M+1;ae<te&&S[ae]==="NSM";)ae++;if(ae<te){var ue=y[M],de=ue>=1425&&ue<=2303||ue===64286;if(K=S[ae],de&&(K==="R"||K==="AL")){G="R";break}}}G=M<1||(K=S[M-1])==="B"?"N":_[M-1];break;case"B":I=!1,i=!0,G=F;break;case"S":a=!0,G="N"}return G},N=function(y,S,_){var M=y.split("");return _&&P(M,_,{hiLevel:F}),M.reverse(),S&&S.reverse(),M.join("")},P=function(y,S,_){var M,K,z,ae,te,G=-1,ue=y.length,de=0,T=[],O=F?f:h,V=[];for(I=!1,i=!1,a=!1,K=0;K<ue;K++)V[K]=E(y[K]);for(z=0;z<ue;z++){if(te=de,T[z]=L(y,V,T,z),M=240&(de=O[te][p[T[z]]]),de&=15,S[z]=ae=O[de][5],M>0)if(M===16){for(K=G;K<z;K++)S[K]=1;G=-1}else G=-1;if(O[de][6])G===-1&&(G=z);else if(G>-1){for(K=G;K<z;K++)S[K]=ae;G=-1}V[z]==="B"&&(S[z]=0),_.hiLevel|=ae}a&&function(Q,X,ie){for(var ee=0;ee<ie;ee++)if(Q[ee]==="S"){X[ee]=F;for(var Z=ee-1;Z>=0&&Q[Z]==="WS";Z--)X[Z]=F}}(V,S,ue)},x=function(y,S,_,M,K){if(!(K.hiLevel<y)){if(y===1&&F===1&&!i)return S.reverse(),void(_&&_.reverse());for(var z,ae,te,G,ue=S.length,de=0;de<ue;){if(M[de]>=y){for(te=de+1;te<ue&&M[te]>=y;)te++;for(G=de,ae=te-1;G<ae;G++,ae--)z=S[G],S[G]=S[ae],S[ae]=z,_&&(z=_[G],_[G]=_[ae],_[ae]=z);de=te}de++}}},k=function(y,S,_){var M=y.split(""),K={hiLevel:F};return _||(_=[]),P(M,_,K),function(z,ae,te){if(te.hiLevel!==0&&u)for(var G,ue=0;ue<z.length;ue++)ae[ue]===1&&(G=v.indexOf(z[ue]))>=0&&(z[ue]=v[G+1])}(M,_,K),x(2,M,S,_,K),x(1,M,S,_,K),M.join("")};return this.__bidiEngine__.doBidiReorder=function(y,S,_){if(function(K,z){if(z)for(var ae=0;ae<K.length;ae++)z[ae]=ae;o===void 0&&(o=R(K)),A===void 0&&(A=R(K))}(y,S),s||!l||A)if(s&&l&&o^A)F=o?1:0,y=N(y,S,_);else if(!s&&l&&A)F=o?1:0,y=k(y,S,_),y=N(y,S);else if(!s||o||l||A){if(s&&!l&&o^A)y=N(y,S),o?(F=0,y=k(y,S,_)):(F=1,y=k(y,S,_),y=N(y,S));else if(s&&o&&!l&&A)F=1,y=k(y,S,_),y=N(y,S);else if(!s&&!l&&o^A){var M=u;o?(F=1,y=k(y,S,_),F=0,u=!1,y=k(y,S,_),u=M):(F=0,y=k(y,S,_),y=N(y,S),F=1,u=!1,y=k(y,S,_),u=M,y=N(y,S))}}else F=0,y=k(y,S,_);else F=o?1:0,y=k(y,S,_);return y},this.__bidiEngine__.setOptions=function(y){y&&(s=y.isInputVisual,l=y.isOutputVisual,o=y.isInputRtl,A=y.isOutputRtl,u=y.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([r.doBidiReorder(i[o])]);n.text=s}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(Xt),Xt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new kA(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new hte(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Zee(this.contents),this.head=new tte(this),this.name=new ste(this),this.cmap=new bU(this),this.toUnicode={},this.hhea=new rte(this),this.maxp=new ote(this),this.hmtx=new lte(this),this.post=new ite(this),this.os2=new nte(this),this.loca=new dte(this),this.glyf=new cte(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,A;for(A=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],A.push(Math.round(e*this.scaleFactor));return A}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return s*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Vo,kA=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,a,s,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*s+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,a;for(a=[],n=0,i=e.length;n<i;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),Zee=function(){var t;function e(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,a,s,o,l,A,u,d,h,f,p,g;for(g in f=Object.keys(r).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),s=Math.floor(d/l),u=16*f-d,(i=new kA).writeInt(this.scalarType),i.writeShort(f),i.writeShort(d),i.writeShort(s),i.writeShort(u),a=16*f,A=i.pos+a,o=null,p=[],r)for(h=r[g],i.writeString(g),i.writeInt(t(h)),i.writeInt(A),i.writeInt(h.length),p=p.concat(h),g==="head"&&(o=A),A+=h.length;A%4;)p.push(0),A++;return i.write(p),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(r){var n,i,a,s;for(r=yU.call(r);r.length%4;)r.push(0);for(a=new kA(r),i=0,n=0,s=r.length;n<s;n=n+=4)i+=a.readUInt32();return 4294967295&i},e}(),ete={}.hasOwnProperty,Cl=function(t,e){for(var r in e)ete.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Vo=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var tte=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new kA).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),tI=function(){function t(e,r){var n,i,a,s,o,l,A,u,d,h,f,p,g,v,C,I,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,a=function(){var E,R;for(R=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)R.push(e.readUInt16());return R}(),e.pos+=2,g=function(){var E,R;for(R=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)R.push(e.readUInt16());return R}(),A=function(){var E,R;for(R=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)R.push(e.readUInt16());return R}(),u=function(){var E,R;for(R=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)R.push(e.readUInt16());return R}(),i=(this.length-e.pos+this.offset)/2,o=function(){var E,R;for(R=[],l=E=0;0<=i?E<i:E>i;l=0<=i?++E:--E)R.push(e.readUInt16());return R}(),l=C=0,F=a.length;C<F;l=++C)for(v=a[l],n=I=p=g[l];p<=v?I<=v:I>=v;n=p<=v?++I:--I)u[l]===0?s=n+A[l]:(s=o[u[l]/2+(n-p)-(h-l)]||0)!==0&&(s+=A[l]),this.codeMap[n]=65535&s}e.pos=d}return t.encode=function(e,r){var n,i,a,s,o,l,A,u,d,h,f,p,g,v,C,I,F,E,R,L,N,P,x,k,y,S,_,M,K,z,ae,te,G,ue,de,T,O,V,Q,X,ie,ee,Z,re,ce,Y;switch(M=new kA,s=Object.keys(e).sort(function(ge,q){return ge-q}),r){case"macroman":for(g=0,v=function(){var ge=[];for(p=0;p<256;++p)ge.push(0);return ge}(),I={0:0},a={},K=0,G=s.length;K<G;K++)I[Z=e[i=s[K]]]==null&&(I[Z]=++g),a[i]={old:e[i],new:I[e[i]]},v[i]=I[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(v),{charMap:a,subtable:M.data,maxGlyphID:g+1};case"unicode":for(S=[],d=[],F=0,I={},n={},C=A=null,z=0,ue=s.length;z<ue;z++)I[R=e[i=s[z]]]==null&&(I[R]=++F),n[i]={old:R,new:I[R]},o=I[R]-i,C!=null&&o===A||(C&&d.push(C),S.push(i),A=o),C=i;for(C&&d.push(C),d.push(65535),S.push(65535),k=2*(x=S.length),P=2*Math.pow(Math.log(x)/Math.LN2,2),h=Math.log(P/2)/Math.LN2,N=2*x-P,l=[],L=[],f=[],p=ae=0,de=S.length;ae<de;p=++ae){if(y=S[p],u=d[p],y===65535){l.push(0),L.push(0);break}if(y-(_=n[y].new)>=32768)for(l.push(0),L.push(2*(f.length+x-p)),i=te=y;y<=u?te<=u:te>=u;i=y<=u?++te:--te)f.push(n[i].new);else l.push(_-y),L.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*x+2*f.length),M.writeUInt16(0),M.writeUInt16(k),M.writeUInt16(P),M.writeUInt16(h),M.writeUInt16(N),ie=0,T=d.length;ie<T;ie++)i=d[ie],M.writeUInt16(i);for(M.writeUInt16(0),ee=0,O=S.length;ee<O;ee++)i=S[ee],M.writeUInt16(i);for(re=0,V=l.length;re<V;re++)o=l[re],M.writeUInt16(o);for(ce=0,Q=L.length;ce<Q;ce++)E=L[ce],M.writeUInt16(E);for(Y=0,X=f.length;Y<X;Y++)g=f[Y],M.writeUInt16(g);return{charMap:n,subtable:M.data,maxGlyphID:F+1}}},t}(),bU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new tI(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,i;return r==null&&(r="macroman"),n=tI.encode(e,r),(i=new kA).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),rte=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),nte=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),ite=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)r=e.readByte(),i.push(this.names.push(e.readString(r)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var s,o,l;for(l=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)l.push(e.readUInt32());return l}).call(this)}},t}(),ate=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},ste=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,i,a,s,o,l,A,u,d,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=u=0,d=n.length;u<d;a=++u)i=n[a],e.pos=i.offset,A=e.readString(i.length),s=new ate(A,i),l[h=i.nameID]==null&&(l[h]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),ote=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),lte=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,i,a,s,o,l;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var A,u;for(u=[],r=A=0;0<=i?A<i:A>i;r=0<=i?++A:--A)u.push(e.readInt16());return u}(),this.widths=(function(){var A,u,d,h;for(h=[],A=0,u=(d=this.metrics).length;A<u;A++)a=d[A],h.push(a.advance);return h}).call(this),n=this.widths[this.widths.length-1],l=[],r=s=0;0<=i?s<i:s>i;r=0<=i?++s:--s)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),yU=[].slice,cte=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,i,a,s,o,l,A,u,d;return e in this.cache?this.cache[e]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,s=(o=new kA(r.read(i))).readShort(),A=o.readShort(),d=o.readShort(),l=o.readShort(),u=o.readShort(),this.cache[e]=s===-1?new ute(o,A,d,l,u):new Ate(o,s,A,d,l,u),this.cache[e]))},t.prototype.encode=function(e,r,n){var i,a,s,o,l;for(s=[],a=[],o=0,l=r.length;o<l;o++)i=e[r[o]],a.push(s.length),i&&(s=s.concat(i.encode(n)));return a.push(s.length),{table:s,offsets:a}},t}(),Ate=function(){function t(e,r,n,i,a,s){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),ute=function(){function t(e,r,n,i,a){var s,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new kA(yU.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),dte=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Cl(t,Vo),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<n.length;++s)if(n[s]=i,a<r.length&&r[a]==s){++a,n[s]=i;var o=this.offsets[s],l=this.offsets[s+1]-o;l>0&&(i+=l)}for(var A=new Array(4*n.length),u=0;u<n.length;++u)A[4*u+3]=255&n[u],A[4*u+2]=(65280&n[u])>>8,A[4*u+1]=(16711680&n[u])>>16,A[4*u]=(4278190080&n[u])>>24;return A},t}(),hte=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,a,s,o,l;for(i={},s=0,o=e.length;s<o;s++)i[a=e[s]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],i[a]=n;return i},t.prototype.encode=function(e,r){var n,i,a,s,o,l,A,u,d,h,f,p,g,v,C;for(i in n=bU.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),f={0:0},C=n.charMap)f[(l=C[i]).old]=l.new;for(p in h=n.maxGlyphID,s)p in f||(f[p]=h++);return u=function(I){var F,E;for(F in E={},I)E[I[F]]=F;return E}(f),d=Object.keys(u).sort(function(I,F){return I-F}),g=function(){var I,F,E;for(E=[],I=0,F=d.length;I<F;I++)o=d[I],E.push(u[o]);return E}(),a=this.font.glyf.encode(s,g,f),A=this.font.loca.encode(a.offsets,g),v={cmap:this.font.cmap.raw(),glyf:a.table,loca:A,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();Xt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,a,s;if(Array.isArray(r))return"["+function(){var o,l,A;for(A=[],o=0,l=r.length;o<l;o++)n=r[o],A.push(e.convert(n));return A}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)s=r[i],a.push("/"+i+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+r},e}();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gx=function(t,e){return gx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},gx(t,e)};function Ko(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gx(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vx=function(){return vx=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},vx.apply(this,arguments)};function ja(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{A(n.next(u))}catch(d){s(d)}}function l(u){try{A(n.throw(u))}catch(d){s(d)}}function A(u){u.done?a(u.value):i(u.value).then(o,l)}A((n=n.apply(t,e||[])).next())})}function wa(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(A){return function(u){return l([A,u])}}function l(A){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=A[0]&2?i.return:A[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,A[1])).done)return a;switch(i=0,a&&(A=[A[0]&2,a.value]),A[0]){case 0:case 1:a=A;break;case 4:return r.label++,{value:A[1],done:!1};case 5:r.label++,i=A[1],A=[0];continue;case 7:A=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(A[0]===6||A[0]===2)){r=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){r.label=A[1];break}if(A[0]===6&&r.label<a[1]){r.label=a[1],a=A;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(A);break}a[2]&&r.ops.pop(),r.trys.pop();continue}A=e.call(t,r)}catch(u){A=[6,u],i=0}finally{n=a=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function Tg(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||e)}var Ac=function(){function t(e,r,n,i){this.left=e,this.top=r,this.width=n,this.height=i}return t.prototype.add=function(e,r,n,i){return new t(this.left+e,this.top+r,this.width+n,this.height+i)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(i){return i.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Vw=function(t,e){return Ac.fromClientRect(t,e.getBoundingClientRect())},fte=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),i=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Ac(0,0,n,i)},Kw=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),r--)}else e.push(i)}return e},mi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],i=-1,a="";++i<r;){var s=t[i];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(i+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},rI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mte=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ig=0;Ig<rI.length;Ig++)mte[rI.charCodeAt(Ig)]=Ig;var nI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fg=0;Fg<nI.length;Fg++)Nm[nI.charCodeAt(Fg)]=Fg;var pte=function(t){var e=t.length*.75,r=t.length,n,i=0,a,s,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)a=Nm[t.charCodeAt(n)],s=Nm[t.charCodeAt(n+1)],o=Nm[t.charCodeAt(n+2)],l=Nm[t.charCodeAt(n+3)],u[i++]=a<<2|s>>4,u[i++]=(s&15)<<4|o>>2,u[i++]=(o&3)<<6|l&63;return A},gte=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},vte=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Tu=5,YE=6+5,Cy=2,wte=YE-Tu,xU=65536>>Tu,bte=1<<Tu,Ny=bte-1,yte=1024>>Tu,xte=xU+yte,_te=xte,Ete=32,Bte=_te+Ete,Cte=65536>>YE,Nte=1<<wte,Ste=Nte-1,iI=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},kte=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Tte=function(t,e){var r=pte(t),n=Array.isArray(r)?vte(r):new Uint32Array(r),i=Array.isArray(r)?gte(r):new Uint16Array(r),a=24,s=iI(i,a/2,n[4]/2),o=n[5]===2?iI(i,(a+n[4])/2):kte(n,Math.ceil((a+n[4])/4));return new Ite(n[0],n[1],n[2],n[3],s,o)},Ite=function(){function t(e,r,n,i,a,s){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=s}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Tu],r=(r<<Cy)+(e&Ny),this.data[r];if(e<=65535)return r=this.index[xU+(e-55296>>Tu)],r=(r<<Cy)+(e&Ny),this.data[r];if(e<this.highStart)return r=Bte-Cte+(e>>YE),r=this.index[r],r+=e>>Tu&Ste,r=this.index[r],r=(r<<Cy)+(e&Ny),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),aI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fte=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Pg=0;Pg<aI.length;Pg++)Fte[aI.charCodeAt(Pg)]=Pg;var Pte="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",sI=50,Lte=1,_U=2,EU=3,Dte=4,Rte=5,oI=7,BU=8,lI=9,sA=10,wx=11,cI=12,bx=13,Ute=14,Sm=15,yx=16,Lg=17,fm=18,Ote=19,AI=20,xx=21,mm=22,Sy=23,Yd=24,ks=25,km=26,Tm=27,Jd=28,Mte=29,fu=30,Qte=31,Dg=32,Rg=33,_x=34,Ex=35,Bx=36,K0=37,Cx=38,P1=39,L1=40,ky=41,CU=42,Hte=43,Vte=[9001,65288],NU="!",Mr="",Ug="",Nx=Tte(Pte),zl=[fu,Bx],Sx=[Lte,_U,EU,Rte],SU=[sA,BU],uI=[Tm,km],Kte=Sx.concat(SU),dI=[Cx,P1,L1,_x,Ex],jte=[Sm,bx],zte=function(t,e){e===void 0&&(e="strict");var r=[],n=[],i=[];return t.forEach(function(a,s){var o=Nx.get(a);if(o>sI?(i.push(!0),o-=sI):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(s),r.push(yx);if(o===Dte||o===wx){if(s===0)return n.push(s),r.push(fu);var l=r[s-1];return Kte.indexOf(l)===-1?(n.push(n[s-1]),r.push(l)):(n.push(s),r.push(fu))}if(n.push(s),o===Qte)return r.push(e==="strict"?xx:K0);if(o===CU||o===Mte)return r.push(fu);if(o===Hte)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push(K0):r.push(fu);r.push(o)}),[n,r,i]},Ty=function(t,e,r,n){var i=n[r];if(Array.isArray(t)?t.indexOf(i)!==-1:t===i)for(var a=r;a<=n.length;){a++;var s=n[a];if(s===e)return!0;if(s!==sA)break}if(i===sA)for(var a=r;a>0;){a--;var o=n[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var s=n[l];if(s===e)return!0;if(s!==sA)break}if(o!==sA)break}return!1},hI=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===sA)r--;else return n}return 0},$te=function(t,e,r,n,i){if(r[n]===0)return Mr;var a=n-1;if(Array.isArray(i)&&i[a]===!0)return Mr;var s=a-1,o=a+1,l=e[a],A=s>=0?e[s]:0,u=e[o];if(l===_U&&u===EU)return Mr;if(Sx.indexOf(l)!==-1)return NU;if(Sx.indexOf(u)!==-1||SU.indexOf(u)!==-1)return Mr;if(hI(a,e)===BU)return Ug;if(Nx.get(t[a])===wx||(l===Dg||l===Rg)&&Nx.get(t[o])===wx||l===oI||u===oI||l===lI||[sA,bx,Sm].indexOf(l)===-1&&u===lI||[Lg,fm,Ote,Yd,Jd].indexOf(u)!==-1||hI(a,e)===mm||Ty(Sy,mm,a,e)||Ty([Lg,fm],xx,a,e)||Ty(cI,cI,a,e))return Mr;if(l===sA)return Ug;if(l===Sy||u===Sy)return Mr;if(u===yx||l===yx)return Ug;if([bx,Sm,xx].indexOf(u)!==-1||l===Ute||A===Bx&&jte.indexOf(l)!==-1||l===Jd&&u===Bx||u===AI||zl.indexOf(u)!==-1&&l===ks||zl.indexOf(l)!==-1&&u===ks||l===Tm&&[K0,Dg,Rg].indexOf(u)!==-1||[K0,Dg,Rg].indexOf(l)!==-1&&u===km||zl.indexOf(l)!==-1&&uI.indexOf(u)!==-1||uI.indexOf(l)!==-1&&zl.indexOf(u)!==-1||[Tm,km].indexOf(l)!==-1&&(u===ks||[mm,Sm].indexOf(u)!==-1&&e[o+1]===ks)||[mm,Sm].indexOf(l)!==-1&&u===ks||l===ks&&[ks,Jd,Yd].indexOf(u)!==-1)return Mr;if([ks,Jd,Yd,Lg,fm].indexOf(u)!==-1)for(var d=a;d>=0;){var h=e[d];if(h===ks)return Mr;if([Jd,Yd].indexOf(h)!==-1)d--;else break}if([Tm,km].indexOf(u)!==-1)for(var d=[Lg,fm].indexOf(l)!==-1?s:a;d>=0;){var h=e[d];if(h===ks)return Mr;if([Jd,Yd].indexOf(h)!==-1)d--;else break}if(Cx===l&&[Cx,P1,_x,Ex].indexOf(u)!==-1||[P1,_x].indexOf(l)!==-1&&[P1,L1].indexOf(u)!==-1||[L1,Ex].indexOf(l)!==-1&&u===L1||dI.indexOf(l)!==-1&&[AI,km].indexOf(u)!==-1||dI.indexOf(u)!==-1&&l===Tm||zl.indexOf(l)!==-1&&zl.indexOf(u)!==-1||l===Yd&&zl.indexOf(u)!==-1||zl.concat(ks).indexOf(l)!==-1&&u===mm&&Vte.indexOf(t[o])===-1||zl.concat(ks).indexOf(u)!==-1&&l===fm)return Mr;if(l===ky&&u===ky){for(var f=r[a],p=1;f>0&&(f--,e[f]===ky);)p++;if(p%2!==0)return Mr}return l===Dg&&u===Rg?Mr:Ug},Gte=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=zte(t,e.lineBreak),n=r[0],i=r[1],a=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[ks,fu,CU].indexOf(o)!==-1?K0:o}));var s=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,i,s]},Wte=function(){function t(e,r,n,i){this.codePoints=e,this.required=r===NU,this.start=n,this.end=i}return t.prototype.slice=function(){return mi.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),qte=function(t,e){var r=Kw(t),n=Gte(r,e),i=n[0],a=n[1],s=n[2],o=r.length,l=0,A=0;return{next:function(){if(A>=o)return{done:!0,value:null};for(var u=Mr;A<o&&(u=$te(r,a,i,++A,s))===Mr;);if(u!==Mr||A===o){var d=new Wte(r,u,l,A);return l=A,{value:d,done:!1}}return{done:!0,value:null}}}},Xte=1,Yte=2,Pp=4,fI=8,Bv=10,mI=47,r0=92,Jte=9,Zte=32,Og=34,pm=61,ere=35,tre=36,rre=37,Mg=39,Qg=40,gm=41,nre=95,os=45,ire=33,are=60,sre=62,ore=64,lre=91,cre=93,Are=61,ure=123,Hg=63,dre=125,pI=124,hre=126,fre=128,gI=65533,Iy=42,xu=43,mre=44,pre=58,gre=59,j0=46,vre=0,wre=8,bre=11,yre=14,xre=31,_re=127,tl=-1,kU=48,TU=97,IU=101,Ere=102,Bre=117,Cre=122,FU=65,PU=69,LU=70,Nre=85,Sre=90,xa=function(t){return t>=kU&&t<=57},kre=function(t){return t>=55296&&t<=57343},Zd=function(t){return xa(t)||t>=FU&&t<=LU||t>=TU&&t<=Ere},Tre=function(t){return t>=TU&&t<=Cre},Ire=function(t){return t>=FU&&t<=Sre},Fre=function(t){return Tre(t)||Ire(t)},Pre=function(t){return t>=fre},Vg=function(t){return t===Bv||t===Jte||t===Zte},Cv=function(t){return Fre(t)||Pre(t)||t===nre},vI=function(t){return Cv(t)||xa(t)||t===os},Lre=function(t){return t>=vre&&t<=wre||t===bre||t>=yre&&t<=xre||t===_re},jc=function(t,e){return t!==r0?!1:e!==Bv},Kg=function(t,e,r){return t===os?Cv(e)||jc(e,r):Cv(t)?!0:!!(t===r0&&jc(t,e))},Fy=function(t,e,r){return t===xu||t===os?xa(e)?!0:e===j0&&xa(r):xa(t===j0?e:t)},Dre=function(t){var e=0,r=1;(t[e]===xu||t[e]===os)&&(t[e]===os&&(r=-1),e++);for(var n=[];xa(t[e]);)n.push(t[e++]);var i=n.length?parseInt(mi.apply(void 0,n),10):0;t[e]===j0&&e++;for(var a=[];xa(t[e]);)a.push(t[e++]);var s=a.length,o=s?parseInt(mi.apply(void 0,a),10):0;(t[e]===PU||t[e]===IU)&&e++;var l=1;(t[e]===xu||t[e]===os)&&(t[e]===os&&(l=-1),e++);for(var A=[];xa(t[e]);)A.push(t[e++]);var u=A.length?parseInt(mi.apply(void 0,A),10):0;return r*(i+o*Math.pow(10,-s))*Math.pow(10,l*u)},Rre={type:2},Ure={type:3},Ore={type:4},Mre={type:13},Qre={type:8},Hre={type:21},Vre={type:9},Kre={type:10},jre={type:11},zre={type:12},$re={type:14},jg={type:23},Gre={type:1},Wre={type:25},qre={type:24},Xre={type:26},Yre={type:27},Jre={type:28},Zre={type:29},ene={type:31},kx={type:32},DU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Kw(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==kx;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Og:return this.consumeStringToken(Og);case ere:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(vI(r)||jc(n,i)){var a=Kg(r,n,i)?Yte:Xte,s=this.consumeName();return{type:5,value:s,flags:a}}break;case tre:if(this.peekCodePoint(0)===pm)return this.consumeCodePoint(),Mre;break;case Mg:return this.consumeStringToken(Mg);case Qg:return Rre;case gm:return Ure;case Iy:if(this.peekCodePoint(0)===pm)return this.consumeCodePoint(),$re;break;case xu:if(Fy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case mre:return Ore;case os:var o=e,l=this.peekCodePoint(0),A=this.peekCodePoint(1);if(Fy(o,l,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Kg(o,l,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===os&&A===sre)return this.consumeCodePoint(),this.consumeCodePoint(),qre;break;case j0:if(Fy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case mI:if(this.peekCodePoint(0)===Iy)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Iy&&(u=this.consumeCodePoint(),u===mI))return this.consumeToken();if(u===tl)return this.consumeToken()}break;case pre:return Xre;case gre:return Yre;case are:if(this.peekCodePoint(0)===ire&&this.peekCodePoint(1)===os&&this.peekCodePoint(2)===os)return this.consumeCodePoint(),this.consumeCodePoint(),Wre;break;case ore:var d=this.peekCodePoint(0),h=this.peekCodePoint(1),f=this.peekCodePoint(2);if(Kg(d,h,f)){var s=this.consumeName();return{type:7,value:s}}break;case lre:return Jre;case r0:if(jc(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case cre:return Zre;case Are:if(this.peekCodePoint(0)===pm)return this.consumeCodePoint(),Qre;break;case ure:return jre;case dre:return zre;case Bre:case Nre:var p=this.peekCodePoint(0),g=this.peekCodePoint(1);return p===xu&&(Zd(g)||g===Hg)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case pI:if(this.peekCodePoint(0)===pm)return this.consumeCodePoint(),Vre;if(this.peekCodePoint(0)===pI)return this.consumeCodePoint(),Hre;break;case hre:if(this.peekCodePoint(0)===pm)return this.consumeCodePoint(),Kre;break;case tl:return kx}return Vg(e)?(this.consumeWhiteSpace(),ene):xa(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Cv(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:mi(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Zd(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Hg&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(mi.apply(void 0,e.map(function(l){return l===Hg?kU:l})),16),a=parseInt(mi.apply(void 0,e.map(function(l){return l===Hg?LU:l})),16);return{type:30,start:i,end:a}}var s=parseInt(mi.apply(void 0,e),16);if(this.peekCodePoint(0)===os&&Zd(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Zd(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var a=parseInt(mi.apply(void 0,o),16);return{type:30,start:s,end:a}}else return{type:30,start:s,end:s}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Qg?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Qg?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===tl)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Mg||r===Og){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===tl||this.peekCodePoint(0)===gm)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),jg)}for(;;){var i=this.consumeCodePoint();if(i===tl||i===gm)return{type:22,value:mi.apply(void 0,e)};if(Vg(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===tl||this.peekCodePoint(0)===gm?(this.consumeCodePoint(),{type:22,value:mi.apply(void 0,e)}):(this.consumeBadUrlRemnants(),jg);if(i===Og||i===Mg||i===Qg||Lre(i))return this.consumeBadUrlRemnants(),jg;if(i===r0)if(jc(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),jg;else e.push(i)}},t.prototype.consumeWhiteSpace=function(){for(;Vg(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===gm||e===tl)return;jc(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var i=Math.min(r,e);n+=mi.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var i=this._value[n];if(i===tl||i===void 0||i===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(i===Bv)return this._value.splice(0,n),Gre;if(i===r0){var a=this._value[n+1];a!==tl&&a!==void 0&&(a===Bv?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):jc(i,a)&&(r+=this.consumeStringSlice(n),r+=mi(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Pp,n=this.peekCodePoint(0);for((n===xu||n===os)&&e.push(this.consumeCodePoint());xa(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===j0&&xa(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=fI;xa(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===PU||n===IU)&&((i===xu||i===os)&&xa(a)||xa(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=fI;xa(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Dre(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],i=this.peekCodePoint(0),a=this.peekCodePoint(1),s=this.peekCodePoint(2);if(Kg(i,a,s)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return i===rre?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Zd(e)){for(var r=mi(e);Zd(this.peekCodePoint(0))&&r.length<6;)r+=mi(this.consumeCodePoint());Vg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||kre(n)||n>1114111?gI:n}return e===tl?gI:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(vI(r))e+=mi(r);else if(jc(r,this.peekCodePoint(0)))e+=mi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),RU=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new DU;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||rne(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?kx:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Lp=function(t){return t.type===15},Ff=function(t){return t.type===17},vn=function(t){return t.type===20},tne=function(t){return t.type===0},Tx=function(t,e){return vn(t)&&t.value===e},UU=function(t){return t.type!==31},uf=function(t){return t.type!==31&&t.type!==4},Nl=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},rne=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},TA=function(t){return t.type===17||t.type===15},Si=function(t){return t.type===16||TA(t)},OU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Aa={type:17,number:0,flags:Pp},JE={type:16,number:50,flags:Pp},oA={type:16,number:100,flags:Pp},Im=function(t,e,r){var n=t[0],i=t[1];return[In(n,e),In(typeof i<"u"?i:n,r)]},In=function(t,e){if(t.type===16)return t.number/100*e;if(Lp(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},MU="deg",QU="grad",HU="rad",VU="turn",jw={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case MU:return Math.PI*e.number/180;case QU:return Math.PI/200*e.number;case HU:return e.number;case VU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},KU=function(t){return t.type===15&&(t.unit===MU||t.unit===QU||t.unit===HU||t.unit===VU)},jU=function(t){var e=t.filter(vn).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Aa,Aa];case"to top":case"bottom":return lo(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Aa,oA];case"to right":case"left":return lo(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[oA,oA];case"to bottom":case"top":return lo(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[oA,Aa];case"to left":case"right":return lo(270)}return 0},lo=function(t){return Math.PI*t/180},wA={name:"color",parse:function(t,e){if(e.type===18){var r=nne[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3);return lA(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3),s=e.value.substring(3,4);return lA(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),parseInt(s+s,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6);return lA(parseInt(n,16),parseInt(i,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6),s=e.value.substring(6,8);return lA(parseInt(n,16),parseInt(i,16),parseInt(a,16),parseInt(s,16)/255)}}if(e.type===20){var o=ec[e.value.toUpperCase()];if(typeof o<"u")return o}return ec.TRANSPARENT}},bA=function(t){return(255&t)===0},Vi=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+n+","+r+","+e/255+")":"rgb("+i+","+n+","+r+")"},lA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},wI=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},bI=function(t,e){var r=e.filter(uf);if(r.length===3){var n=r.map(wI),i=n[0],a=n[1],s=n[2];return lA(i,a,s,1)}if(r.length===4){var o=r.map(wI),i=o[0],a=o[1],s=o[2],l=o[3];return lA(i,a,s,l)}return 0};function Py(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var yI=function(t,e){var r=e.filter(uf),n=r[0],i=r[1],a=r[2],s=r[3],o=(n.type===17?lo(n.number):jw.parse(t,n))/(Math.PI*2),l=Si(i)?i.number/100:0,A=Si(a)?a.number/100:0,u=typeof s<"u"&&Si(s)?In(s,1):1;if(l===0)return lA(A*255,A*255,A*255,1);var d=A<=.5?A*(l+1):A+l-A*l,h=A*2-d,f=Py(h,d,o+1/3),p=Py(h,d,o),g=Py(h,d,o-1/3);return lA(f*255,p*255,g*255,u)},nne={hsl:yI,hsla:yI,rgb:bI,rgba:bI},n0=function(t,e){return wA.parse(t,RU.create(e).parseComponentValue())},ec={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ine={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(vn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ane={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zw=function(t,e){var r=wA.parse(t,e[0]),n=e[1];return n&&Si(n)?{color:r,stop:n}:{color:r,stop:null}},xI=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Aa),n.stop===null&&(n.stop=oA);for(var i=[],a=0,s=0;s<t.length;s++){var o=t[s].stop;if(o!==null){var l=In(o,e);l>a?i.push(l):i.push(a),a=l}else i.push(null)}for(var A=null,s=0;s<i.length;s++){var u=i[s];if(u===null)A===null&&(A=s);else if(A!==null){for(var d=s-A,h=i[A-1],f=(u-h)/(d+1),p=1;p<=d;p++)i[A+p-1]=f*p;A=null}}return t.map(function(g,v){var C=g.color;return{color:C,stop:Math.max(Math.min(1,i[v]/e),0)}})},sne=function(t,e,r){var n=e/2,i=r/2,a=In(t[0],e)-n,s=i-In(t[1],r);return(Math.atan2(s,a)+Math.PI*2)%(Math.PI*2)},one=function(t,e,r){var n=typeof t=="number"?t:sne(t,e,r),i=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),a=e/2,s=r/2,o=i/2,l=Math.sin(n-Math.PI/2)*o,A=Math.cos(n-Math.PI/2)*o;return[i,a-A,a+A,s-l,s+l]},To=function(t,e){return Math.sqrt(t*t+e*e)},_I=function(t,e,r,n,i){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(s,o){var l=o[0],A=o[1],u=To(r-l,n-A);return(i?u<s.optimumDistance:u>s.optimumDistance)?{optimumCorner:o,optimumDistance:u}:s},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},lne=function(t,e,r,n,i){var a=0,s=0;switch(t.size){case 0:t.shape===0?a=s=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-i)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),s=Math.min(Math.abs(r),Math.abs(r-i)));break;case 2:if(t.shape===0)a=s=Math.min(To(e,r),To(e,r-i),To(e-n,r),To(e-n,r-i));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-i))/Math.min(Math.abs(e),Math.abs(e-n)),l=_I(n,i,e,r,!0),A=l[0],u=l[1];a=To(A-e,(u-r)/o),s=o*a}break;case 1:t.shape===0?a=s=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-i)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),s=Math.max(Math.abs(r),Math.abs(r-i)));break;case 3:if(t.shape===0)a=s=Math.max(To(e,r),To(e,r-i),To(e-n,r),To(e-n,r-i));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-i))/Math.max(Math.abs(e),Math.abs(e-n)),d=_I(n,i,e,r,!1),A=d[0],u=d[1];a=To(A-e,(u-r)/o),s=o*a}break}return Array.isArray(t.size)&&(a=In(t.size[0],n),s=t.size.length===2?In(t.size[1],i):a),[a,s]},cne=function(t,e){var r=lo(180),n=[];return Nl(e).forEach(function(i,a){if(a===0){var s=i[0];if(s.type===20&&s.value==="to"){r=jU(i);return}else if(KU(s)){r=jw.parse(t,s);return}}var o=zw(t,i);n.push(o)}),{angle:r,stops:n,type:1}},zg=function(t,e){var r=lo(180),n=[];return Nl(e).forEach(function(i,a){if(a===0){var s=i[0];if(s.type===20&&["top","left","right","bottom"].indexOf(s.value)!==-1){r=jU(i);return}else if(KU(s)){r=(jw.parse(t,s)+lo(270))%lo(360);return}}var o=zw(t,i);n.push(o)}),{angle:r,stops:n,type:1}},Ane=function(t,e){var r=lo(180),n=[],i=1,a=0,s=3,o=[];return Nl(e).forEach(function(l,A){var u=l[0];if(A===0){if(vn(u)&&u.value==="linear"){i=1;return}else if(vn(u)&&u.value==="radial"){i=2;return}}if(u.type===18){if(u.name==="from"){var d=wA.parse(t,u.values[0]);n.push({stop:Aa,color:d})}else if(u.name==="to"){var d=wA.parse(t,u.values[0]);n.push({stop:oA,color:d})}else if(u.name==="color-stop"){var h=u.values.filter(uf);if(h.length===2){var d=wA.parse(t,h[1]),f=h[0];Ff(f)&&n.push({stop:{type:16,number:f.number*100,flags:f.flags},color:d})}}}}),i===1?{angle:(r+lo(180))%lo(360),stops:n,type:i}:{size:s,shape:a,stops:n,position:o,type:i}},zU="closest-side",$U="farthest-side",GU="closest-corner",WU="farthest-corner",qU="circle",XU="ellipse",YU="cover",JU="contain",une=function(t,e){var r=0,n=3,i=[],a=[];return Nl(e).forEach(function(s,o){var l=!0;if(o===0){var A=!1;l=s.reduce(function(d,h){if(A)if(vn(h))switch(h.value){case"center":return a.push(JE),d;case"top":case"left":return a.push(Aa),d;case"right":case"bottom":return a.push(oA),d}else(Si(h)||TA(h))&&a.push(h);else if(vn(h))switch(h.value){case qU:return r=0,!1;case XU:return r=1,!1;case"at":return A=!0,!1;case zU:return n=0,!1;case YU:case $U:return n=1,!1;case JU:case GU:return n=2,!1;case WU:return n=3,!1}else if(TA(h)||Si(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)}if(l){var u=zw(t,s);i.push(u)}}),{size:n,shape:r,stops:i,position:a,type:2}},$g=function(t,e){var r=0,n=3,i=[],a=[];return Nl(e).forEach(function(s,o){var l=!0;if(o===0?l=s.reduce(function(u,d){if(vn(d))switch(d.value){case"center":return a.push(JE),!1;case"top":case"left":return a.push(Aa),!1;case"right":case"bottom":return a.push(oA),!1}else if(Si(d)||TA(d))return a.push(d),!1;return u},l):o===1&&(l=s.reduce(function(u,d){if(vn(d))switch(d.value){case qU:return r=0,!1;case XU:return r=1,!1;case JU:case zU:return n=0,!1;case $U:return n=1,!1;case GU:return n=2,!1;case YU:case WU:return n=3,!1}else if(TA(d)||Si(d))return Array.isArray(n)||(n=[]),n.push(d),!1;return u},l)),l){var A=zw(t,s);i.push(A)}}),{size:n,shape:r,stops:i,position:a,type:2}},dne=function(t){return t.type===1},hne=function(t){return t.type===2},ZE={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=ZU[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function fne(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!ZU[t.name])}var ZU={"linear-gradient":cne,"-moz-linear-gradient":zg,"-ms-linear-gradient":zg,"-o-linear-gradient":zg,"-webkit-linear-gradient":zg,"radial-gradient":une,"-moz-radial-gradient":$g,"-ms-radial-gradient":$g,"-o-radial-gradient":$g,"-webkit-radial-gradient":$g,"-webkit-gradient":Ane},mne={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return uf(n)&&fne(n)}).map(function(n){return ZE.parse(t,n)})}},pne={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(vn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},gne={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Nl(e).map(function(r){return r.filter(Si)}).map(OU)}},vne={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Nl(e).map(function(r){return r.filter(vn).map(function(n){return n.value}).join(" ")}).map(wne)}},wne=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Dh;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Dh||(Dh={}));var bne={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Nl(e).map(function(r){return r.filter(yne)})}},yne=function(t){return vn(t)||Si(t)},$w=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},xne=$w("top"),_ne=$w("right"),Ene=$w("bottom"),Bne=$w("left"),Gw=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return OU(r.filter(Si))}}},Cne=Gw("top-left"),Nne=Gw("top-right"),Sne=Gw("bottom-right"),kne=Gw("bottom-left"),Ww=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Tne=Ww("top"),Ine=Ww("right"),Fne=Ww("bottom"),Pne=Ww("left"),qw=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Lp(r)?r.number:0}}},Lne=qw("top"),Dne=qw("right"),Rne=qw("bottom"),Une=qw("left"),One={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Mne={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Qne={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(vn).reduce(function(r,n){return r|Hne(n.value)},0)}},Hne=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Vne={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Kne={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Nv;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Nv||(Nv={}));var jne={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Nv.STRICT;case"normal":default:return Nv.NORMAL}}},zne={name:"line-height",initialValue:"normal",prefix:!1,type:4},EI=function(t,e){return vn(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Si(t)?In(t,e):e},$ne={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:ZE.parse(t,e)}},Gne={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Ix={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Xw=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Wne=Xw("top"),qne=Xw("right"),Xne=Xw("bottom"),Yne=Xw("left"),Jne={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(vn).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Zne={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Yw=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},eie=Yw("top"),tie=Yw("right"),rie=Yw("bottom"),nie=Yw("left"),iie={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},aie={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},sie={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Tx(e[0],"none")?[]:Nl(e).map(function(r){for(var n={color:ec.TRANSPARENT,offsetX:Aa,offsetY:Aa,blur:Aa},i=0,a=0;a<r.length;a++){var s=r[a];TA(s)?(i===0?n.offsetX=s:i===1?n.offsetY=s:n.blur=s,i++):n.color=wA.parse(t,s)}return n})}},oie={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},lie={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=uie[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},cie=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},Aie=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var i=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,i,a,s,o]:null},uie={matrix:cie,matrix3d:Aie},BI={type:16,number:50,flags:Pp},die=[BI,BI],hie={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Si);return r.length!==2?die:[r[0],r[1]]}},fie={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},i0;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(i0||(i0={}));var mie={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return i0.BREAK_ALL;case"keep-all":return i0.KEEP_ALL;case"normal":default:return i0.NORMAL}}},pie={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Ff(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},e6={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},gie={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Ff(e)?e.number:1}},vie={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wie={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(vn).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},bie={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:r.push(i.value);break;case 17:r.push(i.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},yie={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},xie={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Ff(e))return e.number;if(vn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},_ie={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(vn).map(function(r){return r.value})}},Eie={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ri=function(t,e){return(t&e)!==0},Bie={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Cie={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],i=e.filter(UU),a=0;a<i.length;a++){var s=i[a],o=i[a+1];if(s.type===20){var l=o&&Ff(o)?o.number:1;n.push({counter:s.value,increment:l})}}return n}},Nie={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(UU),i=0;i<n.length;i++){var a=n[i],s=n[i+1];if(vn(a)&&a.value!=="none"){var o=s&&Ff(s)?s.number:0;r.push({counter:a.value,reset:o})}}return r}},Sie={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Lp).map(function(r){return e6.parse(t,r)})}},kie={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],i=e.filter(tne);if(i.length%2!==0)return null;for(var a=0;a<i.length;a+=2){var s=i[a].value,o=i[a+1].value;n.push({open:s,close:o})}return n}},CI=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},Tie={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Tx(e[0],"none")?[]:Nl(e).map(function(r){for(var n={color:255,offsetX:Aa,offsetY:Aa,blur:Aa,spread:Aa,inset:!1},i=0,a=0;a<r.length;a++){var s=r[a];Tx(s,"inset")?n.inset=!0:TA(s)?(i===0?n.offsetX=s:i===1?n.offsetY=s:i===2?n.blur=s:n.spread=s,i++):n.color=wA.parse(t,s)}return n})}},Iie={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(vn).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},Fie={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Pie={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Lp(e)?e.number:0}},Lie=function(){function t(e,r){var n,i;this.animationDuration=Kt(e,Sie,r.animationDuration),this.backgroundClip=Kt(e,ine,r.backgroundClip),this.backgroundColor=Kt(e,ane,r.backgroundColor),this.backgroundImage=Kt(e,mne,r.backgroundImage),this.backgroundOrigin=Kt(e,pne,r.backgroundOrigin),this.backgroundPosition=Kt(e,gne,r.backgroundPosition),this.backgroundRepeat=Kt(e,vne,r.backgroundRepeat),this.backgroundSize=Kt(e,bne,r.backgroundSize),this.borderTopColor=Kt(e,xne,r.borderTopColor),this.borderRightColor=Kt(e,_ne,r.borderRightColor),this.borderBottomColor=Kt(e,Ene,r.borderBottomColor),this.borderLeftColor=Kt(e,Bne,r.borderLeftColor),this.borderTopLeftRadius=Kt(e,Cne,r.borderTopLeftRadius),this.borderTopRightRadius=Kt(e,Nne,r.borderTopRightRadius),this.borderBottomRightRadius=Kt(e,Sne,r.borderBottomRightRadius),this.borderBottomLeftRadius=Kt(e,kne,r.borderBottomLeftRadius),this.borderTopStyle=Kt(e,Tne,r.borderTopStyle),this.borderRightStyle=Kt(e,Ine,r.borderRightStyle),this.borderBottomStyle=Kt(e,Fne,r.borderBottomStyle),this.borderLeftStyle=Kt(e,Pne,r.borderLeftStyle),this.borderTopWidth=Kt(e,Lne,r.borderTopWidth),this.borderRightWidth=Kt(e,Dne,r.borderRightWidth),this.borderBottomWidth=Kt(e,Rne,r.borderBottomWidth),this.borderLeftWidth=Kt(e,Une,r.borderLeftWidth),this.boxShadow=Kt(e,Tie,r.boxShadow),this.color=Kt(e,One,r.color),this.direction=Kt(e,Mne,r.direction),this.display=Kt(e,Qne,r.display),this.float=Kt(e,Vne,r.cssFloat),this.fontFamily=Kt(e,bie,r.fontFamily),this.fontSize=Kt(e,yie,r.fontSize),this.fontStyle=Kt(e,Eie,r.fontStyle),this.fontVariant=Kt(e,_ie,r.fontVariant),this.fontWeight=Kt(e,xie,r.fontWeight),this.letterSpacing=Kt(e,Kne,r.letterSpacing),this.lineBreak=Kt(e,jne,r.lineBreak),this.lineHeight=Kt(e,zne,r.lineHeight),this.listStyleImage=Kt(e,$ne,r.listStyleImage),this.listStylePosition=Kt(e,Gne,r.listStylePosition),this.listStyleType=Kt(e,Ix,r.listStyleType),this.marginTop=Kt(e,Wne,r.marginTop),this.marginRight=Kt(e,qne,r.marginRight),this.marginBottom=Kt(e,Xne,r.marginBottom),this.marginLeft=Kt(e,Yne,r.marginLeft),this.opacity=Kt(e,gie,r.opacity);var a=Kt(e,Jne,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Kt(e,Zne,r.overflowWrap),this.paddingTop=Kt(e,eie,r.paddingTop),this.paddingRight=Kt(e,tie,r.paddingRight),this.paddingBottom=Kt(e,rie,r.paddingBottom),this.paddingLeft=Kt(e,nie,r.paddingLeft),this.paintOrder=Kt(e,Iie,r.paintOrder),this.position=Kt(e,aie,r.position),this.textAlign=Kt(e,iie,r.textAlign),this.textDecorationColor=Kt(e,vie,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Kt(e,wie,(i=r.textDecorationLine)!==null&&i!==void 0?i:r.textDecoration),this.textShadow=Kt(e,sie,r.textShadow),this.textTransform=Kt(e,oie,r.textTransform),this.transform=Kt(e,lie,r.transform),this.transformOrigin=Kt(e,hie,r.transformOrigin),this.visibility=Kt(e,fie,r.visibility),this.webkitTextStrokeColor=Kt(e,Fie,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Kt(e,Pie,r.webkitTextStrokeWidth),this.wordBreak=Kt(e,mie,r.wordBreak),this.zIndex=Kt(e,pie,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return bA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Ri(this.display,4)||Ri(this.display,33554432)||Ri(this.display,268435456)||Ri(this.display,536870912)||Ri(this.display,67108864)||Ri(this.display,134217728)},t}(),Die=function(){function t(e,r){this.content=Kt(e,Bie,r.content),this.quotes=Kt(e,kie,r.quotes)}return t}(),NI=function(){function t(e,r){this.counterIncrement=Kt(e,Cie,r.counterIncrement),this.counterReset=Kt(e,Nie,r.counterReset)}return t}(),Kt=function(t,e,r){var n=new DU,i=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(i);var a=new RU(n.read());switch(e.type){case 2:var s=a.parseComponentValue();return e.parse(t,vn(s)?s.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return jw.parse(t,a.parseComponentValue());case"color":return wA.parse(t,a.parseComponentValue());case"image":return ZE.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return TA(o)?o:Aa;case"length-percentage":var l=a.parseComponentValue();return Si(l)?l:Aa;case"time":return e6.parse(t,a.parseComponentValue())}break}},Rie="data-html2canvas-debug",Uie=function(t){var e=t.getAttribute(Rie);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Fx=function(t,e){var r=Uie(t);return r===1||e===r},Sl=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Fx(r,3))debugger;this.styles=new Lie(e,window.getComputedStyle(r,null)),Dx(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Vw(this.context,r),Fx(r,4)&&(this.flags|=16)}return t}(),Oie="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",SI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gg=0;Gg<SI.length;Gg++)Fm[SI.charCodeAt(Gg)]=Gg;var Mie=function(t){var e=t.length*.75,r=t.length,n,i=0,a,s,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)a=Fm[t.charCodeAt(n)],s=Fm[t.charCodeAt(n+1)],o=Fm[t.charCodeAt(n+2)],l=Fm[t.charCodeAt(n+3)],u[i++]=a<<2|s>>4,u[i++]=(s&15)<<4|o>>2,u[i++]=(o&3)<<6|l&63;return A},Qie=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Hie=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Iu=5,eB=6+5,Ly=2,Vie=eB-Iu,t6=65536>>Iu,Kie=1<<Iu,Dy=Kie-1,jie=1024>>Iu,zie=t6+jie,$ie=zie,Gie=32,Wie=$ie+Gie,qie=65536>>eB,Xie=1<<Vie,Yie=Xie-1,kI=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Jie=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Zie=function(t,e){var r=Mie(t),n=Array.isArray(r)?Hie(r):new Uint32Array(r),i=Array.isArray(r)?Qie(r):new Uint16Array(r),a=24,s=kI(i,a/2,n[4]/2),o=n[5]===2?kI(i,(a+n[4])/2):Jie(n,Math.ceil((a+n[4])/4));return new eae(n[0],n[1],n[2],n[3],s,o)},eae=function(){function t(e,r,n,i,a,s){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=s}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Iu],r=(r<<Ly)+(e&Dy),this.data[r];if(e<=65535)return r=this.index[t6+(e-55296>>Iu)],r=(r<<Ly)+(e&Dy),this.data[r];if(e<this.highStart)return r=Wie-qie+(e>>eB),r=this.index[r],r+=e>>Iu&Yie,r=this.index[r],r=(r<<Ly)+(e&Dy),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),TI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tae=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wg=0;Wg<TI.length;Wg++)tae[TI.charCodeAt(Wg)]=Wg;var rae=1,Ry=2,Uy=3,II=4,FI=5,nae=7,PI=8,Oy=9,My=10,LI=11,DI=12,RI=13,UI=14,Qy=15,iae=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),r--)}else e.push(i)}return e},aae=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],i=-1,a="";++i<r;){var s=t[i];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(i+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},sae=Zie(Oie),no="",Hy="",oae=function(t){return sae.get(t)},lae=function(t,e,r){var n=r-2,i=e[n],a=e[r-1],s=e[r];if(a===Ry&&s===Uy)return no;if(a===Ry||a===Uy||a===II||s===Ry||s===Uy||s===II)return Hy;if(a===PI&&[PI,Oy,LI,DI].indexOf(s)!==-1||(a===LI||a===Oy)&&(s===Oy||s===My)||(a===DI||a===My)&&s===My||s===RI||s===FI||s===nae||a===rae)return no;if(a===RI&&s===UI){for(;i===FI;)i=e[--n];if(i===UI)return no}if(a===Qy&&s===Qy){for(var o=0;i===Qy;)o++,i=e[--n];if(o%2===0)return no}return Hy},cae=function(t){var e=iae(t),r=e.length,n=0,i=0,a=e.map(oae);return{next:function(){if(n>=r)return{done:!0,value:null};for(var s=no;n<r&&(s=lae(e,a,++n))===no;);if(s!==no||n===r){var o=aae.apply(null,e.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},Aae=function(t){for(var e=cae(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},uae=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var i=r.getBoundingClientRect(),a=Math.round(i.height);if(t.body.removeChild(n),a===e)return!0}}return!1},dae=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=Kw(n.data).map(function(l){return mi(l)}),a=0,s={},o=i.every(function(l,A){r.setStart(n,a),r.setEnd(n,a+l.length);var u=r.getBoundingClientRect();a+=l.length;var d=u.x>s.x||u.y>s.y;return s=u,A===0?!0:d});return t.body.removeChild(e),o},hae=function(){return typeof new Image().crossOrigin<"u"},fae=function(){return typeof new XMLHttpRequest().responseType=="string"},mae=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},OI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},pae=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var i=new Image,a=e.toDataURL();i.src=a;var s=Px(r,r,0,0,i);return n.fillStyle="red",n.fillRect(0,0,r,r),MI(s).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var A=t.createElement("div");return A.style.backgroundImage="url("+a+")",A.style.height=r+"px",OI(l)?MI(Px(r,r,0,0,A)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),OI(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Px=function(t,e,r,n,i){var a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return s.setAttributeNS(null,"width",t.toString()),s.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(i),s},MI=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},aa={get SUPPORT_RANGE_BOUNDS(){var t=uae(document);return Object.defineProperty(aa,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=aa.SUPPORT_RANGE_BOUNDS&&dae(document);return Object.defineProperty(aa,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=mae(document);return Object.defineProperty(aa,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?pae(document):Promise.resolve(!1);return Object.defineProperty(aa,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=hae();return Object.defineProperty(aa,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=fae();return Object.defineProperty(aa,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(aa,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(aa,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},a0=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),gae=function(t,e,r,n){var i=bae(e,r),a=[],s=0;return i.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(aa.SUPPORT_RANGE_BOUNDS){var l=QI(n,s,o.length).getClientRects();if(l.length>1){var A=tB(o),u=0;A.forEach(function(h){a.push(new a0(h,Ac.fromDOMRectList(t,QI(n,u+s,h.length).getClientRects()))),u+=h.length})}else a.push(new a0(o,Ac.fromDOMRectList(t,l)))}else{var d=n.splitText(o.length);a.push(new a0(o,vae(t,n))),n=d}else aa.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));s+=o.length}),a},vae=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var a=Vw(t,n);return n.firstChild&&i.replaceChild(n.firstChild,n),a}}return Ac.EMPTY},QI=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(t,e),i.setEnd(t,e+r),i},tB=function(t){if(aa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Aae(t)},wae=function(t,e){if(aa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return xae(t,e)},bae=function(t,e){return e.letterSpacing!==0?tB(t):wae(t,e)},yae=[32,160,4961,65792,65793,4153,4241],xae=function(t,e){for(var r=qte(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,a=function(){if(i.value){var s=i.value.slice(),o=Kw(s),l="";o.forEach(function(A){yae.indexOf(A)===-1?l+=mi(A):(l.length&&n.push(l),n.push(mi(A)),l="")}),l.length&&n.push(l)}};!(i=r.next()).done;)a();return n},_ae=function(){function t(e,r,n){this.text=Eae(r.data,n.textTransform),this.textBounds=gae(e,this.text,n,r)}return t}(),Eae=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Bae,Cae);case 2:return t.toUpperCase();default:return t}},Bae=/(^|\s|:|-|\(|\))([a-z])/g,Cae=function(t,e,r){return t.length>0?e+r.toUpperCase():t},r6=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e}(Sl),n6=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e}(Sl),i6=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this,a=new XMLSerializer,s=Vw(r,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(Sl),a6=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.value=n.value,i}return e}(Sl),Lx=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e}(Sl),Nae=[{type:15,flags:0,unit:"px",number:3}],Sae=[{type:16,flags:0,number:50}],kae=function(t){return t.width>t.height?new Ac(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ac(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Tae=function(t){var e=t.type===Iae?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Sv="checkbox",kv="radio",Iae="password",HI=707406591,rB=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=Tae(n),(i.type===Sv||i.type===kv)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=kae(i.bounds)),i.type){case Sv:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Nae;break;case kv:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Sae;break}return i}return e}(Sl),s6=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this,a=n.options[n.selectedIndex||0];return i.value=a&&a.text||"",i}return e}(Sl),o6=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.value=n.value,i}return e}(Sl),l6=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=A6(r,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?n0(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):ec.TRANSPARENT,s=n.contentWindow.document.body?n0(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):ec.TRANSPARENT;i.backgroundColor=bA(a)?bA(s)?i.styles.backgroundColor:s:a}}catch{}return i}return e}(Sl),Fae=["OL","UL","MENU"],D1=function(t,e,r,n){for(var i=e.firstChild,a=void 0;i;i=a)if(a=i.nextSibling,u6(i)&&i.data.trim().length>0)r.textNodes.push(new _ae(t,i,r.styles));else if(bh(i))if(m6(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return D1(t,o,r,n)});else{var s=c6(t,i);s.styles.isVisible()&&(Pae(i,s,n)?s.flags|=4:Lae(s.styles)&&(s.flags|=2),Fae.indexOf(i.tagName)!==-1&&(s.flags|=8),r.elements.push(s),i.slot,i.shadowRoot?D1(t,i.shadowRoot,s,n):!Tv(i)&&!d6(i)&&!Iv(i)&&D1(t,i,s,n))}},c6=function(t,e){return Rx(e)?new r6(t,e):h6(e)?new n6(t,e):d6(e)?new i6(t,e):Dae(e)?new a6(t,e):Rae(e)?new Lx(t,e):Uae(e)?new rB(t,e):Iv(e)?new s6(t,e):Tv(e)?new o6(t,e):f6(e)?new l6(t,e):new Sl(t,e)},A6=function(t,e){var r=c6(t,e);return r.flags|=4,D1(t,e,r,r),r},Pae=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||nB(t)&&r.styles.isTransparent()},Lae=function(t){return t.isPositioned()||t.isFloating()},u6=function(t){return t.nodeType===Node.TEXT_NODE},bh=function(t){return t.nodeType===Node.ELEMENT_NODE},Dx=function(t){return bh(t)&&typeof t.style<"u"&&!R1(t)},R1=function(t){return typeof t.className=="object"},Dae=function(t){return t.tagName==="LI"},Rae=function(t){return t.tagName==="OL"},Uae=function(t){return t.tagName==="INPUT"},Oae=function(t){return t.tagName==="HTML"},d6=function(t){return t.tagName==="svg"},nB=function(t){return t.tagName==="BODY"},h6=function(t){return t.tagName==="CANVAS"},VI=function(t){return t.tagName==="VIDEO"},Rx=function(t){return t.tagName==="IMG"},f6=function(t){return t.tagName==="IFRAME"},KI=function(t){return t.tagName==="STYLE"},Mae=function(t){return t.tagName==="SCRIPT"},Tv=function(t){return t.tagName==="TEXTAREA"},Iv=function(t){return t.tagName==="SELECT"},m6=function(t){return t.tagName==="SLOT"},jI=function(t){return t.tagName.indexOf("-")>0},Qae=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,i=e.counterReset,a=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var s=[];return a&&i.forEach(function(o){var l=r.counters[o.counter];s.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),s},t}(),zI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},$I={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hae={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Vae={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},eh=function(t,e,r,n,i,a){return t<e||t>r?z0(t,i,a.length>0):n.integers.reduce(function(s,o,l){for(;t>=o;)t-=o,s+=n.values[l];return s},"")+a},p6=function(t,e,r,n){var i="";do r||t--,i=n(t)+i,t/=e;while(t*e>=e);return i},hi=function(t,e,r,n,i){var a=r-e+1;return(t<0?"-":"")+(p6(Math.abs(t),a,n,function(s){return mi(Math.floor(s%a)+e)})+i)},nu=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return p6(Math.abs(t),n,!1,function(i){return e[Math.floor(i%n)]})+r},dh=1,Hc=2,Vc=4,Pm=8,$l=function(t,e,r,n,i,a){if(t<-9999||t>9999)return z0(t,4,i.length>0);var s=Math.abs(t),o=i;if(s===0)return e[0]+o;for(var l=0;s>0&&l<=4;l++){var A=s%10;A===0&&Ri(a,dh)&&o!==""?o=e[A]+o:A>1||A===1&&l===0||A===1&&l===1&&Ri(a,Hc)||A===1&&l===1&&Ri(a,Vc)&&t>100||A===1&&l>1&&Ri(a,Pm)?o=e[A]+(l>0?r[l-1]:"")+o:A===1&&l>0&&(o=r[l-1]+o),s=Math.floor(s/10)}return(t<0?n:"")+o},GI="",WI="",qI="",Vy="",z0=function(t,e,r){var n=r?". ":"",i=r?"":"",a=r?", ":"",s=r?" ":"";switch(e){case 0:return""+s;case 1:return""+s;case 2:return""+s;case 5:var o=hi(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return nu(t,"",i);case 6:return eh(t,1,3999,zI,3,n).toLowerCase();case 7:return eh(t,1,3999,zI,3,n);case 8:return hi(t,945,969,!1,n);case 9:return hi(t,97,122,!1,n);case 10:return hi(t,65,90,!1,n);case 11:return hi(t,1632,1641,!0,n);case 12:case 49:return eh(t,1,9999,$I,3,n);case 35:return eh(t,1,9999,$I,3,n).toLowerCase();case 13:return hi(t,2534,2543,!0,n);case 14:case 30:return hi(t,6112,6121,!0,n);case 15:return nu(t,"",i);case 16:return nu(t,"",i);case 17:case 48:return $l(t,"",GI,"",i,Hc|Vc|Pm);case 47:return $l(t,"",WI,"",i,dh|Hc|Vc|Pm);case 42:return $l(t,"",GI,"",i,Hc|Vc|Pm);case 41:return $l(t,"",WI,"",i,dh|Hc|Vc|Pm);case 26:return $l(t,"","",qI,i,0);case 25:return $l(t,"","",qI,i,dh|Hc|Vc);case 31:return $l(t,"","",Vy,a,dh|Hc|Vc);case 33:return $l(t,"","",Vy,a,0);case 32:return $l(t,"","",Vy,a,dh|Hc|Vc);case 18:return hi(t,2406,2415,!0,n);case 20:return eh(t,1,19999,Vae,3,n);case 21:return hi(t,2790,2799,!0,n);case 22:return hi(t,2662,2671,!0,n);case 22:return eh(t,1,10999,Hae,3,n);case 23:return nu(t,"");case 24:return nu(t,"");case 27:return hi(t,3302,3311,!0,n);case 28:return nu(t,"",i);case 29:return nu(t,"",i);case 34:return hi(t,3792,3801,!0,n);case 37:return hi(t,6160,6169,!0,n);case 38:return hi(t,4160,4169,!0,n);case 39:return hi(t,2918,2927,!0,n);case 40:return hi(t,1776,1785,!0,n);case 43:return hi(t,3046,3055,!0,n);case 44:return hi(t,3174,3183,!0,n);case 45:return hi(t,3664,3673,!0,n);case 46:return hi(t,3872,3881,!0,n);case 3:default:return hi(t,48,57,!0,n)}},g6="data-html2canvas-ignore",XI=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Qae,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,i=Kae(e,r);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,o=i.contentWindow,l=o.document,A=$ae(i).then(function(){return ja(n,void 0,void 0,function(){var u,d;return wa(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Xae),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),u=this.options.onclone,d=this.clonedReferenceElement,typeof d>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,zae(l)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,d)}).then(function(){return i})]:[2,i]}})})});return l.open(),l.write(Wae(document.doctype)+"<html></html>"),qae(this.referenceElement.ownerDocument,a,s),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),A},t.prototype.createElementClone=function(e){if(Fx(e,2))debugger;if(h6(e))return this.createCanvasClone(e);if(VI(e))return this.createVideoClone(e);if(KI(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return Rx(r)&&(Rx(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),jI(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Ky(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(a,s){return s&&typeof s.cssText=="string"?a+s.cssText:a},""),i=e.cloneNode(!1);return i.textContent=n,i}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var a=e.getContext("2d"),s=i.getContext("2d");if(s)if(!this.options.allowTaint&&a)s.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}s.drawImage(e,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},t.prototype.appendChildNode=function(e,r,n){(!bh(r)||!Mae(r)&&!r.hasAttribute(g6)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!bh(r)||!KI(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var i=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(bh(a)&&m6(a)&&typeof a.assignedNodes=="function"){var s=a.assignedNodes();s.length&&s.forEach(function(o){return i.appendChildNode(r,o,n)})}else this.appendChildNode(r,a,n)},t.prototype.cloneNode=function(e,r){if(u6(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&bh(e)&&(Dx(e)||R1(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var a=n.getComputedStyle(e),s=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&Dx(i)&&(this.clonedReferenceElement=i),nB(i)&&Zae(i);var l=this.counters.parse(new NI(this.context,a)),A=this.resolvePseudoContent(e,i,s,s0.BEFORE);jI(e)&&(r=!0),VI(e)||this.cloneChildNodes(e,i,r),A&&i.insertBefore(A,i.firstChild);var u=this.resolvePseudoContent(e,i,o,s0.AFTER);return u&&i.appendChild(u),this.counters.pop(l),(a&&(this.options.copyStyles||R1(e))&&!f6(e)||r)&&Ky(a,i),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(Tv(e)||Iv(e))&&(Tv(i)||Iv(i))&&(i.value=e.value),i}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,i){var a=this;if(n){var s=n.content,o=r.ownerDocument;if(!(!o||!s||s==="none"||s==="-moz-alt-content"||n.display==="none")){this.counters.parse(new NI(this.context,n));var l=new Die(this.context,n),A=o.createElement("html2canvaspseudoelement");Ky(n,A),l.content.forEach(function(d){if(d.type===0)A.appendChild(o.createTextNode(d.value));else if(d.type===22){var h=o.createElement("img");h.src=d.value,h.style.opacity="1",A.appendChild(h)}else if(d.type===18){if(d.name==="attr"){var f=d.values.filter(vn);f.length&&A.appendChild(o.createTextNode(e.getAttribute(f[0].value)||""))}else if(d.name==="counter"){var p=d.values.filter(uf),g=p[0],v=p[1];if(g&&vn(g)){var C=a.counters.getCounterValue(g.value),I=v&&vn(v)?Ix.parse(a.context,v.value):3;A.appendChild(o.createTextNode(z0(C,I,!1)))}}else if(d.name==="counters"){var F=d.values.filter(uf),g=F[0],E=F[1],v=F[2];if(g&&vn(g)){var R=a.counters.getCounterValues(g.value),L=v&&vn(v)?Ix.parse(a.context,v.value):3,N=E&&E.type===0?E.value:"",P=R.map(function(y){return z0(y,L,!1)}).join(N);A.appendChild(o.createTextNode(P))}}}else if(d.type===20)switch(d.value){case"open-quote":A.appendChild(o.createTextNode(CI(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":A.appendChild(o.createTextNode(CI(l.quotes,--a.quoteDepth,!1)));break;default:A.appendChild(o.createTextNode(d.value))}}),A.className=Ux+" "+Ox;var u=i===s0.BEFORE?" "+Ux:" "+Ox;return R1(r)?r.className.baseValue+=u:r.className+=u,A}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),s0;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(s0||(s0={}));var Kae=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(g6,"true"),t.body.appendChild(r),r},jae=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},zae=function(t){return Promise.all([].slice.call(t.images,0).map(jae))},$ae=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var i=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var a=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},Gae=["all","d","content"],Ky=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);Gae.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},Wae=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},qae=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},Xae=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},Yae=":before",Jae=":after",Ux="___html2canvas___pseudoelement_before",Ox="___html2canvas___pseudoelement_after",YI=`{
    content: "" !important;
    display: none !important;
}`,Zae=function(t){ese(t,"."+Ux+Yae+YI+`
         .`+Ox+Jae+YI)},ese=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},v6=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),tse=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(zy(e)||ase(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return ja(this,void 0,void 0,function(){var r,n,i,a,s=this;return wa(this,function(o){switch(o.label){case 0:return r=v6.isSameOrigin(e),n=!jy(e)&&this._options.useCORS===!0&&aa.SUPPORT_CORS_IMAGES&&!r,i=!jy(e)&&!r&&!zy(e)&&typeof this._options.proxy=="string"&&aa.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!jy(e)&&!zy(e)&&!i&&!n?[2]:(a=e,i?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,A){var u=new Image;u.onload=function(){return l(u)},u.onerror=A,(sse(a)||n)&&(u.crossOrigin="anonymous"),u.src=a,u.complete===!0&&setTimeout(function(){return l(u)},500),s._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(a,s){var o=aa.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var d=new FileReader;d.addEventListener("load",function(){return a(d.result)},!1),d.addEventListener("error",function(h){return s(h)},!1),d.readAsDataURL(l.response)}else s("Failed to proxy resource "+i+" with status code "+l.status)},l.onerror=s;var A=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+A+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var u=r._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return s("Timed out ("+u+"ms) proxying "+i)}}l.send()})},t}(),rse=/^data:image\/svg\+xml/i,nse=/^data:image\/.*;base64,/i,ise=/^data:image\/.*/i,ase=function(t){return aa.SUPPORT_SVG_DRAWING||!ose(t)},jy=function(t){return ise.test(t)},sse=function(t){return nse.test(t)},zy=function(t){return t.substr(0,4)==="blob"},ose=function(t){return t.substr(-3).toLowerCase()==="svg"||rse.test(t)},Ht=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),th=function(t,e,r){return new Ht(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},qg=function(){function t(e,r,n,i){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=i}return t.prototype.subdivide=function(e,r){var n=th(this.start,this.startControl,e),i=th(this.startControl,this.endControl,e),a=th(this.endControl,this.end,e),s=th(n,i,e),o=th(i,a,e),l=th(s,o,e);return r?new t(this.start,n,s,l):new t(l,o,a,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),so=function(t){return t.type===1},lse=function(){function t(e){var r=e.styles,n=e.bounds,i=Im(r.borderTopLeftRadius,n.width,n.height),a=i[0],s=i[1],o=Im(r.borderTopRightRadius,n.width,n.height),l=o[0],A=o[1],u=Im(r.borderBottomRightRadius,n.width,n.height),d=u[0],h=u[1],f=Im(r.borderBottomLeftRadius,n.width,n.height),p=f[0],g=f[1],v=[];v.push((a+l)/n.width),v.push((p+d)/n.width),v.push((s+g)/n.height),v.push((A+h)/n.height);var C=Math.max.apply(Math,v);C>1&&(a/=C,s/=C,l/=C,A/=C,d/=C,h/=C,p/=C,g/=C);var I=n.width-l,F=n.height-h,E=n.width-d,R=n.height-g,L=r.borderTopWidth,N=r.borderRightWidth,P=r.borderBottomWidth,x=r.borderLeftWidth,k=In(r.paddingTop,e.bounds.width),y=In(r.paddingRight,e.bounds.width),S=In(r.paddingBottom,e.bounds.width),_=In(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||s>0?jn(n.left+x/3,n.top+L/3,a-x/3,s-L/3,nn.TOP_LEFT):new Ht(n.left+x/3,n.top+L/3),this.topRightBorderDoubleOuterBox=a>0||s>0?jn(n.left+I,n.top+L/3,l-N/3,A-L/3,nn.TOP_RIGHT):new Ht(n.left+n.width-N/3,n.top+L/3),this.bottomRightBorderDoubleOuterBox=d>0||h>0?jn(n.left+E,n.top+F,d-N/3,h-P/3,nn.BOTTOM_RIGHT):new Ht(n.left+n.width-N/3,n.top+n.height-P/3),this.bottomLeftBorderDoubleOuterBox=p>0||g>0?jn(n.left+x/3,n.top+R,p-x/3,g-P/3,nn.BOTTOM_LEFT):new Ht(n.left+x/3,n.top+n.height-P/3),this.topLeftBorderDoubleInnerBox=a>0||s>0?jn(n.left+x*2/3,n.top+L*2/3,a-x*2/3,s-L*2/3,nn.TOP_LEFT):new Ht(n.left+x*2/3,n.top+L*2/3),this.topRightBorderDoubleInnerBox=a>0||s>0?jn(n.left+I,n.top+L*2/3,l-N*2/3,A-L*2/3,nn.TOP_RIGHT):new Ht(n.left+n.width-N*2/3,n.top+L*2/3),this.bottomRightBorderDoubleInnerBox=d>0||h>0?jn(n.left+E,n.top+F,d-N*2/3,h-P*2/3,nn.BOTTOM_RIGHT):new Ht(n.left+n.width-N*2/3,n.top+n.height-P*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||g>0?jn(n.left+x*2/3,n.top+R,p-x*2/3,g-P*2/3,nn.BOTTOM_LEFT):new Ht(n.left+x*2/3,n.top+n.height-P*2/3),this.topLeftBorderStroke=a>0||s>0?jn(n.left+x/2,n.top+L/2,a-x/2,s-L/2,nn.TOP_LEFT):new Ht(n.left+x/2,n.top+L/2),this.topRightBorderStroke=a>0||s>0?jn(n.left+I,n.top+L/2,l-N/2,A-L/2,nn.TOP_RIGHT):new Ht(n.left+n.width-N/2,n.top+L/2),this.bottomRightBorderStroke=d>0||h>0?jn(n.left+E,n.top+F,d-N/2,h-P/2,nn.BOTTOM_RIGHT):new Ht(n.left+n.width-N/2,n.top+n.height-P/2),this.bottomLeftBorderStroke=p>0||g>0?jn(n.left+x/2,n.top+R,p-x/2,g-P/2,nn.BOTTOM_LEFT):new Ht(n.left+x/2,n.top+n.height-P/2),this.topLeftBorderBox=a>0||s>0?jn(n.left,n.top,a,s,nn.TOP_LEFT):new Ht(n.left,n.top),this.topRightBorderBox=l>0||A>0?jn(n.left+I,n.top,l,A,nn.TOP_RIGHT):new Ht(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||h>0?jn(n.left+E,n.top+F,d,h,nn.BOTTOM_RIGHT):new Ht(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=p>0||g>0?jn(n.left,n.top+R,p,g,nn.BOTTOM_LEFT):new Ht(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||s>0?jn(n.left+x,n.top+L,Math.max(0,a-x),Math.max(0,s-L),nn.TOP_LEFT):new Ht(n.left+x,n.top+L),this.topRightPaddingBox=l>0||A>0?jn(n.left+Math.min(I,n.width-N),n.top+L,I>n.width+N?0:Math.max(0,l-N),Math.max(0,A-L),nn.TOP_RIGHT):new Ht(n.left+n.width-N,n.top+L),this.bottomRightPaddingBox=d>0||h>0?jn(n.left+Math.min(E,n.width-x),n.top+Math.min(F,n.height-P),Math.max(0,d-N),Math.max(0,h-P),nn.BOTTOM_RIGHT):new Ht(n.left+n.width-N,n.top+n.height-P),this.bottomLeftPaddingBox=p>0||g>0?jn(n.left+x,n.top+Math.min(R,n.height-P),Math.max(0,p-x),Math.max(0,g-P),nn.BOTTOM_LEFT):new Ht(n.left+x,n.top+n.height-P),this.topLeftContentBox=a>0||s>0?jn(n.left+x+_,n.top+L+k,Math.max(0,a-(x+_)),Math.max(0,s-(L+k)),nn.TOP_LEFT):new Ht(n.left+x+_,n.top+L+k),this.topRightContentBox=l>0||A>0?jn(n.left+Math.min(I,n.width+x+_),n.top+L+k,I>n.width+x+_?0:l-x+_,A-(L+k),nn.TOP_RIGHT):new Ht(n.left+n.width-(N+y),n.top+L+k),this.bottomRightContentBox=d>0||h>0?jn(n.left+Math.min(E,n.width-(x+_)),n.top+Math.min(F,n.height+L+k),Math.max(0,d-(N+y)),h-(P+S),nn.BOTTOM_RIGHT):new Ht(n.left+n.width-(N+y),n.top+n.height-(P+S)),this.bottomLeftContentBox=p>0||g>0?jn(n.left+x+_,n.top+R,Math.max(0,p-(x+_)),g-(P+S),nn.BOTTOM_LEFT):new Ht(n.left+x+_,n.top+n.height-(P+S))}return t}(),nn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(nn||(nn={}));var jn=function(t,e,r,n,i){var a=4*((Math.sqrt(2)-1)/3),s=r*a,o=n*a,l=t+r,A=e+n;switch(i){case nn.TOP_LEFT:return new qg(new Ht(t,A),new Ht(t,A-o),new Ht(l-s,e),new Ht(l,e));case nn.TOP_RIGHT:return new qg(new Ht(t,e),new Ht(t+s,e),new Ht(l,A-o),new Ht(l,A));case nn.BOTTOM_RIGHT:return new qg(new Ht(l,e),new Ht(l,e+o),new Ht(t+s,A),new Ht(t,A));case nn.BOTTOM_LEFT:default:return new qg(new Ht(l,A),new Ht(l-s,A),new Ht(t,e+o),new Ht(t,e))}},Fv=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},cse=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Pv=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Ase=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Xg=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),use=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),dse=function(t){return t.type===0},w6=function(t){return t.type===1},hse=function(t){return t.type===2},JI=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},fse=function(t,e,r,n,i){return t.map(function(a,s){switch(s){case 0:return a.add(e,r);case 1:return a.add(e+n,r);case 2:return a.add(e+n,r+i);case 3:return a.add(e,r+i)}return a})},b6=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),y6=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new lse(this.container),this.container.styles.opacity<1&&this.effects.push(new use(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new Ase(n,i,a))}if(this.container.styles.overflowX!==0){var s=Fv(this.curves),o=Pv(this.curves);JI(s,o)?this.effects.push(new Xg(s,6)):(this.effects.push(new Xg(s,2)),this.effects.push(new Xg(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var a=n.effects.filter(function(l){return!w6(l)});if(r||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,a),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var s=Fv(n.curves),o=Pv(n.curves);JI(s,o)||i.unshift(new Xg(o,6))}}else i.unshift.apply(i,a);n=n.parent}return i.filter(function(l){return Ri(l.target,e)})},t}(),Mx=function(t,e,r,n){t.container.elements.forEach(function(i){var a=Ri(i.flags,4),s=Ri(i.flags,2),o=new y6(i,t);Ri(i.styles.display,2048)&&n.push(o);var l=Ri(i.flags,8)?[]:n;if(a||s){var A=a||i.styles.isPositioned()?r:e,u=new b6(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var d=i.styles.zIndex.order;if(d<0){var h=0;A.negativeZIndex.some(function(p,g){return d>p.element.container.styles.zIndex.order?(h=g,!1):h>0}),A.negativeZIndex.splice(h,0,u)}else if(d>0){var f=0;A.positiveZIndex.some(function(p,g){return d>=p.element.container.styles.zIndex.order?(f=g+1,!1):f>0}),A.positiveZIndex.splice(f,0,u)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else i.styles.isFloating()?A.nonPositionedFloats.push(u):A.nonPositionedInlineLevel.push(u);Mx(o,u,a?u:r,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),Mx(o,e,r,l);Ri(i.flags,8)&&x6(i,l)})},x6=function(t,e){for(var r=t instanceof Lx?t.start:1,n=t instanceof Lx?t.reversed:!1,i=0;i<e.length;i++){var a=e[i];a.container instanceof a6&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=z0(r,a.container.styles.listStyleType,!0),r+=n?-1:1}},mse=function(t){var e=new y6(t,null),r=new b6(e),n=[];return Mx(e,r,r,n),x6(e.container,n),r},ZI=function(t,e){switch(e){case 0:return co(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return co(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return co(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return co(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},pse=function(t,e){switch(e){case 0:return co(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return co(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return co(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return co(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},gse=function(t,e){switch(e){case 0:return co(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return co(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return co(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return co(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},vse=function(t,e){switch(e){case 0:return Yg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Yg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Yg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Yg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Yg=function(t,e){var r=[];return so(t)?r.push(t.subdivide(.5,!1)):r.push(t),so(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},co=function(t,e,r,n){var i=[];return so(t)?i.push(t.subdivide(.5,!1)):i.push(t),so(r)?i.push(r.subdivide(.5,!0)):i.push(r),so(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),so(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},_6=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Lv=function(t){var e=t.styles,r=t.bounds,n=In(e.paddingLeft,r.width),i=In(e.paddingRight,r.width),a=In(e.paddingTop,r.width),s=In(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+a+s))},wse=function(t,e){return t===0?e.bounds:t===2?Lv(e):_6(e)},bse=function(t,e){return t===0?e.bounds:t===2?Lv(e):_6(e)},$y=function(t,e,r){var n=wse(hh(t.styles.backgroundOrigin,e),t),i=bse(hh(t.styles.backgroundClip,e),t),a=yse(hh(t.styles.backgroundSize,e),r,n),s=a[0],o=a[1],l=Im(hh(t.styles.backgroundPosition,e),n.width-s,n.height-o),A=xse(hh(t.styles.backgroundRepeat,e),l,a,n,i),u=Math.round(n.left+l[0]),d=Math.round(n.top+l[1]);return[A,u,d,s,o]},rh=function(t){return vn(t)&&t.value===Dh.AUTO},Jg=function(t){return typeof t=="number"},yse=function(t,e,r){var n=e[0],i=e[1],a=e[2],s=t[0],o=t[1];if(!s)return[0,0];if(Si(s)&&o&&Si(o))return[In(s,r.width),In(o,r.height)];var l=Jg(a);if(vn(s)&&(s.value===Dh.CONTAIN||s.value===Dh.COVER)){if(Jg(a)){var A=r.width/r.height;return A<a!=(s.value===Dh.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var u=Jg(n),d=Jg(i),h=u||d;if(rh(s)&&(!o||rh(o))){if(u&&d)return[n,i];if(!l&&!h)return[r.width,r.height];if(h&&l){var f=u?n:i*a,p=d?i:n/a;return[f,p]}var g=u?n:r.width,v=d?i:r.height;return[g,v]}if(l){var C=0,I=0;return Si(s)?C=In(s,r.width):Si(o)&&(I=In(o,r.height)),rh(s)?C=I*a:(!o||rh(o))&&(I=C/a),[C,I]}var F=null,E=null;if(Si(s)?F=In(s,r.width):o&&Si(o)&&(E=In(o,r.height)),F!==null&&(!o||rh(o))&&(E=u&&d?F/n*i:r.height),E!==null&&rh(s)&&(F=u&&d?E/i*n:r.width),F!==null&&E!==null)return[F,E];throw new Error("Unable to calculate background-size for element")},hh=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},xse=function(t,e,r,n,i){var a=e[0],s=e[1],o=r[0],l=r[1];switch(t){case 2:return[new Ht(Math.round(n.left),Math.round(n.top+s)),new Ht(Math.round(n.left+n.width),Math.round(n.top+s)),new Ht(Math.round(n.left+n.width),Math.round(l+n.top+s)),new Ht(Math.round(n.left),Math.round(l+n.top+s))];case 3:return[new Ht(Math.round(n.left+a),Math.round(n.top)),new Ht(Math.round(n.left+a+o),Math.round(n.top)),new Ht(Math.round(n.left+a+o),Math.round(n.height+n.top)),new Ht(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new Ht(Math.round(n.left+a),Math.round(n.top+s)),new Ht(Math.round(n.left+a+o),Math.round(n.top+s)),new Ht(Math.round(n.left+a+o),Math.round(n.top+s+l)),new Ht(Math.round(n.left+a),Math.round(n.top+s+l))];default:return[new Ht(Math.round(i.left),Math.round(i.top)),new Ht(Math.round(i.left+i.width),Math.round(i.top)),new Ht(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Ht(Math.round(i.left),Math.round(i.height+i.top))]}},_se="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e4="Hidden Text",Ese=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),i=this._document.createElement("img"),a=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),i.src=_se,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(e4)),n.appendChild(a),n.appendChild(i);var o=i.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(e4)),n.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),E6=function(){function t(e,r){this.context=e,this.options=r}return t}(),Bse=1e4,Cse=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new Ese(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(r){this.ctx.save(),hse(r)&&(this.ctx.globalAlpha=r.opacity),dse(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),w6(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return ja(this,void 0,void 0,function(){var n;return wa(this,function(i){switch(i.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return ja(this,void 0,void 0,function(){return wa(this,function(n){switch(n.label){case 0:if(Ri(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,i){var a=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+i);else{var s=tB(r.text);s.reduce(function(o,l){return a.ctx.fillText(l,o,r.bounds.top+i),o+a.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(s){return s==="normal"||s==="small-caps"}).join(""),i=Ise(r.fontFamily).join(", "),a=Lp(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,a,i].join(" "),i,a]},e.prototype.renderTextNode=function(r,n){return ja(this,void 0,void 0,function(){var i,a,s,o,l,A,u,d,h=this;return wa(this,function(f){return i=this.createFontStyle(n),a=i[0],s=i[1],o=i[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(s,o),A=l.baseline,u=l.middle,d=n.paintOrder,r.textBounds.forEach(function(p){d.forEach(function(g){switch(g){case 0:h.ctx.fillStyle=Vi(n.color),h.renderTextWithLetterSpacing(p,n.letterSpacing,A);var v=n.textShadow;v.length&&p.text.trim().length&&(v.slice(0).reverse().forEach(function(C){h.ctx.shadowColor=Vi(C.color),h.ctx.shadowOffsetX=C.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=C.offsetY.number*h.options.scale,h.ctx.shadowBlur=C.blur.number,h.renderTextWithLetterSpacing(p,n.letterSpacing,A)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Vi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(C){switch(C){case 1:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+A),p.bounds.width,1);break;case 2:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:h.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+u),p.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&p.text.trim().length&&(h.ctx.strokeStyle=Vi(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+A)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,i){if(i&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=Lv(r),s=Pv(n);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return ja(this,void 0,void 0,function(){var n,i,a,s,o,l,I,I,A,u,d,h,E,f,p,R,g,v,C,I,F,E,R;return wa(this,function(L){switch(L.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,i=r.curves,a=n.styles,s=0,o=n.textNodes,L.label=1;case 1:return s<o.length?(l=o[s],[4,this.renderTextNode(l,a)]):[3,4];case 2:L.sent(),L.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof r6))return[3,8];L.label=5;case 5:return L.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return I=L.sent(),this.renderReplacedElement(n,i,I),[3,8];case 7:return L.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof n6&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof i6))return[3,12];L.label=9;case 9:return L.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return I=L.sent(),this.renderReplacedElement(n,i,I),[3,12];case 11:return L.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof l6&&n.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,A.render(n.tree)]):[3,14];case 13:u=L.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),L.label=14;case 14:if(n instanceof rB&&(d=Math.min(n.bounds.width,n.bounds.height),n.type===Sv?n.checked&&(this.ctx.save(),this.path([new Ht(n.bounds.left+d*.39363,n.bounds.top+d*.79),new Ht(n.bounds.left+d*.16,n.bounds.top+d*.5549),new Ht(n.bounds.left+d*.27347,n.bounds.top+d*.44071),new Ht(n.bounds.left+d*.39694,n.bounds.top+d*.5649),new Ht(n.bounds.left+d*.72983,n.bounds.top+d*.23),new Ht(n.bounds.left+d*.84,n.bounds.top+d*.34085),new Ht(n.bounds.left+d*.39363,n.bounds.top+d*.79)]),this.ctx.fillStyle=Vi(HI),this.ctx.fill(),this.ctx.restore()):n.type===kv&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+d/2,n.bounds.top+d/2,d/4,0,Math.PI*2,!0),this.ctx.fillStyle=Vi(HI),this.ctx.fill(),this.ctx.restore())),Nse(n)&&n.value.length){switch(h=this.createFontStyle(a),E=h[0],f=h[1],p=this.fontMetrics.getMetrics(E,f).baseline,this.ctx.font=E,this.ctx.fillStyle=Vi(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=kse(n.styles.textAlign),R=Lv(n),g=0,n.styles.textAlign){case 1:g+=R.width/2;break;case 2:g+=R.width;break}v=R.add(g,0,0,-R.height/2+1),this.ctx.save(),this.path([new Ht(R.left,R.top),new Ht(R.left+R.width,R.top),new Ht(R.left+R.width,R.top+R.height),new Ht(R.left,R.top+R.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new a0(n.value,v),a.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ri(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(C=n.styles.listStyleImage,C.type!==0)return[3,18];I=void 0,F=C.url,L.label=15;case 15:return L.trys.push([15,17,,18]),[4,this.context.cache.match(F)];case 16:return I=L.sent(),this.ctx.drawImage(I,n.bounds.left-(I.width+10),n.bounds.top),[3,18];case 17:return L.sent(),this.context.logger.error("Error loading list-style-image "+F),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(E=this.createFontStyle(a)[0],this.ctx.font=E,this.ctx.fillStyle=Vi(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",R=new Ac(n.bounds.left,n.bounds.top+In(n.styles.paddingTop,n.bounds.width),n.bounds.width,EI(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new a0(r.listValue,R),a.letterSpacing,EI(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),L.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return ja(this,void 0,void 0,function(){var n,i,C,a,s,C,o,l,C,A,u,C,d,h,C,f,p,C,g,v,C;return wa(this,function(I){switch(I.label){case 0:if(Ri(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:I.sent(),n=0,i=r.negativeZIndex,I.label=2;case 2:return n<i.length?(C=i[n],[4,this.renderStack(C)]):[3,5];case 3:I.sent(),I.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:I.sent(),a=0,s=r.nonInlineLevel,I.label=7;case 7:return a<s.length?(C=s[a],[4,this.renderNode(C)]):[3,10];case 8:I.sent(),I.label=9;case 9:return a++,[3,7];case 10:o=0,l=r.nonPositionedFloats,I.label=11;case 11:return o<l.length?(C=l[o],[4,this.renderStack(C)]):[3,14];case 12:I.sent(),I.label=13;case 13:return o++,[3,11];case 14:A=0,u=r.nonPositionedInlineLevel,I.label=15;case 15:return A<u.length?(C=u[A],[4,this.renderStack(C)]):[3,18];case 16:I.sent(),I.label=17;case 17:return A++,[3,15];case 18:d=0,h=r.inlineLevel,I.label=19;case 19:return d<h.length?(C=h[d],[4,this.renderNode(C)]):[3,22];case 20:I.sent(),I.label=21;case 21:return d++,[3,19];case 22:f=0,p=r.zeroOrAutoZIndexOrTransformedOrOpacity,I.label=23;case 23:return f<p.length?(C=p[f],[4,this.renderStack(C)]):[3,26];case 24:I.sent(),I.label=25;case 25:return f++,[3,23];case 26:g=0,v=r.positiveZIndex,I.label=27;case 27:return g<v.length?(C=v[g],[4,this.renderStack(C)]):[3,30];case 28:I.sent(),I.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(i,a){var s=so(i)?i.start:i;a===0?n.ctx.moveTo(s.x,s.y):n.ctx.lineTo(s.x,s.y),so(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(r,n,i,a){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(i,a),this.ctx.fill(),this.ctx.translate(-i,-a)},e.prototype.resizeImage=function(r,n,i){var a;if(r.width===n&&r.height===i)return r;var s=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=s.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,i),o},e.prototype.renderBackgroundImage=function(r){return ja(this,void 0,void 0,function(){var n,i,a,s,o,l;return wa(this,function(A){switch(A.label){case 0:n=r.styles.backgroundImage.length-1,i=function(u){var d,h,f,k,z,ae,_,M,P,p,k,z,ae,_,M,g,v,C,I,F,E,R,L,N,P,x,k,y,S,_,M,K,z,ae,te,G,ue,de,T,O,V,Q;return wa(this,function(X){switch(X.label){case 0:if(u.type!==0)return[3,5];d=void 0,h=u.url,X.label=1;case 1:return X.trys.push([1,3,,4]),[4,a.context.cache.match(h)];case 2:return d=X.sent(),[3,4];case 3:return X.sent(),a.context.logger.error("Error loading background-image "+h),[3,4];case 4:return d&&(f=$y(r,n,[d.width,d.height,d.width/d.height]),k=f[0],z=f[1],ae=f[2],_=f[3],M=f[4],P=a.ctx.createPattern(a.resizeImage(d,_,M),"repeat"),a.renderRepeat(k,P,z,ae)),[3,6];case 5:dne(u)?(p=$y(r,n,[null,null,null]),k=p[0],z=p[1],ae=p[2],_=p[3],M=p[4],g=one(u.angle,_,M),v=g[0],C=g[1],I=g[2],F=g[3],E=g[4],R=document.createElement("canvas"),R.width=_,R.height=M,L=R.getContext("2d"),N=L.createLinearGradient(C,F,I,E),xI(u.stops,v).forEach(function(ie){return N.addColorStop(ie.stop,Vi(ie.color))}),L.fillStyle=N,L.fillRect(0,0,_,M),_>0&&M>0&&(P=a.ctx.createPattern(R,"repeat"),a.renderRepeat(k,P,z,ae))):hne(u)&&(x=$y(r,n,[null,null,null]),k=x[0],y=x[1],S=x[2],_=x[3],M=x[4],K=u.position.length===0?[JE]:u.position,z=In(K[0],_),ae=In(K[K.length-1],M),te=lne(u,z,ae,_,M),G=te[0],ue=te[1],G>0&&ue>0&&(de=a.ctx.createRadialGradient(y+z,S+ae,0,y+z,S+ae,G),xI(u.stops,G*2).forEach(function(ie){return de.addColorStop(ie.stop,Vi(ie.color))}),a.path(k),a.ctx.fillStyle=de,G!==ue?(T=r.bounds.left+.5*r.bounds.width,O=r.bounds.top+.5*r.bounds.height,V=ue/G,Q=1/V,a.ctx.save(),a.ctx.translate(T,O),a.ctx.transform(1,0,0,V,0,0),a.ctx.translate(-T,-O),a.ctx.fillRect(y,Q*(S-O)+O,_,M*Q),a.ctx.restore()):a.ctx.fill())),X.label=6;case 6:return n--,[2]}})},a=this,s=0,o=r.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return s<o.length?(l=o[s],[5,i(l)]):[3,4];case 2:A.sent(),A.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,i){return ja(this,void 0,void 0,function(){return wa(this,function(a){return this.path(ZI(i,n)),this.ctx.fillStyle=Vi(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,i,a){return ja(this,void 0,void 0,function(){var s,o;return wa(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,i,a)]:[3,2];case 1:return l.sent(),[2];case 2:return s=pse(a,i),this.path(s),this.ctx.fillStyle=Vi(r),this.ctx.fill(),o=gse(a,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return ja(this,void 0,void 0,function(){var n,i,a,s,o,l,A,u,d=this;return wa(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,i=!bA(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],s=Sse(hh(n.backgroundClip,0),r.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),bA(n.backgroundColor)||(this.ctx.fillStyle=Vi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(f){d.ctx.save();var p=Fv(r.curves),g=f.inset?0:Bse,v=fse(p,-g+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(d.path(p),d.ctx.clip(),d.mask(v)):(d.mask(p),d.ctx.clip(),d.path(v)),d.ctx.shadowOffsetX=f.offsetX.number+g,d.ctx.shadowOffsetY=f.offsetY.number,d.ctx.shadowColor=Vi(f.color),d.ctx.shadowBlur=f.blur.number,d.ctx.fillStyle=f.inset?Vi(f.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),h.label=2;case 2:o=0,l=0,A=a,h.label=3;case 3:return l<A.length?(u=A[l],u.style!==0&&!bA(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,i,a,s){return ja(this,void 0,void 0,function(){var o,l,A,u,d,h,f,p,g,v,C,I,F,E,R,L,R,L;return wa(this,function(N){return this.ctx.save(),o=vse(a,i),l=ZI(a,i),s===2&&(this.path(l),this.ctx.clip()),so(l[0])?(A=l[0].start.x,u=l[0].start.y):(A=l[0].x,u=l[0].y),so(l[1])?(d=l[1].end.x,h=l[1].end.y):(d=l[1].x,h=l[1].y),i===0||i===2?f=Math.abs(A-d):f=Math.abs(u-h),this.ctx.beginPath(),s===3?this.formatPath(o):this.formatPath(l.slice(0,2)),p=n<3?n*3:n*2,g=n<3?n*2:n,s===3&&(p=n,g=n),v=!0,f<=p*2?v=!1:f<=p*2+g?(C=f/(2*p+g),p*=C,g*=C):(I=Math.floor((f+g)/(p+g)),F=(f-I*p)/(I-1),E=(f-(I+1)*p)/I,g=E<=0||Math.abs(g-F)<Math.abs(g-E)?F:E),v&&(s===3?this.ctx.setLineDash([0,p+g]):this.ctx.setLineDash([p,g])),s===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Vi(r),this.ctx.stroke(),this.ctx.setLineDash([]),s===2&&(so(l[0])&&(R=l[3],L=l[0],this.ctx.beginPath(),this.formatPath([new Ht(R.end.x,R.end.y),new Ht(L.start.x,L.start.y)]),this.ctx.stroke()),so(l[1])&&(R=l[1],L=l[2],this.ctx.beginPath(),this.formatPath([new Ht(R.end.x,R.end.y),new Ht(L.start.x,L.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return ja(this,void 0,void 0,function(){var n;return wa(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Vi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=mse(r),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(E6),Nse=function(t){return t instanceof o6||t instanceof s6?!0:t instanceof rB&&t.type!==kv&&t.type!==Sv},Sse=function(t,e){switch(t){case 0:return Fv(e);case 2:return cse(e);case 1:default:return Pv(e)}},kse=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Tse=["-apple-system","system-ui"],Ise=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return Tse.indexOf(e)===-1}):t},Fse=function(t){Ko(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(r){return ja(this,void 0,void 0,function(){var n,i;return wa(this,function(a){switch(a.label){case 0:return n=Px(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Pse(n)];case 1:return i=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Vi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(E6),Pse=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Lse=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Tg([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Tg([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Tg([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Tg([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),Dse=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new Lse({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new tse(this,e)}return t.instanceCount=1,t}(),Jw=function(t,e){return e===void 0&&(e={}),Rse(t,e)};typeof window<"u"&&v6.setContext(window);var Rse=function(t,e){return ja(void 0,void 0,void 0,function(){var r,n,i,a,s,o,l,A,u,d,h,f,p,g,v,C,I,F,E,R,N,L,N,P,x,k,y,S,_,M,K,z,ae,te,G,ue,de,T,O,V;return wa(this,function(Q){switch(Q.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(P=e.allowTaint)!==null&&P!==void 0?P:!1,imageTimeout:(x=e.imageTimeout)!==null&&x!==void 0?x:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},a=vx({logging:(y=e.logging)!==null&&y!==void 0?y:!0,cache:e.cache},i),s={windowWidth:(S=e.windowWidth)!==null&&S!==void 0?S:n.innerWidth,windowHeight:(_=e.windowHeight)!==null&&_!==void 0?_:n.innerHeight,scrollX:(M=e.scrollX)!==null&&M!==void 0?M:n.pageXOffset,scrollY:(K=e.scrollY)!==null&&K!==void 0?K:n.pageYOffset},o=new Ac(s.scrollX,s.scrollY,s.windowWidth,s.windowHeight),l=new Dse(a,o),A=(z=e.foreignObjectRendering)!==null&&z!==void 0?z:!1,u={allowTaint:(ae=e.allowTaint)!==null&&ae!==void 0?ae:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:A,copyStyles:A},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),d=new XI(l,t,u),h=d.clonedReferenceElement,h?[4,d.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=Q.sent(),p=nB(h)||Oae(h)?fte(h.ownerDocument):Vw(l,h),g=p.width,v=p.height,C=p.left,I=p.top,F=Use(l,h,e.backgroundColor),E={canvas:e.canvas,backgroundColor:F,scale:(G=(te=e.scale)!==null&&te!==void 0?te:n.devicePixelRatio)!==null&&G!==void 0?G:1,x:((ue=e.x)!==null&&ue!==void 0?ue:0)+C,y:((de=e.y)!==null&&de!==void 0?de:0)+I,width:(T=e.width)!==null&&T!==void 0?T:Math.ceil(g),height:(O=e.height)!==null&&O!==void 0?O:Math.ceil(v)},A?(l.logger.debug("Document cloned, using foreign object rendering"),N=new Fse(l,E),[4,N.render(h)]):[3,3];case 2:return R=Q.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+C+","+I+" with size "+g+"x"+v+" using computed rendering"),l.logger.debug("Starting DOM parsing"),L=A6(l,h),F===L.styles.backgroundColor&&(L.styles.backgroundColor=ec.TRANSPARENT),l.logger.debug("Starting renderer for element at "+E.x+","+E.y+" with size "+E.width+"x"+E.height),N=new Cse(l,E),[4,N.render(L)];case 4:R=Q.sent(),Q.label=5;case 5:return(!((V=e.removeContainer)!==null&&V!==void 0)||V)&&(XI.destroy(f)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,R]}})})},Use=function(t,e,r){var n=e.ownerDocument,i=n.documentElement?n0(t,getComputedStyle(n.documentElement).backgroundColor):ec.TRANSPARENT,a=n.body?n0(t,getComputedStyle(n.body).backgroundColor):ec.TRANSPARENT,s=typeof r=="string"?n0(t,r):r===null?ec.TRANSPARENT:4294967295;return e===n.documentElement?bA(i)?bA(a)?s:a:i:s};const Ose=Object.freeze(Object.defineProperty({__proto__:null,default:Jw},Symbol.toStringTag,{value:"Module"})),Qx=({companies:t,sites:e,agreements:r,transactions:n})=>{const i=E=>{const R=t.find(L=>String(L.id)===String(E));return R?R.name:"Bilinmeyen Firma"},a=E=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(E),s=(E,R)=>{const L=parseInt(E)||0,N=parseInt(R)||0;return L*N},o=(E,R)=>s(E,R)*2;return{getCompanyName:i,formatCurrency:a,calculateTotalElevators:s,calculatePanels:o,calculatePanelsForType:(E,R,L,N)=>E==="business_center"?parseInt(N)||0:o(R,L),calculateAveragePeople:E=>(parseInt(E)||0)*3,calculateSummaryStats:(E,R)=>{const L=E.length,N=E.filter(z=>z.siteType!=="business_center").length,P=E.filter(z=>z.siteType==="business_center").length,x=E.reduce((z,ae)=>z+(parseInt(ae.elevators)||0),0),k=E.reduce((z,ae)=>z+(parseInt(ae.panels)||0),0),y=E.reduce((z,ae)=>ae.hasPendingPayment&&ae.pendingPayments?z+ae.pendingPayments.reduce((te,G)=>te+(parseFloat(G.amount)||0),0):z,0),S=E.reduce((z,ae)=>ae.siteType==="site"?z+(parseInt(ae.apartmentCount)||0):z,0),_=E.reduce((z,ae)=>ae.siteType==="site"?z+(parseInt(ae.averagePeople)||0):z,0),M=E.reduce((z,ae)=>ae.siteType==="business_center"?z+(parseInt(ae.peopleCount)||0):z,0),K=_+M;return{totalSites:L,regularSites:N,businessCenters:P,totalElevators:x,totalPanels:k,totalPendingPayments:y,totalApartments:S,totalPeople:K,totalSitePeople:_,totalBusinessCenterPeople:M}},generateBlockLabels:E=>{const R=[];for(let L=0;L<E;L++)R.push(String.fromCharCode(65+L));return R},getActiveAgreementsForSite:E=>r.filter(R=>R.siteIds&&R.siteIds.includes(E)&&R.status==="active"),getSitePaymentHistoryDetailed:(E,R,L,N)=>R.filter(P=>{var x;return P.type==="expense"&&P.source.includes("Site demesi")&&P.source.includes(((x=e.find(k=>k.id===E))==null?void 0:x.name)||"")}).map(P=>{var K;const x=P.description.match(/anlamas.*?(\d+)/i);let k="Unknown",y=null,S=0,_=0,M=0;if(x){const z=L.filter(ae=>ae.siteIds&&ae.siteIds.includes(E)&&P.description.includes(i(ae.companyId)));z.length>0&&(y=z.sort((ae,te)=>{const G=Math.abs(new Date(ae.startDate)-new Date(P.date)),ue=Math.abs(new Date(te.startDate)-new Date(P.date));return G-ue})[0],k=y.id,S=parseInt((K=y.sitePanelCounts)==null?void 0:K[E])||0,_=parseFloat(y.weeklyRatePerPanel)||0,M=_)}return{...P,agreementId:k,agreement:y,panelCount:S,weeklyRatePerPanel:_,weeklyTotalAmount:M,totalPaid:Math.abs(P.amount)}}).sort((P,x)=>new Date(x.date)-new Date(P.date)),calculatePendingPayments:(E,R,L,N)=>{if(!E||!R||!L||!N)return[];const P=[],x=[E.id,E.siteId,E._docId,String(E.id),String(E.siteId),String(E._docId)].filter(y=>y!=null&&y!==void 0),k=R.filter(y=>!y.siteIds||!Array.isArray(y.siteIds)||y.isDeleted||y.isArchived?!1:y.siteIds.some(_=>{const M=String(_);return x.some(K=>{const z=String(K);return M===z||M.toLowerCase()===z.toLowerCase()})}));return console.log("calculatePendingPayments - Site:",E.id,"Found agreements:",k.length,k.map(y=>({id:y.id,status:y.status,siteIds:y.siteIds,companyId:y.companyId}))),k.forEach(y=>{const S=L.find(z=>z.id===y.companyId),_=S?S.name:"Bilinmeyen Firma";let M=0,K=null;for(const z of x)if(y.sitePanelCounts&&y.sitePanelCounts[z]&&(M=parseInt(y.sitePanelCounts[z])||0,M>0)){K=z;break}if(console.log("calculatePendingPayments - Agreement:",y.id,"Site:",E.id,"PanelCount:",M,"MatchedSiteId:",K),M>0){const z=parseFloat(y.weeklyRatePerPanel)||0,ae=z*M,te=parseFloat(E.agreementPercentage)||25;let G=0,ue=null,de=null;y.dateRanges&&Array.isArray(y.dateRanges)&&y.dateRanges.length>0?y.dateRanges.forEach(X=>{const ie=new Date(X.startDate),ee=new Date(X.endDate),Z=Math.ceil((ee-ie)/(7*24*60*60*1e3));G+=Z,(!ue||ie<ue)&&(ue=ie),(!de||ee>de)&&(de=ee)}):(ue=new Date(y.startDate),de=new Date(y.endDate),G=Math.ceil((de-ue)/6048e5));const T=ae*te*G/100,V=N.filter(X=>{if(X.type!=="expense")return!1;const ie=X.source&&X.source.includes("Site demesi")&&X.source.includes(E.name),ee=X.source&&(X.source.includes(y.id)||X.source.includes(`Anlama ${y.id}`)||X.agreementId&&String(X.agreementId)===String(y.id)),Z=X.agreementId&&X.siteId&&String(X.agreementId)===String(y.id)&&x.some(re=>String(X.siteId)===String(re));return ie&&ee||Z}).reduce((X,ie)=>X+Math.abs(ie.amount||0),0),Q=Math.max(0,T-V);console.log("calculatePendingPayments - Agreement:",y.id,{panelCount:M,weeklyRatePerPanel:z,weeklyTotalAmount:ae,sitePercentage:te,totalWeeks:G,siteTotalAmount:T,totalPaid:V,pendingAmount:Q}),Q>0&&P.push({agreementId:y.id,companyName:_,panelCount:M,weeklyRatePerPanel:z,weeklyTotalAmount:ae,sitePercentage:te,siteTotalAmount:T,totalPaid:V,amount:Q,startDate:ue?ue.toISOString().split("T")[0]:y.startDate,endDate:de?de.toISOString().split("T")[0]:y.endDate,totalWeeks:G})}}),P},getPendingPaymentsDetailed:(E,R,L)=>E.pendingPayments?E.pendingPayments.map(N=>{const P=R.find(S=>String(S.id)===String(N.agreementId));let x=0,k=0,y=0;return P&&P.sitePanelCounts&&(x=parseInt(P.sitePanelCounts[E.id])||0,k=parseFloat(P.weeklyRatePerPanel)||0,y=k),{...N,agreement:P,panelCount:x,weeklyRatePerPanel:k,weeklyTotalAmount:y}}):[],calculatePanelsSold:(E,R)=>R.filter(N=>N.siteIds&&N.siteIds.includes(E)).reduce((N,P)=>{const x=P.sitePanelCounts&&P.sitePanelCounts[E]?parseInt(P.sitePanelCounts[E]):0;return N+x},0),generateSitePDF:async(E,R)=>{if(!(!R.current||!E))try{const L=R.current.cloneNode(!0);L.querySelectorAll("button, .btn").forEach(x=>x.style.display="none");const P=window.open("","_blank");P.document.write(`
        <html>
          <head>
            <title>${E.name} - Detay</title>
            <style>
              body { font-family: Arial, sans-serif; }
              .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
              .header { text-align: center; margin-bottom: 30px; }
              .section { margin-bottom: 30px; }
              .section-title { border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 15px; }
              .info-row { display: flex; margin-bottom: 10px; }
              .info-label { font-weight: bold; width: 200px; }
              .info-value { flex: 1; }
              table { width: 100%; border-collapse: collapse; margin: 15px 0; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f2f2f2; }
              .text-center { text-align: center; }
              .text-success { color: #28a745; }
              .text-muted { color: #6c757d; }
            </style>
          </head>
          <body>
            <div class="container">
              ${L.innerHTML}
            </div>
          </body>
        </html>
      `),P.document.close(),P.onload=async()=>{const x=await Jw(P.document.body,{scale:2,useCORS:!0}),k=x.toDataURL("image/png"),y=new Xt("p","mm","a4"),S=210,_=297,M=x.height*S/x.width;let K=M,z=0;for(y.addImage(k,"PNG",0,z,S,M),K-=_;K>=0;)z=K-M,y.addPage(),y.addImage(k,"PNG",0,z,S,M),K-=_;y.save(`${E.name}_detay.pdf`),P.close(),await window.showAlert("Baarl","PDF dosyas baaryla oluturuldu ve indirildi.","success")}}catch(L){console.error("Error generating PDF:",L),await window.showAlert("Hata","PDF oluturma srasnda bir hata olutu.","error")}},getPanelUsageInfo:(E,R,L,N,P)=>{if(!N||!P)return null;const x=r.filter(S=>S.siteIds&&S.siteIds.includes(E)&&S.status==="active"),k=new Date(N),y=new Date(P);for(const S of x){const _=new Date(S.startDate),M=new Date(S.endDate);if(k<=M&&y>=_&&S.siteBlockSelections&&S.siteBlockSelections[E]&&S.siteBlockSelections[E].includes(R)&&S.sitePanelSelections&&S.sitePanelSelections[E]&&S.sitePanelSelections[E][R]&&S.sitePanelSelections[E][R].includes(L))return{agreementId:S.id,companyName:i(S.companyId),startDate:S.startDate,endDate:S.endDate}}return null},dateRangesOverlap:(E,R,L,N)=>E<=N&&L<=R}},B6=()=>{var _,M;const[t,e]=D.useState({site:null,agreements:[],transactions:[]}),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState(!0),[l,A]=D.useState({totalPanels:0,usedPanels:0,activeAgreements:0,totalRevenue:0,pendingPayments:0,totalPendingAmount:0,totalPaidAmount:0}),[u,d]=D.useState([]),[h,f]=D.useState({dateFrom:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],dateTo:new Date().toISOString().split("T")[0],showPaid:!0,showUnpaid:!0}),[p,g]=D.useState(!0),v=cc(),C=v==null?void 0:v.siteId;D.useEffect(()=>{(async()=>{if(!C){o(!1);return}try{const[z,ae,te,G,ue]=await Promise.all([mq(C),Xa(),Dw(),Sa(),lc()]);if(e(z),n(ae),a(te),z.site){const de=parseInt(z.site.panels)||0,T=ce=>ce.paymentReceived||ce.creditPaymentReceived;let O=0;z.agreements.filter(ce=>ce.status==="active"&&T(ce)&&Array.isArray(ce.siteIds)&&ce.siteIds.includes(C)).forEach(ce=>{var Y;O+=((Y=ce.sitePanelCounts)==null?void 0:Y[C])||0});const V=z.agreements.filter(ce=>ce.status==="active"&&Array.isArray(ce.siteIds)&&ce.siteIds.includes(C)).length,Q=z.transactions.filter(ce=>{var Y;return ce.type==="income"&&((Y=ce.source)==null?void 0:Y.includes("Anlama demesi"))&&z.agreements.some(ge=>{var q;return Array.isArray(ge.siteIds)&&ge.siteIds.includes(C)&&((q=ce.source)==null?void 0:q.includes(ge.id))})}),X=z.transactions.filter(ce=>{var Y,ge;return ce.type==="expense"&&((Y=ce.source)==null?void 0:Y.includes("Site demesi"))&&((ge=ce.source)==null?void 0:ge.includes(z.site.name))}),ie=[...Q,...X].reduce((ce,Y)=>ce+Math.abs(Y.amount),0),Z=Qx({companies:ae,sites:[z.site],agreements:G,transactions:ue}).calculatePendingPayments(z.site,G,ae,ue),re=Z.reduce((ce,Y)=>{const ge=parseFloat(Y.amount)||0;return ce+(isNaN(ge)?0:ge)},0);d(Z),A({totalPanels:de,usedPanels:O,activeAgreements:V,totalRevenue:ie||0,futurePayments:Z.length,totalFutureAmount:isNaN(re)?0:re})}else console.error("Site not found for siteId:",C),A({totalPanels:0,usedPanels:0,activeAgreements:0,totalRevenue:0,futurePayments:0,totalFutureAmount:0})}catch(z){console.error("Error fetching site data:",z),A({totalPanels:0,usedPanels:0,activeAgreements:0,totalRevenue:0,futurePayments:0,totalFutureAmount:0})}finally{o(!1)}})()},[C]);const I=K=>{const z=r.find(ae=>String(ae.id)===String(K));return z?z.name:"Unknown"},F=(K,z,ae,te)=>i.find(G=>G.agreementId===K.toString()&&G.siteId===z&&G.blockId===ae&&G.panelId===te.toString()),E=K=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(K),R=K=>new Date(K).toLocaleDateString("tr-TR"),L=K=>{const z=[];for(let ae=0;ae<K;ae++)z.push(String.fromCharCode(65+ae));return z},N=()=>{if(!t.site)return[];const K=t.site.siteType==="business_center",z=K?1:parseInt(t.site.blocks)||0,ae=K?0:parseInt(t.site.elevatorsPerBlock)||0,te=2,G=K?parseInt(t.site.panels)||0:ae*te,ue=[];let de=1;const T=K?["A"]:L(z);for(let O=0;O<z;O++){const V=O+1,Q=T[O]||"A",X=[];for(let ie=0;ie<G;ie++)if(de<=l.totalPanels){const ee=`panel-${ie+1}`,Z=P(O,ie);X.push({panelNumber:de,panelId:ee,isActive:Z,blockIndex:O,panelInBlock:ie,elevatorNumber:Math.floor(ie/te)+1,panelInElevator:ie%te+1}),de++}X.length>0&&ue.push({blockNumber:V,blockLabel:Q,panels:X,activePanels:X.filter(ie=>ie.isActive).length,totalPanels:X.length})}return ue},P=(K,z)=>{var T;const ae=O=>O.paymentReceived||O.creditPaymentReceived,te=t.agreements.filter(O=>O.status==="active"&&ae(O)&&Array.isArray(O.siteIds)&&O.siteIds.includes(C)),G=String.fromCharCode(65+K),ue=`${C}-block-${G}`,de=`panel-${z+1}`;for(const O of te)if(O.sitePanelSelections&&O.sitePanelSelections[C]){const V=O.sitePanelSelections[C];if(V[ue]){if(O.dateRanges&&Array.isArray(O.dateRanges)&&O.dateRanges.length>0)for(let Q=0;Q<O.dateRanges.length;Q++){const X=`range-${Q}`,ie=((T=V[ue])==null?void 0:T[X])||[];if(Array.isArray(ie)&&ie.includes(de))return!0}else if(Array.isArray(V[ue])&&V[ue].includes(de))return!0}}return!1},x=(K,z)=>{var T;const ae=O=>O.paymentReceived||O.creditPaymentReceived,te=t.agreements.filter(O=>O.status==="active"&&ae(O)&&Array.isArray(O.siteIds)&&O.siteIds.includes(C)),G=String.fromCharCode(65+K),ue=`${C}-block-${G}`,de=`panel-${z+1}`;for(const O of te)if(O.sitePanelSelections&&O.sitePanelSelections[C]){const V=O.sitePanelSelections[C];if(V[ue]){if(O.dateRanges&&Array.isArray(O.dateRanges)&&O.dateRanges.length>0)for(let Q=0;Q<O.dateRanges.length;Q++){const X=`range-${Q}`,ie=((T=V[ue])==null?void 0:T[X])||[];if(Array.isArray(ie)&&ie.includes(de))return{agreementId:O.id,companyName:I(O.companyId),startDate:O.startDate,endDate:O.endDate,photoUrl:O.photoUrl}}else if(Array.isArray(V[ue])&&V[ue].includes(de))return{agreementId:O.id,companyName:I(O.companyId),startDate:O.startDate,endDate:O.endDate,photoUrl:O.photoUrl}}}return null},k=()=>{let K=t.agreements.filter(z=>Array.isArray(z.siteIds)&&z.siteIds.includes(C));if(!h.showPaid||!h.showUnpaid){const z=ae=>ae.paymentReceived||ae.creditPaymentReceived;h.showPaid||(K=K.filter(ae=>!z(ae))),h.showUnpaid||(K=K.filter(ae=>z(ae)))}return h.dateFrom&&(K=K.filter(z=>new Date(z.startDate)>=new Date(h.dateFrom))),h.dateTo&&(K=K.filter(z=>new Date(z.endDate)<=new Date(h.dateTo))),K},y=(K,z)=>{f(ae=>({...ae,[K]:z}))},S=()=>{f({dateFrom:"",dateTo:"",showPaid:!0,showUnpaid:!0})};return s?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Site bilgileri ykleniyor..."})]})}):t.site?c("div",{className:"container-fluid",children:m("div",{className:"row",children:[c("div",{className:`col-md-3 ${p?"":"d-none"}`,children:m("div",{className:"card custom-card shadow-sm sticky-top",style:{top:"20px",maxHeight:"calc(100vh - 40px)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[m("div",{className:"card-header bg-primary-subtle d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-menu-button-wide me-2"}),"Men"]}),c("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>g(!1),title:"Meny Kapat",children:c("i",{className:"bi bi-chevron-left"})})]}),c("div",{className:"card-body p-0",style:{overflowY:"auto",flex:1},children:c("div",{className:"list-group list-group-flush",children:m("div",{className:"list-group-item",children:[c("i",{className:"bi bi-speedometer2 me-2"}),"Site Panosu"]})})})]})}),m("div",{className:p?"col-md-9":"col-md-12",children:[!p&&m("button",{className:"btn btn-outline-primary mb-3",onClick:()=>g(!0),children:[c("i",{className:"bi bi-list me-2"}),"Meny A"]}),m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[m("div",{children:[c("h2",{className:"h3 fw-bold",children:((_=t.site)==null?void 0:_.name)||"Site Panosu"}),m("p",{className:"text-muted mb-0",children:["Site ID: ",((M=t.site)==null?void 0:M.id)||C]})]}),c("div",{className:"text-end",children:m("button",{className:"btn btn-outline-danger",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"},children:[c("i",{className:"bi bi-box-arrow-right me-1"}),"k Yap"]})})]}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-lg-2 col-md-4",children:c("div",{className:"card custom-card bg-primary text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-building fs-1 mb-2"}),c("h6",{className:"card-title",children:"Toplam Panel"}),c("h3",{className:"card-text",children:l.totalPanels})]})})}),c("div",{className:"col-lg-2 col-md-4",children:c("div",{className:"card custom-card bg-success text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-tv fs-1 mb-2"}),c("h6",{className:"card-title",children:"Kullanlan Panel"}),c("h3",{className:"card-text",children:l.usedPanels})]})})}),c("div",{className:"col-lg-2 col-md-4",children:c("div",{className:"card custom-card bg-info text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-file-earmark-text fs-1 mb-2"}),c("h6",{className:"card-title",children:"Aktif Anlama"}),c("h3",{className:"card-text",children:l.activeAgreements})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card custom-card bg-warning text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-currency-dollar fs-1 mb-2"}),c("h6",{className:"card-title",children:"Toplam Gelir"}),c("h4",{className:"card-text",children:E(l.totalRevenue)})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card custom-card bg-success text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-arrow-down-circle fs-1 mb-2"}),c("h6",{className:"card-title",children:"Gelecek deme"}),c("h3",{className:"card-text",children:l.futurePayments}),c("div",{className:"small",children:E(l.totalFutureAmount)})]})})})]}),c("div",{className:"row g-4 mb-4",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-primary-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-grid-3x3-gap me-2"}),"Site Panelleri"]})}),c("div",{className:"card-body",children:t.site?c("div",{children:c("div",{className:"row g-3",children:(N()||[]).map(K=>c("div",{className:"col-lg-4 col-md-6",children:m("div",{className:"card h-100",children:[c("div",{className:"card-header bg-primary text-white",children:m("h6",{className:"mb-0",children:[c("i",{className:"bi bi-building me-2"}),K.blockLabel," Blok"]})}),m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between mb-2",children:[m("small",{children:["Kullanlan Paneller: ",K.activePanels," / ",K.totalPanels]}),m("small",{children:[Math.round(K.activePanels/K.totalPanels*100),"% Doluluk"]})]}),c("div",{className:"d-flex flex-wrap gap-2",children:(K.panels||[]).map(z=>{const ae=z.isActive?x(z.blockIndex,z.panelInBlock):null,te=String.fromCharCode(65+z.blockIndex),G=`${C}-block-${te}`;z.panelInBlock+1;const ue=ae?F(ae.agreementId,C,G,(z.panelInBlock+1).toString()):null;return m("div",{className:`d-flex align-items-center justify-content-center border rounded position-relative ${z.isActive?"bg-primary text-white border-primary":"bg-light text-muted border-secondary"}`,style:{width:ue?"90px":"60px",height:ue?"120px":"60px",fontSize:"12px",fontWeight:"bold",cursor:z.isActive?"pointer":"default",backgroundImage:ue?`url(${ue.url})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:ue?"120px":"60px"},title:z.isActive&&ae?`Firma: ${ae.companyName}
Anlama Sresi: ${R(ae.startDate)} - ${R(ae.endDate)}
Anlama ID: ${ae.agreementId}${ue?`
Personel Fotoraf: Var`:""}`:`Panel ${z.panelNumber} - Bo`,onClick:()=>{if(z.isActive&&ae){let de=`
                                          <div class="text-start">
                                            <div class="mb-3">
                                              <strong>Reklam Veren Firma:</strong> ${ae.companyName}
                                            </div>
                                            <div class="mb-3">
                                              <strong>Anlama Sresi:</strong> ${R(ae.startDate)} - ${R(ae.endDate)}
                                            </div>
                                            <div class="mb-3">
                                              <strong>Anlama ID:</strong> ${ae.agreementId}
                                            </div>
                                        `;ue&&(de+=`
                                            <div class="text-center mt-3">
                                              <strong>Personel Tarafndan Yklenen Grsel:</strong>
                                              <div class="mt-2">
                                                <img src="${ue.url}" style="max-width: 100%; max-height: 300px;" alt="Personel Grseli" class="border rounded" />
                                              </div>
                                            </div>
                                          `),ue||(de+=`
                                            <div class="text-center mt-3">
                                              <strong>Grseller:</strong>
                                              <div class="mt-2 text-muted">
                                                <i class="bi bi-image fs-1"></i>
                                                <p class="mb-0">Henz personel tarafndan grsel eklenmemi</p>
                                              </div>
                                            </div>
                                          `),de+="</div>",window.showAlert("Panel Bilgisi",de,"info")}},children:[!ue&&c("div",{children:z.panelNumber}),z.isActive&&c("div",{className:"position-absolute top-0 end-0",style:{fontSize:"10px"},children:ue?c("i",{className:"bi bi-camera-fill text-success"}):c("i",{className:"bi bi-lock-fill"})}),z.isActive&&(ae==null?void 0:ae.companyName)&&!ue&&c("div",{style:{fontSize:"8px",lineHeight:"1",marginTop:"2px",maxWidth:"50px",overflow:"hidden",textOverflow:"ellipsis"},children:ae.companyName.length>6?ae.companyName.substring(0,6)+"...":ae.companyName}),ue&&m("div",{className:"position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white text-center",style:{fontSize:"6px",padding:"2px"},children:["Panel ",z.panelInBlock+1]})]},z.panelNumber)})})]})]})},K.blockNumber))})}):m("div",{className:"text-center py-4",children:[c("i",{className:"bi bi-grid-3x3-gap text-muted fs-1"}),c("p",{className:"text-muted mt-2",children:"Site bilgileri yklenemedi."})]})})]})})}),t.agreements.filter(K=>K.status==="active"&&Array.isArray(K.siteIds)&&K.siteIds.includes(C)).length>0&&c("div",{className:"row g-4 mb-4",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-success-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-image me-2"}),"Aktif Anlama Grselleri"]})}),c("div",{className:"card-body",children:m("div",{className:"row g-3",children:[t.agreements.filter(K=>K.status==="active"&&K.photoUrl&&Array.isArray(K.siteIds)&&K.siteIds.includes(C)).map(K=>{var z;return c("div",{className:"col-lg-4 col-md-6",children:m("div",{className:"card h-100",children:[m("div",{className:"card-header bg-light",children:[m("h6",{className:"mb-0",children:[I(K.companyId)," - ",K.id]}),m("small",{className:"text-muted",children:[R(K.startDate)," - ",R(K.endDate)]})]}),c("div",{className:"card-body text-center",children:K.photoUrl?c("img",{src:K.photoUrl,alt:"Reklam Grseli",className:"img-fluid rounded",style:{maxHeight:"200px",objectFit:"contain"}}):m("div",{className:"text-muted",children:[c("i",{className:"bi bi-image fs-1"}),c("p",{className:"mt-2 mb-0",children:"Grsel bulunamad"})]})}),m("div",{className:"card-footer text-muted small",children:[c("i",{className:"bi bi-tv me-1"}),((z=K.sitePanelCounts)==null?void 0:z[C])||0," panel"]})]})},K.id)}),t.agreements.filter(K=>K.status==="active"&&K.photoUrl&&Array.isArray(K.siteIds)&&K.siteIds.includes(C)).length===0&&c("div",{className:"col-12",children:m("div",{className:"text-center py-4",children:[c("i",{className:"bi bi-image text-muted fs-1"}),c("p",{className:"text-muted mt-2",children:"Aktif anlamalar iin henz grsel eklenmemi."})]})})]})})]})})}),c("div",{className:"row g-4",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-info-subtle",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-file-earmark-text me-2"}),"Anlamalar ve demeler"]}),m("div",{className:"d-flex gap-2",children:[c("input",{type:"date",className:"form-control form-control-sm",value:h.dateFrom,onChange:K=>y("dateFrom",K.target.value),placeholder:"Balang Tarihi"}),c("input",{type:"date",className:"form-control form-control-sm",value:h.dateTo,onChange:K=>y("dateTo",K.target.value),placeholder:"Biti Tarihi"}),c("button",{className:"btn btn-sm btn-outline-secondary",onClick:S,children:c("i",{className:"bi bi-x-circle"})})]})]})}),c("div",{className:"card-body",children:k().length===0?m("div",{className:"text-center py-4",children:[c("i",{className:"bi bi-file-earmark text-muted fs-1"}),c("p",{className:"text-muted mt-2",children:"Seilen kriterlere uygun anlama bulunmamaktadr."})]}):c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Firma"}),c("th",{children:"Balang"}),c("th",{children:"Biti"}),c("th",{children:"Panel Says"}),c("th",{children:"Haftalk cret"}),c("th",{children:"Toplam Tutar"}),c("th",{children:"Durum"}),c("th",{children:"deme"})]})}),c("tbody",{children:(k()||[]).map(K=>{var ae;const z=K.paymentReceived||K.creditPaymentReceived;return m("tr",{children:[c("td",{className:"fw-medium",children:I(K.companyId)}),c("td",{children:R(K.startDate)}),c("td",{children:R(K.endDate)}),c("td",{children:((ae=K.sitePanelCounts)==null?void 0:ae[C])||0}),c("td",{children:E(K.weeklyRatePerPanel||0)}),c("td",{className:z?"text-success fw-bold":"text-danger fw-bold",children:E(K.totalAmount||0)}),c("td",{children:c("span",{className:`badge ${K.status==="active"?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"}`,children:K.status==="active"?"Aktif":"Pasif"})}),c("td",{children:c("span",{className:`badge ${z?"bg-success-subtle text-success-emphasis":"bg-warning-subtle text-warning-emphasis"}`,children:z?"dendi":"Bekliyor"})})]},K.id)})})]})})})]})})}),c("div",{className:"row g-4 mt-2",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-success-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-clock-history me-2"}),"Gemi demeler"]})}),c("div",{className:"card-body",children:t.transactions.filter(K=>{var z,ae,te,G;return K.type==="income"&&((z=K.source)==null?void 0:z.includes("Anlama demesi"))&&t.agreements.some(ue=>{var de;return Array.isArray(ue.siteIds)&&ue.siteIds.includes(C)&&((de=K.source)==null?void 0:de.includes(ue.id))})||K.type==="expense"&&((ae=K.source)==null?void 0:ae.includes("Site demesi"))&&((G=K.source)==null?void 0:G.includes((te=t.site)==null?void 0:te.name))}).sort((K,z)=>new Date(z.date)-new Date(K.date)).length===0?m("div",{className:"text-center py-4",children:[c("i",{className:"bi bi-clock-history text-muted fs-1"}),c("p",{className:"text-muted mt-2",children:"Henz deme bulunmamaktadr."})]}):c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Tarih"}),c("th",{children:"Tr"}),c("th",{children:"Aklama"}),c("th",{children:"Tutar"})]})}),c("tbody",{children:t.transactions.filter(K=>{var z,ae,te,G;return K.type==="income"&&((z=K.source)==null?void 0:z.includes("Anlama demesi"))&&t.agreements.some(ue=>{var de;return Array.isArray(ue.siteIds)&&ue.siteIds.includes(C)&&((de=K.source)==null?void 0:de.includes(ue.id))})||K.type==="expense"&&((ae=K.source)==null?void 0:ae.includes("Site demesi"))&&((G=K.source)==null?void 0:G.includes((te=t.site)==null?void 0:te.name))}).sort((K,z)=>new Date(z.date)-new Date(K.date)).map(K=>{var G,ue,de,T,O;let z="",ae="",te="";if(K.type==="income"&&((G=K.source)!=null&&G.includes("Anlama demesi"))){z="Firma demesi",te="text-success fw-bold";const V=(ue=K.source)==null?void 0:ue.match(/Anlama demesi - ([^(]+)/),Q=(de=K.source)==null?void 0:de.match(/Anlama demesi - [^(]+ \(([^)]+)\)/),X=V?V[1].trim():"Bilinmeyen Firma",ie=Q?Q[1]:"Bilinmiyor";ae=`${X} - Anlama #${ie}`}else if(K.type==="expense"&&((T=K.source)!=null&&T.includes("Site demesi"))){z="Site demesi",te="text-primary fw-bold";const V=(O=K.description)==null?void 0:O.match(/([^ ]+) anlamasndan gelen deme/);ae=`${V?V[1]:"Bilinmeyen Firma"} tarafndan deme`}return m("tr",{children:[c("td",{children:R(K.date)}),c("td",{children:c("span",{className:`badge ${K.type==="income"?"bg-success-subtle text-success-emphasis":"bg-primary-subtle text-primary-emphasis"}`,children:z})}),c("td",{children:ae}),c("td",{className:te,children:E(Math.abs(K.amount))})]},K.id)})})]})})})]})})}),c("div",{className:"row g-4 mt-2",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[m("div",{className:"card-header bg-success-subtle d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-arrow-down-circle me-2"}),"Gelecek demeler"]}),m("div",{className:"fw-bold text-success",children:["Toplam Gelecek: ",E(l.totalFutureAmount)]})]}),c("div",{className:"card-body",children:u.length===0?m("div",{className:"text-center py-4",children:[c("i",{className:"bi bi-check-circle text-success fs-1"}),c("p",{className:"text-muted mt-2",children:"Gelecek deme bulunmamaktadr."})]}):c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Anlama ID"}),c("th",{children:"Firma"}),c("th",{children:"Panel Says"}),c("th",{children:"Haftalk Tutar"}),c("th",{children:"Site Yzdesi"}),c("th",{children:"Site demesi"}),c("th",{children:"Balang Tarihi"}),c("th",{children:"Biti Tarihi"}),c("th",{children:"deme Durumu"})]})}),c("tbody",{children:u.map((K,z)=>m("tr",{children:[m("td",{children:["#",K.agreementId]}),c("td",{className:"fw-medium",children:K.companyName}),m("td",{children:[K.panelCount," panel"]}),c("td",{children:E(K.weeklyRatePerPanel)}),m("td",{children:[K.sitePercentage,"%"]}),c("td",{className:"text-success fw-bold",children:E(K.amount)}),c("td",{children:R(K.startDate)}),c("td",{children:R(K.endDate)}),c("td",{children:c("span",{className:`badge ${K.paymentReceived?"bg-success-subtle text-success-emphasis":"bg-primary-subtle text-primary-emphasis"}`,children:K.paymentReceived?"Nakit dendi":"Kredi ile dendi"})})]},z))})]})})})]})})})]})]})}):c("div",{className:"container-fluid",children:c("div",{className:"row justify-content-center",children:c("div",{className:"col-md-8 col-lg-6",children:m("div",{className:"card border-danger shadow-sm mt-5",children:[c("div",{className:"card-header bg-danger text-white",children:m("h5",{className:"mb-0",children:[c("i",{className:"bi bi-exclamation-triangle me-2"}),"Site Bulunamad"]})}),m("div",{className:"card-body",children:[m("div",{className:"alert alert-danger",children:[c("h6",{className:"alert-heading",children:"Site bilgileri yklenemedi"}),m("p",{className:"mb-2",children:[c("strong",{children:"Site ID:"})," ",C||"Belirtilmemi"]}),c("p",{className:"mb-0 small",children:"Bu site ID'si ile kaytl bir site bulunamad. Ltfen:"}),m("ul",{className:"mb-0 mt-2 small",children:[c("li",{children:"Site ID'nizin doru olduundan emin olun"}),c("li",{children:"Site'in Firebase'de kaytl olduunu kontrol edin"}),c("li",{children:"Ynetici ile iletiime gein"})]})]}),m("div",{className:"d-flex justify-content-end gap-2",children:[m("button",{className:"btn btn-outline-secondary",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"},children:[c("i",{className:"bi bi-arrow-left me-1"}),"Ana Sayfaya Dn"]}),m("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:[c("i",{className:"bi bi-arrow-clockwise me-1"}),"Sayfay Yenile"]})]})]})]})})})})},Mse=({companies:t=[],sites:e=[],agreements:r=[],sitePanelSelections:n={},selectedWeeks:i=[],formData:a={}})=>{const s=h=>{const f=t.find(p=>String(p.id)===String(h));return f?f.name:"Bilinmeyen Firma"},o=h=>{const f=e.find(p=>String(p.id)===String(h));return f?f.name:""},l=h=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(h),A=(h,f,p,g)=>h<=g&&p<=f;return{getCompanyName:s,getSiteName:o,formatCurrency:l,dateRangesOverlap:A,generateBlockLabels:h=>{const f=[];for(let p=0;p<h;p++)f.push(String.fromCharCode(65+p));return f},getPanelUsageInfo:(h,f,p,g,v)=>{if(!g||!v)return null;const C=r.filter(E=>E.siteIds&&E.siteIds.includes(h)&&E.status==="active"),I=new Date(g),F=new Date(v);for(const E of C){const R=new Date(E.startDate),L=new Date(E.endDate);if(A(I,F,R,L)&&E.siteBlockSelections&&E.siteBlockSelections[h]&&E.siteBlockSelections[h].includes(f)&&E.sitePanelSelections&&E.sitePanelSelections[h]&&E.sitePanelSelections[h][f]&&E.sitePanelSelections[h][f].includes(p))return{agreementId:E.id,companyName:s(E.companyId),startDate:E.startDate,endDate:E.endDate}}return null}}},C6=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState(null),[s,o]=D.useState(!0),[l,A]=D.useState({totalAgreements:0,activeAgreements:0,totalSites:0,totalPanels:0,totalRevenue:0,paidAmount:0,unpaidAmount:0,paidAgreements:0,unpaidAgreements:0}),[u,d]=D.useState([]),[h,f]=D.useState([]),[p,g]=D.useState(!1),[v,C]=D.useState(""),[I,F]=D.useState([]),[E,R]=D.useState(!0),L=DA(),N=D.useMemo(()=>cc(),[]),P=D.useMemo(()=>{const G=cc();return(G==null?void 0:G.companyId)||(G==null?void 0:G.id)},[]),x=D.useRef(!1);D.useEffect(()=>{if(x.current)return;let G=!0,ue=null,de=0;const T=1,O=async(V=!1)=>{var Q;if(!P){G&&L("/");return}try{const[X,ie,ee,Z,re]=await Promise.all([Sa(),Yi(),Xa(),lc(),Dw().catch(Re=>(console.warn("Error fetching panel images (non-critical):",Re),[]))]),ce=Array.isArray(re)?re:(re==null?void 0:re.data)||[];if(!G)return;const Y=X.filter(Re=>String(Re.companyId)===String(P)),ge=ee.find(Re=>String(Re.id)===String(P))||null,q=ie.filter((Re,He,pe)=>He===pe.findIndex(Le=>Le.id===Re.id&&Le._docId===Re._docId||Le.id&&Re.id&&String(Le.id)===String(Re.id)||Le._docId&&Re._docId&&Le._docId===Re._docId));e(Y),n(q),a(ge),d(Z),f(ce),F(Y);const W=Y.filter(Re=>Re.status==="active").length,xe=new Set(Y.flatMap(Re=>Re.siteIds||[])).size,ye=Y.reduce((Re,He)=>Re+Object.values(He.sitePanelCounts||{}).reduce((pe,Le)=>pe+parseInt(Le||0),0),0),Ue=Y.reduce((Re,He)=>Re+(He.totalAmount||0),0),Me=Y.filter(Re=>Re.paymentReceived||Re.creditPaymentReceived),$e=Y.filter(Re=>!Re.paymentReceived&&!Re.creditPaymentReceived),fe=Me.reduce((Re,He)=>Re+(He.totalAmount||0),0),Oe=$e.reduce((Re,He)=>Re+(He.totalAmount||0),0);A({totalAgreements:Y.length,activeAgreements:W,totalSites:xe,totalPanels:ye,totalRevenue:Ue,paidAmount:fe,unpaidAmount:Oe,paidAgreements:Me.length,unpaidAgreements:$e.length}),de=0,x.current=!0,G&&o(!1)}catch(X){console.error("Error fetching company data:",X),V?de++:de=1,de<=T&&G&&((Q=X.message)!=null&&Q.includes("fetch"))?(ue&&clearTimeout(ue),ue=setTimeout(()=>{G&&O(!0)},3e3)):G&&(o(!1),de>T&&console.error("Max retries reached. Please check if JSON Server is running on port 3001."))}};return O(),()=>{G=!1,ue&&clearTimeout(ue)}},[]);const k=Mse({companies:i?[i]:[],sites:r,agreements:t}),y=G=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(G),S=G=>new Date(G).toLocaleDateString("tr-TR"),_=G=>r.find(ue=>String(ue.id)===String(G))||null,M=()=>!i||!u.length?[]:u.filter(G=>G.type==="income"&&G.source.includes("Anlama demesi")&&G.source.includes(i.name)),K=t,z=M(),ae=G=>{if(!G){F(t);return}const ue=t.filter(de=>{const T=new Date(de.startDate),O=new Date(G);return T.toDateString()===O.toDateString()});F(ue)},te=G=>{C(G),ae(G)};return s?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Firma bilgileri ykleniyor..."})]})}):N?c("div",{className:"container-fluid",children:m("div",{className:"row",children:[c("div",{className:`col-md-3 ${E?"":"d-none"}`,children:m("div",{className:"card custom-card shadow-sm sticky-top",style:{top:"20px",maxHeight:"calc(100vh - 40px)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[m("div",{className:"card-header bg-primary-subtle d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-menu-button-wide me-2"}),"Men"]}),c("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>R(!1),title:"Meny Kapat",children:c("i",{className:"bi bi-chevron-left"})})]}),c("div",{className:"card-body p-0",style:{overflowY:"auto",flex:1},children:m("div",{className:"list-group list-group-flush",children:[m("button",{type:"button",className:`list-group-item list-group-item-action ${window.location.pathname==="/company-dashboard"?"active":""}`,onClick:()=>L("/company-dashboard"),children:[c("i",{className:"bi bi-speedometer2 me-2"}),"Firma Panosu"]}),m("button",{type:"button",className:`list-group-item list-group-item-action ${window.location.pathname==="/company-orders"?"active":""}`,onClick:()=>L("/company-orders"),children:[c("i",{className:"bi bi-cart-plus me-2"}),"Sipari Olutur"]})]})})]})}),m("div",{className:E?"col-md-9":"col-md-12",children:[!E&&m("button",{className:"btn btn-outline-primary mb-3",onClick:()=>R(!0),children:[c("i",{className:"bi bi-list me-2"}),"Meny A"]}),m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[m("div",{children:[m("h2",{className:"h3 fw-bold",children:[(i==null?void 0:i.name)||(N==null?void 0:N.name)||(i==null?void 0:i.id)||P||"Firma"," - Firma Panosu"]}),m("p",{className:"text-muted mb-0",children:["Firma ID: ",P]})]}),c("div",{className:"text-end",children:m("button",{className:"btn btn-outline-danger",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),L("/")},children:[c("i",{className:"bi bi-box-arrow-right me-1"}),"k Yap"]})})]}),i&&c("div",{className:"row g-4 mb-4",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-info-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-credit-card me-2"}),"Kredi Bilgileri"]})}),m("div",{className:"card-body",children:[m("div",{className:"row g-3",children:[c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card h-100 border-info",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-wallet fs-1 text-info mb-2"}),c("h6",{className:"card-title",children:"Mevcut Kredi"}),m("h3",{className:"card-text text-info",children:[i.credit||0," Panel"]})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card h-100 border-success",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-currency-dollar fs-1 text-success mb-2"}),c("h6",{className:"card-title",children:"Toplam Kredi Satn Alm"}),c("h3",{className:"card-text text-success",children:i.creditHistory?i.creditHistory.length:0})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card h-100 border-warning",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-tag fs-1 text-warning mb-2"}),c("h6",{className:"card-title",children:"Toplam Kredi Paneli"}),m("h3",{className:"card-text text-warning",children:[i.creditHistory?i.creditHistory.reduce((G,ue)=>G+(ue.panelCount||0),0):0," Panel"]})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card h-100 border-primary",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-cash fs-1 text-primary mb-2"}),c("h6",{className:"card-title",children:"Toplam Kredi Tutar"}),c("h4",{className:"card-text text-primary",children:y(i.creditHistory?i.creditHistory.reduce((G,ue)=>G+(ue.totalAmount||0),0):0)})]})})})]}),i.creditHistory&&i.creditHistory.length>0&&m("div",{className:"mt-4",children:[m("h6",{className:"fw-bold mb-3",children:[c("i",{className:"bi bi-clock-history me-2"}),"Kredi Gemii"]}),c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Tarih"}),c("th",{children:"Panel Says"}),c("th",{children:"Panel creti"}),c("th",{children:"Toplam Tutar"})]})}),c("tbody",{children:[...i.creditHistory].reverse().map((G,ue)=>m("tr",{children:[c("td",{children:S(G.purchaseDate)}),m("td",{children:[G.panelCount," Panel"]}),c("td",{children:y(G.panelPrice)}),c("td",{className:"fw-bold",children:y(G.totalAmount)})]},ue))})]})})]})]})]})})}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-lg-2 col-md-4",children:c("div",{className:"card custom-card bg-primary text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-file-earmark-text fs-1 mb-2"}),c("h6",{className:"card-title",children:"Toplam Anlama"}),c("h3",{className:"card-text",children:l.totalAgreements})]})})}),c("div",{className:"col-lg-2 col-md-4",children:c("div",{className:"card custom-card bg-success text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-check-circle fs-1 mb-2"}),c("h6",{className:"card-title",children:"Aktif Anlama"}),c("h3",{className:"card-text",children:l.activeAgreements})]})})}),c("div",{className:"col-lg-2 col-md-4",children:c("div",{className:"card custom-card bg-info text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-building fs-1 mb-2"}),c("h6",{className:"card-title",children:"Toplam Site"}),c("h3",{className:"card-text",children:l.totalSites})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card custom-card bg-warning text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-tv fs-1 mb-2"}),c("h6",{className:"card-title",children:"Toplam Panel"}),c("h3",{className:"card-text",children:l.totalPanels})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card custom-card bg-success text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-currency-dollar fs-1 mb-2"}),c("h6",{className:"card-title",children:"Toplam Tutar"}),c("h4",{className:"card-text",children:y(l.totalRevenue)})]})})})]}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card custom-card bg-success text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-check-circle fs-1 mb-2"}),c("h6",{className:"card-title",children:"denmi Anlama"}),c("h3",{className:"card-text",children:l.paidAgreements}),c("p",{className:"card-text small",children:y(l.paidAmount)})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card custom-card bg-warning text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-clock fs-1 mb-2"}),c("h6",{className:"card-title",children:"denmemi Anlama"}),c("h3",{className:"card-text",children:l.unpaidAgreements}),c("p",{className:"card-text small",children:y(l.unpaidAmount)})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card custom-card bg-info text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-percent fs-1 mb-2"}),c("h6",{className:"card-title",children:"deme Oran"}),m("h3",{className:"card-text",children:[l.totalAgreements>0?Math.round(l.paidAgreements/l.totalAgreements*100):0,"%"]})]})})}),c("div",{className:"col-lg-3 col-md-6",children:c("div",{className:"card custom-card bg-primary text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-arrow-up-circle fs-1 mb-2"}),c("h6",{className:"card-title",children:"Bekleyen deme"}),c("h3",{className:"card-text",children:y(l.unpaidAmount)})]})})})]}),c("div",{className:"row g-4 mb-4",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-primary-subtle cursor-pointer",onClick:()=>g(!p),style:{cursor:"pointer"},children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-file-earmark-text me-2"}),"Anlama Gemii"]}),c("i",{className:`bi bi-chevron-${p?"up":"down"}`})]})}),p&&m("div",{className:"card-body",children:[m("div",{className:"row mb-3",children:[m("div",{className:"col-md-4",children:[c("label",{className:"form-label",children:"Tarihe Gre Filtrele:"}),c("input",{type:"date",className:"form-control",value:v,onChange:G=>te(G.target.value)})]}),c("div",{className:"col-md-2 d-flex align-items-end",children:c("button",{className:"btn btn-outline-secondary",onClick:()=>{C(""),F(t)},children:"Temizle"})})]}),I.length===0?m("div",{className:"text-center py-4",children:[c("i",{className:"bi bi-file-earmark text-muted fs-1"}),c("p",{className:"text-muted mt-2",children:v?"Seilen tarihte anlama bulunamad.":"Henz anlama bulunmamaktadr."})]}):c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Balang Tarihi"}),c("th",{children:"Biti Tarihi"}),c("th",{children:"Sre (Hafta)"}),c("th",{children:"Toplam Panel"}),c("th",{children:"Birim Fiyat ()"}),c("th",{children:"Toplam Tutar"}),c("th",{children:"denen Tutar"}),c("th",{children:"Durum"})]})}),c("tbody",{children:(I||[]).map(G=>{const ue=Object.values(G.sitePanelCounts||{}).reduce((T,O)=>T+parseInt(O||0),0),de=z.find(T=>T.description&&T.description.includes(G.id));return m("tr",{children:[c("td",{children:S(G.startDate)}),c("td",{children:S(G.endDate)}),c("td",{children:G.totalWeeks}),c("td",{children:ue}),c("td",{children:y(G.weeklyRatePerPanel)}),c("td",{className:"fw-bold",children:y(G.totalAmount)}),c("td",{children:de?c("span",{className:"text-success fw-bold",children:y(de.amount)}):c("span",{className:"text-muted",children:"deme yaplmad"})}),c("td",{children:c("span",{className:`badge ${G.status==="active"?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"}`,children:G.status==="active"?"Aktif":"Pasif"})})]},G.id)})})]})})]})]})})}),K.filter(G=>G.status==="active").length>0&&c("div",{className:"row g-4 mb-4",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-success-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-tv me-2"}),"Aktif Anlama Panelleri"]})}),c("div",{className:"card-body",children:c("div",{className:"row g-4",children:(K||[]).filter(G=>G.status==="active").map(G=>c("div",{className:"col-lg-12",children:m("div",{className:"card border-success h-100",children:[c("div",{className:"card-header bg-success-subtle",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-file-earmark-text me-2"}),"Anlama ID: ",G.id]}),m("small",{className:"text-muted",children:[S(G.startDate)," - ",S(G.endDate)]})]}),c("div",{className:"fw-bold text-success",children:y(G.totalAmount)})]})}),c("div",{className:"card-body",children:c("div",{className:"row g-3",children:[...new Set(G.siteIds||[])].map(ue=>{var ie,ee;const de=_(ue);if(!de)return null;const T=de.siteType==="business_center"?1:parseInt(de.blocks)||0,O=parseInt(de.elevatorsPerBlock)||0,V=de.siteType==="business_center"?parseInt(de.panels)||0:O*2;de.siteType==="business_center"||k.generateBlockLabels(T);let Q=[],X={};return G.dateRanges&&Array.isArray(G.dateRanges)&&G.dateRanges.length>0?G.dateRanges.forEach((Z,re)=>{var q,W,xe;const ce=`range-${re}`,Y=((W=(q=G.siteBlockSelections)==null?void 0:q[ce])==null?void 0:W[ue])||[];Q=[...new Set([...Q,...Y])];const ge=((xe=G.sitePanelSelections)==null?void 0:xe[ue])||{};Object.keys(ge).forEach(ye=>{var Me;X[ye]||(X[ye]=[]);const Ue=((Me=ge[ye])==null?void 0:Me[ce])||[];X[ye]=[...new Set([...X[ye],...Ue])]})}):(Q=((ie=G.siteBlockSelections)==null?void 0:ie[ue])||[],X=((ee=G.sitePanelSelections)==null?void 0:ee[ue])||{}),c("div",{className:"col-md-12",children:m("div",{className:"card border-primary",children:[c("div",{className:"card-header bg-primary-subtle",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("h6",{className:"mb-0",children:[c("i",{className:"bi bi-building me-2"}),de.name]}),m("span",{className:"badge bg-info-subtle text-info-emphasis",children:[Object.values(G.sitePanelCounts||{}).reduce((Z,re)=>Z+parseInt(re||0),0)," panel"]})]})}),c("div",{className:"card-body",children:Q.length===0?m("div",{className:"text-center py-3 text-muted",children:[c("i",{className:"bi bi-exclamation-triangle"}),c("p",{className:"mb-0 mt-2",children:"Bu anlama iin blok bilgisi bulunamad."})]}):c("div",{className:"row g-3",children:Q.map(Z=>{const re=Z.split("-")[2],ce=X[Z]||[];return c("div",{className:"col-md-6 col-lg-4",children:m("div",{className:"card border-info",children:[c("div",{className:"card-header bg-info-subtle",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-grid-3x3-gap me-1"}),re," Blok"]})}),m("div",{className:"card-body",children:[m("div",{className:"small text-muted mb-2",children:["Kullanlan Paneller: ",ce.length," / ",V]}),c("div",{className:"d-flex flex-wrap gap-1",children:Array.from({length:V},(Y,ge)=>{const q=ge+1,W=`panel-${q}`,xe=ce.includes(W),ye=`${ue}${re}${q}`,Ue=Qse(G.id.toString(),ue,Z,q.toString(),h);return m("div",{className:`d-flex align-items-center justify-content-center ${xe?"bg-primary text-white":"bg-light text-muted"} border rounded position-relative`,style:{width:Ue?"90px":"60px",height:Ue?"120px":"80px",fontSize:"8px",fontWeight:"bold",flexDirection:"column",cursor:"default",backgroundImage:Ue?`url(${Ue.url})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:Ue?"120px":"80px"},title:xe?`Panel ${ye} - ${(i==null?void 0:i.name)||"Firma"}${Ue?" (Fotoraf var)":""}`:`Panel ${q} - Bo`,children:[!Ue&&m(kr,{children:[c("div",{className:"fw-bold",children:q}),xe&&c("div",{className:"text-truncate",style:{fontSize:"7px",lineHeight:"1",maxWidth:"50px"},children:ye})]}),xe&&c("div",{className:"position-absolute top-0 end-0",style:{fontSize:"8px"},children:Ue?c("i",{className:"bi bi-camera-fill text-success"}):c("i",{className:"bi bi-lock-fill"})}),Ue&&m("div",{className:"position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white text-center",style:{fontSize:"6px",padding:"2px"},children:["Panel ",q]})]},W)})})]})]})},Z)})})})]})},ue)})})})]})},G.id))})})]})})})]})]})}):(L("/"),null)},Qse=(t,e,r,n,i)=>i.find(a=>a.agreementId===t.toString()&&a.siteId===e&&a.blockId===r&&a.panelId===n.toString()),Hse=()=>{var Q;const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState(!0),[s,o]=D.useState([]),[l,A]=D.useState(!1),[u,d]=D.useState([{startDate:"",endDate:""}]),[h,f]=D.useState([]),[p,g]=D.useState(!1),[v,C]=D.useState(null),[I,F]=D.useState(!0),E=DA(),R=cc(),L=(R==null?void 0:R.companyId)||(R==null?void 0:R.id),N=D.useMemo(()=>{const X=t.filter(ee=>ee.siteType!=="business_center"&&ee.status!=="archived"),ie={};return X.forEach(ee=>{const Z=ee.neighborhood||"Dier";ie[Z]||(ie[Z]=[]),ie[Z].push(ee)}),ie},[t]),P=D.useMemo(()=>t.filter(X=>X.siteType==="business_center"&&X.status!=="archived"),[t]),x=D.useMemo(()=>{const X=[];return s.forEach(ie=>{N[ie]&&X.push(...N[ie])}),l&&X.push(...P),X},[s,l,N,P]),k=D.useMemo(()=>x.reduce((X,ie)=>{if(ie.siteType==="business_center")return X+(parseInt(ie.panels)||0);{const ee=parseInt(ie.blocks)||0,Z=parseInt(ie.elevatorsPerBlock)||0;return X+ee*Z*2}},0),[x]),y=D.useMemo(()=>u.reduce((X,ie)=>{if(ie.startDate&&ie.endDate){const ee=new Date(ie.startDate),Z=new Date(ie.endDate),re=Math.abs(Z-ee),ce=Math.ceil(re/(1e3*60*60*24)),Y=Math.ceil(ce/7);return X+Y}return X},0),[u]),S=D.useMemo(()=>k*y*360,[k,y]),_=X=>{const ie=[];return X.forEach((ee,Z)=>{if(ee.startDate&&ee.endDate){const re=new Date(ee.startDate),ce=new Date(ee.endDate);r.filter(Y=>Y.status==="active").forEach(Y=>{if(Y.dateRanges&&Y.dateRanges.length>0)Y.dateRanges.forEach(ge=>{const q=new Date(ge.startDate),W=new Date(ge.endDate);re<=W&&ce>=q&&ie.push({rangeIndex:Z,agreementId:Y.id,conflictRange:ge})});else if(Y.startDate&&Y.endDate){const ge=new Date(Y.startDate),q=new Date(Y.endDate);re<=q&&ce>=ge&&ie.push({rangeIndex:Z,agreementId:Y.id,conflictRange:{startDate:Y.startDate,endDate:Y.endDate}})}})}}),ie};D.useEffect(()=>{L&&(async()=>{try{a(!0);const[ie,ee]=await Promise.all([Yi(),Sa()]),Z=ee.filter(ce=>String(ce.companyId)===String(L)),re=ie.filter((ce,Y,ge)=>Y===ge.findIndex(q=>q.id===ce.id&&q._docId===ce._docId||q.id&&ce.id&&String(q.id)===String(ce.id)||q._docId&&ce._docId&&q._docId===ce._docId));e(re),n(Z),f(Z)}catch(ie){console.error("Error loading data:",ie)}finally{a(!1)}})()},[L]);const M=X=>{o(ie=>ie.includes(X)?ie.filter(ee=>ee!==X):[...ie,X])},K=()=>{A(X=>!X)},z=()=>{d([...u,{startDate:"",endDate:""}])},ae=X=>{u.length>1&&d(u.filter((ie,ee)=>ee!==X))},te=(X,ie,ee)=>{const Z=[...u];Z[X][ie]=ee,d(Z)},G=async()=>{if(x.length===0){window.showAlert&&window.showAlert("Uyar","Ltfen en az bir mahalle veya i merkezi sein.","warning");return}if(_(u).length>0){window.showAlert&&window.showAlert("Hata","Seilen tarih aralklarnda mevcut anlamalar bulunmaktadr. Ltfen farkl tarihler sein.","error");return}if(u.filter(ee=>!ee.startDate||!ee.endDate).length>0){window.showAlert&&window.showAlert("Uyar","Ltfen tm tarih aralklarn doldurun.","warning");return}try{const ee=x.map(q=>q.id),Z={};x.forEach(q=>{if(q.siteType==="business_center")Z[q.id]=parseInt(q.panels)||0;else{const W=parseInt(q.blocks)||0,xe=parseInt(q.elevatorsPerBlock)||0;Z[q.id]=W*xe*2}});const re={},ce={};x.forEach(q=>{if(q.siteType==="business_center"){re[q.id]=[`${q.id}-block-A`];const W=parseInt(q.panels)||0;ce[q.id]={[`${q.id}-block-A`]:Array.from({length:W},(xe,ye)=>`panel-${ye+1}`)}}else{const W=parseInt(q.blocks)||0,xe=parseInt(q.elevatorsPerBlock)||0,ye=Array.from({length:W},(Ue,Me)=>String.fromCharCode(65+Me));re[q.id]=ye.map(Ue=>`${q.id}-block-${Ue}`),ce[q.id]={},ye.forEach(Ue=>{const Me=xe*2;ce[q.id][`${q.id}-block-${Ue}`]=Array.from({length:Me},($e,fe)=>`panel-${fe+1}`)})}});const Y={companyId:L,siteIds:ee,dateRanges:u,startDate:u[0].startDate,endDate:u[u.length-1].endDate,sitePanelCounts:Z,siteBlockSelections:re,sitePanelSelections:ce,totalWeeks:y,totalPanels:k,weeklyRatePerPanel:300,totalAmount:S,status:"pending",isOrder:!0},ge=await GD(Y);ge&&(f([...h,ge]),o([]),A(!1),d([{startDate:"",endDate:""}]),window.showAlert&&window.showAlert("Baarl","Sipari baaryla oluturuldu!","success"))}catch(ee){console.error("Error creating order:",ee),window.showAlert&&window.showAlert("Hata","Sipari oluturulurken bir hata olutu.","error")}},ue=X=>{C(X),g(!0)},de=async X=>{if(!(window.showConfirm&&!await window.showConfirm("Siparii Sil","Bu siparii silmek istediinize emin misiniz?","warning")))try{await WD(X.id),f(h.filter(ie=>ie.id!==X.id)),window.showAlert&&window.showAlert("Baarl","Sipari baaryla silindi!","success")}catch(ie){console.error("Error deleting order:",ie),window.showAlert&&window.showAlert("Hata","Sipari silinirken bir hata olutu.","error")}},T=X=>X?new Date(X).toLocaleDateString("tr-TR"):"",O=X=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(X);if(i)return c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Veriler ykleniyor..."})]})});if(!R)return E("/"),null;const V=_(u);return m("div",{className:"container-fluid",children:[m("div",{className:"row",children:[c("div",{className:`col-md-3 ${I?"":"d-none"}`,children:m("div",{className:"card custom-card shadow-sm sticky-top",style:{top:"20px",maxHeight:"calc(100vh - 40px)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[m("div",{className:"card-header bg-primary-subtle d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-menu-button-wide me-2"}),"Men"]}),c("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>F(!1),title:"Meny Kapat",children:c("i",{className:"bi bi-chevron-left"})})]}),c("div",{className:"card-body p-0",style:{overflowY:"auto",flex:1},children:m("div",{className:"list-group list-group-flush",children:[m("button",{type:"button",className:`list-group-item list-group-item-action ${window.location.pathname==="/company-dashboard"?"active":""}`,onClick:()=>E("/company-dashboard"),children:[c("i",{className:"bi bi-speedometer2 me-2"}),"Firma Panosu"]}),m("button",{type:"button",className:`list-group-item list-group-item-action ${window.location.pathname==="/company-orders"?"active":""}`,onClick:()=>E("/company-orders"),children:[c("i",{className:"bi bi-cart-plus me-2"}),"Sipari Olutur"]})]})})]})}),m("div",{className:I?"col-md-9":"col-md-12",children:[!I&&m("button",{className:"btn btn-outline-primary mb-3",onClick:()=>F(!0),children:[c("i",{className:"bi bi-list me-2"}),"Meny A"]}),m("div",{className:"row",children:[c("div",{className:"col-md-5",children:m("div",{className:"card custom-card shadow-sm sticky-top",style:{top:"20px",maxHeight:"calc(100vh - 40px)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[c("div",{className:"card-header bg-primary-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-building me-2"}),"Mahalleler ve  Merkezleri"]})}),m("div",{className:"card-body p-0",style:{overflowY:"auto",flex:1},children:[m("div",{className:"p-3",children:[c("h6",{className:"fw-bold mb-3",children:"Mahalleler"}),Object.keys(N).length>0?c("div",{className:"list-group list-group-flush",children:Object.keys(N).sort().map(X=>{const ie=N[X],ee=ie.reduce((re,ce)=>{const Y=parseInt(ce.blocks)||0,ge=parseInt(ce.elevatorsPerBlock)||0;return re+Y*ge*2},0),Z=s.includes(X);return c("div",{className:"list-group-item",children:m("div",{className:"form-check",children:[c("input",{className:"form-check-input",type:"checkbox",checked:Z,onChange:()=>M(X),id:`neighborhood-${X}`}),m("label",{className:"form-check-label w-100",htmlFor:`neighborhood-${X}`,children:[m("div",{className:"d-flex justify-content-between align-items-center",children:[c("span",{className:"fw-bold",children:X}),m("span",{className:"badge bg-primary",children:[ie.length," Site"]})]}),m("small",{className:"text-muted d-block",children:["Toplam Panel: ",ee]}),c("div",{className:"mt-2",children:ie.map(re=>m("div",{className:"small text-muted ms-3",children:[" ",re.name," (",re.siteType==="business_center"?parseInt(re.panels)||0:(parseInt(re.blocks)||0)*(parseInt(re.elevatorsPerBlock)||0)*2," panel)"]},re.id))})]})]})},X)})}):c("p",{className:"text-muted",children:"Henz site bulunmamaktadr"})]}),P.length>0&&m("div",{className:"p-3 border-top",children:[c("h6",{className:"fw-bold mb-3",children:" Merkezleri"}),m("div",{className:"form-check",children:[c("input",{className:"form-check-input",type:"checkbox",checked:l,onChange:K,id:"business-centers"}),m("label",{className:"form-check-label w-100",htmlFor:"business-centers",children:[m("div",{className:"d-flex justify-content-between align-items-center",children:[c("span",{className:"fw-bold",children:"Tm  Merkezleri"}),m("span",{className:"badge bg-info",children:[P.length,"  Merkezi"]})]}),m("small",{className:"text-muted d-block",children:["Toplam Panel: ",P.reduce((X,ie)=>X+(parseInt(ie.panels)||0),0)]}),c("div",{className:"mt-2",children:P.map(X=>m("div",{className:"small text-muted ms-3",children:[" ",X.name," (",parseInt(X.panels)||0," panel)"]},X.id))})]})]})]})]})]})}),m("div",{className:"col-md-7",children:[m("div",{className:"card custom-card shadow-sm mb-4",children:[c("div",{className:"card-header bg-success-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-cart-plus me-2"}),"Yeni Sipari Olutur"]})}),m("div",{className:"card-body",children:[x.length>0&&m("div",{className:"alert alert-info",children:[c("strong",{children:"Seilen:"})," ",x.length," site, ",k," panel"]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Tarih Aralklar"}),u.map((X,ie)=>m("div",{className:"row g-2 mb-2",children:[c("div",{className:"col-md-5",children:c("input",{type:"date",className:"form-control",value:X.startDate,onChange:ee=>te(ie,"startDate",ee.target.value),placeholder:"Balang Tarihi"})}),c("div",{className:"col-md-5",children:c("input",{type:"date",className:"form-control",value:X.endDate,onChange:ee=>te(ie,"endDate",ee.target.value),placeholder:"Biti Tarihi"})}),c("div",{className:"col-md-2",children:u.length>1&&c("button",{className:"btn btn-outline-danger w-100",onClick:()=>ae(ie),children:c("i",{className:"bi bi-trash"})})})]},ie)),m("button",{className:"btn btn-outline-primary btn-sm",onClick:z,children:[c("i",{className:"bi bi-plus-circle me-1"}),"Tarih Aral Ekle"]})]}),V.length>0&&m("div",{className:"alert alert-warning",children:[c("i",{className:"bi bi-exclamation-triangle me-2"}),c("strong",{children:"Uyar:"})," Seilen tarih aralklarnda mevcut anlamalar bulunmaktadr. Ltfen farkl tarihler sein."]}),k>0&&y>0&&c("div",{className:"card bg-light mb-3",children:m("div",{className:"card-body",children:[c("h6",{className:"fw-bold",children:"Tahmini Bte"}),m("div",{className:"row",children:[m("div",{className:"col-md-6",children:[c("small",{className:"text-muted",children:"Panel Says:"}),m("div",{className:"fw-bold",children:[k," panel"]})]}),m("div",{className:"col-md-6",children:[c("small",{className:"text-muted",children:"Toplam Hafta:"}),m("div",{className:"fw-bold",children:[y," hafta"]})]}),m("div",{className:"col-md-12 mt-2",children:[c("small",{className:"text-muted",children:"Birim Fiyat (KDV Dahil):"}),c("div",{className:"fw-bold",children:"360 TL / panel / hafta"})]}),m("div",{className:"col-md-12 mt-2 border-top pt-2",children:[c("small",{className:"text-muted",children:"Toplam Tahmini Tutar:"}),c("div",{className:"fw-bold fs-4 text-success",children:O(S)})]})]})]})}),m("button",{className:"btn btn-primary w-100",onClick:G,disabled:x.length===0||V.length>0,children:[c("i",{className:"bi bi-check-circle me-2"}),"Sipari Olutur"]})]})]}),m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-primary-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-list-ul me-2"}),"Siparilerim (",h.length,")"]})}),c("div",{className:"card-body",children:h.length===0?m("div",{className:"text-center py-4",children:[c("i",{className:"bi bi-cart-x text-muted fs-1"}),c("p",{className:"text-muted mt-2",children:"Henz sipari bulunmamaktadr"})]}):c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Tarih Aral"}),c("th",{children:"Site Says"}),c("th",{children:"Panel Says"}),c("th",{children:"Toplam Hafta"}),c("th",{children:"Tutar"}),c("th",{children:"Durum"}),c("th",{children:"lemler"})]})}),c("tbody",{children:h.map(X=>{var ie;return m("tr",{children:[c("td",{children:X.dateRanges&&X.dateRanges.length>0?X.dateRanges.map((ee,Z)=>m("div",{children:[T(ee.startDate)," - ",T(ee.endDate)]},Z)):m("div",{children:[T(X.startDate)," - ",T(X.endDate)]})}),c("td",{children:((ie=X.siteIds)==null?void 0:ie.length)||0}),c("td",{children:X.totalPanels||Object.values(X.sitePanelCounts||{}).reduce((ee,Z)=>ee+parseInt(Z||0),0)}),c("td",{children:X.totalWeeks||0}),c("td",{className:"fw-bold",children:O(X.totalAmount||0)}),c("td",{children:c("span",{className:`badge ${X.status==="active"?"bg-success":X.status==="pending"?"bg-warning":"bg-secondary"}`,children:X.status==="active"?"Aktif":X.status==="pending"?"Beklemede":"Pasif"})}),c("td",{children:m("div",{className:"btn-group btn-group-sm",children:[c("button",{className:"btn btn-outline-primary",onClick:()=>ue(X),title:"Detaylar Gster",children:c("i",{className:"bi bi-eye"})}),c("button",{className:"btn btn-outline-danger",onClick:()=>de(X),title:"Sil",children:c("i",{className:"bi bi-trash"})})]})})]},X.id)})})]})})})]})]})]})]})]}),p&&v&&c("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-file-earmark-text me-2"}),"Sipari Detaylar"]}),c("button",{type:"button",className:"btn-close",onClick:()=>{g(!1),C(null)}})]}),c("div",{className:"modal-body",children:m("div",{className:"row g-3",children:[m("div",{className:"col-md-6",children:[c("strong",{children:"Sipari ID:"})," ",v.id]}),m("div",{className:"col-md-6",children:[c("strong",{children:"Durum:"})," ",c("span",{className:`badge ${v.status==="active"?"bg-success":v.status==="pending"?"bg-warning":"bg-secondary"}`,children:v.status==="active"?"Aktif":v.status==="pending"?"Beklemede":"Pasif"})]}),m("div",{className:"col-md-12",children:[c("strong",{children:"Tarih Aralklar:"}),c("div",{className:"mt-2",children:v.dateRanges&&v.dateRanges.length>0?v.dateRanges.map((X,ie)=>m("div",{className:"badge bg-info me-2",children:[T(X.startDate)," - ",T(X.endDate)]},ie)):m("div",{className:"badge bg-info",children:[T(v.startDate)," - ",T(v.endDate)]})})]}),m("div",{className:"col-md-6",children:[c("strong",{children:"Toplam Panel:"})," ",v.totalPanels||Object.values(v.sitePanelCounts||{}).reduce((X,ie)=>X+parseInt(ie||0),0)]}),m("div",{className:"col-md-6",children:[c("strong",{children:"Toplam Hafta:"})," ",v.totalWeeks||0]}),m("div",{className:"col-md-6",children:[c("strong",{children:"Birim Fiyat:"})," ",O(v.weeklyRatePerPanel||300)," / panel / hafta"]}),m("div",{className:"col-md-6",children:[c("strong",{children:"Toplam Tutar:"})," ",c("span",{className:"fw-bold text-success",children:O(v.totalAmount||0)})]}),m("div",{className:"col-md-12",children:[c("strong",{children:"Siteler:"}),c("div",{className:"mt-2",children:(Q=v.siteIds)==null?void 0:Q.map(X=>{var Z;const ie=t.find(re=>String(re.id)===String(X)),ee=((Z=v.sitePanelCounts)==null?void 0:Z[X])||0;return m("div",{className:"badge bg-secondary me-2 mb-2",children:[(ie==null?void 0:ie.name)||X," (",ee," panel)"]},X)})})]})]})}),c("div",{className:"modal-footer",children:c("button",{type:"button",className:"btn btn-secondary",onClick:()=>{g(!1),C(null)},children:"Kapat"})})]})})})]})},Vse=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState([]),[l,A]=D.useState([]),[u,d]=D.useState(!0),[h,f]=D.useState("overview"),[p,g]=D.useState({totalSites:0,totalCompanies:0,activeAgreements:0,totalRevenue:0,totalExpenses:0,netBalance:0});D.useEffect(()=>{(async()=>{try{const[R,L,N,P,x]=await Promise.all([Yi(),Xa(),Sa(),lc(),ph()]);e(R),n(L),a(N),o(P),A(x);const k=P.filter(_=>_.type==="income").reduce((_,M)=>_+M.amount,0),y=Math.abs(P.filter(_=>_.type==="expense").reduce((_,M)=>_+M.amount,0)),S=N.filter(_=>_.status==="active").length;g({totalSites:R.length,totalCompanies:L.filter(_=>_.status==="active").length,activeAgreements:S,totalRevenue:k,totalExpenses:y,netBalance:k-y})}catch(R){console.error("Error fetching data:",R)}finally{d(!1)}})()},[]);const v=E=>{const R=r.find(L=>String(L.id)===String(E));return R?R.name:"Unknown"},C=E=>{const R=t.find(L=>String(L.id)===String(E));return R?R.name:"Unknown"},I=E=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(E),F=E=>new Date(E).toLocaleDateString("tr-TR");return u?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Veriler ykleniyor..."})]})}):m("div",{className:"container-fluid",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[m("div",{children:[c("h2",{className:"h3 fw-bold",children:"Gzlemci Panosu"}),m("p",{className:"text-muted mb-0",children:[c("i",{className:"bi bi-eye me-1"}),"Tm sistem verilerini grntleme yetkisi - Dzenleme yetkisi yok"]})]}),c("div",{className:"text-end",children:m("small",{className:"text-muted",children:["Son Gncelleme: ",new Date().toLocaleDateString("tr-TR")]})})]}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-md-2",children:c("div",{className:"card custom-card bg-primary text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-building fs-1 mb-2"}),c("h5",{className:"card-title",children:"Siteler"}),c("h2",{className:"card-text",children:p.totalSites})]})})}),c("div",{className:"col-md-2",children:c("div",{className:"card custom-card bg-success text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-building-add fs-1 mb-2"}),c("h5",{className:"card-title",children:"Firmalar"}),c("h2",{className:"card-text",children:p.totalCompanies})]})})}),c("div",{className:"col-md-2",children:c("div",{className:"card custom-card bg-info text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-handshake fs-1 mb-2"}),c("h5",{className:"card-title",children:"Aktif Anlama"}),c("h2",{className:"card-text",children:p.activeAgreements})]})})}),c("div",{className:"col-md-2",children:c("div",{className:"card custom-card bg-warning text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-arrow-down-circle fs-1 mb-2"}),c("h5",{className:"card-title",children:"Toplam Gelir"}),c("h3",{className:"card-text",children:I(p.totalRevenue)})]})})}),c("div",{className:"col-md-2",children:c("div",{className:"card custom-card bg-danger text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-arrow-up-circle fs-1 mb-2"}),c("h5",{className:"card-title",children:"Toplam Gider"}),c("h3",{className:"card-text",children:I(p.totalExpenses)})]})})}),c("div",{className:"col-md-2",children:c("div",{className:"card custom-card bg-secondary text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-wallet2 fs-1 mb-2"}),c("h5",{className:"card-title",children:"Net Bakiye"}),c("h3",{className:`card-text ${p.netBalance>=0?"text-white":"text-warning"}`,children:I(p.netBalance)})]})})})]}),m("ul",{className:"nav nav-tabs mb-4",children:[c("li",{className:"nav-item",children:m("button",{className:`nav-link ${h==="overview"?"active":""}`,onClick:()=>f("overview"),children:[c("i",{className:"bi bi-graph-up me-1"}),"Genel Bak"]})}),c("li",{className:"nav-item",children:m("button",{className:`nav-link ${h==="sites"?"active":""}`,onClick:()=>f("sites"),children:[c("i",{className:"bi bi-building me-1"}),"Siteler"]})}),c("li",{className:"nav-item",children:m("button",{className:`nav-link ${h==="companies"?"active":""}`,onClick:()=>f("companies"),children:[c("i",{className:"bi bi-building-add me-1"}),"Firmalar"]})}),c("li",{className:"nav-item",children:m("button",{className:`nav-link ${h==="agreements"?"active":""}`,onClick:()=>f("agreements"),children:[c("i",{className:"bi bi-handshake me-1"}),"Anlamalar"]})}),c("li",{className:"nav-item",children:m("button",{className:`nav-link ${h==="transactions"?"active":""}`,onClick:()=>f("transactions"),children:[c("i",{className:"bi bi-currency-dollar me-1"}),"lemler"]})})]}),h==="overview"&&m("div",{className:"row g-4",children:[c("div",{className:"col-md-6",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-info-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-handshake me-2"}),"Son Anlamalar"]})}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Firma"}),c("th",{children:"Site"}),c("th",{children:"Tutar"}),c("th",{children:"Durum"})]})}),c("tbody",{children:i.slice(0,5).map(E=>m("tr",{children:[c("td",{className:"fw-medium",children:v(E.companyId)}),c("td",{children:E.siteIds?E.siteIds.map(R=>C(R)).join(", "):"-"}),c("td",{children:I(E.totalAmount||0)}),c("td",{children:c("span",{className:`badge ${E.status==="active"?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"}`,children:E.status==="active"?"Aktif":"Pasif"})})]},E.id))})]})})})]})}),c("div",{className:"col-md-6",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-warning-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-currency-dollar me-2"}),"Son lemler"]})}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Tarih"}),c("th",{children:"Tr"}),c("th",{children:"Tutar"})]})}),c("tbody",{children:s.sort((E,R)=>new Date(R.date)-new Date(E.date)).slice(0,5).map(E=>m("tr",{children:[c("td",{children:F(E.date)}),c("td",{children:c("span",{className:`badge ${E.type==="income"?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"}`,children:E.type==="income"?"Gelir":"Gider"})}),c("td",{children:m("span",{className:E.type==="income"?"text-success":"text-danger",children:[E.type==="income"?"+":"",I(E.amount)]})})]},E.id))})]})})})]})})]}),h==="sites"&&m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-primary-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-building me-2"}),"Tm Siteler"]})}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Site Ad"}),c("th",{children:"Mahalle"}),c("th",{children:"Ynetici"}),c("th",{children:"Telefon"}),c("th",{children:"Blok Says"}),c("th",{children:"Asansr/Blok"}),c("th",{children:"Panel Says"}),c("th",{children:"Anlama Pay"})]})}),c("tbody",{children:t.map(E=>m("tr",{children:[c("td",{className:"fw-medium",children:E.name}),c("td",{children:E.neighborhood}),c("td",{children:E.manager}),c("td",{children:E.phone}),c("td",{children:E.blocks}),c("td",{children:E.elevatorsPerBlock}),c("td",{children:E.panels}),m("td",{children:["%",E.agreementPercentage]})]},E.id))})]})})})]}),h==="companies"&&m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-success-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-building-add me-2"}),"Tm Firmalar"]})}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Firma Ad"}),c("th",{children:"letiim Kiisi"}),c("th",{children:"Telefon"}),c("th",{children:"E-posta"}),c("th",{children:"Durum"})]})}),c("tbody",{children:r.map(E=>m("tr",{children:[c("td",{className:"fw-medium",children:E.name}),c("td",{children:E.contact}),c("td",{children:E.phone}),c("td",{children:E.email}),c("td",{children:c("span",{className:`badge ${E.status==="active"?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"}`,children:E.status==="active"?"Aktif":"Pasif"})})]},E.id))})]})})})]}),h==="agreements"&&m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-info-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-handshake me-2"}),"Tm Anlamalar"]})}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Firma"}),c("th",{children:"Siteler"}),c("th",{children:"Balang"}),c("th",{children:"Biti"}),c("th",{children:"Panel Says"}),c("th",{children:"Haftalk cret"}),c("th",{children:"Toplam Tutar"}),c("th",{children:"Durum"}),c("th",{children:"deme"})]})}),c("tbody",{children:i.map(E=>m("tr",{children:[c("td",{className:"fw-medium",children:v(E.companyId)}),c("td",{children:E.siteIds?E.siteIds.map(R=>C(R)).join(", "):"-"}),c("td",{children:F(E.startDate)}),c("td",{children:F(E.endDate)}),c("td",{children:E.totalPanels||0}),c("td",{children:I(E.weeklyRatePerPanel||0)}),c("td",{children:I(E.totalAmount||0)}),c("td",{children:c("span",{className:`badge ${E.status==="active"?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"}`,children:E.status==="active"?"Aktif":"Pasif"})}),c("td",{children:c("span",{className:`badge ${E.isPaid?"bg-success-subtle text-success-emphasis":"bg-warning-subtle text-warning-emphasis"}`,children:E.isPaid?"dendi":"Bekliyor"})})]},E.id))})]})})})]}),h==="transactions"&&m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-warning-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-currency-dollar me-2"}),"Tm lemler"]})}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Tarih"}),c("th",{children:"Tr"}),c("th",{children:"Kaynak"}),c("th",{children:"Aklama"}),c("th",{children:"Tutar"})]})}),c("tbody",{children:s.sort((E,R)=>new Date(R.date)-new Date(E.date)).map(E=>m("tr",{children:[c("td",{children:F(E.date)}),c("td",{children:c("span",{className:`badge ${E.type==="income"?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"}`,children:E.type==="income"?"Gelir":"Gider"})}),c("td",{className:"fw-medium",children:E.source}),c("td",{children:E.description}),c("td",{children:m("span",{className:E.type==="income"?"text-success":"text-danger",children:[E.type==="income"?"+":"",I(E.amount)]})})]},E.id))})]})})})]})]})},Kse=({companies:t=[],sites:e=[],agreements:r=[],sitePanelSelections:n={},selectedWeeks:i=[],formData:a={}})=>({getCompanyName:d=>{const h=t.find(f=>String(f.id)===String(d));return h?h.name:"Bilinmeyen Firma"},getSiteName:d=>{const h=e.find(f=>String(f.id)===String(d));return h?h.name:""},formatCurrency:d=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(d),dateRangesOverlap:(d,h,f,p)=>d<=p&&f<=h,generateBlockLabels:d=>{const h=[];for(let f=0;f<d;f++)h.push(String.fromCharCode(65+f));return h}}),jse=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState(!0),[l,A]=D.useState(""),[u,d]=D.useState(""),[h,f]=D.useState([]),[p,g]=D.useState(!1),[v,C]=D.useState(null),[I,F]=D.useState([]),[E,R]=D.useState(!0),[L,N]=D.useState(null),[P,x]=D.useState(!1),[k,y]=D.useState({location:"",locationLat:"",locationLng:"",manager:"",janitorPhones:"",notes:""}),[S,_]=D.useState(!1),[M,K]=D.useState(!1),[z,ae]=D.useState(null),[te,G]=D.useState(null),[ue,de]=D.useState(!1),[T,O]=D.useState([]),V=D.useRef(null),Q=D.useRef(null),X=DA(),ie=cc(),ee={lat:38.6748,lng:39.2233},Z="AIzaSyAO5-L4SrMA1e5q3ugtjYCI1gVI7KZoD6g",re=async()=>{try{o(!0);try{await vq()}catch(Ot){console.warn("Failed to cleanup expired images:",Ot)}const[Be,ze,st]=await Promise.all([Sa(),Yi(),Xa()]);e(Be),n(ze),a(st);const St=Be.filter(Ot=>{if(Ot.isDeleted||Ot.isArchived||Ot.status==="archived")return!1;const Et=new Date;return new Date(Ot.endDate)>=Et});f(St),await Ue()}catch(Be){console.error("Error loading data:",Be)}finally{o(!1)}};D.useEffect(()=>{re();const Be=()=>{re()};return window.addEventListener("agreementChanged",Be),()=>{window.removeEventListener("agreementChanged",Be)}},[]),D.useEffect(()=>{xe()},[l,u,t]);const ce=Kse({companies:i,sites:r,agreements:t}),Y=Be=>r.find(ze=>String(ze.id)===String(Be)),ge=Be=>new Date(Be).toLocaleDateString("tr-TR"),q=()=>{const Be=new Date;return t.filter(ze=>ze.isDeleted||ze.isArchived||ze.status==="archived"?!1:new Date(ze.endDate)>=Be)},W=(Be,ze,st)=>!ze&&!st?Be:Be.filter(St=>{const Ot=new Date(St.startDate),Et=new Date(St.endDate);if(ze&&st){const dt=new Date(ze),jt=new Date(st);return Ot<=jt&&Et>=dt}else if(ze){const dt=new Date(ze);return Ot>=dt}else if(st){const dt=new Date(st);return Et<=dt}return!0}),xe=()=>{const Be=q(),ze=W(Be,l,u);f(ze)},ye=()=>{A(""),d("");const Be=q();f(Be)},Ue=async()=>{try{const Be=await Dw();F(Be)}catch(Be){console.error("Error loading panel images:",Be)}},Me=async()=>{try{if(window.showConfirm){if(!await window.showConfirm("Tm Panel Fotoraflarn Sfrla","Tm sitelerdeki tm panel fotoraflar silinecek. Emin misiniz?","warning"))return}else if(!window.confirm("Tm panel fotoraflarn silmek istediinize emin misiniz?"))return;const Be=await wq();await Ue(),window.showAlert&&window.showAlert("Baarl",`Tm panel fotoraflar sfrland. Silinen grsel says: ${(Be==null?void 0:Be.deletedCount)??0}`,"success")}catch(Be){console.error("Error resetting panel images:",Be),window.showAlert&&window.showAlert("Hata","Panel fotoraflar sfrlanrken bir hata olutu.","error")}},$e=(Be,ze,st,St)=>{const Ot=Re(Be.id.toString(),ze,st,St.toString());C({agreement:Be,siteId:ze,blockId:st,panelId:St,fullPanelNumber:He(ze,st.split("-")[2],St),existingImage:Ot}),g(!0)},fe=async Be=>{if(v)try{if(v.existingImage)try{(await fetch(`http://localhost:3001/panelImages/${v.existingImage.id}`,{method:"DELETE"})).ok||console.warn("Failed to delete existing image, continuing with upload")}catch(st){console.warn("Error deleting existing image:",st)}const ze=new FormData;ze.append("image",Be),ze.append("agreementId",v.agreement.id),ze.append("siteId",v.siteId),ze.append("blockId",v.blockId),ze.append("panelId",v.panelId),ze.append("companyId",v.agreement.companyId),await gq(ze),await Ue(),g(!1),C(null),window.showAlert&&window.showAlert("Baarl","Panel fotoraf baaryla yklendi!","success")}catch(ze){console.error("Error uploading panel image:",ze),window.showAlert&&window.showAlert("Hata","Fotoraf yklenirken bir hata olutu.","error")}},Oe=async()=>{if(!(!v||!v.existingImage))try{if((await fetch(`http://localhost:3001/panelImages/${v.existingImage.id}`,{method:"DELETE"})).ok)await Ue(),g(!1),C(null),window.showAlert&&window.showAlert("Baarl","Panel fotoraf baaryla silindi!","success");else throw new Error("Failed to delete image")}catch(Be){console.error("Error deleting panel image:",Be),window.showAlert&&window.showAlert("Hata","Fotoraf silinirken bir hata olutu.","error")}},Re=(Be,ze,st,St)=>I.find(Ot=>Ot.agreementId===Be.toString()&&Ot.siteId===ze&&Ot.blockId===st&&Ot.panelId===St.toString()),He=(Be,ze,st)=>`${Be}${ze}${st}`,pe=Be=>{N(Be),y({location:Be.location||"",locationLat:Be.locationLat||"",locationLng:Be.locationLng||"",manager:Be.manager||"",janitorPhones:Array.isArray(Be.janitorPhones)?Be.janitorPhones.join(", "):Be.janitorPhones||"",notes:Be.notes||""}),x(!0)},Le=Be=>{const{name:ze,value:st}=Be.target;y(St=>({...St,[ze]:st}))},lt=async()=>{if(L)try{const Be=k.janitorPhones?k.janitorPhones.split(",").map(St=>St.trim()).filter(St=>St):[],ze={location:k.location,locationLat:k.locationLat||null,locationLng:k.locationLng||null,manager:k.manager,janitorPhones:Be,notes:k.notes};if(await SA(L.id,ze))await re(),x(!1),N(null),window.showAlert&&window.showAlert("Baarl","Site bilgileri baaryla gncellendi!","success");else throw new Error("Gncelleme baarsz")}catch(Be){console.error("Error updating site:",Be),window.showAlert&&window.showAlert("Hata","Site bilgileri gncellenirken bir hata olutu.","error")}},Ae=D.useCallback(Be=>{if(!Be)return;if(V.current=Be,window.google&&window.google.maps){const st=new window.google.maps.DirectionsService;Q.current=st}const ze=r.filter(st=>st.locationLat&&st.locationLng&&!isNaN(parseFloat(st.locationLat))&&!isNaN(parseFloat(st.locationLng)));if(ze.length>0&&window.google&&window.google.maps){const st=new window.google.maps.LatLngBounds;ze.forEach(Ot=>{st.extend({lat:parseFloat(Ot.locationLat),lng:parseFloat(Ot.locationLng)})}),Be.fitBounds(st);const St=window.google.maps.event.addListener(Be,"bounds_changed",()=>{Be.getZoom()>15&&Be.setZoom(15),window.google.maps.event.removeListener(St)})}K(!1)},[r]);D.useEffect(()=>{if(S&&Z){K(!0);const Be=setTimeout(()=>{K(!1)},1e4);return()=>clearTimeout(Be)}else K(!1)},[S,Z]);const Ne=(Be,ze)=>{const St=(ze.lat-Be.lat)*Math.PI/180,Ot=(ze.lng-Be.lng)*Math.PI/180,Et=Math.sin(St/2)*Math.sin(St/2)+Math.cos(Be.lat*Math.PI/180)*Math.cos(ze.lat*Math.PI/180)*Math.sin(Ot/2)*Math.sin(Ot/2);return 6371*(2*Math.atan2(Math.sqrt(Et),Math.sqrt(1-Et)))},ve=(Be,ze)=>{if(ze.length===0)return[];const st=[],St=[...ze];let Ot=Be;for(;St.length>0;){let Et=0,dt=Ne(Ot,St[0]);for(let sr=1;sr<St.length;sr++){const qt=Ne(Ot,St[sr]);qt<dt&&(dt=qt,Et=sr)}const jt=St.splice(Et,1)[0];st.push(jt),Ot=jt}return st},Ce=async()=>{if(!Q.current){window.showAlert&&window.showAlert("Hata","Harita yklenmedi. Ltfen bekleyin.","error");return}const Be=r.filter(ze=>ze.locationLat&&ze.locationLng&&!isNaN(parseFloat(ze.locationLat))&&!isNaN(parseFloat(ze.locationLng)));if(Be.length===0){window.showAlert&&window.showAlert("Hata","Rota oluturulamad. Koordinat olan site bulunamad.","error");return}try{de(!0);const ze=await ot();ae(ze);const st=Be.map(dt=>({lat:parseFloat(dt.locationLat),lng:parseFloat(dt.locationLng),site:dt})),St=ve(ze,st);if(St.length===0){window.showAlert&&window.showAlert("Bilgi","Rota oluturulacak site bulunamad.","info"),de(!1);return}const Ot=St.slice(0,-1).map(dt=>({location:new window.google.maps.LatLng(dt.lat,dt.lng),stopover:!0})),Et=St[St.length-1];Q.current.route({origin:new window.google.maps.LatLng(ze.lat,ze.lng),destination:new window.google.maps.LatLng(Et.lat,Et.lng),waypoints:Ot,optimizeWaypoints:!1,travelMode:window.google.maps.TravelMode.DRIVING},(dt,jt)=>{if(jt===window.google.maps.DirectionsStatus.OK){G(dt);const sr=[{...ze,isStart:!0,order:0},...St.map((qt,Ur)=>({...qt.site,order:Ur+1,isStart:!1}))];if(O(sr),V.current){const qt=new window.google.maps.LatLngBounds;qt.extend(new window.google.maps.LatLng(ze.lat,ze.lng)),St.forEach(Ur=>{qt.extend(new window.google.maps.LatLng(Ur.lat,Ur.lng))}),V.current.fitBounds(qt)}if(window.showAlert){const qt=dt.routes[0].legs.reduce((en,Qt)=>en+Qt.distance.value,0)/1e3,Ur=dt.routes[0].legs.reduce((en,Qt)=>en+Qt.duration.value,0)/60;window.showAlert("Baarl",`Rota oluturuldu! Toplam mesafe: ${qt.toFixed(1)} km, Tahmini sre: ${Math.round(Ur)} dakika`,"success")}}else{console.error("Directions request failed:",jt);let sr="Rota oluturulurken bir hata olutu.";jt==="REQUEST_DENIED"?sr=`Directions API aktif deil. Google Cloud Console'dan "Directions API" ve "Routes API" servislerini aktifletirmeniz gerekiyor.`:jt==="OVER_QUERY_LIMIT"?sr="API kullanm limiti ald. Ltfen daha sonra tekrar deneyin.":jt==="ZERO_RESULTS"&&(sr="Bu noktalar arasnda rota bulunamad."),window.showAlert&&window.showAlert("Hata",sr,"error")}de(!1)})}catch(ze){console.error("Error creating route:",ze),window.showAlert&&window.showAlert("Hata","Konumunuz alnamad. Ltfen taraycnzn konum iznini kontrol edin.","error"),de(!1)}},Ke=()=>{if(G(null),ae(null),O([]),V.current){const Be=r.filter(ze=>ze.locationLat&&ze.locationLng&&!isNaN(parseFloat(ze.locationLat))&&!isNaN(parseFloat(ze.locationLng)));if(Be.length>0){const ze=new window.google.maps.LatLngBounds;Be.forEach(st=>{ze.extend({lat:parseFloat(st.locationLat),lng:parseFloat(st.locationLng)})}),V.current.fitBounds(ze)}}},Ve=Be=>{if(!Be.locationLat||!Be.locationLng){window.showAlert&&window.showAlert("Hata","Bu site iin konum bilgisi bulunmamaktadr.","error");return}const ze=`https://www.google.com/maps/dir/?api=1&destination=${Be.locationLat},${Be.locationLng}`;window.open(ze,"_blank")},ot=()=>new Promise((Be,ze)=>{if(!navigator.geolocation){ze(new Error("Geolocation is not supported by your browser"));return}navigator.geolocation.getCurrentPosition(st=>{Be({lat:st.coords.latitude,lng:st.coords.longitude})},st=>{ze(st)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),pt=async()=>{try{window.showAlert&&window.showAlert("Bilgi","Konumunuz alnyor, ltfen bekleyin...","info");const Be=await ot();y(ze=>({...ze,locationLat:Be.lat.toString(),locationLng:Be.lng.toString()})),window.showAlert&&window.showAlert("Baarl",`Konumunuz alnd: ${Be.lat.toFixed(6)}, ${Be.lng.toFixed(6)}`,"success")}catch(Be){console.error("Error getting location:",Be),window.showAlert&&window.showAlert("Hata","Konumunuz alnamad. Ltfen taraycnzn konum iznini kontrol edin.","error")}},Bt=Be=>{if(Be.locationLat&&Be.locationLng){const St=`https://www.google.com/maps/dir/?api=1&destination=${Be.locationLat},${Be.locationLng}`;window.open(St,"_blank");return}if(!Be.location||!Be.location.trim()){window.showAlert&&window.showAlert("Uyar","Bu site iin konum bilgisi bulunmamaktadr. Ltfen nce konum bilgisini ekleyin.","warning");return}const st=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(Be.location)}`;window.open(st,"_blank")};return s?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Veriler ykleniyor..."})]})}):ie?(q(),c("div",{className:"container-fluid",children:m("div",{className:"row",children:[c("div",{className:`col-md-3 ${E?"":"d-none"}`,children:m("div",{className:"card custom-card shadow-sm sticky-top",style:{top:"20px",maxHeight:"calc(100vh - 40px)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[m("div",{className:"card-header bg-primary-subtle d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-building me-2"}),"Siteler (",r.length,")"]}),m("div",{className:"d-flex gap-1",children:[c("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>_(!S),title:S?"Haritay Gizle":"Haritay Gster",children:c("i",{className:"bi bi-map"})}),c("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>R(!1),title:"Meny Kapat",children:c("i",{className:"bi bi-chevron-left"})})]})]}),c("div",{className:"card-body p-0",style:{overflowY:"auto",flex:1},children:r.length>0?c("div",{className:"list-group list-group-flush",children:(r||[]).map(Be=>m("div",{className:`list-group-item ${(L==null?void 0:L.id)===Be.id?"active":""}`,children:[m("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[m("div",{className:"flex-grow-1",style:{cursor:"pointer"},onClick:()=>pe(Be),children:[c("h6",{className:"mb-1 fw-bold",children:Be.name}),m("small",{className:"text-muted d-block",children:[c("i",{className:"bi bi-geo-alt me-1"}),Be.neighborhood||"Konum belirtilmemi"]}),Be.manager&&m("small",{className:"text-muted d-block",children:[c("i",{className:"bi bi-person me-1"}),Be.manager]}),(Be.location||Be.locationLat&&Be.locationLng)&&m("small",{className:"text-success d-block mt-1",children:[c("i",{className:"bi bi-map me-1"}),Be.locationLat&&Be.locationLng?`Konum: ${parseFloat(Be.locationLat).toFixed(6)}, ${parseFloat(Be.locationLng).toFixed(6)}`:`Konum: ${Be.location}`]})]}),c("i",{className:"bi bi-pencil-square ms-2",style:{cursor:"pointer"},onClick:()=>pe(Be)})]}),Be.location&&m("button",{className:"btn btn-sm btn-outline-primary w-100",onClick:ze=>{ze.stopPropagation(),Bt(Be)},title:"Google Maps'te Yol Tarifi Al",children:[c("i",{className:"bi bi-geo-alt-fill me-1"}),"Haritada A"]})]},Be.id))}):m("div",{className:"text-center p-4 text-muted",children:[c("i",{className:"bi bi-building fs-1"}),c("p",{className:"mt-2 mb-0",children:"Henz site bulunmamaktadr"})]})})]})}),m("div",{className:E?"col-md-9":"col-md-12",children:[!E&&m("button",{className:"btn btn-outline-primary mb-3",onClick:()=>R(!0),children:[c("i",{className:"bi bi-list me-2"}),"Site Mensn A"]}),m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[m("div",{children:[c("h2",{className:"h3 fw-bold",children:"Personel Panosu"}),c("p",{className:"text-muted mb-0",children:"Tm aktif ve gelecek anlama panelleri"})]}),m("div",{className:"text-end",children:[m("button",{className:"btn btn-outline-warning me-2",onClick:Me,children:[c("i",{className:"bi bi-trash3 me-1"}),"Tm Panelleri Sfrla"]}),m("button",{className:"btn btn-outline-danger",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),X("/")},children:[c("i",{className:"bi bi-box-arrow-right me-1"}),"k Yap"]})]})]}),m("div",{className:"row g-4 mb-4",children:[c("div",{className:"col-lg-2 col-md-4 col-sm-6",children:c("div",{className:"card custom-card shadow-sm border-0",children:m("div",{className:"card-body text-center",children:[c("div",{className:"d-flex align-items-center justify-content-center mb-3",children:c("div",{className:"bg-primary bg-opacity-10 rounded-circle p-3",children:c("i",{className:"bi bi-file-earmark-text text-primary fs-4"})})}),c("h3",{className:"fw-bold text-primary mb-1",children:h.length}),c("p",{className:"text-muted mb-0",children:"Filtrelenmi Anlama"})]})})}),c("div",{className:"col-lg-2 col-md-4 col-sm-6",children:c("div",{className:"card custom-card shadow-sm border-0",children:m("div",{className:"card-body text-center",children:[c("div",{className:"d-flex align-items-center justify-content-center mb-3",children:c("div",{className:"bg-success bg-opacity-10 rounded-circle p-3",children:c("i",{className:"bi bi-check-circle text-success fs-4"})})}),c("h3",{className:"fw-bold text-success mb-1",children:t.filter(Be=>Be.status==="active").length}),c("p",{className:"text-muted mb-0",children:"Aktif Anlama"})]})})}),c("div",{className:"col-lg-2 col-md-4 col-sm-6",children:c("div",{className:"card custom-card shadow-sm border-0",children:m("div",{className:"card-body text-center",children:[c("div",{className:"d-flex align-items-center justify-content-center mb-3",children:c("div",{className:"bg-info bg-opacity-10 rounded-circle p-3",children:c("i",{className:"bi bi-building text-info fs-4"})})}),c("h3",{className:"fw-bold text-info mb-1",children:r.filter(Be=>Be.siteType!=="business_center").length}),c("p",{className:"text-muted mb-0",children:"Siteler"})]})})}),c("div",{className:"col-lg-2 col-md-4 col-sm-6",children:c("div",{className:"card custom-card shadow-sm border-0",children:m("div",{className:"card-body text-center",children:[c("div",{className:"d-flex align-items-center justify-content-center mb-3",children:c("div",{className:"bg-secondary bg-opacity-10 rounded-circle p-3",children:c("i",{className:"bi bi-briefcase text-secondary fs-4"})})}),c("h3",{className:"fw-bold text-secondary mb-1",children:r.filter(Be=>Be.siteType==="business_center").length}),c("p",{className:"text-muted mb-0",children:" Merkezleri"})]})})}),c("div",{className:"col-lg-2 col-md-4 col-sm-6",children:c("div",{className:"card custom-card shadow-sm border-0",children:m("div",{className:"card-body text-center",children:[c("div",{className:"d-flex align-items-center justify-content-center mb-3",children:c("div",{className:"bg-warning bg-opacity-10 rounded-circle p-3",children:c("i",{className:"bi bi-grid-3x3-gap text-warning fs-4"})})}),c("h3",{className:"fw-bold text-warning mb-1",children:h.reduce((Be,ze)=>Be+Object.values(ze.sitePanelCounts||{}).reduce((st,St)=>st+parseInt(St||0),0),0)}),c("p",{className:"text-muted mb-0",children:"Filtrelenmi Panel"})]})})})]}),c("div",{className:"row g-4 mb-4",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-info-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-calendar-range me-2"}),"Tarih Filtresi"]})}),m("div",{className:"card-body",children:[m("div",{className:"row g-3",children:[m("div",{className:"col-md-4",children:[c("label",{className:"form-label fw-medium",children:"Balang Tarihi:"}),c("input",{type:"date",className:"form-control",value:l,onChange:Be=>A(Be.target.value)})]}),m("div",{className:"col-md-4",children:[c("label",{className:"form-label fw-medium",children:"Biti Tarihi:"}),c("input",{type:"date",className:"form-control",value:u,onChange:Be=>d(Be.target.value)})]}),m("div",{className:"col-md-4 d-flex align-items-end",children:[m("button",{className:"btn btn-outline-secondary me-2",onClick:ye,children:[c("i",{className:"bi bi-x-circle me-1"}),"Temizle"]}),m("button",{className:"btn btn-primary",onClick:xe,children:[c("i",{className:"bi bi-funnel me-1"}),"Filtrele"]})]})]}),(l||u)&&c("div",{className:"mt-3",children:m("small",{className:"text-muted",children:[c("i",{className:"bi bi-info-circle me-1"}),"Filtre: ",l?`Balang: ${ge(l)}`:"",l&&u?" - ":"",u?`Biti: ${ge(u)}`:""]})})]})]})})}),h.length>0?c("div",{className:"row g-4 mb-4",children:c("div",{className:"col-md-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-primary-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-tv me-2"}),"Filtrelenmi Anlama Panelleri"]})}),c("div",{className:"card-body",children:c("div",{className:"row g-4",children:h.map(Be=>c("div",{className:"col-lg-12",children:m("div",{className:"card border-primary h-100",children:[c("div",{className:"card-header bg-primary-subtle",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-file-earmark-text me-2"}),"Anlama ID: ",Be.id]}),m("small",{className:"text-muted",children:[ge(Be.startDate)," - ",ge(Be.endDate)]}),m("div",{className:"mt-1",children:[c("span",{className:`badge ${Be.status==="active"?"bg-success-subtle text-success-emphasis":"bg-info-subtle text-info-emphasis"}`,children:Be.status==="active"?"Aktif":"Gelecek"}),c("span",{className:"badge bg-secondary-subtle text-secondary-emphasis ms-2",children:ce.getCompanyName(Be.companyId)})]})]}),c("div",{className:"fw-bold text-primary",children:ce.formatCurrency(Be.totalAmount)})]})}),c("div",{className:"card-body",children:c("div",{className:"row g-3",children:(Be.siteIds||[]).map(ze=>{var jt,sr;const st=Y(ze);if(!st)return null;let St,Ot;st.siteType==="business_center"?(St=1,Ot=parseInt(st.panels)||0):(St=parseInt(st.blocks)||0,Ot=(parseInt(st.elevatorsPerBlock)||0)*2,ce.generateBlockLabels(St));let Et=[],dt={};return Be.dateRanges&&Array.isArray(Be.dateRanges)&&Be.dateRanges.length>0?Be.dateRanges.forEach((qt,Ur)=>{var Mt,yn,xn;const en=`range-${Ur}`,Qt=((yn=(Mt=Be.siteBlockSelections)==null?void 0:Mt[en])==null?void 0:yn[ze])||[];Et=[...new Set([...Et,...Qt])];const Pn=((xn=Be.sitePanelSelections)==null?void 0:xn[ze])||{};Object.keys(Pn).forEach(Or=>{var le;dt[Or]||(dt[Or]=[]);const Fr=((le=Pn[Or])==null?void 0:le[en])||[];dt[Or]=[...new Set([...dt[Or],...Fr])]})}):(Et=((jt=Be.siteBlockSelections)==null?void 0:jt[ze])||[],dt=((sr=Be.sitePanelSelections)==null?void 0:sr[ze])||{}),c("div",{className:"col-md-12",children:m("div",{className:"card border-info",children:[c("div",{className:"card-header bg-info-subtle",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("h6",{className:"mb-0",children:[c("i",{className:"bi bi-building me-2"}),st.name]}),m("span",{className:"badge bg-primary-subtle text-primary-emphasis",children:[Object.values(Be.sitePanelCounts||{}).reduce((qt,Ur)=>qt+parseInt(Ur||0),0)," panel"]})]})}),c("div",{className:"card-body",children:Et.length===0?m("div",{className:"text-center py-3 text-muted",children:[c("i",{className:"bi bi-exclamation-triangle"}),c("p",{className:"mb-0 mt-2",children:"Bu anlama iin blok bilgisi bulunamad."})]}):c("div",{className:"row g-3",children:Et.map(qt=>{const Ur=qt.split("-")[2],en=dt[qt]||[];return c("div",{className:"col-md-6 col-lg-4",children:m("div",{className:"card border-warning",children:[c("div",{className:"card-header bg-warning-subtle",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:`bi ${st.siteType==="business_center"?"bi-briefcase":"bi-grid-3x3-gap"} me-1`}),st.siteType==="business_center"?" Merkezi":`${Ur} Blok`]})}),m("div",{className:"card-body",children:[m("div",{className:"small text-muted mb-2",children:["Kullanlan Paneller: ",en.length," / ",Ot]}),c("div",{className:"d-flex flex-wrap gap-1",children:Array.from({length:Ot},(Qt,Pn)=>{const Mt=Pn+1,yn=`panel-${Mt}`,xn=en.includes(yn),Or=`${ze}${Ur}${Mt}`,Fr=Re(Be.id.toString(),ze,qt,Mt.toString());return m("div",{className:`d-flex align-items-center justify-content-center ${Fr?"":xn?"bg-primary text-white":"bg-light text-muted"} border rounded position-relative`,style:{width:Fr?"90px":"60px",height:Fr?"120px":"80px",fontSize:"8px",fontWeight:"bold",flexDirection:"column",cursor:xn?"pointer":"default",backgroundImage:Fr?`url(${Fr.url})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:Fr?"120px":"80px"},title:xn?`Panel ${Or} - ${ce.getCompanyName(Be.companyId)}${Fr?" (Fotoraf var)":""}`:`Panel ${Mt} - Bo`,onClick:()=>{xn&&$e(Be,ze,qt,Mt)},children:[!Fr&&m(kr,{children:[c("div",{className:"fw-bold",children:Mt}),xn&&c("div",{className:"text-truncate",style:{fontSize:"7px",lineHeight:"1",maxWidth:"50px"},children:Or})]}),xn&&c("div",{className:"position-absolute top-0 end-0",style:{fontSize:"8px"},children:Fr?c("i",{className:"bi bi-camera-fill text-success"}):c("i",{className:"bi bi-camera text-warning"})}),Fr&&m("div",{className:"position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white text-center",style:{fontSize:"6px",padding:"2px"},children:["Panel ",Mt]})]},yn)})})]})]})},qt)})})})]})},ze)})})})]})},Be.id))})})]})})}):c("div",{className:"row g-4 mb-4",children:c("div",{className:"col-md-12",children:c("div",{className:"card custom-card shadow-sm",children:m("div",{className:"card-body text-center py-5",children:[c("i",{className:"bi bi-file-earmark text-muted fs-1"}),c("h4",{className:"text-muted mt-3",children:l||u?"Seilen tarih aralnda anlama bulunamad":"Henz anlama bulunmamaktadr"}),c("p",{className:"text-muted",children:l||u?"Farkl tarih aral semeyi deneyin.":"Aktif veya gelecek anlama bulunamad."}),(l||u)&&m("button",{className:"btn btn-outline-primary mt-3",onClick:ye,children:[c("i",{className:"bi bi-x-circle me-1"}),"Filtreleri Temizle"]})]})})})}),p&&v&&c("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog modal-dialog-centered",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-camera me-2"}),"Panel Fotoraf Ykle"]}),c("button",{type:"button",className:"btn-close",onClick:()=>{g(!1),C(null)}})]}),m("div",{className:"modal-body",children:[m("div",{className:"text-center mb-3",children:[m("h6",{className:"fw-bold",children:["Panel: ",v.fullPanelNumber]}),m("p",{className:"text-muted mb-0",children:["Firma: ",ce.getCompanyName(v.agreement.companyId)]})]}),v.existingImage&&m("div",{className:"mb-3",children:[c("h6",{className:"text-center mb-2",children:"Mevcut Fotoraf:"}),c("div",{className:"text-center",children:c("img",{src:v.existingImage.url,alt:"Mevcut Panel Fotoraf",style:{maxWidth:"200px",maxHeight:"200px",objectFit:"cover",border:"2px solid #dee2e6",borderRadius:"8px"}})})]}),m("div",{className:"d-grid gap-2",children:[m("button",{className:"btn btn-primary",onClick:async()=>{try{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const Be=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),ze=document.createElement("video");ze.srcObject=Be,ze.style.width="100%",ze.style.height="300px",ze.style.objectFit="cover",ze.autoplay=!0,ze.muted=!0;const st=document.createElement("div");st.style.position="fixed",st.style.top="0",st.style.left="0",st.style.width="100%",st.style.height="100%",st.style.backgroundColor="rgba(0,0,0,0.8)",st.style.zIndex="9999",st.style.display="flex",st.style.flexDirection="column",st.style.alignItems="center",st.style.justifyContent="center";const St=document.createElement("div");St.style.backgroundColor="white",St.style.padding="20px",St.style.borderRadius="10px",St.style.maxWidth="90%",St.style.maxHeight="90%";const Ot=document.createElement("div");Ot.style.marginTop="20px",Ot.style.display="flex",Ot.style.gap="10px",Ot.style.justifyContent="center";const Et=document.createElement("button");Et.textContent="Fotoraf ek",Et.style.padding="10px 20px",Et.style.backgroundColor="#007bff",Et.style.color="white",Et.style.border="none",Et.style.borderRadius="5px",Et.style.cursor="pointer";const dt=document.createElement("button");dt.textContent="ptal",dt.style.padding="10px 20px",dt.style.backgroundColor="#6c757d",dt.style.color="white",dt.style.border="none",dt.style.borderRadius="5px",dt.style.cursor="pointer";const jt=document.createElement("canvas"),sr=jt.getContext("2d");Et.onclick=()=>{jt.width=ze.videoWidth,jt.height=ze.videoHeight,sr.drawImage(ze,0,0),jt.toBlob(qt=>{if(qt){const Ur=new File([qt],"camera-photo.jpg",{type:"image/jpeg"});fe(Ur)}},"image/jpeg",.8),Be.getTracks().forEach(qt=>qt.stop()),document.body.removeChild(st)},dt.onclick=()=>{Be.getTracks().forEach(qt=>qt.stop()),document.body.removeChild(st)},Ot.appendChild(Et),Ot.appendChild(dt),St.appendChild(ze),St.appendChild(Ot),st.appendChild(St),document.body.appendChild(st)}else{const Be=document.createElement("input");Be.type="file",Be.accept="image/*",Be.capture="environment",Be.onchange=ze=>{ze.target.files&&ze.target.files[0]&&fe(ze.target.files[0])},Be.click()}}catch(Be){console.error("Camera error:",Be);const ze=document.createElement("input");ze.type="file",ze.accept="image/*",ze.capture="environment",ze.onchange=st=>{st.target.files&&st.target.files[0]&&fe(st.target.files[0])},ze.click()}},children:[c("i",{className:"bi bi-camera me-2"}),"Kamera ile ek"]}),m("button",{className:"btn btn-outline-primary",onClick:()=>{const Be=document.createElement("input");Be.type="file",Be.accept="image/*",Be.onchange=ze=>{ze.target.files&&ze.target.files[0]&&fe(ze.target.files[0])},Be.click()},children:[c("i",{className:"bi bi-image me-2"}),"Galeriden Se"]}),v.existingImage&&m("button",{className:"btn btn-danger",onClick:Oe,children:[c("i",{className:"bi bi-trash me-2"}),"Fotoraf Sil"]})]})]})]})})}),c("div",{className:"row mb-4",children:c("div",{className:"col-12",children:m("div",{className:"card border-0 shadow-sm",style:{borderRadius:"16px",overflow:"hidden"},children:[m("div",{className:"card-header bg-white border-0 py-3 d-flex justify-content-between align-items-center",children:[m("div",{children:[m("h5",{className:"mb-0 fw-bold text-dark",children:[c("i",{className:"bi bi-map me-2"}),"Elaz - Site Haritas"]}),m("small",{className:"text-muted",children:[r.filter(Be=>Be.locationLat&&Be.locationLng).length," site haritada gsteriliyor"]})]}),m("div",{className:"d-flex gap-2",children:[te?m("button",{className:"btn btn-sm btn-outline-danger",onClick:Ke,children:[c("i",{className:"bi bi-x-circle me-1"}),"Rotay Temizle"]}):c("button",{className:"btn btn-sm btn-primary",onClick:Ce,disabled:ue||!r.some(Be=>Be.locationLat&&Be.locationLng),children:ue?m(kr,{children:[c("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Rota Hesaplanyor..."]}):m(kr,{children:[c("i",{className:"bi bi-route me-1"}),"Rota Olutur"]})}),m("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>_(!S),children:[c("i",{className:`bi ${S?"bi-chevron-up":"bi-chevron-down"} me-1`}),S?"Haritay Gizle":"Haritay Gster"]})]})]}),S&&m(kr,{children:[te&&T.length>0&&m("div",{className:"card-body border-bottom bg-light",children:[m("h6",{className:"fw-bold mb-3",children:[c("i",{className:"bi bi-list-ol me-2"}),"Rota Sras (",T.length-1," Site)"]}),c("div",{className:"row g-2",style:{maxHeight:"150px",overflowY:"auto"},children:T.map((Be,ze)=>Be.isStart?null:c("div",{className:"col-md-6 col-lg-4",children:c("div",{className:"card border-0 shadow-sm h-100",children:c("div",{className:"card-body p-2",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{className:"flex-grow-1",children:[m("div",{className:"d-flex align-items-center mb-1",children:[c("span",{className:"badge bg-primary me-2",children:ze}),c("strong",{className:"small",children:Be.name})]}),Be.neighborhood&&c("small",{className:"text-muted d-block",children:Be.neighborhood})]}),c("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>Ve(Be),title:"Yol Tarifi Al",children:c("i",{className:"bi bi-navigation"})})]})})})},Be.id||ze))})]}),m("div",{className:"card-body p-0",style:{height:"600px",position:"relative"},children:[S&&Z&&c(Rw,{googleMapsApiKey:Z,children:m(LE,{mapContainerStyle:{width:"100%",height:"100%"},center:ee,zoom:12,options:{zoomControl:!0,streetViewControl:!1,mapTypeControl:!0,fullscreenControl:!0},onLoad:Ae,onError:()=>{console.error("Google Maps load error"),K(!1)},children:[z&&c(of,{position:z,icon:window.google&&window.google.maps?{url:"https://maps.google.com/mapfiles/ms/icons/green-dot.png",scaledSize:new window.google.maps.Size(40,40)}:void 0,title:"Balang Noktas (Sizin Konumunuz)"}),r.filter(Be=>Be.locationLat&&Be.locationLng).map(Be=>c(of,{position:{lat:parseFloat(Be.locationLat),lng:parseFloat(Be.locationLng)},onClick:()=>N(Be),icon:window.google&&window.google.maps?{url:Be.siteType==="business_center"?"https://maps.google.com/mapfiles/ms/icons/blue-dot.png":"https://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new window.google.maps.Size(32,32)}:void 0},Be.id)),te&&c(OE,{directions:te}),L&&L.locationLat&&L.locationLng&&c(Uw,{position:{lat:parseFloat(L.locationLat),lng:parseFloat(L.locationLng)},onCloseClick:()=>N(null),children:m("div",{style:{maxWidth:"250px"},children:[m("h6",{className:"fw-bold mb-2",children:[c("i",{className:`bi ${L.siteType==="business_center"?"bi-briefcase":"bi-building"} me-1`}),L.name]}),L.neighborhood&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-geo-alt me-1"}),c("strong",{children:"Mahalle:"})," ",L.neighborhood]}),L.manager&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-person me-1"}),c("strong",{children:"Ynetici:"})," ",L.manager]}),L.phone&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-telephone me-1"}),c("strong",{children:"Telefon:"})," ",L.phone]}),m("div",{className:"d-flex gap-2 mt-2 flex-wrap",children:[m("button",{className:"btn btn-sm btn-primary",onClick:()=>Bt(L),children:[c("i",{className:"bi bi-map me-1"}),"Yol Tarifi"]}),L.blocks&&m("span",{className:"badge bg-info",children:[L.blocks," Blok"]}),L.panels&&m("span",{className:"badge bg-success",children:[L.panels," Panel"]})]})]})})]})}),S&&M&&c("div",{className:"d-flex align-items-center justify-content-center h-100",children:m("div",{className:"text-center",children:[c("div",{className:"spinner-border text-primary",role:"status"}),c("p",{className:"mt-3 text-muted",children:"Harita ykleniyor..."})]})}),S&&!Z&&!M&&c("div",{className:"d-flex align-items-center justify-content-center h-100",children:m("div",{className:"alert alert-warning text-center",style:{maxWidth:"600px"},children:[m("h6",{className:"alert-heading",children:[c("i",{className:"bi bi-exclamation-triangle me-2"}),"Google Maps API Key Gerekli"]}),c("p",{className:"mb-0",children:"Harita grnmn kullanabilmek iin Google Maps API key gerekli."})]})})]})]})]})})}),P&&L&&c("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-pencil-square me-2"}),"Site Bilgilerini Dzenle: ",L.name]}),c("button",{type:"button",className:"btn-close",onClick:()=>{x(!1),N(null)}})]}),c("div",{className:"modal-body",children:m("div",{className:"row g-3",children:[m("div",{className:"col-md-12",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[m("label",{className:"form-label fw-medium mb-0",children:[c("i",{className:"bi bi-geo-alt me-1"}),"Konum Bilgisi (Koordinatlar)"]}),m("div",{children:[m("button",{type:"button",className:"btn btn-sm btn-outline-success me-2",onClick:pt,title:"Mevcut Konumunuzu Al",children:[c("i",{className:"bi bi-geo-alt-fill me-1"}),"Konumumu Al"]}),k.locationLat&&k.locationLng&&m("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{const Be={...L,locationLat:k.locationLat,locationLng:k.locationLng};Bt(Be)},title:"Google Maps'te Yol Tarifi Al",children:[c("i",{className:"bi bi-map me-1"}),"Haritada A"]})]})]}),m("div",{className:"row g-2",children:[m("div",{className:"col-md-6",children:[c("label",{className:"form-label small",children:"Enlem (Latitude)"}),c("input",{type:"text",className:"form-control",name:"locationLat",value:k.locationLat,onChange:Le,placeholder:"rn: 41.0082"})]}),m("div",{className:"col-md-6",children:[c("label",{className:"form-label small",children:"Boylam (Longitude)"}),c("input",{type:"text",className:"form-control",name:"locationLng",value:k.locationLng,onChange:Le,placeholder:"rn: 28.9784"})]})]}),c("input",{type:"text",className:"form-control mt-2",name:"location",value:k.location,onChange:Le,placeholder:"Adres (Opsiyonel - rn: stanbul, Kadky, Acbadem Mahallesi...)"}),c("small",{className:"text-muted",children:'"Konumumu Al" butonuna tklayarak mevcut konumunuzu otomatik alabilir veya manuel olarak koordinatlar girebilirsiniz'})]}),m("div",{className:"col-md-12",children:[m("label",{className:"form-label fw-medium",children:[c("i",{className:"bi bi-person me-1"}),"Site Yneticisi"]}),c("input",{type:"text",className:"form-control",name:"manager",value:k.manager,onChange:Le,placeholder:"Site yneticisinin ad"})]}),m("div",{className:"col-md-12",children:[m("label",{className:"form-label fw-medium",children:[c("i",{className:"bi bi-telephone me-1"}),"Kapc Telefonlar"]}),c("input",{type:"text",className:"form-control",name:"janitorPhones",value:k.janitorPhones,onChange:Le,placeholder:"Birden fazla telefon iin virglle ayrn (rn: 0532 123 45 67, 0533 987 65 43)"}),c("small",{className:"text-muted",children:"Birden fazla telefon numarasn virglle ayrarak girebilirsiniz"})]}),m("div",{className:"col-md-12",children:[m("label",{className:"form-label fw-medium",children:[c("i",{className:"bi bi-sticky me-1"}),"Notlar"]}),c("textarea",{className:"form-control",name:"notes",value:k.notes,onChange:Le,rows:"4",placeholder:"Site hakknda zel notlar..."})]})]})}),m("div",{className:"modal-footer",children:[m("button",{type:"button",className:"btn btn-secondary",onClick:()=>{x(!1),N(null)},children:[c("i",{className:"bi bi-x-circle me-1"}),"ptal"]}),m("button",{type:"button",className:"btn btn-primary",onClick:lt,children:[c("i",{className:"bi bi-check-circle me-1"}),"Kaydet"]})]})]})})})]})]})})):(X("/"),null)};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Dv={};Dv.version="0.18.5";var N6=1252,zse=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],iB={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},aB=function(t){zse.indexOf(t)!=-1&&(N6=iB[0]=t)};function $se(){aB(1252)}var Po=function(t){aB(t)};function sB(){Po(1200),$se()}function t4(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Gse(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function S6(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Lm=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Gse(t.slice(2)):e==254&&r==255?S6(t.slice(2)):e==65279?t.slice(1):t},Zg=function(e){return String.fromCharCode(e)},r4=function(e){return String.fromCharCode(e)},Zc,cA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $0(t){for(var e="",r=0,n=0,i=0,a=0,s=0,o=0,l=0,A=0;A<t.length;)r=t.charCodeAt(A++),a=r>>2,n=t.charCodeAt(A++),s=(r&3)<<4|n>>4,i=t.charCodeAt(A++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),e+=cA.charAt(a)+cA.charAt(s)+cA.charAt(o)+cA.charAt(l);return e}function zs(t){var e="",r=0,n=0,i=0,a=0,s=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var A=0;A<t.length;)a=cA.indexOf(t.charAt(A++)),s=cA.indexOf(t.charAt(A++)),r=a<<2|s>>4,e+=String.fromCharCode(r),o=cA.indexOf(t.charAt(A++)),n=(s&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=cA.indexOf(t.charAt(A++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Br=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),gc=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function IA(t){return Br?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function n4(t){return Br?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Us=function(e){return Br?gc(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Zw(t){if(typeof ArrayBuffer>"u")return Us(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function jA(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Wse(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function oB(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return oB(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Wi=Br?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:gc(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),i=0;for(e=0,r=0;e<t.length;r+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function qse(t){for(var e=[],r=0,n=t.length+250,i=IA(t.length+255),a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s<128)i[r++]=s;else if(s<2048)i[r++]=192|s>>6&31,i[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=t.charCodeAt(++a)&1023;i[r++]=240|s>>8&7,i[r++]=128|s>>2&63,i[r++]=128|o>>6&15|(s&3)<<4,i[r++]=128|o&63}else i[r++]=224|s>>12&15,i[r++]=128|s>>6&63,i[r++]=128|s&63;r>n&&(e.push(i.slice(0,r)),r=0,i=IA(65535),n=65530)}return e.push(i.slice(0,r)),Wi(e)}var Ya=/\u0000/g,Dm=/[\u0001-\u0006]/g;function Rh(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Lo(t,e){var r=""+t;return r.length>=e?r:ri("0",e-r.length)+r}function lB(t,e){var r=""+t;return r.length>=e?r:ri(" ",e-r.length)+r}function Rv(t,e){var r=""+t;return r.length>=e?r:r+ri(" ",e-r.length)}function Xse(t,e){var r=""+Math.round(t);return r.length>=e?r:ri("0",e-r.length)+r}function Yse(t,e){var r=""+t;return r.length>=e?r:ri("0",e-r.length)+r}var i4=Math.pow(2,32);function nh(t,e){if(t>i4||t<-i4)return Xse(t,e);var r=Math.round(t);return Yse(r,e)}function Uv(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var a4=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Gy=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Jse(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var lr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},s4={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Zse={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Ov(t,e,r){for(var n=t<0?-1:1,i=t*n,a=0,s=1,o=0,l=1,A=0,u=0,d=Math.floor(i);A<e&&(d=Math.floor(i),o=d*s+a,u=d*A+l,!(i-d<5e-8));)i=1/(i-d),a=s,s=o,l=A,A=u;if(u>e&&(A>e?(u=l,o=a):(u=A,o=s)),!r)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function _u(t,e,r){if(t>2958465||t<0)return null;var n=t|0,i=Math.floor(86400*(t-n)),a=0,s=[],o={D:n,T:i,u:86400*(t-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=aoe(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=a,o}var k6=new Date(1899,11,31,0,0,0),eoe=k6.getTime(),toe=new Date(1900,2,1,0,0,0);function T6(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=toe&&(r+=24*60*60*1e3),(r-(eoe+(t.getTimezoneOffset()-k6.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function cB(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function roe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function noe(t){var e=t<0?12:11,r=cB(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function ioe(t){var e=cB(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function G0(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=noe(t):e===10?r=t.toFixed(10).substr(0,12):r=ioe(t),cB(roe(r.toUpperCase()))}function ed(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):G0(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return po(14,T6(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function aoe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function soe(t,e,r,n){var i="",a=0,s=0,o=r.y,l,A=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,A=2;break;default:l=o%1e4,A=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,A=e.length;break;case 3:return Gy[r.m-1][1];case 5:return Gy[r.m-1][0];default:return Gy[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,A=e.length;break;case 3:return a4[r.q][0];default:return a4[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,A=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,A=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,A=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Lo(r.S,e.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,a=Math.round(s*(r.S+r.u)),a>=60*s&&(a=0),e==="s"?a===0?"0":""+a/s:(i=Lo(a,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}A=e.length===3?1:2;break;case 101:l=o,A=1;break}var u=A>0?Lo(l,A):"";return u}function AA(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var I6=/%/g;function ooe(t,e,r){var n=e.replace(I6,""),i=e.length-n.length;return tc(t,n,r*Math.pow(10,2*i))+ri("%",i)}function loe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return tc(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function F6(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+F6(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(e/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),r.indexOf("e")===-1){var s=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,A,u){return l+A+u.substr(0,(i+a)%i)+"."+u.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var P6=/# (\?+)( ?)\/( ?)(\d+)/;function coe(t,e,r){var n=parseInt(t[4],10),i=Math.round(e*n),a=Math.floor(i/n),s=i-a*n,o=n;return r+(a===0?"":""+a)+" "+(s===0?ri(" ",t[1].length+1+t[4].length):lB(s,t[1].length)+t[2]+"/"+t[3]+Lo(o,t[4].length))}function Aoe(t,e,r){return r+(e===0?"":""+e)+ri(" ",t[1].length+2+t[4].length)}var L6=/^#*0*\.([0#]+)/,D6=/\).*[0#]/,R6=/\(###\) ###\\?-####/;function za(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function o4(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function l4(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function uoe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function doe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Zs(t,e,r){if(t.charCodeAt(0)===40&&!e.match(D6)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Zs("n",n,r):"("+Zs("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return loe(t,e,r);if(e.indexOf("%")!==-1)return ooe(t,e,r);if(e.indexOf("E")!==-1)return F6(e,r);if(e.charCodeAt(0)===36)return"$"+Zs(t,e.substr(e.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),A=r<0?"-":"";if(e.match(/^00+$/))return A+nh(l,e.length);if(e.match(/^[#?]+$/))return i=nh(r,0),i==="0"&&(i=""),i.length>e.length?i:za(e.substr(0,e.length-i.length))+i;if(a=e.match(P6))return coe(a,l,A);if(e.match(/^#+0+$/))return A+nh(l,e.length-e.indexOf("0"));if(a=e.match(L6))return i=o4(r,a[1].length).replace(/^([^\.]+)$/,"$1."+za(a[1])).replace(/\.$/,"."+za(a[1])).replace(/\.(\d*)$/,function(p,g){return"."+g+ri("0",za(a[1]).length-g.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return A+o4(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return A+AA(nh(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Zs(t,e,-r):AA(""+(Math.floor(r)+uoe(r,a[1].length)))+"."+Lo(l4(r,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return Zs(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Rh(Zs(t,e.replace(/[\\-]/g,""),r)),s=0,Rh(Rh(e.replace(/\\/g,"")).replace(/[0#]/g,function(p){return s<i.length?i.charAt(s++):p==="0"?"0":""}));if(e.match(R6))return i=Zs(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=Ov(l,Math.pow(10,s)-1,!1),i=""+A,u=tc("n",a[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+a[2]+"/"+a[3],u=Rv(o[2],s),u.length<a[4].length&&(u=za(a[4].substr(a[4].length-u.length))+u),i+=u,i;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=Ov(l,Math.pow(10,s)-1,!0),A+(o[0]||(o[1]?"":"0"))+" "+(o[1]?lB(o[1],s)+a[2]+"/"+a[3]+Rv(o[2],s):ri(" ",2*s+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return i=nh(r,0),e.length<=i.length?i:za(e.substr(0,e.length-i.length))+i;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var d=e.indexOf(".")-s,h=e.length-i.length-d;return za(e.substr(0,d)+i+e.substr(e.length-h))}if(a=e.match(/^00,000\.([#0]*0)$/))return s=l4(r,a[1].length),r<0?"-"+Zs(t,e,-r):AA(doe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Lo(0,3-p.length):"")+p})+"."+Lo(s,a[1].length);switch(e){case"###,##0.00":return Zs(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var f=AA(nh(l,0));return f!=="0"?A+f:"";case"###,###.00":return Zs(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Zs(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function hoe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return tc(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function foe(t,e,r){var n=e.replace(I6,""),i=e.length-n.length;return tc(t,n,r*Math.pow(10,2*i))+ri("%",i)}function U6(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+U6(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(e/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),!r.match(/[Ee]/)){var s=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,A,u){return l+A+u.substr(0,(i+a)%i)+"."+u.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function al(t,e,r){if(t.charCodeAt(0)===40&&!e.match(D6)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?al("n",n,r):"("+al("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return hoe(t,e,r);if(e.indexOf("%")!==-1)return foe(t,e,r);if(e.indexOf("E")!==-1)return U6(e,r);if(e.charCodeAt(0)===36)return"$"+al(t,e.substr(e.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),A=r<0?"-":"";if(e.match(/^00+$/))return A+Lo(l,e.length);if(e.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>e.length?i:za(e.substr(0,e.length-i.length))+i;if(a=e.match(P6))return Aoe(a,l,A);if(e.match(/^#+0+$/))return A+Lo(l,e.length-e.indexOf("0"));if(a=e.match(L6))return i=(""+r).replace(/^([^\.]+)$/,"$1."+za(a[1])).replace(/\.$/,"."+za(a[1])),i=i.replace(/\.(\d*)$/,function(p,g){return"."+g+ri("0",za(a[1]).length-g.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return A+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return A+AA(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+al(t,e,-r):AA(""+r)+"."+ri("0",a[1].length);if(a=e.match(/^#,#*,#0/))return al(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Rh(al(t,e.replace(/[\\-]/g,""),r)),s=0,Rh(Rh(e.replace(/\\/g,"")).replace(/[0#]/g,function(p){return s<i.length?i.charAt(s++):p==="0"?"0":""}));if(e.match(R6))return i=al(t,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=Ov(l,Math.pow(10,s)-1,!1),i=""+A,u=tc("n",a[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+a[2]+"/"+a[3],u=Rv(o[2],s),u.length<a[4].length&&(u=za(a[4].substr(a[4].length-u.length))+u),i+=u,i;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=Ov(l,Math.pow(10,s)-1,!0),A+(o[0]||(o[1]?"":"0"))+" "+(o[1]?lB(o[1],s)+a[2]+"/"+a[3]+Rv(o[2],s):ri(" ",2*s+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return i=""+r,e.length<=i.length?i:za(e.substr(0,e.length-i.length))+i;if(a=e.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var d=e.indexOf(".")-s,h=e.length-i.length-d;return za(e.substr(0,d)+i+e.substr(e.length-h))}if(a=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+al(t,e,-r):AA(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Lo(0,3-p.length):"")+p})+"."+Lo(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var f=AA(""+l);return f!=="0"?A+f:"";default:if(e.match(/\.[0#?]*$/))return al(t,e.slice(0,e.lastIndexOf(".")),r)+za(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function tc(t,e,r){return(r|0)===r?al(t,e,r):Zs(t,e,r)}function moe(t){for(var e=[],r=!1,n=0,i=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(i,n-i),i=n+1}if(e[e.length]=t.substr(i),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var O6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Pf(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":Uv(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(O6))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function poe(t,e,r,n){for(var i=[],a="",s=0,o="",l="t",A,u,d,h="H";s<t.length;)switch(o=t.charAt(s)){case"G":if(!Uv(t,s))throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"G",v:"General"},s+=7;break;case'"':for(a="";(d=t.charCodeAt(++s))!==34&&s<t.length;)a+=String.fromCharCode(d);i[i.length]={t:"t",v:a},++s;break;case"\\":var f=t.charAt(++s),p=f==="("||f===")"?f:"t";i[i.length]={t:p,v:f},++s;break;case"_":i[i.length]={t:"t",v:" "},s+=2;break;case"@":i[i.length]={t:"T",v:e},++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2"){if(A==null&&(A=_u(e,r,t.charAt(s+1)==="2"),A==null))return"";i[i.length]={t:"X",v:t.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||A==null&&(A=_u(e,r),A==null))return"";for(a=o;++s<t.length&&t.charAt(s).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),i[i.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var g={t:o,v:o};if(A==null&&(A=_u(e,r)),t.substr(s,3).toUpperCase()==="A/P"?(A!=null&&(g.v=A.H>=12?"P":"A"),g.t="T",h="h",s+=3):t.substr(s,5).toUpperCase()==="AM/PM"?(A!=null&&(g.v=A.H>=12?"PM":"AM"),g.t="T",s+=5,h="h"):t.substr(s,5).toUpperCase()==="/"?(A!=null&&(g.v=A.H>=12?"":""),g.t="T",s+=5,h="h"):(g.t="t",++s),A==null&&g.t==="T")return"";i[i.length]=g,l=o;break;case"[":for(a=o;t.charAt(s++)!=="]"&&s<t.length;)a+=t.charAt(s);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(O6)){if(A==null&&(A=_u(e,r),A==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Pf(t)||(i[i.length]={t:"t",v:a}));break;case".":if(A!=null){for(a=o;++s<t.length&&(o=t.charAt(s))==="0";)a+=o;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++s<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(s))>-1;)a+=o;i[i.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++s)===o;)a+=o;i[i.length]={t:o,v:a},l=o;break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;)a+=t.charAt(s);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:o,v:o},++s;break;case"$":i[i.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);i[i.length]={t:"t",v:o},++s;break}var v=0,C=0,I;for(s=i.length-1,l="t";s>=0;--s)switch(i[s].t){case"h":case"H":i[s].t=h,l="h",v<1&&(v=1);break;case"s":(I=i[s].v.match(/\.0+$/))&&(C=Math.max(C,I[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=i[s].t;break;case"m":l==="s"&&(i[s].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&i[s].v.match(/[Hh]/)&&(v=1),v<2&&i[s].v.match(/[Mm]/)&&(v=2),v<3&&i[s].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var F="",E;for(s=0;s<i.length;++s)switch(i[s].t){case"t":case"T":case" ":case"D":break;case"X":i[s].v="",i[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[s].v=soe(i[s].t.charCodeAt(0),i[s].v,A,C),i[s].t="t";break;case"n":case"?":for(E=s+1;i[E]!=null&&((o=i[E].t)==="?"||o==="D"||(o===" "||o==="t")&&i[E+1]!=null&&(i[E+1].t==="?"||i[E+1].t==="t"&&i[E+1].v==="/")||i[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[E].v==="/"||i[E].v===" "&&i[E+1]!=null&&i[E+1].t=="?"));)i[s].v+=i[E].v,i[E]={v:"",t:";"},++E;F+=i[s].v,s=E-1;break;case"G":i[s].t="t",i[s].v=ed(e,r);break}var R="",L,N;if(F.length>0){F.charCodeAt(0)==40?(L=e<0&&F.charCodeAt(0)===45?-e:e,N=tc("n",F,L)):(L=e<0&&n>1?-e:e,N=tc("n",F,L),L<0&&i[0]&&i[0].t=="t"&&(N=N.substr(1),i[0].v="-"+i[0].v)),E=N.length-1;var P=i.length;for(s=0;s<i.length;++s)if(i[s]!=null&&i[s].t!="t"&&i[s].v.indexOf(".")>-1){P=s;break}var x=i.length;if(P===i.length&&N.indexOf("E")===-1){for(s=i.length-1;s>=0;--s)i[s]==null||"n?".indexOf(i[s].t)===-1||(E>=i[s].v.length-1?(E-=i[s].v.length,i[s].v=N.substr(E+1,i[s].v.length)):E<0?i[s].v="":(i[s].v=N.substr(0,E+1),E=-1),i[s].t="t",x=s);E>=0&&x<i.length&&(i[x].v=N.substr(0,E+1)+i[x].v)}else if(P!==i.length&&N.indexOf("E")===-1){for(E=N.indexOf(".")-1,s=P;s>=0;--s)if(!(i[s]==null||"n?".indexOf(i[s].t)===-1)){for(u=i[s].v.indexOf(".")>-1&&s===P?i[s].v.indexOf(".")-1:i[s].v.length-1,R=i[s].v.substr(u+1);u>=0;--u)E>=0&&(i[s].v.charAt(u)==="0"||i[s].v.charAt(u)==="#")&&(R=N.charAt(E--)+R);i[s].v=R,i[s].t="t",x=s}for(E>=0&&x<i.length&&(i[x].v=N.substr(0,E+1)+i[x].v),E=N.indexOf(".")+1,s=P;s<i.length;++s)if(!(i[s]==null||"n?(".indexOf(i[s].t)===-1&&s!==P)){for(u=i[s].v.indexOf(".")>-1&&s===P?i[s].v.indexOf(".")+1:0,R=i[s].v.substr(0,u);u<i[s].v.length;++u)E<N.length&&(R+=N.charAt(E++));i[s].v=R,i[s].t="t",x=s}}}for(s=0;s<i.length;++s)i[s]!=null&&"n?".indexOf(i[s].t)>-1&&(L=n>1&&e<0&&s>0&&i[s-1].v==="-"?-e:e,i[s].v=tc(i[s].t,i[s].v,L),i[s].t="t");var k="";for(s=0;s!==i.length;++s)i[s]!=null&&(k+=i[s].v);return k}var c4=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function A4(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function goe(t,e){var r=moe(t),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(c4),o=r[1].match(c4);return A4(e,s)?[n,r[0]]:A4(e,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,a]}function po(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:lr)[t],n==null&&(n=r.table&&r.table[s4[t]]||lr[s4[t]]),n==null&&(n=Zse[t]||"General");break}if(Uv(n,0))return ed(e,r);e instanceof Date&&(e=T6(e,r.date1904));var i=goe(n,e);if(Uv(i[1]))return ed(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return poe(i[1],e,r,i[0])}function rc(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(lr[r]==null){e<0&&(e=r);continue}if(lr[r]==t){e=r;break}}e<0&&(e=391)}return lr[e]=t,e}function eb(t){for(var e=0;e!=392;++e)t[e]!==void 0&&rc(t[e],e)}function Lf(){lr=Jse()}var voe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},M6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function woe(t){var e=typeof t=="number"?lr[t]:t;return e=e.replace(M6,"(\\d+)"),new RegExp("^"+e+"$")}function boe(t,e,r){var n=-1,i=-1,a=-1,s=-1,o=-1,l=-1;(e.match(M6)||[]).forEach(function(d,h){var f=parseInt(r[h+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=f;break;case"d":a=f;break;case"h":s=f;break;case"s":l=f;break;case"m":s>=0?o=f:i=f;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var A=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var u=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?A:n==-1&&i==-1&&a==-1?u:A+"T"+u}var yoe=function(){var t={};t.version="1.2.0";function e(){for(var N=0,P=new Array(256),x=0;x!=256;++x)N=x,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,P[x]=N;return typeof Int32Array<"u"?new Int32Array(P):P}var r=e();function n(N){var P=0,x=0,k=0,y=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(k=0;k!=256;++k)y[k]=N[k];for(k=0;k!=256;++k)for(x=N[k],P=256+k;P<4096;P+=256)x=y[P]=x>>>8^N[x&255];var S=[];for(k=1;k!=16;++k)S[k-1]=typeof Int32Array<"u"?y.subarray(k*256,k*256+256):y.slice(k*256,k*256+256);return S}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],A=i[4],u=i[5],d=i[6],h=i[7],f=i[8],p=i[9],g=i[10],v=i[11],C=i[12],I=i[13],F=i[14];function E(N,P){for(var x=P^-1,k=0,y=N.length;k<y;)x=x>>>8^r[(x^N.charCodeAt(k++))&255];return~x}function R(N,P){for(var x=P^-1,k=N.length-15,y=0;y<k;)x=F[N[y++]^x&255]^I[N[y++]^x>>8&255]^C[N[y++]^x>>16&255]^v[N[y++]^x>>>24]^g[N[y++]]^p[N[y++]]^f[N[y++]]^h[N[y++]]^d[N[y++]]^u[N[y++]]^A[N[y++]]^l[N[y++]]^o[N[y++]]^s[N[y++]]^a[N[y++]]^r[N[y++]];for(k+=15;y<k;)x=x>>>8^r[(x^N[y++])&255];return~x}function L(N,P){for(var x=P^-1,k=0,y=N.length,S=0,_=0;k<y;)S=N.charCodeAt(k++),S<128?x=x>>>8^r[(x^S)&255]:S<2048?(x=x>>>8^r[(x^(192|S>>6&31))&255],x=x>>>8^r[(x^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,_=N.charCodeAt(k++)&1023,x=x>>>8^r[(x^(240|S>>8&7))&255],x=x>>>8^r[(x^(128|S>>2&63))&255],x=x>>>8^r[(x^(128|_>>6&15|(S&3)<<4))&255],x=x>>>8^r[(x^(128|_&63))&255]):(x=x>>>8^r[(x^(224|S>>12&15))&255],x=x>>>8^r[(x^(128|S>>6&63))&255],x=x>>>8^r[(x^(128|S&63))&255]);return~x}return t.table=r,t.bstr=E,t.buf=R,t.str=L,t}(),ir=function(){var e={};e.version="1.2.1";function r(le,Ie){for(var _e=le.split("/"),Se=Ie.split("/"),ke=0,De=0,Je=Math.min(_e.length,Se.length);ke<Je;++ke){if(De=_e[ke].length-Se[ke].length)return De;if(_e[ke]!=Se[ke])return _e[ke]<Se[ke]?-1:1}return _e.length-Se.length}function n(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:n(le.slice(0,-1));var Ie=le.lastIndexOf("/");return Ie===-1?le:le.slice(0,Ie+1)}function i(le){if(le.charAt(le.length-1)=="/")return i(le.slice(0,-1));var Ie=le.lastIndexOf("/");return Ie===-1?le:le.slice(Ie+1)}function a(le,Ie){typeof Ie=="string"&&(Ie=new Date(Ie));var _e=Ie.getHours();_e=_e<<6|Ie.getMinutes(),_e=_e<<5|Ie.getSeconds()>>>1,le.write_shift(2,_e);var Se=Ie.getFullYear()-1980;Se=Se<<4|Ie.getMonth()+1,Se=Se<<5|Ie.getDate(),le.write_shift(2,Se)}function s(le){var Ie=le.read_shift(2)&65535,_e=le.read_shift(2)&65535,Se=new Date,ke=_e&31;_e>>>=5;var De=_e&15;_e>>>=4,Se.setMilliseconds(0),Se.setFullYear(_e+1980),Se.setMonth(De-1),Se.setDate(ke);var Je=Ie&31;Ie>>>=5;var ct=Ie&63;return Ie>>>=6,Se.setHours(Ie),Se.setMinutes(ct),Se.setSeconds(Je<<1),Se}function o(le){oa(le,0);for(var Ie={},_e=0;le.l<=le.length-4;){var Se=le.read_shift(2),ke=le.read_shift(2),De=le.l+ke,Je={};switch(Se){case 21589:_e=le.read_shift(1),_e&1&&(Je.mtime=le.read_shift(4)),ke>5&&(_e&2&&(Je.atime=le.read_shift(4)),_e&4&&(Je.ctime=le.read_shift(4))),Je.mtime&&(Je.mt=new Date(Je.mtime*1e3));break}le.l=De,Ie[Se]=Je}return Ie}var l;function A(){return l||(l={})}function u(le,Ie){if(le[0]==80&&le[1]==75)return St(le,Ie);if((le[0]|32)==109&&(le[1]|32)==105)return Qt(le,Ie);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var _e=3,Se=512,ke=0,De=0,Je=0,ct=0,Ze=0,et=[],it=le.slice(0,512);oa(it,0);var xt=d(it);switch(_e=xt[0],_e){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(xt[1]==0)return St(le,Ie);default:throw new Error("Major Version: Expected 3 or 4 saw "+_e)}Se!==512&&(it=le.slice(0,Se),oa(it,28));var kt=le.slice(0,Se);h(it,_e);var Ut=it.read_shift(4,"i");if(_e===3&&Ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ut);it.l+=4,Je=it.read_shift(4,"i"),it.l+=4,it.chk("00100000","Mini Stream Cutoff Size: "),ct=it.read_shift(4,"i"),ke=it.read_shift(4,"i"),Ze=it.read_shift(4,"i"),De=it.read_shift(4,"i");for(var Ct=-1,It=0;It<109&&(Ct=it.read_shift(4,"i"),!(Ct<0));++It)et[It]=Ct;var or=f(le,Se);v(Ze,De,or,Se,et);var rn=I(or,Je,et,Se);rn[Je].name="!Directory",ke>0&&ct!==_&&(rn[ct].name="!MiniFAT"),rn[et[0]].name="!FAT",rn.fat_addrs=et,rn.ssz=Se;var Er={},Ln=[],ps=[],Fa=[];F(Je,rn,or,Ln,ke,Er,ps,ct),p(ps,Fa,Ln),Ln.shift();var Ja={FileIndex:ps,FullPaths:Fa};return Ie&&Ie.raw&&(Ja.raw={header:kt,sectors:or}),Ja}function d(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(M,"Header Signature: "),le.l+=16;var Ie=le.read_shift(2,"u");return[le.read_shift(2,"u"),Ie]}function h(le,Ie){var _e=9;switch(le.l+=2,_e=le.read_shift(2)){case 9:if(Ie!=3)throw new Error("Sector Shift: Expected 9 saw "+_e);break;case 12:if(Ie!=4)throw new Error("Sector Shift: Expected 12 saw "+_e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_e)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function f(le,Ie){for(var _e=Math.ceil(le.length/Ie)-1,Se=[],ke=1;ke<_e;++ke)Se[ke-1]=le.slice(ke*Ie,(ke+1)*Ie);return Se[_e-1]=le.slice(_e*Ie),Se}function p(le,Ie,_e){for(var Se=0,ke=0,De=0,Je=0,ct=0,Ze=_e.length,et=[],it=[];Se<Ze;++Se)et[Se]=it[Se]=Se,Ie[Se]=_e[Se];for(;ct<it.length;++ct)Se=it[ct],ke=le[Se].L,De=le[Se].R,Je=le[Se].C,et[Se]===Se&&(ke!==-1&&et[ke]!==ke&&(et[Se]=et[ke]),De!==-1&&et[De]!==De&&(et[Se]=et[De])),Je!==-1&&(et[Je]=Se),ke!==-1&&Se!=et[Se]&&(et[ke]=et[Se],it.lastIndexOf(ke)<ct&&it.push(ke)),De!==-1&&Se!=et[Se]&&(et[De]=et[Se],it.lastIndexOf(De)<ct&&it.push(De));for(Se=1;Se<Ze;++Se)et[Se]===Se&&(De!==-1&&et[De]!==De?et[Se]=et[De]:ke!==-1&&et[ke]!==ke&&(et[Se]=et[ke]));for(Se=1;Se<Ze;++Se)if(le[Se].type!==0){if(ct=Se,ct!=et[ct])do ct=et[ct],Ie[Se]=Ie[ct]+"/"+Ie[Se];while(ct!==0&&et[ct]!==-1&&ct!=et[ct]);et[Se]=-1}for(Ie[0]+="/",Se=1;Se<Ze;++Se)le[Se].type!==2&&(Ie[Se]+="/")}function g(le,Ie,_e){for(var Se=le.start,ke=le.size,De=[],Je=Se;_e&&ke>0&&Je>=0;)De.push(Ie.slice(Je*S,Je*S+S)),ke-=S,Je=mu(_e,Je*4);return De.length===0?At(0):Wi(De).slice(0,le.size)}function v(le,Ie,_e,Se,ke){var De=_;if(le===_){if(Ie!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var Je=_e[le],ct=(Se>>>2)-1;if(!Je)return;for(var Ze=0;Ze<ct&&(De=mu(Je,Ze*4))!==_;++Ze)ke.push(De);v(mu(Je,Se-4),Ie-1,_e,Se,ke)}}function C(le,Ie,_e,Se,ke){var De=[],Je=[];ke||(ke=[]);var ct=Se-1,Ze=0,et=0;for(Ze=Ie;Ze>=0;){ke[Ze]=!0,De[De.length]=Ze,Je.push(le[Ze]);var it=_e[Math.floor(Ze*4/Se)];if(et=Ze*4&ct,Se<4+et)throw new Error("FAT boundary crossed: "+Ze+" 4 "+Se);if(!le[it])break;Ze=mu(le[it],et)}return{nodes:De,data:x4([Je])}}function I(le,Ie,_e,Se){var ke=le.length,De=[],Je=[],ct=[],Ze=[],et=Se-1,it=0,xt=0,kt=0,Ut=0;for(it=0;it<ke;++it)if(ct=[],kt=it+Ie,kt>=ke&&(kt-=ke),!Je[kt]){Ze=[];var Ct=[];for(xt=kt;xt>=0;){Ct[xt]=!0,Je[xt]=!0,ct[ct.length]=xt,Ze.push(le[xt]);var It=_e[Math.floor(xt*4/Se)];if(Ut=xt*4&et,Se<4+Ut)throw new Error("FAT boundary crossed: "+xt+" 4 "+Se);if(!le[It]||(xt=mu(le[It],Ut),Ct[xt]))break}De[kt]={nodes:ct,data:x4([Ze])}}return De}function F(le,Ie,_e,Se,ke,De,Je,ct){for(var Ze=0,et=Se.length?2:0,it=Ie[le].data,xt=0,kt=0,Ut;xt<it.length;xt+=128){var Ct=it.slice(xt,xt+128);oa(Ct,64),kt=Ct.read_shift(2),Ut=pB(Ct,0,kt-et),Se.push(Ut);var It={name:Ut,type:Ct.read_shift(1),color:Ct.read_shift(1),L:Ct.read_shift(4,"i"),R:Ct.read_shift(4,"i"),C:Ct.read_shift(4,"i"),clsid:Ct.read_shift(16),state:Ct.read_shift(4,"i"),start:0,size:0},or=Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2);or!==0&&(It.ct=E(Ct,Ct.l-8));var rn=Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2);rn!==0&&(It.mt=E(Ct,Ct.l-8)),It.start=Ct.read_shift(4,"i"),It.size=Ct.read_shift(4,"i"),It.size<0&&It.start<0&&(It.size=It.type=0,It.start=_,It.name=""),It.type===5?(Ze=It.start,ke>0&&Ze!==_&&(Ie[Ze].name="!StreamData")):It.size>=4096?(It.storage="fat",Ie[It.start]===void 0&&(Ie[It.start]=C(_e,It.start,Ie.fat_addrs,Ie.ssz)),Ie[It.start].name=It.name,It.content=Ie[It.start].data.slice(0,It.size)):(It.storage="minifat",It.size<0?It.size=0:Ze!==_&&It.start!==_&&Ie[Ze]&&(It.content=g(It,Ie[Ze].data,(Ie[ct]||{}).data))),It.content&&oa(It.content,0),De[Ut]=It,Je.push(It)}}function E(le,Ie){return new Date((Ls(le,Ie+4)/1e7*Math.pow(2,32)+Ls(le,Ie)/1e7-11644473600)*1e3)}function R(le,Ie){return A(),u(l.readFileSync(le),Ie)}function L(le,Ie){var _e=Ie&&Ie.type;switch(_e||Br&&Buffer.isBuffer(le)&&(_e="buffer"),_e||"base64"){case"file":return R(le,Ie);case"base64":return u(Us(zs(le)),Ie);case"binary":return u(Us(le),Ie)}return u(le,Ie)}function N(le,Ie){var _e=Ie||{},Se=_e.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=Se+"/",le.FileIndex[0]={name:Se,type:5}),_e.CLSID&&(le.FileIndex[0].clsid=_e.CLSID),P(le)}function P(le){var Ie="Sh33tJ5";if(!ir.find(le,"/"+Ie)){var _e=At(4);_e[0]=55,_e[1]=_e[3]=50,_e[2]=54,le.FileIndex.push({name:Ie,type:2,content:_e,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+Ie),x(le)}}function x(le,Ie){N(le);for(var _e=!1,Se=!1,ke=le.FullPaths.length-1;ke>=0;--ke){var De=le.FileIndex[ke];switch(De.type){case 0:Se?_e=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(De.R*De.L*De.C)&&(_e=!0),De.R>-1&&De.L>-1&&De.R==De.L&&(_e=!0);break;default:_e=!0;break}}if(!(!_e&&!Ie)){var Je=new Date(1987,1,19),ct=0,Ze=Object.create?Object.create(null):{},et=[];for(ke=0;ke<le.FullPaths.length;++ke)Ze[le.FullPaths[ke]]=!0,le.FileIndex[ke].type!==0&&et.push([le.FullPaths[ke],le.FileIndex[ke]]);for(ke=0;ke<et.length;++ke){var it=n(et[ke][0]);Se=Ze[it],Se||(et.push([it,{name:i(it).replace("/",""),type:1,clsid:z,ct:Je,mt:Je,content:null}]),Ze[it]=!0)}for(et.sort(function(Ut,Ct){return r(Ut[0],Ct[0])}),le.FullPaths=[],le.FileIndex=[],ke=0;ke<et.length;++ke)le.FullPaths[ke]=et[ke][0],le.FileIndex[ke]=et[ke][1];for(ke=0;ke<et.length;++ke){var xt=le.FileIndex[ke],kt=le.FullPaths[ke];if(xt.name=i(kt).replace("/",""),xt.L=xt.R=xt.C=-(xt.color=1),xt.size=xt.content?xt.content.length:0,xt.start=0,xt.clsid=xt.clsid||z,ke===0)xt.C=et.length>1?1:-1,xt.size=0,xt.type=5;else if(kt.slice(-1)=="/"){for(ct=ke+1;ct<et.length&&n(le.FullPaths[ct])!=kt;++ct);for(xt.C=ct>=et.length?-1:ct,ct=ke+1;ct<et.length&&n(le.FullPaths[ct])!=n(kt);++ct);xt.R=ct>=et.length?-1:ct,xt.type=1}else n(le.FullPaths[ke+1]||"")==n(kt)&&(xt.R=ke+1),xt.type=2}}}function k(le,Ie){var _e=Ie||{};if(_e.fileType=="mad")return Pn(le,_e);switch(x(le),_e.fileType){case"zip":return Et(le,_e)}var Se=function(Ut){for(var Ct=0,It=0,or=0;or<Ut.FileIndex.length;++or){var rn=Ut.FileIndex[or];if(rn.content){var Er=rn.content.length;Er>0&&(Er<4096?Ct+=Er+63>>6:It+=Er+511>>9)}}for(var Ln=Ut.FullPaths.length+3>>2,ps=Ct+7>>3,Fa=Ct+127>>7,Ja=ps+It+Ln+Fa,Pa=Ja+127>>7,wo=Pa<=109?0:Math.ceil((Pa-109)/127);Ja+Pa+wo+127>>7>Pa;)wo=++Pa<=109?0:Math.ceil((Pa-109)/127);var Ii=[1,wo,Pa,Fa,Ln,It,Ct,0];return Ut.FileIndex[0].size=Ct<<6,Ii[7]=(Ut.FileIndex[0].start=Ii[0]+Ii[1]+Ii[2]+Ii[3]+Ii[4]+Ii[5])+(Ii[6]+7>>3),Ii}(le),ke=At(Se[7]<<9),De=0,Je=0;{for(De=0;De<8;++De)ke.write_shift(1,K[De]);for(De=0;De<8;++De)ke.write_shift(2,0);for(ke.write_shift(2,62),ke.write_shift(2,3),ke.write_shift(2,65534),ke.write_shift(2,9),ke.write_shift(2,6),De=0;De<3;++De)ke.write_shift(2,0);for(ke.write_shift(4,0),ke.write_shift(4,Se[2]),ke.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),ke.write_shift(4,0),ke.write_shift(4,4096),ke.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:_),ke.write_shift(4,Se[3]),ke.write_shift(-4,Se[1]?Se[0]-1:_),ke.write_shift(4,Se[1]),De=0;De<109;++De)ke.write_shift(-4,De<Se[2]?Se[1]+De:-1)}if(Se[1])for(Je=0;Je<Se[1];++Je){for(;De<236+Je*127;++De)ke.write_shift(-4,De<Se[2]?Se[1]+De:-1);ke.write_shift(-4,Je===Se[1]-1?_:Je+1)}var ct=function(Ut){for(Je+=Ut;De<Je-1;++De)ke.write_shift(-4,De+1);Ut&&(++De,ke.write_shift(-4,_))};for(Je=De=0,Je+=Se[1];De<Je;++De)ke.write_shift(-4,ae.DIFSECT);for(Je+=Se[2];De<Je;++De)ke.write_shift(-4,ae.FATSECT);ct(Se[3]),ct(Se[4]);for(var Ze=0,et=0,it=le.FileIndex[0];Ze<le.FileIndex.length;++Ze)it=le.FileIndex[Ze],it.content&&(et=it.content.length,!(et<4096)&&(it.start=Je,ct(et+511>>9)));for(ct(Se[6]+7>>3);ke.l&511;)ke.write_shift(-4,ae.ENDOFCHAIN);for(Je=De=0,Ze=0;Ze<le.FileIndex.length;++Ze)it=le.FileIndex[Ze],it.content&&(et=it.content.length,!(!et||et>=4096)&&(it.start=Je,ct(et+63>>6)));for(;ke.l&511;)ke.write_shift(-4,ae.ENDOFCHAIN);for(De=0;De<Se[4]<<2;++De){var xt=le.FullPaths[De];if(!xt||xt.length===0){for(Ze=0;Ze<17;++Ze)ke.write_shift(4,0);for(Ze=0;Ze<3;++Ze)ke.write_shift(4,-1);for(Ze=0;Ze<12;++Ze)ke.write_shift(4,0);continue}it=le.FileIndex[De],De===0&&(it.start=it.size?it.start-1:_);var kt=De===0&&_e.root||it.name;if(et=2*(kt.length+1),ke.write_shift(64,kt,"utf16le"),ke.write_shift(2,et),ke.write_shift(1,it.type),ke.write_shift(1,it.color),ke.write_shift(-4,it.L),ke.write_shift(-4,it.R),ke.write_shift(-4,it.C),it.clsid)ke.write_shift(16,it.clsid,"hex");else for(Ze=0;Ze<4;++Ze)ke.write_shift(4,0);ke.write_shift(4,it.state||0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,it.start),ke.write_shift(4,it.size),ke.write_shift(4,0)}for(De=1;De<le.FileIndex.length;++De)if(it=le.FileIndex[De],it.size>=4096)if(ke.l=it.start+1<<9,Br&&Buffer.isBuffer(it.content))it.content.copy(ke,ke.l,0,it.size),ke.l+=it.size+511&-512;else{for(Ze=0;Ze<it.size;++Ze)ke.write_shift(1,it.content[Ze]);for(;Ze&511;++Ze)ke.write_shift(1,0)}for(De=1;De<le.FileIndex.length;++De)if(it=le.FileIndex[De],it.size>0&&it.size<4096)if(Br&&Buffer.isBuffer(it.content))it.content.copy(ke,ke.l,0,it.size),ke.l+=it.size+63&-64;else{for(Ze=0;Ze<it.size;++Ze)ke.write_shift(1,it.content[Ze]);for(;Ze&63;++Ze)ke.write_shift(1,0)}if(Br)ke.l=ke.length;else for(;ke.l<ke.length;)ke.write_shift(1,0);return ke}function y(le,Ie){var _e=le.FullPaths.map(function(Ze){return Ze.toUpperCase()}),Se=_e.map(function(Ze){var et=Ze.split("/");return et[et.length-(Ze.slice(-1)=="/"?2:1)]}),ke=!1;Ie.charCodeAt(0)===47?(ke=!0,Ie=_e[0].slice(0,-1)+Ie):ke=Ie.indexOf("/")!==-1;var De=Ie.toUpperCase(),Je=ke===!0?_e.indexOf(De):Se.indexOf(De);if(Je!==-1)return le.FileIndex[Je];var ct=!De.match(Dm);for(De=De.replace(Ya,""),ct&&(De=De.replace(Dm,"!")),Je=0;Je<_e.length;++Je)if((ct?_e[Je].replace(Dm,"!"):_e[Je]).replace(Ya,"")==De||(ct?Se[Je].replace(Dm,"!"):Se[Je]).replace(Ya,"")==De)return le.FileIndex[Je];return null}var S=64,_=-2,M="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],z="00000000000000000000000000000000",ae={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:_,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function te(le,Ie,_e){A();var Se=k(le,_e);l.writeFileSync(Ie,Se)}function G(le){for(var Ie=new Array(le.length),_e=0;_e<le.length;++_e)Ie[_e]=String.fromCharCode(le[_e]);return Ie.join("")}function ue(le,Ie){var _e=k(le,Ie);switch(Ie&&Ie.type||"buffer"){case"file":return A(),l.writeFileSync(Ie.filename,_e),_e;case"binary":return typeof _e=="string"?_e:G(_e);case"base64":return $0(typeof _e=="string"?_e:G(_e));case"buffer":if(Br)return Buffer.isBuffer(_e)?_e:gc(_e);case"array":return typeof _e=="string"?Us(_e):_e}return _e}var de;function T(le){try{var Ie=le.InflateRaw,_e=new Ie;if(_e._processChunk(new Uint8Array([3,0]),_e._finishFlushFlag),_e.bytesRead)de=le;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function O(le,Ie){if(!de)return ze(le,Ie);var _e=de.InflateRaw,Se=new _e,ke=Se._processChunk(le.slice(le.l),Se._finishFlushFlag);return le.l+=Se.bytesRead,ke}function V(le){return de?de.deflateRawSync(le):ve(le)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ee(le){var Ie=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(Ie>>16|Ie>>8|Ie)&255}for(var Z=typeof Uint8Array<"u",re=Z?new Uint8Array(256):[],ce=0;ce<256;++ce)re[ce]=ee(ce);function Y(le,Ie){var _e=re[le&255];return Ie<=8?_e>>>8-Ie:(_e=_e<<8|re[le>>8&255],Ie<=16?_e>>>16-Ie:(_e=_e<<8|re[le>>16&255],_e>>>24-Ie))}function ge(le,Ie){var _e=Ie&7,Se=Ie>>>3;return(le[Se]|(_e<=6?0:le[Se+1]<<8))>>>_e&3}function q(le,Ie){var _e=Ie&7,Se=Ie>>>3;return(le[Se]|(_e<=5?0:le[Se+1]<<8))>>>_e&7}function W(le,Ie){var _e=Ie&7,Se=Ie>>>3;return(le[Se]|(_e<=4?0:le[Se+1]<<8))>>>_e&15}function xe(le,Ie){var _e=Ie&7,Se=Ie>>>3;return(le[Se]|(_e<=3?0:le[Se+1]<<8))>>>_e&31}function ye(le,Ie){var _e=Ie&7,Se=Ie>>>3;return(le[Se]|(_e<=1?0:le[Se+1]<<8))>>>_e&127}function Ue(le,Ie,_e){var Se=Ie&7,ke=Ie>>>3,De=(1<<_e)-1,Je=le[ke]>>>Se;return _e<8-Se||(Je|=le[ke+1]<<8-Se,_e<16-Se)||(Je|=le[ke+2]<<16-Se,_e<24-Se)||(Je|=le[ke+3]<<24-Se),Je&De}function Me(le,Ie,_e){var Se=Ie&7,ke=Ie>>>3;return Se<=5?le[ke]|=(_e&7)<<Se:(le[ke]|=_e<<Se&255,le[ke+1]=(_e&7)>>8-Se),Ie+3}function $e(le,Ie,_e){var Se=Ie&7,ke=Ie>>>3;return _e=(_e&1)<<Se,le[ke]|=_e,Ie+1}function fe(le,Ie,_e){var Se=Ie&7,ke=Ie>>>3;return _e<<=Se,le[ke]|=_e&255,_e>>>=8,le[ke+1]=_e,Ie+8}function Oe(le,Ie,_e){var Se=Ie&7,ke=Ie>>>3;return _e<<=Se,le[ke]|=_e&255,_e>>>=8,le[ke+1]=_e&255,le[ke+2]=_e>>>8,Ie+16}function Re(le,Ie){var _e=le.length,Se=2*_e>Ie?2*_e:Ie+5,ke=0;if(_e>=Ie)return le;if(Br){var De=n4(Se);if(le.copy)le.copy(De);else for(;ke<le.length;++ke)De[ke]=le[ke];return De}else if(Z){var Je=new Uint8Array(Se);if(Je.set)Je.set(le);else for(;ke<_e;++ke)Je[ke]=le[ke];return Je}return le.length=Se,le}function He(le){for(var Ie=new Array(le),_e=0;_e<le;++_e)Ie[_e]=0;return Ie}function pe(le,Ie,_e){var Se=1,ke=0,De=0,Je=0,ct=0,Ze=le.length,et=Z?new Uint16Array(32):He(32);for(De=0;De<32;++De)et[De]=0;for(De=Ze;De<_e;++De)le[De]=0;Ze=le.length;var it=Z?new Uint16Array(Ze):He(Ze);for(De=0;De<Ze;++De)et[ke=le[De]]++,Se<ke&&(Se=ke),it[De]=0;for(et[0]=0,De=1;De<=Se;++De)et[De+16]=ct=ct+et[De-1]<<1;for(De=0;De<Ze;++De)ct=le[De],ct!=0&&(it[De]=et[ct+16]++);var xt=0;for(De=0;De<Ze;++De)if(xt=le[De],xt!=0)for(ct=Y(it[De],Se)>>Se-xt,Je=(1<<Se+4-xt)-1;Je>=0;--Je)Ie[ct|Je<<xt]=xt&15|De<<4;return Se}var Le=Z?new Uint16Array(512):He(512),lt=Z?new Uint16Array(32):He(32);if(!Z){for(var Ae=0;Ae<512;++Ae)Le[Ae]=0;for(Ae=0;Ae<32;++Ae)lt[Ae]=0}(function(){for(var le=[],Ie=0;Ie<32;Ie++)le.push(5);pe(le,lt,32);var _e=[];for(Ie=0;Ie<=143;Ie++)_e.push(8);for(;Ie<=255;Ie++)_e.push(9);for(;Ie<=279;Ie++)_e.push(7);for(;Ie<=287;Ie++)_e.push(8);pe(_e,Le,288)})();var Ne=function(){for(var Ie=Z?new Uint8Array(32768):[],_e=0,Se=0;_e<ie.length-1;++_e)for(;Se<ie[_e+1];++Se)Ie[Se]=_e;for(;Se<32768;++Se)Ie[Se]=29;var ke=Z?new Uint8Array(259):[];for(_e=0,Se=0;_e<X.length-1;++_e)for(;Se<X[_e+1];++Se)ke[Se]=_e;function De(ct,Ze){for(var et=0;et<ct.length;){var it=Math.min(65535,ct.length-et),xt=et+it==ct.length;for(Ze.write_shift(1,+xt),Ze.write_shift(2,it),Ze.write_shift(2,~it&65535);it-- >0;)Ze[Ze.l++]=ct[et++]}return Ze.l}function Je(ct,Ze){for(var et=0,it=0,xt=Z?new Uint16Array(32768):[];it<ct.length;){var kt=Math.min(65535,ct.length-it);if(kt<10){for(et=Me(Ze,et,+(it+kt==ct.length)),et&7&&(et+=8-(et&7)),Ze.l=et/8|0,Ze.write_shift(2,kt),Ze.write_shift(2,~kt&65535);kt-- >0;)Ze[Ze.l++]=ct[it++];et=Ze.l*8;continue}et=Me(Ze,et,+(it+kt==ct.length)+2);for(var Ut=0;kt-- >0;){var Ct=ct[it];Ut=(Ut<<5^Ct)&32767;var It=-1,or=0;if((It=xt[Ut])&&(It|=it&-32768,It>it&&(It-=32768),It<it))for(;ct[It+or]==ct[it+or]&&or<250;)++or;if(or>2){Ct=ke[or],Ct<=22?et=fe(Ze,et,re[Ct+1]>>1)-1:(fe(Ze,et,3),et+=5,fe(Ze,et,re[Ct-23]>>5),et+=3);var rn=Ct<8?0:Ct-4>>2;rn>0&&(Oe(Ze,et,or-X[Ct]),et+=rn),Ct=Ie[it-It],et=fe(Ze,et,re[Ct]>>3),et-=3;var Er=Ct<4?0:Ct-2>>1;Er>0&&(Oe(Ze,et,it-It-ie[Ct]),et+=Er);for(var Ln=0;Ln<or;++Ln)xt[Ut]=it&32767,Ut=(Ut<<5^ct[it])&32767,++it;kt-=or-1}else Ct<=143?Ct=Ct+48:et=$e(Ze,et,1),et=fe(Ze,et,re[Ct]),xt[Ut]=it&32767,++it}et=fe(Ze,et,0)-1}return Ze.l=(et+7)/8|0,Ze.l}return function(Ze,et){return Ze.length<8?De(Ze,et):Je(Ze,et)}}();function ve(le){var Ie=At(50+Math.floor(le.length*1.1)),_e=Ne(le,Ie);return Ie.slice(0,_e)}var Ce=Z?new Uint16Array(32768):He(32768),Ke=Z?new Uint16Array(32768):He(32768),Ve=Z?new Uint16Array(128):He(128),ot=1,pt=1;function Bt(le,Ie){var _e=xe(le,Ie)+257;Ie+=5;var Se=xe(le,Ie)+1;Ie+=5;var ke=W(le,Ie)+4;Ie+=4;for(var De=0,Je=Z?new Uint8Array(19):He(19),ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ze=1,et=Z?new Uint8Array(8):He(8),it=Z?new Uint8Array(8):He(8),xt=Je.length,kt=0;kt<ke;++kt)Je[Q[kt]]=De=q(le,Ie),Ze<De&&(Ze=De),et[De]++,Ie+=3;var Ut=0;for(et[0]=0,kt=1;kt<=Ze;++kt)it[kt]=Ut=Ut+et[kt-1]<<1;for(kt=0;kt<xt;++kt)(Ut=Je[kt])!=0&&(ct[kt]=it[Ut]++);var Ct=0;for(kt=0;kt<xt;++kt)if(Ct=Je[kt],Ct!=0){Ut=re[ct[kt]]>>8-Ct;for(var It=(1<<7-Ct)-1;It>=0;--It)Ve[Ut|It<<Ct]=Ct&7|kt<<3}var or=[];for(Ze=1;or.length<_e+Se;)switch(Ut=Ve[ye(le,Ie)],Ie+=Ut&7,Ut>>>=3){case 16:for(De=3+ge(le,Ie),Ie+=2,Ut=or[or.length-1];De-- >0;)or.push(Ut);break;case 17:for(De=3+q(le,Ie),Ie+=3;De-- >0;)or.push(0);break;case 18:for(De=11+ye(le,Ie),Ie+=7;De-- >0;)or.push(0);break;default:or.push(Ut),Ze<Ut&&(Ze=Ut);break}var rn=or.slice(0,_e),Er=or.slice(_e);for(kt=_e;kt<286;++kt)rn[kt]=0;for(kt=Se;kt<30;++kt)Er[kt]=0;return ot=pe(rn,Ce,286),pt=pe(Er,Ke,30),Ie}function Be(le,Ie){if(le[0]==3&&!(le[1]&3))return[IA(Ie),2];for(var _e=0,Se=0,ke=n4(Ie||1<<18),De=0,Je=ke.length>>>0,ct=0,Ze=0;!(Se&1);){if(Se=q(le,_e),_e+=3,Se>>>1)Se>>1==1?(ct=9,Ze=5):(_e=Bt(le,_e),ct=ot,Ze=pt);else{_e&7&&(_e+=8-(_e&7));var et=le[_e>>>3]|le[(_e>>>3)+1]<<8;if(_e+=32,et>0)for(!Ie&&Je<De+et&&(ke=Re(ke,De+et),Je=ke.length);et-- >0;)ke[De++]=le[_e>>>3],_e+=8;continue}for(;;){!Ie&&Je<De+32767&&(ke=Re(ke,De+32767),Je=ke.length);var it=Ue(le,_e,ct),xt=Se>>>1==1?Le[it]:Ce[it];if(_e+=xt&15,xt>>>=4,!(xt>>>8&255))ke[De++]=xt;else{if(xt==256)break;xt-=257;var kt=xt<8?0:xt-4>>2;kt>5&&(kt=0);var Ut=De+X[xt];kt>0&&(Ut+=Ue(le,_e,kt),_e+=kt),it=Ue(le,_e,Ze),xt=Se>>>1==1?lt[it]:Ke[it],_e+=xt&15,xt>>>=4;var Ct=xt<4?0:xt-2>>1,It=ie[xt];for(Ct>0&&(It+=Ue(le,_e,Ct),_e+=Ct),!Ie&&Je<Ut&&(ke=Re(ke,Ut+100),Je=ke.length);De<Ut;)ke[De]=ke[De-It],++De}}}return Ie?[ke,_e+7>>>3]:[ke.slice(0,De),_e+7>>>3]}function ze(le,Ie){var _e=le.slice(le.l||0),Se=Be(_e,Ie);return le.l+=Se[1],Se[0]}function st(le,Ie){if(le)typeof console<"u"&&console.error(Ie);else throw new Error(Ie)}function St(le,Ie){var _e=le;oa(_e,0);var Se=[],ke=[],De={FileIndex:Se,FullPaths:ke};N(De,{root:Ie.root});for(var Je=_e.length-4;(_e[Je]!=80||_e[Je+1]!=75||_e[Je+2]!=5||_e[Je+3]!=6)&&Je>=0;)--Je;_e.l=Je+4,_e.l+=4;var ct=_e.read_shift(2);_e.l+=6;var Ze=_e.read_shift(4);for(_e.l=Ze,Je=0;Je<ct;++Je){_e.l+=20;var et=_e.read_shift(4),it=_e.read_shift(4),xt=_e.read_shift(2),kt=_e.read_shift(2),Ut=_e.read_shift(2);_e.l+=8;var Ct=_e.read_shift(4),It=o(_e.slice(_e.l+xt,_e.l+xt+kt));_e.l+=xt+kt+Ut;var or=_e.l;_e.l=Ct+4,Ot(_e,et,it,De,It),_e.l=or}return De}function Ot(le,Ie,_e,Se,ke){le.l+=2;var De=le.read_shift(2),Je=le.read_shift(2),ct=s(le);if(De&8257)throw new Error("Unsupported ZIP encryption");for(var Ze=le.read_shift(4),et=le.read_shift(4),it=le.read_shift(4),xt=le.read_shift(2),kt=le.read_shift(2),Ut="",Ct=0;Ct<xt;++Ct)Ut+=String.fromCharCode(le[le.l++]);if(kt){var It=o(le.slice(le.l,le.l+kt));(It[21589]||{}).mt&&(ct=It[21589].mt),((ke||{})[21589]||{}).mt&&(ct=ke[21589].mt)}le.l+=kt;var or=le.slice(le.l,le.l+et);switch(Je){case 8:or=O(le,it);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Je)}var rn=!1;De&8&&(Ze=le.read_shift(4),Ze==134695760&&(Ze=le.read_shift(4),rn=!0),et=le.read_shift(4),it=le.read_shift(4)),et!=Ie&&st(rn,"Bad compressed size: "+Ie+" != "+et),it!=_e&&st(rn,"Bad uncompressed size: "+_e+" != "+it),yn(Se,Ut,or,{unsafe:!0,mt:ct})}function Et(le,Ie){var _e=Ie||{},Se=[],ke=[],De=At(1),Je=_e.compression?8:0,ct=0,Ze=0,et=0,it=0,xt=0,kt=le.FullPaths[0],Ut=kt,Ct=le.FileIndex[0],It=[],or=0;for(Ze=1;Ze<le.FullPaths.length;++Ze)if(Ut=le.FullPaths[Ze].slice(kt.length),Ct=le.FileIndex[Ze],!(!Ct.size||!Ct.content||Ut=="Sh33tJ5")){var rn=it,Er=At(Ut.length);for(et=0;et<Ut.length;++et)Er.write_shift(1,Ut.charCodeAt(et)&127);Er=Er.slice(0,Er.l),It[xt]=yoe.buf(Ct.content,0);var Ln=Ct.content;Je==8&&(Ln=V(Ln)),De=At(30),De.write_shift(4,67324752),De.write_shift(2,20),De.write_shift(2,ct),De.write_shift(2,Je),Ct.mt?a(De,Ct.mt):De.write_shift(4,0),De.write_shift(-4,It[xt]),De.write_shift(4,Ln.length),De.write_shift(4,Ct.content.length),De.write_shift(2,Er.length),De.write_shift(2,0),it+=De.length,Se.push(De),it+=Er.length,Se.push(Er),it+=Ln.length,Se.push(Ln),De=At(46),De.write_shift(4,33639248),De.write_shift(2,0),De.write_shift(2,20),De.write_shift(2,ct),De.write_shift(2,Je),De.write_shift(4,0),De.write_shift(-4,It[xt]),De.write_shift(4,Ln.length),De.write_shift(4,Ct.content.length),De.write_shift(2,Er.length),De.write_shift(2,0),De.write_shift(2,0),De.write_shift(2,0),De.write_shift(2,0),De.write_shift(4,0),De.write_shift(4,rn),or+=De.l,ke.push(De),or+=Er.length,ke.push(Er),++xt}return De=At(22),De.write_shift(4,101010256),De.write_shift(2,0),De.write_shift(2,0),De.write_shift(2,xt),De.write_shift(2,xt),De.write_shift(4,or),De.write_shift(4,it),De.write_shift(2,0),Wi([Wi(Se),Wi(ke),De])}var dt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function jt(le,Ie){if(le.ctype)return le.ctype;var _e=le.name||"",Se=_e.match(/\.([^\.]+)$/);return Se&&dt[Se[1]]||Ie&&(Se=(_e=Ie).match(/[\.\\]([^\.\\])+$/),Se&&dt[Se[1]])?dt[Se[1]]:"application/octet-stream"}function sr(le){for(var Ie=$0(le),_e=[],Se=0;Se<Ie.length;Se+=76)_e.push(Ie.slice(Se,Se+76));return _e.join(`\r
`)+`\r
`}function qt(le){var Ie=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(et){var it=et.charCodeAt(0).toString(16).toUpperCase();return"="+(it.length==1?"0"+it:it)});Ie=Ie.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ie.charAt(0)==`
`&&(Ie="=0D"+Ie.slice(1)),Ie=Ie.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _e=[],Se=Ie.split(`\r
`),ke=0;ke<Se.length;++ke){var De=Se[ke];if(De.length==0){_e.push("");continue}for(var Je=0;Je<De.length;){var ct=76,Ze=De.slice(Je,Je+ct);Ze.charAt(ct-1)=="="?ct--:Ze.charAt(ct-2)=="="?ct-=2:Ze.charAt(ct-3)=="="&&(ct-=3),Ze=De.slice(Je,Je+ct),Je+=ct,Je<De.length&&(Ze+="="),_e.push(Ze)}}return _e.join(`\r
`)}function Ur(le){for(var Ie=[],_e=0;_e<le.length;++_e){for(var Se=le[_e];_e<=le.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+le[++_e];Ie.push(Se)}for(var ke=0;ke<Ie.length;++ke)Ie[ke]=Ie[ke].replace(/[=][0-9A-Fa-f]{2}/g,function(De){return String.fromCharCode(parseInt(De.slice(1),16))});return Us(Ie.join(`\r
`))}function en(le,Ie,_e){for(var Se="",ke="",De="",Je,ct=0;ct<10;++ct){var Ze=Ie[ct];if(!Ze||Ze.match(/^\s*$/))break;var et=Ze.match(/^(.*?):\s*([^\s].*)$/);if(et)switch(et[1].toLowerCase()){case"content-location":Se=et[2].trim();break;case"content-type":De=et[2].trim();break;case"content-transfer-encoding":ke=et[2].trim();break}}switch(++ct,ke.toLowerCase()){case"base64":Je=Us(zs(Ie.slice(ct).join("")));break;case"quoted-printable":Je=Ur(Ie.slice(ct));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ke)}var it=yn(le,Se.slice(_e.length),Je,{unsafe:!0});De&&(it.ctype=De)}function Qt(le,Ie){if(G(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _e=Ie&&Ie.root||"",Se=(Br&&Buffer.isBuffer(le)?le.toString("binary"):G(le)).split(`\r
`),ke=0,De="";for(ke=0;ke<Se.length;++ke)if(De=Se[ke],!!/^Content-Location:/i.test(De)&&(De=De.slice(De.indexOf("file")),_e||(_e=De.slice(0,De.lastIndexOf("/")+1)),De.slice(0,_e.length)!=_e))for(;_e.length>0&&(_e=_e.slice(0,_e.length-1),_e=_e.slice(0,_e.lastIndexOf("/")+1),De.slice(0,_e.length)!=_e););var Je=(Se[1]||"").match(/boundary="(.*?)"/);if(!Je)throw new Error("MAD cannot find boundary");var ct="--"+(Je[1]||""),Ze=[],et=[],it={FileIndex:Ze,FullPaths:et};N(it);var xt,kt=0;for(ke=0;ke<Se.length;++ke){var Ut=Se[ke];Ut!==ct&&Ut!==ct+"--"||(kt++&&en(it,Se.slice(xt,ke),_e),xt=ke)}return it}function Pn(le,Ie){var _e=Ie||{},Se=_e.boundary||"SheetJS";Se="------="+Se;for(var ke=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],De=le.FullPaths[0],Je=De,ct=le.FileIndex[0],Ze=1;Ze<le.FullPaths.length;++Ze)if(Je=le.FullPaths[Ze].slice(De.length),ct=le.FileIndex[Ze],!(!ct.size||!ct.content||Je=="Sh33tJ5")){Je=Je.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(or){return"_x"+or.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(or){return"_u"+or.charCodeAt(0).toString(16)+"_"});for(var et=ct.content,it=Br&&Buffer.isBuffer(et)?et.toString("binary"):G(et),xt=0,kt=Math.min(1024,it.length),Ut=0,Ct=0;Ct<=kt;++Ct)(Ut=it.charCodeAt(Ct))>=32&&Ut<128&&++xt;var It=xt>=kt*4/5;ke.push(Se),ke.push("Content-Location: "+(_e.root||"file:///C:/SheetJS/")+Je),ke.push("Content-Transfer-Encoding: "+(It?"quoted-printable":"base64")),ke.push("Content-Type: "+jt(ct,Je)),ke.push(""),ke.push(It?qt(it):sr(it))}return ke.push(Se+`--\r
`),ke.join(`\r
`)}function Mt(le){var Ie={};return N(Ie,le),Ie}function yn(le,Ie,_e,Se){var ke=Se&&Se.unsafe;ke||N(le);var De=!ke&&ir.find(le,Ie);if(!De){var Je=le.FullPaths[0];Ie.slice(0,Je.length)==Je?Je=Ie:(Je.slice(-1)!="/"&&(Je+="/"),Je=(Je+Ie).replace("//","/")),De={name:i(Ie),type:2},le.FileIndex.push(De),le.FullPaths.push(Je),ke||ir.utils.cfb_gc(le)}return De.content=_e,De.size=_e?_e.length:0,Se&&(Se.CLSID&&(De.clsid=Se.CLSID),Se.mt&&(De.mt=Se.mt),Se.ct&&(De.ct=Se.ct)),De}function xn(le,Ie){N(le);var _e=ir.find(le,Ie);if(_e){for(var Se=0;Se<le.FileIndex.length;++Se)if(le.FileIndex[Se]==_e)return le.FileIndex.splice(Se,1),le.FullPaths.splice(Se,1),!0}return!1}function Or(le,Ie,_e){N(le);var Se=ir.find(le,Ie);if(Se){for(var ke=0;ke<le.FileIndex.length;++ke)if(le.FileIndex[ke]==Se)return le.FileIndex[ke].name=i(_e),le.FullPaths[ke]=_e,!0}return!1}function Fr(le){x(le,!0)}return e.find=y,e.read=L,e.parse=u,e.write=ue,e.writeFile=te,e.utils={cfb_new:Mt,cfb_add:yn,cfb_del:xn,cfb_mov:Or,cfb_gc:Fr,ReadShift:o0,CheckField:lO,prep_blob:oa,bconcat:Wi,use_zlib:T,_deflateRaw:ve,_inflateRaw:ze,consts:ae},e}();function xoe(t){return typeof t=="string"?Zw(t):Array.isArray(t)?Wse(t):t}function Dp(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Zw(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?ml(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var i=new Blob([xoe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var s=document.createElement("a");if(s.download!=null)return s.download=t,s.href=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=jA(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function _oe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function si(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function u4(t,e){for(var r=[],n=si(t),i=0;i!==n.length;++i)r[t[n[i]][e]]==null&&(r[t[n[i]][e]]=n[i]);return r}function tb(t){for(var e=[],r=si(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function rb(t){for(var e=[],r=si(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Eoe(t){for(var e=[],r=si(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var Mv=new Date(1899,11,30,0,0,0);function Qi(t,e){var r=t.getTime();e&&(r-=1462*24*60*60*1e3);var n=Mv.getTime()+(t.getTimezoneOffset()-Mv.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Q6=new Date,Boe=Mv.getTime()+(Q6.getTimezoneOffset()-Mv.getTimezoneOffset())*6e4,d4=Q6.getTimezoneOffset();function nb(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Boe),e.getTimezoneOffset()!==d4&&e.setTime(e.getTime()+(e.getTimezoneOffset()-d4)*6e4),e}function Coe(t){var e=0,r=0,n=!1,i=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=i.length;++a)if(i[a]){switch(r=1,a>3&&(n=!0),i[a].slice(i[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[a].slice(i[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(i[a],10)}return e}var h4=new Date("2017-02-19T19:06:09.000Z"),H6=isNaN(h4.getFullYear())?new Date("2/19/17"):h4,Noe=H6.getFullYear()==2017;function Qn(t,e){var r=new Date(t);if(Noe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(H6.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function td(t,e){if(Br&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return ml(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return ml(S6(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return ml(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return ml(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],i=0;i!=t.length;++i)n.push(String.fromCharCode(t[i]));return n.join("")}function Hn(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Hn(t[r]));return e}function ri(t,e){for(var r="";r.length<e;)r+=t;return r}function Ro(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,a){return r=-r,a}),!isNaN(e=Number(n)))?e/r:e}var Soe=["january","february","march","april","may","june","july","august","september","october","november","december"];function df(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),i=e.getMonth(),a=e.getDate();if(isNaN(a))return r;var s=t.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&Soe.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||a>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var koe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(t||typeof n=="string")return r.split(n);for(var a=r.split(n),s=[a[0]],o=1;o<a.length;++o)s.push(i),s.push(a[o]);return s}}();function V6(t){return t?t.content&&t.type?td(t.content,!0):t.data?Lm(t.data):t.asNodeBuffer&&Br?Lm(t.asNodeBuffer().toString("binary")):t.asBinary?Lm(t.asBinary()):t._data&&t._data.getContent?Lm(td(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function K6(t){if(!t)return null;if(t.data)return t4(t.data);if(t.asNodeBuffer&&Br)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?t4(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Toe(t){return t&&t.name.slice(-4)===".bin"?K6(t):V6(t)}function io(t,e){for(var r=t.FullPaths||si(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var s=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||i==s)return t.files?t.files[r[a]]:t.FileIndex[a]}return null}function AB(t,e){var r=io(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Ci(t,e,r){if(!r)return Toe(AB(t,e));if(!e)return null;try{return Ci(t,e)}catch{return null}}function Os(t,e,r){if(!r)return V6(AB(t,e));if(!e)return null;try{return Os(t,e)}catch{return null}}function j6(t,e,r){if(!r)return K6(AB(t,e));if(!e)return null;try{return j6(t,e)}catch{return null}}function f4(t){for(var e=t.FullPaths||si(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function xr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Br?n=gc(r):n=qse(r),ir.utils.cfb_add(t,e,n)}ir.utils.cfb_add(t,e,r)}else t.file(e,r)}function uB(){return ir.utils.cfb_new()}function z6(t,e){switch(e.type){case"base64":return ir.read(t,{type:"base64"});case"binary":return ir.read(t,{type:"binary"});case"buffer":case"array":return ir.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Rm(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var xi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ioe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,m4=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Foe=/<[^>]*>/g,Ia=xi.match(m4)?m4:Foe,Poe=/<\w*:/,Loe=/<(\/?)\w+:/;function hr(t,e,r){for(var n={},i=0,a=0;i!==t.length&&!((a=t.charCodeAt(i))===32||a===10||a===13);++i);if(e||(n[0]=t.slice(0,i)),i===t.length)return n;var s=t.match(Ioe),o=0,l="",A=0,u="",d="",h=1;if(s)for(A=0;A!=s.length;++A){for(d=s[A],a=0;a!=d.length&&d.charCodeAt(a)!==61;++a);for(u=d.slice(0,a).trim();d.charCodeAt(a+1)==32;)++a;for(h=(i=d.charCodeAt(a+1))==34||i==39?1:0,l=d.slice(a+1+h,d.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,r||(n[u.toLowerCase()]=l);else{var f=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[f]&&u.slice(o-3,o)=="ext")continue;n[f]=l,r||(n[f.toLowerCase()]=l)}}return n}function kl(t){return t.replace(Loe,"<$1")}var $6={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},dB=tb($6),Xr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",a=i.indexOf("<![CDATA[");if(a==-1)return i.replace(t,function(o,l){return $6[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var s=i.indexOf("]]>");return r(i.slice(0,a))+i.slice(a+9,s)+r(i.slice(s+3))}}(),hB=/[&<>'"]/g,Doe=/[\u0000-\u0008\u000b-\u001f]/g;function mn(t){var e=t+"";return e.replace(hB,function(r){return dB[r]}).replace(Doe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function p4(t){return mn(t).replace(/ /g,"_x0020_")}var G6=/[\u0000-\u001f]/g;function fB(t){var e=t+"";return e.replace(hB,function(r){return dB[r]}).replace(/\n/g,"<br/>").replace(G6,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Roe(t){var e=t+"";return e.replace(hB,function(r){return dB[r]}).replace(G6,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var g4=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Uoe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Rn(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Wy(t){for(var e="",r=0,n=0,i=0,a=0,s=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(i=t.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=i&63,e+=String.fromCharCode(s);continue}if(a=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|a&63);continue}s=t.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(a&63)<<6|s&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function v4(t){var e=IA(2*t.length),r,n,i=1,a=0,s=0,o;for(n=0;n<t.length;n+=i)i=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(e[a++]=s&255,e[a++]=s>>>8,s=0),e[a++]=r%256,e[a++]=r>>>8;return e.slice(0,a).toString("ucs2")}function w4(t){return gc(t,"binary").toString("utf8")}var e1="foo bar baz",bn=Br&&(w4(e1)==Wy(e1)&&w4||v4(e1)==Wy(e1)&&v4)||Wy,ml=Br?function(t){return gc(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,i=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},W0=function(){var t={};return function(r,n){var i=r+"|"+(n||"");return t[i]?t[i]:t[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),W6=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)n=n.replace(t[i][0],t[i][1]);return n}}(),Ooe=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Moe=/<\/?(?:vt:)?variant>/g,Qoe=/<(?:vt:)([^>]*)>([\s\S]*)</;function b4(t,e){var r=hr(t),n=t.match(Ooe(r.baseType))||[],i=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(a){var s=a.replace(Moe,"").match(Qoe);s&&i.push({v:bn(s[2]),t:s[1]})}),i}var q6=/(^\s|\s$|\n)/;function ca(t,e){return"<"+t+(e.match(q6)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function q0(t){return si(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ft(t,e,r){return"<"+t+(r!=null?q0(r):"")+(e!=null?(e.match(q6)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Hx(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Hoe(t,e){switch(typeof t){case"string":var r=Ft("vt:lpwstr",mn(t));return e&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return Ft((t|0)==t?"vt:i4":"vt:r8",mn(String(t)));case"boolean":return Ft("vt:bool",t?"true":"false")}if(t instanceof Date)return Ft("vt:filetime",Hx(t));throw new Error("Unable to serialize "+t)}function mB(t){if(Br&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return bn(jA(oB(t)));throw new Error("Bad input format: expected Buffer or string")}var X0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ui={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},wd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ps={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Voe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,a=5;a>=0;--a)i=i*256+t[e+a];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function Koe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,a=0,s=n?-e:e;isFinite(s)?s==0?i=a=0:(i=Math.floor(Math.log(s)/Math.LN2),a=s*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[r+o]=a&255;t[r+6]=(i&15)<<4|a&15,t[r+7]=i>>4|n}var y4=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var i=0,a=t[0][n].length;i<a;i+=r)e.push.apply(e,t[0][n].slice(i,i+r));return e},x4=Br?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:gc(e)})):y4(t)}:y4,_4=function(t,e,r){for(var n=[],i=e;i<r;i+=2)n.push(String.fromCharCode(Jl(t,i)));return n.join("").replace(Ya,"")},pB=Br?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Ya,""):_4(t,e,r)}:_4,E4=function(t,e,r){for(var n=[],i=e;i<e+r;++i)n.push(("0"+t[i].toString(16)).slice(-2));return n.join("")},X6=Br?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):E4(t,e,r)}:E4,B4=function(t,e,r){for(var n=[],i=e;i<r;i++)n.push(String.fromCharCode(fh(t,i)));return n.join("")},Rp=Br?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):B4(e,r,n)}:B4,Y6=function(t,e){var r=Ls(t,e);return r>0?Rp(t,e+4,e+4+r-1):""},J6=Y6,Z6=function(t,e){var r=Ls(t,e);return r>0?Rp(t,e+4,e+4+r-1):""},eO=Z6,tO=function(t,e){var r=2*Ls(t,e);return r>0?Rp(t,e+4,e+4+r-1):""},rO=tO,nO=function(e,r){var n=Ls(e,r);return n>0?pB(e,r+4,r+4+n):""},iO=nO,aO=function(t,e){var r=Ls(t,e);return r>0?Rp(t,e+4,e+4+r):""},sO=aO,oO=function(t,e){return Voe(t,e)},Qv=oO,gB=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Br&&(J6=function(e,r){if(!Buffer.isBuffer(e))return Y6(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},eO=function(e,r){if(!Buffer.isBuffer(e))return Z6(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},rO=function(e,r){if(!Buffer.isBuffer(e))return tO(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},iO=function(e,r){if(!Buffer.isBuffer(e))return nO(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},sO=function(e,r){if(!Buffer.isBuffer(e))return aO(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},Qv=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):oO(e,r)},gB=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var fh=function(t,e){return t[e]},Jl=function(t,e){return t[e+1]*256+t[e]},joe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Ls=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},mu=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},zoe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function o0(t,e){var r="",n,i,a=[],s,o,l,A;switch(e){case"dbcs":if(A=this.l,Br&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Jl(this,A)),A+=2;t*=2;break;case"utf8":r=Rp(this,this.l,this.l+t);break;case"utf16le":t*=2,r=pB(this,this.l,this.l+t);break;case"wstr":return o0.call(this,t,"dbcs");case"lpstr-ansi":r=J6(this,this.l),t=4+Ls(this,this.l);break;case"lpstr-cp":r=eO(this,this.l),t=4+Ls(this,this.l);break;case"lpwstr":r=rO(this,this.l),t=4+2*Ls(this,this.l);break;case"lpp4":t=4+Ls(this,this.l),r=iO(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ls(this,this.l),r=sO(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(s=fh(this,this.l+t++))!==0;)a.push(Zg(s));r=a.join("");break;case"_wstr":for(t=0,r="";(s=Jl(this,this.l+t))!==0;)a.push(Zg(s)),t+=2;t+=2,r=a.join("");break;case"dbcs-cont":for(r="",A=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(A)!==-1)return s=fh(this,A),this.l=A+1,o=o0.call(this,t-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Zg(Jl(this,A))),A+=2}r=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",A=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(A)!==-1)return s=fh(this,A),this.l=A+1,o=o0.call(this,t-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Zg(fh(this,A))),A+=1}r=a.join("");break;default:switch(t){case 1:return n=fh(this,this.l),this.l++,n;case 2:return n=(e==="i"?joe:Jl)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?mu:zoe)(this,this.l),this.l+=4,n):(i=Ls(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=Qv(this,this.l):i=Qv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:r=X6(this,this.l,t);break}}return this.l+=t,r}var $oe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Goe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},Woe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function qoe(t,e,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=e.length;++i)Woe(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(r==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var s=e.charCodeAt(i);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,$oe(this,e,this.l);break;case 8:if(n=8,r==="f"){Koe(this,e,this.l);break}case 16:break;case-4:n=4,Goe(this,e,this.l);break}return this.l+=n,this}function lO(t,e){var r=X6(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function oa(t,e){t.l=e,t.read_shift=o0,t.chk=lO,t.write_shift=qoe}function Ta(t,e){t.l+=e}function At(t){var e=IA(t);return oa(e,0),e}function vc(t,e,r){if(t){var n,i,a;oa(t,t.l||0);for(var s=t.length,o=0,l=0;t.l<s;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var A=rp[o]||rp[65535];for(n=t.read_shift(1),a=n&127,i=1;i<4&&n&128;++i)a+=((n=t.read_shift(1))&127)<<7*i;l=t.l+a;var u=A.f&&A.f(t,a,r);if(t.l=l,e(u,A,o))return}}}function hs(){var t=[],e=Br?256:2048,r=function(A){var u=At(A);return oa(u,0),u},n=r(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},a=function(A){return n&&A<n.length-n.l?n:(i(),n=r(Math.max(A+1,e)))},s=function(){return i(),Wi(t)},o=function(A){i(),n=A,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:o,end:s,_bufs:t}}function bt(t,e,r,n){var i=+e,a;if(!isNaN(i)){n||(n=rp[i].p||(r||[]).length||0),a=1+(i>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var s=t.next(a);i<=127?s.write_shift(1,i):(s.write_shift(1,(i&127)+128),s.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)s.write_shift(1,(n&127)+128),n>>=7;else{s.write_shift(1,n);break}n>0&&gB(r)&&t.push(r)}}function l0(t,e,r){var n=Hn(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function C4(t,e,r){var n=Hn(t);return n.s=l0(n.s,e.s,r),n.e=l0(n.e,e.s,r),n}function c0(t,e){if(t.cRel&&t.c<0)for(t=Hn(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Hn(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Ar(t);return!t.cRel&&t.cRel!=null&&(r=Joe(r)),!t.rRel&&t.rRel!=null&&(r=Xoe(r)),r}function qy(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Xn(t.s.c)+":"+(t.e.cRel?"":"$")+Xn(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+yi(t.s.r)+":"+(t.e.rRel?"":"$")+yi(t.e.r):c0(t.s,e.biff)+":"+c0(t.e,e.biff)}function vB(t){return parseInt(Yoe(t),10)-1}function yi(t){return""+(t+1)}function Xoe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Yoe(t){return t.replace(/\$(\d+)$/,"$1")}function wB(t){for(var e=Zoe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Xn(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Joe(t){return t.replace(/^([A-Z])/,"$$$1")}function Zoe(t){return t.replace(/^\$([A-Z])/,"$1")}function ele(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Yn(t){for(var e=0,r=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:e-1}}function Ar(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function fs(t){var e=t.indexOf(":");return e==-1?{s:Yn(t),e:Yn(t)}:{s:Yn(t.slice(0,e)),e:Yn(t.slice(e+1))}}function wr(t,e){return typeof e>"u"||typeof e=="number"?wr(t.s,t.e):(typeof t!="string"&&(t=Ar(t)),typeof e!="string"&&(e=Ar(e)),t==e?t:t+":"+e)}function Yr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,a=t.length;for(r=0;n<a&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.s.c=--r,r=0;n<a&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(e.s.r=--r,n===a||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=a&&!((i=t.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(e.e.c=--r,r=0;n!=a&&!((i=t.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return e.e.r=--r,e}function N4(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=po(t.z,r?Qi(e):e)}catch{}try{return t.w=po((t.XF||{}).numFmtId||(r?14:0),r?Qi(e):e)}catch{return""+e}}function uc(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?wc[t.v]||t.v:e==null?N4(t,t.v):N4(t,e))}function zA(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function cO(t,e,r){var n=r||{},i=t?Array.isArray(t):n.dense,a=t||(i?[]:{}),s=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Yn(n.origin):n.origin;s=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var u=Yr(a["!ref"]);A.s.c=u.s.c,A.s.r=u.s.r,A.e.c=Math.max(A.e.c,u.e.c),A.e.r=Math.max(A.e.r,u.e.r),s==-1&&(A.e.r=s=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[d].length;++h)if(!(typeof e[d][h]>"u")){var f={v:e[d][h]},p=s+d,g=o+h;if(A.s.r>p&&(A.s.r=p),A.s.c>g&&(A.s.c=g),A.e.r<p&&(A.e.r=p),A.e.c<g&&(A.e.c=g),e[d][h]&&typeof e[d][h]=="object"&&!Array.isArray(e[d][h])&&!(e[d][h]instanceof Date))f=e[d][h];else if(Array.isArray(f.v)&&(f.f=e[d][h][1],f.v=f.v[0]),f.v===null)if(f.f)f.t="n";else if(n.nullError)f.t="e",f.v=0;else if(n.sheetStubs)f.t="z";else continue;else typeof f.v=="number"?f.t="n":typeof f.v=="boolean"?f.t="b":f.v instanceof Date?(f.z=n.dateNF||lr[14],n.cellDates?(f.t="d",f.w=po(f.z,Qi(f.v))):(f.t="n",f.v=Qi(f.v),f.w=po(f.z,f.v))):f.t="s";if(i)a[p]||(a[p]=[]),a[p][g]&&a[p][g].z&&(f.z=a[p][g].z),a[p][g]=f;else{var v=Ar({c:g,r:p});a[v]&&a[v].z&&(f.z=a[v].z),a[v]=f}}}return A.s.c<1e7&&(a["!ref"]=wr(A)),a}function Df(t,e){return cO(null,t,e)}function tle(t){return t.read_shift(4,"i")}function Uo(t,e){return e||(e=At(4)),e.write_shift(4,t),e}function ka(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function qi(t,e){var r=!1;return e==null&&(r=!0,e=At(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function rle(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function nle(t,e){return e||(e=At(4)),e.write_shift(2,t.ich||0),e.write_shift(2,t.ifnt||0),e}function bB(t,e){var r=t.l,n=t.read_shift(1),i=ka(t),a=[],s={t:i,h:i};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(rle(t));s.r=a}else s.r=[{ich:0,ifnt:0}];return t.l=r+e,s}function ile(t,e){var r=!1;return e==null&&(r=!0,e=At(15+4*t.t.length)),e.write_shift(1,0),qi(t.t,e),r?e.slice(0,e.l):e}var ale=bB;function sle(t,e){var r=!1;return e==null&&(r=!0,e=At(23+4*t.t.length)),e.write_shift(1,1),qi(t.t,e),e.write_shift(4,1),nle({ich:0,ifnt:0},e),r?e.slice(0,e.l):e}function vo(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function bd(t,e){return e==null&&(e=At(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function yd(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function xd(t,e){return e==null&&(e=At(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var ole=ka,AO=qi;function yB(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Hv(t,e){var r=!1;return e==null&&(r=!0,e=At(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var lle=ka,Vx=yB,xB=Hv;function _B(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var i=n===0?Qv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):mu(e,0)>>2;return r?i/100:i}function uO(t,e){e==null&&(e=At(4));var r=0,n=0,i=t*100;if(t==(t|0)&&t>=-(1<<29)&&t<1<<29?n=1:i==(i|0)&&i>=-(1<<29)&&i<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?i:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function dO(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function cle(t,e){return e||(e=At(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var _d=dO,Rf=cle;function Ba(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function rd(t,e){return(e||At(8)).write_shift(8,t,"f")}function Ale(t){var e={},r=t.read_shift(1),n=r>>>1,i=t.read_shift(1),a=t.read_shift(2,"i"),s=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var A=Fu[i];A&&(e.rgb=J0(A));break;case 2:e.rgb=J0([s,o,l]);break;case 3:e.theme=i;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Vv(t,e){if(e||(e=At(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function ule(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function dle(t,e){e||(e=At(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function hO(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function hle(t){return hO(t,1)}function fle(t){return hO(t,2)}var EB=2,ss=3,t1=11,S4=12,Kv=19,r1=64,mle=65,ple=71,gle=4108,vle=4126,zi=80,fO=81,wle=[zi,fO],Kx={1:{n:"CodePage",t:EB},2:{n:"Category",t:zi},3:{n:"PresentationFormat",t:zi},4:{n:"ByteCount",t:ss},5:{n:"LineCount",t:ss},6:{n:"ParagraphCount",t:ss},7:{n:"SlideCount",t:ss},8:{n:"NoteCount",t:ss},9:{n:"HiddenCount",t:ss},10:{n:"MultimediaClipCount",t:ss},11:{n:"ScaleCrop",t:t1},12:{n:"HeadingPairs",t:gle},13:{n:"TitlesOfParts",t:vle},14:{n:"Manager",t:zi},15:{n:"Company",t:zi},16:{n:"LinksUpToDate",t:t1},17:{n:"CharacterCount",t:ss},19:{n:"SharedDoc",t:t1},22:{n:"HyperlinksChanged",t:t1},23:{n:"AppVersion",t:ss,p:"version"},24:{n:"DigSig",t:mle},26:{n:"ContentType",t:zi},27:{n:"ContentStatus",t:zi},28:{n:"Language",t:zi},29:{n:"Version",t:zi},255:{},2147483648:{n:"Locale",t:Kv},2147483651:{n:"Behavior",t:Kv},1919054434:{}},jx={1:{n:"CodePage",t:EB},2:{n:"Title",t:zi},3:{n:"Subject",t:zi},4:{n:"Author",t:zi},5:{n:"Keywords",t:zi},6:{n:"Comments",t:zi},7:{n:"Template",t:zi},8:{n:"LastAuthor",t:zi},9:{n:"RevNumber",t:zi},10:{n:"EditTime",t:r1},11:{n:"LastPrinted",t:r1},12:{n:"CreatedDate",t:r1},13:{n:"ModifiedDate",t:r1},14:{n:"PageCount",t:ss},15:{n:"WordCount",t:ss},16:{n:"CharCount",t:ss},17:{n:"Thumbnail",t:ple},18:{n:"Application",t:zi},19:{n:"DocSecurity",t:ss},255:{},2147483648:{n:"Locale",t:Kv},2147483651:{n:"Behavior",t:Kv},1919054434:{}},k4={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},ble=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function yle(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var xle=yle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Fu=Hn(xle),wc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},mO={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},zx={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},n1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function BB(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function _le(t){var e=BB();if(!t||!t.match)return e;var r={};if((t.match(Ia)||[]).forEach(function(n){var i=hr(n);switch(i[0].replace(Poe,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":e[zx[i.ContentType]]!==void 0&&e[zx[i.ContentType]].push(i.PartName);break}}),e.xmlns!==Ui.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function pO(t,e){var r=Eoe(zx),n=[],i;n[n.length]=xi,n[n.length]=Ft("Types",null,{xmlns:Ui.CT,"xmlns:xsd":Ui.xsd,"xmlns:xsi":Ui.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ft("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(i=t[l][0],n[n.length]=Ft("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:n1[l][e.bookType]||n1[l].xlsx}))},s=function(l){(t[l]||[]).forEach(function(A){n[n.length]=Ft("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:n1[l][e.bookType]||n1[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(A){n[n.length]=Ft("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:r[l][0]})})};return a("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Nr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Y0(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function A0(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Ia)||[]).forEach(function(i){var a=hr(i);if(a[0]==="<Relationship"){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Rm(a.Target,e);r[o]=s,n[a.Id]=s}}),r["!id"]=n,r}function Uh(t){var e=[xi,Ft("Relationships",null,{xmlns:Ui.RELS})];return si(t["!id"]).forEach(function(r){e[e.length]=Ft("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function un(t,e,r,n,i,a){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=r,a?i.TargetMode=a:[Nr.HLINK,Nr.XPATH,Nr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}var Ele="application/vnd.oasis.opendocument.spreadsheet";function Ble(t,e){for(var r=mB(t),n,i;n=X0.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=hr(n[0],!1),i.path=="/"&&i.type!==Ele)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function Cle(t){var e=[xi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function T4(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Nle(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Sle(t){var e=[xi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(T4(t[r][0],t[r][1])),e.push(Nle("",t[r][0]));return e.push(T4("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function gO(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Dv.version+"</meta:generator></office:meta></office:document-meta>"}var Ao=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],kle=function(){for(var t=new Array(Ao.length),e=0;e<Ao.length;++e){var r=Ao[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function vO(t){var e={};t=bn(t);for(var r=0;r<Ao.length;++r){var n=Ao[r],i=t.match(kle[r]);i!=null&&i.length>0&&(e[n[1]]=Xr(i[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Qn(e[n[1]]))}return e}function Xy(t,e,r,n,i){i[t]!=null||e==null||e===""||(i[t]=e,e=mn(e),n[n.length]=r?Ft(t,e,r):ca(t,e))}function wO(t,e){var r=e||{},n=[xi,Ft("cp:coreProperties",null,{"xmlns:cp":Ui.CORE_PROPS,"xmlns:dc":Ui.dc,"xmlns:dcterms":Ui.dcterms,"xmlns:dcmitype":Ui.dcmitype,"xmlns:xsi":Ui.xsi})],i={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Xy("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Hx(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),t.ModifiedDate!=null&&Xy("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Hx(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var a=0;a!=Ao.length;++a){var s=Ao[a],o=r.Props&&r.Props[s[1]]!=null?r.Props[s[1]]:t?t[s[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&Xy(s[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Pu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],bO=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function yO(t,e,r,n){var i=[];if(typeof t=="string")i=b4(t,n);else for(var a=0;a<t.length;++a)i=i.concat(t[a].map(function(u){return{v:u}}));var s=typeof e=="string"?b4(e,n).map(function(u){return u.v}):e,o=0,l=0;if(s.length>0)for(var A=0;A!==i.length;A+=2){switch(l=+i[A+1].v,i[A].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=s.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=s.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=s.slice(o,o+l);break}o+=l}}function Tle(t,e,r){var n={};return e||(e={}),t=bn(t),Pu.forEach(function(i){var a=(t.match(W0(i[0]))||[])[1];switch(i[2]){case"string":a&&(e[i[1]]=Xr(a));break;case"bool":e[i[1]]=a==="true";break;case"raw":var s=t.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));s&&s.length>0&&(n[i[1]]=s[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&yO(n.HeadingPairs,n.TitlesOfParts,e,r),e}function xO(t){var e=[],r=Ft;return t||(t={}),t.Application="SheetJS",e[e.length]=xi,e[e.length]=Ft("Properties",null,{xmlns:Ui.EXT_PROPS,"xmlns:vt":Ui.vt}),Pu.forEach(function(n){if(t[n[1]]!==void 0){var i;switch(n[2]){case"string":i=mn(String(t[n[1]]));break;case"bool":i=t[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=r(n[0],i))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+mn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Ile=/<[^>]+>[^<]*/g;function Fle(t,e){var r={},n="",i=t.match(Ile);if(i)for(var a=0;a!=i.length;++a){var s=i[a],o=hr(s);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Xr(o.name);break;case"</property>":n=null;break;default:if(s.indexOf("<vt:")===0){var l=s.split(">"),A=l[0].slice(4),u=l[1];switch(A){case"lpstr":case"bstr":case"lpwstr":r[n]=Xr(u);break;case"bool":r[n]=Rn(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=Qn(u);break;case"cy":case"error":r[n]=Xr(u);break;default:if(A.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",s,A,l)}}else if(s.slice(0,2)!=="</"){if(e.WTF)throw new Error(s)}}}return r}function _O(t){var e=[xi,Ft("Properties",null,{xmlns:Ui.CUST_PROPS,"xmlns:vt":Ui.vt})];if(!t)return e.join("");var r=1;return si(t).forEach(function(i){++r,e[e.length]=Ft("property",Hoe(t[i],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:mn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var $x={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Yy;function Ple(t,e,r){Yy||(Yy=tb($x)),e=Yy[e]||e,t[e]=r}function Lle(t,e){var r=[];return si($x).map(function(n){for(var i=0;i<Ao.length;++i)if(Ao[i][1]==n)return Ao[i];for(i=0;i<Pu.length;++i)if(Pu[i][1]==n)return Pu[i];throw n}).forEach(function(n){if(t[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(ca($x[n[1]]||n[1],i))}}),Ft("DocumentProperties",r.join(""),{xmlns:Ps.o})}function Dle(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return t&&si(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var s=0;s<Ao.length;++s)if(a==Ao[s][1])return;for(s=0;s<Pu.length;++s)if(a==Pu[s][1])return;for(s=0;s<r.length;++s)if(a==r[s])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(Ft(p4(a),o,{"dt:dt":l}))}}),e&&si(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var s=e[a],o="string";typeof s=="number"?(o="float",s=String(s)):s===!0||s===!1?(o="boolean",s=s?"1":"0"):s instanceof Date?(o="dateTime.tz",s=s.toISOString()):s=String(s),i.push(Ft(p4(a),s,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Ps.o+'">'+i.join("")+"</"+n+">"}function CB(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Rle(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),i=(r-n)/Math.pow(2,32);n*=1e7,i*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),i+=a);var s=At(8);return s.write_shift(4,n),s.write_shift(4,i),s}function EO(t,e,r){var n=t.l,i=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return i}function BO(t,e,r){var n=t.read_shift(0,"lpwstr");return r&&(t.l+=4-(n.length+1&3)&3),n}function CO(t,e,r){return e===31?BO(t):EO(t,e,r)}function Gx(t,e,r){return CO(t,e,r===!1?0:4)}function Ule(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return CO(t,e,0)}function Ole(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var i=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Ya,""),t.l-i&2&&(t.l+=2)}return r}function Mle(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Ya,"");return r}function Qle(t){var e=t.l,r=jv(t,fO);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=jv(t,ss);return[r,n]}function Hle(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(Qle(t));return r}function I4(t,e){for(var r=t.read_shift(4),n={},i=0;i!=r;++i){var a=t.read_shift(4),s=t.read_shift(4);n[a]=t.read_shift(s,e===1200?"utf16le":"utf8").replace(Ya,"").replace(Dm,"!"),e===1200&&s%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>2+1<<2),n}function NO(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function Vle(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function jv(t,e,r){var n=t.read_shift(2),i,a=r||{};if(t.l+=2,e!==S4&&n!==e&&wle.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===S4?n:e){case 2:return i=t.read_shift(2,"i"),a.raw||(t.l+=2),i;case 3:return i=t.read_shift(4,"i"),i;case 11:return t.read_shift(4)!==0;case 19:return i=t.read_shift(4),i;case 30:return EO(t,n,4).replace(Ya,"");case 31:return BO(t);case 64:return CB(t);case 65:return NO(t);case 71:return Vle(t);case 80:return Gx(t,n,!a.raw).replace(Ya,"");case 81:return Ule(t,n).replace(Ya,"");case 4108:return Hle(t);case 4126:case 4127:return n==4127?Ole(t):Mle(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function F4(t,e){var r=At(4),n=At(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=At(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=Rle(e);break;case 31:case 80:for(n=At(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Wi([r,n])}function P4(t,e){var r=t.l,n=t.read_shift(4),i=t.read_shift(4),a=[],s=0,o=0,l=-1,A={};for(s=0;s!=i;++s){var u=t.read_shift(4),d=t.read_shift(4);a[s]=[u,d+r]}a.sort(function(I,F){return I[1]-F[1]});var h={};for(s=0;s!=i;++s){if(t.l!==a[s][1]){var f=!0;if(s>0&&e)switch(e[a[s-1][0]].t){case 2:t.l+2===a[s][1]&&(t.l+=2,f=!1);break;case 80:t.l<=a[s][1]&&(t.l=a[s][1],f=!1);break;case 4108:t.l<=a[s][1]&&(t.l=a[s][1],f=!1);break}if((!e||s==0)&&t.l<=a[s][1]&&(f=!1,t.l=a[s][1]),f)throw new Error("Read Error: Expected address "+a[s][1]+" at "+t.l+" :"+s)}if(e){var p=e[a[s][0]];if(h[p.n]=jv(t,p.t,{raw:!0}),p.p==="version"&&(h[p.n]=String(h[p.n]>>16)+"."+("0000"+String(h[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(h[p.n]){case 0:h[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Po(o=h[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[p.n])}}else if(a[s][0]===1){if(o=h.CodePage=jv(t,EB),Po(o),l!==-1){var g=t.l;t.l=a[l][1],A=I4(t,o),t.l=g}}else if(a[s][0]===0){if(o===0){l=s,t.l=a[s+1][1];continue}A=I4(t,o)}else{var v=A[a[s][0]],C;switch(t[t.l]){case 65:t.l+=4,C=NO(t);break;case 30:t.l+=4,C=Gx(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,C=Gx(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,C=t.read_shift(4,"i");break;case 19:t.l+=4,C=t.read_shift(4);break;case 5:t.l+=4,C=t.read_shift(8,"f");break;case 11:t.l+=4,C=fi(t,4);break;case 64:t.l+=4,C=Qn(CB(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[v]=C}}return t.l=r+n,h}var SO=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Kle(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function L4(t,e,r){var n=At(8),i=[],a=[],s=8,o=0,l=At(8),A=At(8);if(l.write_shift(4,2),l.write_shift(4,1200),A.write_shift(4,1),a.push(l),i.push(A),s+=8+l.length,!e){A=At(8),A.write_shift(4,0),i.unshift(A);var u=[At(4)];for(u[0].write_shift(4,t.length),o=0;o<t.length;++o){var d=t[o][0];for(l=At(4+4+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=Wi(u),a.unshift(l),s+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(SO.indexOf(t[o][0])>-1||bO.indexOf(t[o][0])>-1)&&t[o][1]!=null){var h=t[o][1],f=0;if(e){f=+e[t[o][0]];var p=r[f];if(p.p=="version"&&typeof h=="string"){var g=h.split(".");h=(+g[0]<<16)+(+g[1]||0)}l=F4(p.t,h)}else{var v=Kle(h);v==-1&&(v=31,h=String(h)),l=F4(v,h)}a.push(l),A=At(8),A.write_shift(4,e?f:2+o),i.push(A),s+=8+l.length}var C=8*(a.length+1);for(o=0;o<a.length;++o)i[o].write_shift(4,C),C+=a[o].length;return n.write_shift(4,s),n.write_shift(4,a.length),Wi([n].concat(i).concat(a))}function D4(t,e,r){var n=t.content;if(!n)return{};oa(n,0);var i,a,s,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var A=n.read_shift(4),u=n.read_shift(16);if(u!==ir.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(a=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(s=n.read_shift(16),l=n.read_shift(4));var d=P4(n,e),h={SystemIdentifier:A};for(var f in d)h[f]=d[f];if(h.FMTID=a,i===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var p;try{p=P4(n,null)}catch{}for(f in p)h[f]=p[f];return h.FMTID=[a,s],h}function R4(t,e,r,n,i,a){var s=At(i?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,ir.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,i?2:1),s.write_shift(16,e,"hex"),s.write_shift(4,i?68:48);var l=L4(t,r,n);if(o.push(l),i){var A=L4(i,null,null);s.write_shift(16,a,"hex"),s.write_shift(4,68+l.length),o.push(A)}return Wi(o)}function Mc(t,e){return t.read_shift(e),null}function jle(t,e){e||(e=At(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function zle(t,e,r){for(var n=[],i=t.l+e;t.l<i;)n.push(r(t,i-t.l));if(i!==t.l)throw new Error("Slurp error");return n}function fi(t,e){return t.read_shift(e)===1}function $a(t,e){return e||(e=At(2)),e.write_shift(2,+!!t),e}function Ni(t){return t.read_shift(2,"u")}function ao(t,e){return e||(e=At(2)),e.write_shift(2,t),e}function kO(t,e){return zle(t,e,Ni)}function $le(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function TO(t,e,r){return r||(r=At(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Up(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=t.read_shift(1);a&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var s=n?t.read_shift(n,i):"";return s}function Gle(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,i=r&8,a=1+(r&1),s=0,o,l={};i&&(s=t.read_shift(2)),n&&(o=t.read_shift(4));var A=a==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,A);return i&&(t.l+=4*s),n&&(t.l+=o),l.t=u,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Wle(t){var e=t.t||"",r=At(3+0);r.write_shift(2,e.length),r.write_shift(1,1);var n=At(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[r,n];return Wi(i)}function nd(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Op(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):nd(t,n,r)}function Ed(t,e,r){if(r.biff>5)return Op(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function IO(t,e,r){return r||(r=At(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function qle(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function Xle(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var i=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Ya,"");return n&&(t.l+=24),i}function Yle(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=t.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var s=t.read_shift(a>>1,"utf16le").replace(Ya,"");return r+s}function Jle(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Xle(t);case"0303000000000000c000000000000046":return Yle(t);default:throw new Error("Unsupported Moniker "+r)}}function i1(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Ya,""):"";return r}function U4(t,e){e||(e=At(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function Zle(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=t.read_shift(2);t.l+=2;var a,s,o,l,A="",u,d;i&16&&(a=i1(t,r-t.l)),i&128&&(s=i1(t,r-t.l)),(i&257)===257&&(o=i1(t,r-t.l)),(i&257)===1&&(l=Jle(t,r-t.l)),i&8&&(A=i1(t,r-t.l)),i&32&&(u=t.read_shift(16)),i&64&&(d=CB(t)),t.l=r;var h=s||o||l||"";h&&A&&(h+="#"+A),h||(h="#"+A),i&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var f={Target:h};return u&&(f.guid=u),d&&(f.time=d),a&&(f.Tooltip=a),f}function ece(t){var e=At(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),a=i>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)e.write_shift(4,s[r]);if(a==28)n=n.slice(1),U4(n,e);else if(a&2){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)e.write_shift(1,parseInt(s[r],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),a&8&&U4(i>-1?n.slice(i+1):"",e)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)e.write_shift(1,parseInt(s[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function FO(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),i=t.read_shift(1);return[e,r,n,i]}function PO(t,e){var r=FO(t);return r[3]=0,r}function Tl(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function id(t,e,r,n){return n||(n=At(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function tce(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function rce(t,e,r){return e===0?"":Ed(t,e,r)}function nce(t,e,r){var n=r.biff>8?4:2,i=t.read_shift(n),a=t.read_shift(n,"i"),s=t.read_shift(n,"i");return[i,a,s]}function LO(t){var e=t.read_shift(2),r=_B(t);return[e,r]}function ice(t,e,r){t.l+=4,e-=4;var n=t.l+e,i=Up(t,e,r),a=t.read_shift(2);if(n-=t.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return t.l+=a,i}function ib(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);return{s:{c:n,r:e},e:{c:i,r}}}function DO(t,e){return e||(e=At(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function RO(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),i=t.read_shift(1);return{s:{c:n,r:e},e:{c:i,r}}}var ace=RO;function UO(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function sce(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function oce(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function va(t){t.l+=2,t.l+=t.read_shift(2)}var lce={0:va,4:va,5:va,6:va,7:oce,8:va,9:va,10:va,11:va,12:va,13:sce,14:va,15:va,16:va,17:va,18:va,19:va,20:va,21:UO};function cce(t,e){for(var r=t.l+e,n=[];t.l<r;){var i=t.read_shift(2);t.l-=2;try{n.push(lce[i](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function a1(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function NB(t,e,r){var n=1536,i=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=At(i);return a.write_shift(2,n),a.write_shift(2,e),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Ace(t,e){return e===0||t.read_shift(2),1200}function uce(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,i=Ed(t,0,r);return t.read_shift(e+n-t.l),i}function dce(t,e){var r=!e||e.biff==8,n=At(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function hce(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function fce(t,e,r){var n=t.read_shift(4),i=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var s=Up(t,0,r);return s.length===0&&(s="Sheet1"),{pos:n,hs:i,dt:a,name:s}}function mce(t,e){var r=!e||e.biff>=8?2:1,n=At(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function pce(t,e){for(var r=t.l+e,n=t.read_shift(4),i=t.read_shift(4),a=[],s=0;s!=i&&t.l<r;++s)a.push(Gle(t));return a.Count=n,a.Unique=i,a}function gce(t,e){var r=At(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],i=0;i<t.length;++i)n[i]=Wle(t[i]);var a=Wi([r].concat(n));return a.parts=[r.length].concat(n.map(function(s){return s.length})),a}function vce(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function wce(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function bce(t){var e=tce(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function yce(t){return t.read_shift(2),t.read_shift(4)}function O4(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var i=t.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,i]}function xce(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),A=t.read_shift(2);return{Pos:[e,r],Dim:[n,i],Flags:a,CurTab:s,FirstTab:o,Selected:l,TabRatio:A}}function _ce(){var t=At(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Ece(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function Bce(t){var e=At(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Cce(){}function Nce(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Up(t,0,r),n}function Sce(t,e){var r=t.name||"Arial",n=e&&e.biff==5,i=n?15+r.length:16+2*r.length,a=At(i);return a.write_shift(2,(t.sz||12)*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function kce(t){var e=Tl(t);return e.isst=t.read_shift(4),e}function Tce(t,e,r,n){var i=At(10);return id(t,e,n,i),i.write_shift(4,r),i}function Ice(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,i=Tl(t);r.biff==2&&t.l++;var a=Op(t,n-t.l,r);return i.val=a,i}function Fce(t,e,r,n,i){var a=!i||i.biff==8,s=At(6+2+ +a+(1+a)*r.length);return id(t,e,n,s),s.write_shift(2,r.length),a&&s.write_shift(1,1),s.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),s}function Pce(t,e,r){var n=t.read_shift(2),i=Ed(t,0,r);return[n,i]}function Lce(t,e,r,n){var i=r&&r.biff==5;n||(n=At(i?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var Dce=Ed;function M4(t,e,r){var n=t.l+e,i=r.biff==8||!r.biff?4:2,a=t.read_shift(i),s=t.read_shift(i),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:a,c:o},e:{r:s,c:l}}}function Rce(t,e){var r=e.biff==8||!e.biff?4:2,n=At(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Uce(t){var e=t.read_shift(2),r=t.read_shift(2),n=LO(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function Oce(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),a=[];t.l<r;)a.push(LO(t));if(t.l!==r)throw new Error("MulRK read error");var s=t.read_shift(2);if(a.length!=s-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:s,rkrec:a}}function Mce(t,e){for(var r=t.l+e-2,n=t.read_shift(2),i=t.read_shift(2),a=[];t.l<r;)a.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var s=t.read_shift(2);if(a.length!=s-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:s,ixfe:a}}function Qce(t,e,r,n){var i={},a=t.read_shift(4),s=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return i.patternType=ble[o>>26],n.cellStyles&&(i.alc=a&7,i.fWrap=a>>3&1,i.alcV=a>>4&7,i.fJustLast=a>>7&1,i.trot=a>>8&255,i.cIndent=a>>16&15,i.fShrinkToFit=a>>20&1,i.iReadOrder=a>>22&2,i.fAtrNum=a>>26&1,i.fAtrFnt=a>>27&1,i.fAtrAlc=a>>28&1,i.fAtrBdr=a>>29&1,i.fAtrPat=a>>30&1,i.fAtrProt=a>>31&1,i.dgLeft=s&15,i.dgRight=s>>4&15,i.dgTop=s>>8&15,i.dgBottom=s>>12&15,i.icvLeft=s>>16&127,i.icvRight=s>>23&127,i.grbitDiag=s>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function Hce(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Qce(t,e,n.fStyle,r),n}function Q4(t,e,r,n){var i=r&&r.biff==5;n||(n=At(i?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&i&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function Vce(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Kce(t){var e=At(8);return e.write_shift(4,0),e.write_shift(2,t[0]?t[0]+1:0),e.write_shift(2,t[1]?t[1]+1:0),e}function H4(t,e,r){var n=Tl(t);(r.biff==2||e==9)&&++t.l;var i=$le(t);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function jce(t,e,r,n,i,a){var s=At(8);return id(t,e,n,s),TO(r,a,s),s}function zce(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Tl(t),i=Ba(t);return n.val=i,n}function $ce(t,e,r,n){var i=At(14);return id(t,e,n,i),rd(r,i),i}var V4=rce;function Gce(t,e,r){var n=t.l+e,i=t.read_shift(2),a=t.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,i];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var s=nd(t,a),o=[];n>t.l;)o.push(Op(t));return[a,i,s,o]}function K4(t,e,r){var n=t.read_shift(2),i,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=ice(t,e-2,r)),a.body=i||t.read_shift(e-2),typeof i=="string"&&(a.Name=i),a}var Wce=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function j4(t,e,r){var n=t.l+e,i=t.read_shift(2),a=t.read_shift(1),s=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var A=nd(t,s,r);i&32&&(A=Wce[A.charCodeAt(0)]);var u=n-t.l;r&&r.biff==2&&--u;var d=n==t.l||o===0||!(u>0)?[]:cfe(t,u,r,o);return{chKey:a,Name:A,itab:l,rgce:d}}function OO(t,e,r){if(r.biff<8)return qce(t,e,r);for(var n=[],i=t.l+e,a=t.read_shift(r.biff>8?4:2);a--!==0;)n.push(nce(t,r.biff>8?12:6,r));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return n}function qce(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Up(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function Xce(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),i=t.read_shift(2),a=nd(t,n,r),s=nd(t,i,r);return[a,s]}function Yce(t,e,r){var n=RO(t);t.l++;var i=t.read_shift(1);return e-=8,[Afe(t,e,r),i,n]}function z4(t,e,r){var n=ace(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,ofe(t,e,r)]}function Jce(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function Zce(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=Ed(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:i},o,s,a]}}function eAe(t,e,r){return Zce(t,e,r)}function tAe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(ib(t));return r}function rAe(t){var e=At(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)DO(t[r],e);return e}function nAe(t,e,r){if(r&&r.biff<8)return aAe(t,e,r);var n=UO(t),i=cce(t,e-22,n[1]);return{cmo:n,ft:i}}var iAe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var i=t.read_shift(1);return t.l+=i,t.l=r,{fmt:n}}};function aAe(t,e,r){t.l+=4;var n=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var s=[];return s.push((iAe[n]||Ta)(t,e,r)),{cmo:[i,n,a],ft:s}}function sAe(t,e,r){var n=t.l,i="";try{t.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],s;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:s=qle(t,6,r);var o=t.read_shift(2);t.read_shift(2),Ni(t,2);var l=t.read_shift(2);t.l+=l;for(var A=1;A<t.lens.length-1;++A){if(t.l-n!=t.lens[A])throw new Error("TxO: bad continue record");var u=t[t.l],d=nd(t,t.lens[A+1]-t.lens[A]-1);if(i+=d,i.length>=(u?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return t.l=n+e,{t:i}}catch{return t.l=n+e,{t:i}}}function oAe(t,e){var r=ib(t);t.l+=16;var n=Zle(t,e-24);return[r,n]}function lAe(t){var e=At(24),r=Yn(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return Wi([e,ece(t[1])])}function cAe(t,e){t.read_shift(2);var r=ib(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Ya,""),[r,n]}function AAe(t){var e=t[1].Tooltip,r=At(10+2*(e.length+1));r.write_shift(2,2048);var n=Yn(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<e.length;++i)r.write_shift(2,e.charCodeAt(i));return r.write_shift(2,0),r}function uAe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=k4[r]||r,r=t.read_shift(2),e[1]=k4[r]||r,e}function dAe(t){return t||(t=At(4)),t.write_shift(2,1),t.write_shift(2,1),t}function hAe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(PO(t));return r}function fAe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(PO(t));return r}function mAe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function MO(t,e,r){if(!r.cellStyles)return Ta(t,e);var n=r&&r.biff>=12?4:2,i=t.read_shift(n),a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var A={s:i,e:a,w:s,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(A.level=l>>8&7),A}function pAe(t,e){var r=At(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function gAe(t,e){var r={};return e<32||(t.l+=16,r.header=Ba(t),r.footer=Ba(t),t.l+=2),r}function vAe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var i=t.read_shift(1);return t.l+=3,i&16&&(n.area=!0),n}function wAe(t){for(var e=At(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var bAe=Tl,yAe=kO,xAe=Op;function _Ae(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,i}function EAe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Tl(t);++t.l;var i=Ed(t,e-7,r);return n.t="str",n.val=i,n}function BAe(t){var e=Tl(t);++t.l;var r=Ba(t);return e.t="n",e.val=r,e}function CAe(t,e,r){var n=At(15);return Vp(n,t,e),n.write_shift(8,r,"f"),n}function NAe(t){var e=Tl(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function SAe(t,e,r){var n=At(9);return Vp(n,t,e),n.write_shift(2,r),n}function kAe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function TAe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function IAe(t,e,r){var n=t.l+e,i=Tl(t),a=t.read_shift(2),s=nd(t,a,r);return t.l=n,i.t="str",i.val=s,i}var FAe=[2,3,48,49,131,139,140,245],Wx=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=tb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var A=[],u=IA(1);switch(l.type){case"base64":u=Us(zs(o));break;case"binary":u=Us(o);break;case"buffer":case"array":u=o;break}oa(u,0);var d=u.read_shift(1),h=!!(d&136),f=!1,p=!1;switch(d){case 2:break;case 3:break;case 48:f=!0,h=!0;break;case 49:f=!0,h=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var g=0,v=521;d==2&&(g=u.read_shift(2)),u.l+=3,d!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),d!=2&&(v=u.read_shift(2));var C=u.read_shift(2),I=l.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(I=t[u[u.l]]),u.l+=1,u.l+=2),p&&(u.l+=36);for(var F=[],E={},R=Math.min(u.length,d==2?521:v-10-(f?264:0)),L=p?32:11;u.l<R&&u[u.l]!=13;)switch(E={},E.name=Zc.utils.decode(I,u.slice(u.l,u.l+L)).replace(/[\u0000\r\n].*$/g,""),u.l+=L,E.type=String.fromCharCode(u.read_shift(1)),d!=2&&!p&&(E.offset=u.read_shift(4)),E.len=u.read_shift(1),d==2&&(E.offset=u.read_shift(2)),E.dec=u.read_shift(1),E.name.length&&F.push(E),d!=2&&(u.l+=p?13:14),E.type){case"B":(!f||E.len!=8)&&l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+E.type)}if(u[u.l]!==13&&(u.l=v-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=v;var N=0,P=0;for(A[0]=[],P=0;P!=F.length;++P)A[0][P]=F[P].name;for(;g-- >0;){if(u[u.l]===42){u.l+=C;continue}for(++u.l,A[++N]=[],P=0,P=0;P!=F.length;++P){var x=u.slice(u.l,u.l+F[P].len);u.l+=F[P].len,oa(x,0);var k=Zc.utils.decode(I,x);switch(F[P].type){case"C":k.trim().length&&(A[N][P]=k.replace(/\s+$/,""));break;case"D":k.length===8?A[N][P]=new Date(+k.slice(0,4),+k.slice(4,6)-1,+k.slice(6,8)):A[N][P]=k;break;case"F":A[N][P]=parseFloat(k.trim());break;case"+":case"I":A[N][P]=p?x.read_shift(-4,"i")^2147483648:x.read_shift(4,"i");break;case"L":switch(k.trim().toUpperCase()){case"Y":case"T":A[N][P]=!0;break;case"N":case"F":A[N][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+k+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));A[N][P]="##MEMO##"+(p?parseInt(k.trim(),10):x.read_shift(4));break;case"N":k=k.replace(/\u0000/g,"").trim(),k&&k!="."&&(A[N][P]=+k||0);break;case"@":A[N][P]=new Date(x.read_shift(-8,"f")-621356832e5);break;case"T":A[N][P]=new Date((x.read_shift(4)-2440588)*864e5+x.read_shift(4));break;case"Y":A[N][P]=x.read_shift(4,"i")/1e4+x.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[N][P]=-x.read_shift(-8,"f");break;case"B":if(f&&F[P].len==8){A[N][P]=x.read_shift(8,"f");break}case"G":case"P":x.l+=F[P].len;break;case"0":if(F[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+F[P].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(A=A.slice(0,l.sheetRows)),l.DBF=F,A}function n(o,l){var A=l||{};A.dateNF||(A.dateNF="yyyymmdd");var u=Df(r(o,A),A);return u["!cols"]=A.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete A.DBF,u}function i(o,l){try{return zA(n(o,l),l)}catch(A){if(l&&l.WTF)throw A}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){var A=l||{};if(+A.codepage>=0&&Po(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var u=hs(),d=Wv(o,{header:1,raw:!0,cellDates:!0}),h=d[0],f=d.slice(1),p=o["!cols"]||[],g=0,v=0,C=0,I=1;for(g=0;g<h.length;++g){if(((p[g]||{}).DBF||{}).name){h[g]=p[g].DBF.name,++C;continue}if(h[g]!=null){if(++C,typeof h[g]=="number"&&(h[g]=h[g].toString(10)),typeof h[g]!="string")throw new Error("DBF Invalid column name "+h[g]+" |"+typeof h[g]+"|");if(h.indexOf(h[g])!==g){for(v=0;v<1024;++v)if(h.indexOf(h[g]+"_"+v)==-1){h[g]+="_"+v;break}}}}var F=Yr(o["!ref"]),E=[],R=[],L=[];for(g=0;g<=F.e.c-F.s.c;++g){var N="",P="",x=0,k=[];for(v=0;v<f.length;++v)f[v][g]!=null&&k.push(f[v][g]);if(k.length==0||h[g]==null){E[g]="?";continue}for(v=0;v<k.length;++v){switch(typeof k[v]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=k[v]instanceof Date?"D":"C";break;default:P="C"}x=Math.max(x,String(k[v]).length),N=N&&N!=P?"C":P}x>250&&(x=250),P=((p[g]||{}).DBF||{}).type,P=="C"&&p[g].DBF.len>x&&(x=p[g].DBF.len),N=="B"&&P=="N"&&(N="N",L[g]=p[g].DBF.dec,x=p[g].DBF.len),R[g]=N=="C"||P=="N"?x:a[N]||0,I+=R[g],E[g]=N}var y=u.next(32);for(y.write_shift(4,318902576),y.write_shift(4,f.length),y.write_shift(2,296+32*C),y.write_shift(2,I),g=0;g<4;++g)y.write_shift(4,0);for(y.write_shift(4,0|(+e[N6]||3)<<8),g=0,v=0;g<h.length;++g)if(h[g]!=null){var S=u.next(32),_=(h[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,_,"sbcs"),S.write_shift(1,E[g]=="?"?"C":E[g],"sbcs"),S.write_shift(4,v),S.write_shift(1,R[g]||a[E[g]]||0),S.write_shift(1,L[g]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),v+=R[g]||a[E[g]]||0}var M=u.next(264);for(M.write_shift(4,13),g=0;g<65;++g)M.write_shift(4,0);for(g=0;g<f.length;++g){var K=u.next(I);for(K.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(E[v]){case"L":K.write_shift(1,f[g][v]==null?63:f[g][v]?84:70);break;case"B":K.write_shift(8,f[g][v]||0,"f");break;case"N":var z="0";for(typeof f[g][v]=="number"&&(z=f[g][v].toFixed(L[v]||0)),C=0;C<R[v]-z.length;++C)K.write_shift(1,32);K.write_shift(1,z,"sbcs");break;case"D":f[g][v]?(K.write_shift(4,("0000"+f[g][v].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(f[g][v].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+f[g][v].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var ae=String(f[g][v]!=null?f[g][v]:"").slice(0,R[v]);for(K.write_shift(1,ae,"sbcs"),C=0;C<R[v]-ae.length;++C)K.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:n,from_sheet:s}}(),QO=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+si(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,f){var p=t[f];return typeof p=="number"?r4(p):p},n=function(h,f,p){var g=f.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return g==59?h:r4(g)};t["|"]=254;function i(h,f){switch(f.type){case"base64":return a(zs(h),f);case"binary":return a(h,f);case"buffer":return a(Br&&Buffer.isBuffer(h)?h.toString("binary"):jA(h),f);case"array":return a(td(h),f)}throw new Error("Unrecognized type "+f.type)}function a(h,f){var p=h.split(/[\n\r]+/),g=-1,v=-1,C=0,I=0,F=[],E=[],R=null,L={},N=[],P=[],x=[],k=0,y;for(+f.codepage>=0&&Po(+f.codepage);C!==p.length;++C){k=0;var S=p[C].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),_=S.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),M=_[0],K;if(S.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":_[1].charAt(0)=="P"&&E.push(S.slice(3).replace(/;;/g,";"));break;case"C":var z=!1,ae=!1,te=!1,G=!1,ue=-1,de=-1;for(I=1;I<_.length;++I)switch(_[I].charAt(0)){case"A":break;case"X":v=parseInt(_[I].slice(1))-1,ae=!0;break;case"Y":for(g=parseInt(_[I].slice(1))-1,ae||(v=0),y=F.length;y<=g;++y)F[y]=[];break;case"K":K=_[I].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(Ro(K))?isNaN(df(K).getDate())||(K=Qn(K)):(K=Ro(K),R!==null&&Pf(R)&&(K=nb(K))),z=!0;break;case"E":G=!0;var T=Oh(_[I].slice(1),{r:g,c:v});F[g][v]=[F[g][v],T];break;case"S":te=!0,F[g][v]=[F[g][v],"S5S"];break;case"G":break;case"R":ue=parseInt(_[I].slice(1))-1;break;case"C":de=parseInt(_[I].slice(1))-1;break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+S)}if(z&&(F[g][v]&&F[g][v].length==2?F[g][v][0]=K:F[g][v]=K,R=null),te){if(G)throw new Error("SYLK shared formula cannot have own formula");var O=ue>-1&&F[ue][de];if(!O||!O[1])throw new Error("SYLK shared formula cannot find base");F[g][v][1]=i8(O[1],{r:g-ue,c:v-de})}break;case"F":var V=0;for(I=1;I<_.length;++I)switch(_[I].charAt(0)){case"X":v=parseInt(_[I].slice(1))-1,++V;break;case"Y":for(g=parseInt(_[I].slice(1))-1,y=F.length;y<=g;++y)F[y]=[];break;case"M":k=parseInt(_[I].slice(1))/20;break;case"F":break;case"G":break;case"P":R=E[parseInt(_[I].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(x=_[I].slice(1).split(" "),y=parseInt(x[0],10);y<=parseInt(x[1],10);++y)k=parseInt(x[2],10),P[y-1]=k===0?{hidden:!0}:{wch:k},FA(P[y-1]);break;case"C":v=parseInt(_[I].slice(1))-1,P[v]||(P[v]={});break;case"R":g=parseInt(_[I].slice(1))-1,N[g]||(N[g]={}),k>0?(N[g].hpt=k,N[g].hpx=ff(k)):k===0&&(N[g].hidden=!0);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+S)}V<1&&(R=null);break;default:if(f&&f.WTF)throw new Error("SYLK bad record "+S)}}return N.length>0&&(L["!rows"]=N),P.length>0&&(L["!cols"]=P),f&&f.sheetRows&&(F=F.slice(0,f.sheetRows)),[F,L]}function s(h,f){var p=i(h,f),g=p[0],v=p[1],C=Df(g,f);return si(v).forEach(function(I){C[I]=v[I]}),C}function o(h,f){return zA(s(h,f),f)}function l(h,f,p,g){var v="C;Y"+(p+1)+";X"+(g+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+PB(h.f,{r:p,c:g}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function A(h,f){f.forEach(function(p,g){var v="F;W"+(g+1)+" "+(g+1)+" ";p.hidden?v+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=Z0(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=ep(p.wpx)),typeof p.wch=="number"&&(v+=Math.round(p.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function u(h,f){f.forEach(function(p,g){var v="F;";p.hidden?v+="M0;":p.hpt?v+="M"+20*p.hpt+";":p.hpx&&(v+="M"+20*tp(p.hpx)+";"),v.length>2&&h.push(v+"R"+(g+1))})}function d(h,f){var p=["ID;PWXL;N;E"],g=[],v=Yr(h["!ref"]),C,I=Array.isArray(h),F=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),h["!cols"]&&A(p,h["!cols"]),h["!rows"]&&u(p,h["!rows"]),p.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var E=v.s.r;E<=v.e.r;++E)for(var R=v.s.c;R<=v.e.c;++R){var L=Ar({r:E,c:R});C=I?(h[E]||[])[R]:h[L],!(!C||C.v==null&&(!C.f||C.F))&&g.push(l(C,h,E,R))}return p.join(F)+F+g.join(F)+F+"E"+F}return{to_workbook:o,to_sheet:s,from_sheet:d}}(),HO=function(){function t(a,s){switch(s.type){case"base64":return e(zs(a),s);case"binary":return e(a,s);case"buffer":return e(Br&&Buffer.isBuffer(a)?a.toString("binary"):jA(a),s);case"array":return e(td(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){for(var o=a.split(`
`),l=-1,A=-1,u=0,d=[];u!==o.length;++u){if(o[u].trim()==="BOT"){d[++l]=[],A=0;continue}if(!(l<0)){var h=o[u].trim().split(","),f=h[0],p=h[1];++u;for(var g=o[u]||"";(g.match(/["]/g)||[]).length&1&&u<o.length-1;)g+=`
`+o[++u];switch(g=g.trim(),+f){case-1:if(g==="BOT"){d[++l]=[],A=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?d[l][A]=!0:g==="FALSE"?d[l][A]=!1:isNaN(Ro(p))?isNaN(df(p).getDate())?d[l][A]=p:d[l][A]=Qn(p):d[l][A]=Ro(p),++A;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),d[l][A++]=g!==""?g:null;break}if(g==="EOD")break}}return s&&s.sheetRows&&(d=d.slice(0,s.sheetRows)),d}function r(a,s){return Df(t(a,s),s)}function n(a,s){return zA(r(a,s),s)}var i=function(){var a=function(l,A,u,d,h){l.push(A),l.push(u+","+d),l.push('"'+h.replace(/"/g,'""')+'"')},s=function(l,A,u,d){l.push(A+","+u),l.push(A==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var A=[],u=Yr(l["!ref"]),d,h=Array.isArray(l);a(A,"TABLE",0,1,"sheetjs"),a(A,"VECTORS",0,u.e.r-u.s.r+1,""),a(A,"TUPLES",0,u.e.c-u.s.c+1,""),a(A,"DATA",0,0,"");for(var f=u.s.r;f<=u.e.r;++f){s(A,-1,0,"BOT");for(var p=u.s.c;p<=u.e.c;++p){var g=Ar({r:f,c:p});if(d=h?(l[f]||[])[p]:l[g],!d){s(A,1,0,"");continue}switch(d.t){case"n":var v=d.w;!v&&d.v!=null&&(v=d.v),v==null?d.f&&!d.F?s(A,1,0,"="+d.f):s(A,1,0,""):s(A,0,v,"V");break;case"b":s(A,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":s(A,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=po(d.z||lr[14],Qi(Qn(d.v)))),s(A,0,d.w,"V");break;default:s(A,1,0,"")}}}s(A,-1,0,"EOD");var C=`\r
`,I=A.join(C);return I}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),VO=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,h){for(var f=d.split(`
`),p=-1,g=-1,v=0,C=[];v!==f.length;++v){var I=f[v].trim().split(":");if(I[0]==="cell"){var F=Yn(I[1]);if(C.length<=F.r)for(p=C.length;p<=F.r;++p)C[p]||(C[p]=[]);switch(p=F.r,g=F.c,I[2]){case"t":C[p][g]=t(I[3]);break;case"v":C[p][g]=+I[3];break;case"vtf":var E=I[I.length-1];case"vtc":switch(I[3]){case"nl":C[p][g]=!!+I[4];break;default:C[p][g]=+I[4];break}I[2]=="vtf"&&(C[p][g]=[C[p][g],E])}}}return h&&h.sheetRows&&(C=C.slice(0,h.sheetRows)),C}function n(d,h){return Df(r(d,h),h)}function i(d,h){return zA(n(d,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function A(d){if(!d||!d["!ref"])return"";for(var h=[],f=[],p,g="",v=fs(d["!ref"]),C=Array.isArray(d),I=v.s.r;I<=v.e.r;++I)for(var F=v.s.c;F<=v.e.c;++F)if(g=Ar({r:I,c:F}),p=C?(d[I]||[])[F]:d[g],!(!p||p.v==null||p.t==="z")){switch(f=["cell",g,"t"],p.t){case"s":case"str":f.push(e(p.v));break;case"n":p.f?(f[2]="vtf",f[3]="n",f[4]=p.v,f[5]=e(p.f)):(f[2]="v",f[3]=p.v);break;case"b":f[2]="vt"+(p.f?"f":"c"),f[3]="nl",f[4]=p.v?"1":"0",f[5]=e(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var E=Qi(Qn(p.v));f[2]="vtc",f[3]="nd",f[4]=""+E,f[5]=p.w||po(p.z||lr[14],E);break;case"e":continue}h.push(f.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(d){return[a,s,o,s,A(d),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:u}}(),hf=function(){function t(u,d,h,f,p){p.raw?d[h][f]=u:u===""||(u==="TRUE"?d[h][f]=!0:u==="FALSE"?d[h][f]=!1:isNaN(Ro(u))?isNaN(df(u).getDate())?d[h][f]=u:d[h][f]=Qn(u):d[h][f]=Ro(u))}function e(u,d){var h=d||{},f=[];if(!u||u.length===0)return f;for(var p=u.split(/[\r\n]/),g=p.length-1;g>=0&&p[g].length===0;)--g;for(var v=10,C=0,I=0;I<=g;++I)C=p[I].indexOf(" "),C==-1?C=p[I].length:C++,v=Math.max(v,C);for(I=0;I<=g;++I){f[I]=[];var F=0;for(t(p[I].slice(0,v).trim(),f,I,F,h),F=1;F<=(p[I].length-v)/10+1;++F)t(p[I].slice(v+(F-1)*10,v+F*10).trim(),f,I,F,h)}return h.sheetRows&&(f=f.slice(0,h.sheetRows)),f}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(u){for(var d={},h=!1,f=0,p=0;f<u.length;++f)(p=u.charCodeAt(f))==34?h=!h:!h&&p in r&&(d[p]=(d[p]||0)+1);p=[];for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&p.push([d[f],f]);if(!p.length){d=n;for(f in d)Object.prototype.hasOwnProperty.call(d,f)&&p.push([d[f],f])}return p.sort(function(g,v){return g[0]-v[0]||n[g[1]]-n[v[1]]}),r[p.pop()[1]]||44}function a(u,d){var h=d||{},f="",p=h.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(f=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(f=u.charAt(4),u=u.slice(6)):f=i(u.slice(0,1024)):h&&h.FS?f=h.FS:f=i(u.slice(0,1024));var v=0,C=0,I=0,F=0,E=0,R=f.charCodeAt(0),L=!1,N=0,P=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var x=h.dateNF!=null?woe(h.dateNF):null;function k(){var y=u.slice(F,E),S={};if(y.charAt(0)=='"'&&y.charAt(y.length-1)=='"'&&(y=y.slice(1,-1).replace(/""/g,'"')),y.length===0)S.t="z";else if(h.raw)S.t="s",S.v=y;else if(y.trim().length===0)S.t="s",S.v=y;else if(y.charCodeAt(0)==61)y.charCodeAt(1)==34&&y.charCodeAt(y.length-1)==34?(S.t="s",S.v=y.slice(2,-1).replace(/""/g,'"')):Gde(y)?(S.t="n",S.f=y.slice(1)):(S.t="s",S.v=y);else if(y=="TRUE")S.t="b",S.v=!0;else if(y=="FALSE")S.t="b",S.v=!1;else if(!isNaN(I=Ro(y)))S.t="n",h.cellText!==!1&&(S.w=y),S.v=I;else if(!isNaN(df(y).getDate())||x&&y.match(x)){S.z=h.dateNF||lr[14];var _=0;x&&y.match(x)&&(y=boe(y,h.dateNF,y.match(x)||[]),_=1),h.cellDates?(S.t="d",S.v=Qn(y,_)):(S.t="n",S.v=Qi(Qn(y,_))),h.cellText!==!1&&(S.w=po(S.z,S.v instanceof Date?Qi(S.v):S.v)),h.cellNF||delete S.z}else S.t="s",S.v=y;if(S.t=="z"||(h.dense?(p[v]||(p[v]=[]),p[v][C]=S):p[Ar({c:C,r:v})]=S),F=E+1,P=u.charCodeAt(F),g.e.c<C&&(g.e.c=C),g.e.r<v&&(g.e.r=v),N==R)++C;else if(C=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;E<u.length;++E)switch(N=u.charCodeAt(E)){case 34:P===34&&(L=!L);break;case R:case 10:case 13:if(!L&&k())break e;break}return E-F>0&&k(),p["!ref"]=wr(g),p}function s(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?a(u,d):Df(e(u,d),d)}function o(u,d){var h="",f=d.type=="string"?[0,0,0,0]:HB(u,d);switch(d.type){case"base64":h=zs(u);break;case"binary":h=u;break;case"buffer":d.codepage==65001?h=u.toString("utf8"):d.codepage&&typeof Zc<"u"?h=Zc.utils.decode(d.codepage,u):h=Br&&Buffer.isBuffer(u)?u.toString("binary"):jA(u);break;case"array":h=td(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+d.type)}return f[0]==239&&f[1]==187&&f[2]==191?h=bn(h.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?h=bn(h):d.type=="binary"&&typeof Zc<"u"&&d.codepage&&(h=Zc.utils.decode(d.codepage,Zc.utils.encode(28591,h))),h.slice(0,19)=="socialcalc:version:"?VO.to_sheet(d.type=="string"?h:bn(h),d):s(h,d)}function l(u,d){return zA(o(u,d),d)}function A(u){for(var d=[],h=Yr(u["!ref"]),f,p=Array.isArray(u),g=h.s.r;g<=h.e.r;++g){for(var v=[],C=h.s.c;C<=h.e.c;++C){var I=Ar({r:g,c:C});if(f=p?(u[g]||[])[C]:u[I],!f||f.v==null){v.push("          ");continue}for(var F=(f.w||(uc(f),f.w)||"").slice(0,10);F.length<10;)F+=" ";v.push(F+(C===0?" ":""))}d.push(v.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:A}}();function PAe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var i=QO.to_workbook(t,r);return r.WTF=n,i}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return hf.to_workbook(t,e)}}var Lu=function(){function t(T,O,V){if(T){oa(T,T.l||0);for(var Q=V.Enum||ue;T.l<T.length;){var X=T.read_shift(2),ie=Q[X]||Q[65535],ee=T.read_shift(2),Z=T.l+ee,re=ie.f&&ie.f(T,ee,V);if(T.l=Z,O(re,ie,X))return}}}function e(T,O){switch(O.type){case"base64":return r(Us(zs(T)),O);case"binary":return r(Us(T),O);case"buffer":case"array":return r(T,O)}throw"Unsupported type "+O.type}function r(T,O){if(!T)return T;var V=O||{},Q=V.dense?[]:{},X="Sheet1",ie="",ee=0,Z={},re=[],ce=[],Y={s:{r:0,c:0},e:{r:0,c:0}},ge=V.sheetRows||0;if(T[2]==0&&(T[3]==8||T[3]==9)&&T.length>=16&&T[14]==5&&T[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(T[2]==2)V.Enum=ue,t(T,function(ye,Ue,Me){switch(Me){case 0:V.vers=ye,ye>=4096&&(V.qpro=!0);break;case 6:Y=ye;break;case 204:ye&&(ie=ye);break;case 222:ie=ye;break;case 15:case 51:V.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:Me==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=V.dateNF||lr[14],V.cellDates&&(ye[1].t="d",ye[1].v=nb(ye[1].v))),V.qpro&&ye[3]>ee&&(Q["!ref"]=wr(Y),Z[X]=Q,re.push(X),Q=V.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},ee=ye[3],X=ie||"Sheet"+(ee+1),ie="");var $e=V.dense?(Q[ye[0].r]||[])[ye[0].c]:Q[Ar(ye[0])];if($e){$e.t=ye[1].t,$e.v=ye[1].v,ye[1].z!=null&&($e.z=ye[1].z),ye[1].f!=null&&($e.f=ye[1].f);break}V.dense?(Q[ye[0].r]||(Q[ye[0].r]=[]),Q[ye[0].r][ye[0].c]=ye[1]):Q[Ar(ye[0])]=ye[1];break}},V);else if(T[2]==26||T[2]==14)V.Enum=de,T[2]==14&&(V.qpro=!0,T.l=0),t(T,function(ye,Ue,Me){switch(Me){case 204:X=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>ee&&(Q["!ref"]=wr(Y),Z[X]=Q,re.push(X),Q=V.dense?[]:{},Y={s:{r:0,c:0},e:{r:0,c:0}},ee=ye[3],X="Sheet"+(ee+1)),ge>0&&ye[0].r>=ge)break;V.dense?(Q[ye[0].r]||(Q[ye[0].r]=[]),Q[ye[0].r][ye[0].c]=ye[1]):Q[Ar(ye[0])]=ye[1],Y.e.c<ye[0].c&&(Y.e.c=ye[0].c),Y.e.r<ye[0].r&&(Y.e.r=ye[0].r);break;case 27:ye[14e3]&&(ce[ye[14e3][0]]=ye[14e3][1]);break;case 1537:ce[ye[0]]=ye[1],ye[0]==ee&&(X=ye[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+T[2]);if(Q["!ref"]=wr(Y),Z[ie||X]=Q,re.push(ie||X),!ce.length)return{SheetNames:re,Sheets:Z};for(var q={},W=[],xe=0;xe<ce.length;++xe)Z[re[xe]]?(W.push(ce[xe]||re[xe]),q[ce[xe]]=Z[ce[xe]]||Z[re[xe]]):(W.push(ce[xe]),q[ce[xe]]={"!ref":"A1"});return{SheetNames:W,Sheets:q}}function n(T,O){var V=O||{};if(+V.codepage>=0&&Po(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=hs(),X=Yr(T["!ref"]),ie=Array.isArray(T),ee=[];Pt(Q,0,a(1030)),Pt(Q,6,l(X));for(var Z=Math.min(X.e.r,8191),re=X.s.r;re<=Z;++re)for(var ce=yi(re),Y=X.s.c;Y<=X.e.c;++Y){re===X.s.r&&(ee[Y]=Xn(Y));var ge=ee[Y]+ce,q=ie?(T[re]||[])[Y]:T[ge];if(!(!q||q.t=="z"))if(q.t=="n")(q.v|0)==q.v&&q.v>=-32768&&q.v<=32767?Pt(Q,13,f(re,Y,q.v)):Pt(Q,14,g(re,Y,q.v));else{var W=uc(q);Pt(Q,15,d(re,Y,W.slice(0,239)))}}return Pt(Q,1),Q.end()}function i(T,O){var V=O||{};if(+V.codepage>=0&&Po(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=hs();Pt(Q,0,s(T));for(var X=0,ie=0;X<T.SheetNames.length;++X)(T.Sheets[T.SheetNames[X]]||{})["!ref"]&&Pt(Q,27,G(T.SheetNames[X],ie++));var ee=0;for(X=0;X<T.SheetNames.length;++X){var Z=T.Sheets[T.SheetNames[X]];if(!(!Z||!Z["!ref"])){for(var re=Yr(Z["!ref"]),ce=Array.isArray(Z),Y=[],ge=Math.min(re.e.r,8191),q=re.s.r;q<=ge;++q)for(var W=yi(q),xe=re.s.c;xe<=re.e.c;++xe){q===re.s.r&&(Y[xe]=Xn(xe));var ye=Y[xe]+W,Ue=ce?(Z[q]||[])[xe]:Z[ye];if(!(!Ue||Ue.t=="z"))if(Ue.t=="n")Pt(Q,23,k(q,xe,ee,Ue.v));else{var Me=uc(Ue);Pt(Q,22,N(q,xe,ee,Me.slice(0,239)))}}++ee}}return Pt(Q,1),Q.end()}function a(T){var O=At(2);return O.write_shift(2,T),O}function s(T){var O=At(26);O.write_shift(2,4096),O.write_shift(2,4),O.write_shift(4,0);for(var V=0,Q=0,X=0,ie=0;ie<T.SheetNames.length;++ie){var ee=T.SheetNames[ie],Z=T.Sheets[ee];if(!(!Z||!Z["!ref"])){++X;var re=fs(Z["!ref"]);V<re.e.r&&(V=re.e.r),Q<re.e.c&&(Q=re.e.c)}}return V>8191&&(V=8191),O.write_shift(2,V),O.write_shift(1,X),O.write_shift(1,Q),O.write_shift(2,0),O.write_shift(2,0),O.write_shift(1,1),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(4,0),O}function o(T,O,V){var Q={s:{c:0,r:0},e:{c:0,r:0}};return O==8&&V.qpro?(Q.s.c=T.read_shift(1),T.l++,Q.s.r=T.read_shift(2),Q.e.c=T.read_shift(1),T.l++,Q.e.r=T.read_shift(2),Q):(Q.s.c=T.read_shift(2),Q.s.r=T.read_shift(2),O==12&&V.qpro&&(T.l+=2),Q.e.c=T.read_shift(2),Q.e.r=T.read_shift(2),O==12&&V.qpro&&(T.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function l(T){var O=At(8);return O.write_shift(2,T.s.c),O.write_shift(2,T.s.r),O.write_shift(2,T.e.c),O.write_shift(2,T.e.r),O}function A(T,O,V){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(Q[0].c=T.read_shift(1),Q[3]=T.read_shift(1),Q[0].r=T.read_shift(2),T.l+=2):(Q[2]=T.read_shift(1),Q[0].c=T.read_shift(2),Q[0].r=T.read_shift(2)),Q}function u(T,O,V){var Q=T.l+O,X=A(T,O,V);if(X[1].t="s",V.vers==20768){T.l++;var ie=T.read_shift(1);return X[1].v=T.read_shift(ie,"utf8"),X}return V.qpro&&T.l++,X[1].v=T.read_shift(Q-T.l,"cstr"),X}function d(T,O,V){var Q=At(7+V.length);Q.write_shift(1,255),Q.write_shift(2,O),Q.write_shift(2,T),Q.write_shift(1,39);for(var X=0;X<Q.length;++X){var ie=V.charCodeAt(X);Q.write_shift(1,ie>=128?95:ie)}return Q.write_shift(1,0),Q}function h(T,O,V){var Q=A(T,O,V);return Q[1].v=T.read_shift(2,"i"),Q}function f(T,O,V){var Q=At(7);return Q.write_shift(1,255),Q.write_shift(2,O),Q.write_shift(2,T),Q.write_shift(2,V,"i"),Q}function p(T,O,V){var Q=A(T,O,V);return Q[1].v=T.read_shift(8,"f"),Q}function g(T,O,V){var Q=At(13);return Q.write_shift(1,255),Q.write_shift(2,O),Q.write_shift(2,T),Q.write_shift(8,V,"f"),Q}function v(T,O,V){var Q=T.l+O,X=A(T,O,V);if(X[1].v=T.read_shift(8,"f"),V.qpro)T.l=Q;else{var ie=T.read_shift(2);E(T.slice(T.l,T.l+ie),X),T.l+=ie}return X}function C(T,O,V){var Q=O&32768;return O&=-32769,O=(Q?T:0)+(O>=8192?O-16384:O),(Q?"":"$")+(V?Xn(O):yi(O))}var I={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},F=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function E(T,O){oa(T,0);for(var V=[],Q=0,X="",ie="",ee="",Z="";T.l<T.length;){var re=T[T.l++];switch(re){case 0:V.push(T.read_shift(8,"f"));break;case 1:ie=C(O[0].c,T.read_shift(2),!0),X=C(O[0].r,T.read_shift(2),!1),V.push(ie+X);break;case 2:{var ce=C(O[0].c,T.read_shift(2),!0),Y=C(O[0].r,T.read_shift(2),!1);ie=C(O[0].c,T.read_shift(2),!0),X=C(O[0].r,T.read_shift(2),!1),V.push(ce+Y+":"+ie+X)}break;case 3:if(T.l<T.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(T.read_shift(2));break;case 6:{for(var ge="";re=T[T.l++];)ge+=String.fromCharCode(re);V.push('"'+ge.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:Z=V.pop(),ee=V.pop(),V.push(["AND","OR"][re-20]+"("+ee+","+Z+")");break;default:if(re<32&&F[re])Z=V.pop(),ee=V.pop(),V.push(ee+F[re]+Z);else if(I[re]){if(Q=I[re][1],Q==69&&(Q=T[T.l++]),Q>V.length){console.error("WK1 bad formula parse 0x"+re.toString(16)+":|"+V.join("|")+"|");return}var q=V.slice(-Q);V.length-=Q,V.push(I[re][0]+"("+q.join(",")+")")}else return re<=7?console.error("WK1 invalid opcode "+re.toString(16)):re<=24?console.error("WK1 unsupported op "+re.toString(16)):re<=30?console.error("WK1 invalid opcode "+re.toString(16)):re<=115?console.error("WK1 unsupported function opcode "+re.toString(16)):console.error("WK1 unrecognized opcode "+re.toString(16))}}V.length==1?O[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function R(T){var O=[{c:0,r:0},{t:"n",v:0},0];return O[0].r=T.read_shift(2),O[3]=T[T.l++],O[0].c=T[T.l++],O}function L(T,O){var V=R(T);return V[1].t="s",V[1].v=T.read_shift(O-4,"cstr"),V}function N(T,O,V,Q){var X=At(6+Q.length);X.write_shift(2,T),X.write_shift(1,V),X.write_shift(1,O),X.write_shift(1,39);for(var ie=0;ie<Q.length;++ie){var ee=Q.charCodeAt(ie);X.write_shift(1,ee>=128?95:ee)}return X.write_shift(1,0),X}function P(T,O){var V=R(T);V[1].v=T.read_shift(2);var Q=V[1].v>>1;if(V[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return V[1].v=Q,V}function x(T,O){var V=R(T),Q=T.read_shift(4),X=T.read_shift(4),ie=T.read_shift(2);if(ie==65535)return Q===0&&X===3221225472?(V[1].t="e",V[1].v=15):Q===0&&X===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var ee=ie&32768;return ie=(ie&32767)-16446,V[1].v=(1-ee*2)*(X*Math.pow(2,ie+32)+Q*Math.pow(2,ie)),V}function k(T,O,V,Q){var X=At(14);if(X.write_shift(2,T),X.write_shift(1,V),X.write_shift(1,O),Q==0)return X.write_shift(4,0),X.write_shift(4,0),X.write_shift(2,65535),X;var ie=0,ee=0,Z=0,re=0;return Q<0&&(ie=1,Q=-Q),ee=Math.log2(Q)|0,Q/=Math.pow(2,ee-31),re=Q>>>0,re&2147483648||(Q/=2,++ee,re=Q>>>0),Q-=re,re|=2147483648,re>>>=0,Q*=Math.pow(2,32),Z=Q>>>0,X.write_shift(4,Z),X.write_shift(4,re),ee+=16383+(ie?32768:0),X.write_shift(2,ee),X}function y(T,O){var V=x(T);return T.l+=O-14,V}function S(T,O){var V=R(T),Q=T.read_shift(4);return V[1].v=Q>>6,V}function _(T,O){var V=R(T),Q=T.read_shift(8,"f");return V[1].v=Q,V}function M(T,O){var V=_(T);return T.l+=O-10,V}function K(T,O){return T[T.l+O-1]==0?T.read_shift(O,"cstr"):""}function z(T,O){var V=T[T.l++];V>O-1&&(V=O-1);for(var Q="";Q.length<V;)Q+=String.fromCharCode(T[T.l++]);return Q}function ae(T,O,V){if(!(!V.qpro||O<21)){var Q=T.read_shift(1);T.l+=17,T.l+=1,T.l+=2;var X=T.read_shift(O-21,"cstr");return[Q,X]}}function te(T,O){for(var V={},Q=T.l+O;T.l<Q;){var X=T.read_shift(2);if(X==14e3){for(V[X]=[0,""],V[X][0]=T.read_shift(2);T[T.l];)V[X][1]+=String.fromCharCode(T[T.l]),T.l++;T.l++}}return V}function G(T,O){var V=At(5+T.length);V.write_shift(2,14e3),V.write_shift(2,O);for(var Q=0;Q<T.length;++Q){var X=T.charCodeAt(Q);V[V.l++]=X>127?95:X}return V[V.l++]=0,V}var ue={0:{n:"BOF",f:Ni},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:z},65535:{n:""}},de={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:L},23:{n:"NUMBER17",f:x},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:y},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:te},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:_},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ae},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}();function LAe(t){var e={},r=t.match(Ia),n=0,i=!1;if(r)for(;n!=r.length;++n){var a=hr(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=iB[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+a[0])}}return e}var DAe=function(){var t=W0("t"),e=W0("rPr");function r(a){var s=a.match(t);if(!s)return{t:"s",v:""};var o={t:"s",v:Xr(s[1])},l=a.match(e);return l&&(o.s=LAe(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(s){return s.replace(n,"").split(i).map(r).filter(function(o){return o.v})}}(),RAe=function(){var e=/(\r\n|\n)/g;function r(i,a,s){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),i.b&&(a.push("<b>"),s.push("</b>")),i.i&&(a.push("<i>"),s.push("</i>")),i.strike&&(a.push("<s>"),s.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),s.push("</"+l+">")),s.push("</span>"),i}function n(i){var a=[[],i.v,[]];return i.v?(i.s&&r(i.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),UAe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,OAe=/<(?:\w+:)?r>/,MAe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function SB(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Xr(bn(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=bn(t),r&&(n.h=fB(n.t))):t.match(OAe)&&(n.r=bn(t),n.t=Xr(bn((t.replace(MAe,"").match(UAe)||[]).join("").replace(Ia,""))),r&&(n.h=RAe(DAe(n.r)))),n):{t:""}}var QAe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,HAe=/<(?:\w+:)?(?:si|sstItem)>/g,VAe=/<\/(?:\w+:)?(?:si|sstItem)>/;function KAe(t,e){var r=[],n="";if(!t)return r;var i=t.match(QAe);if(i){n=i[2].replace(HAe,"").split(VAe);for(var a=0;a!=n.length;++a){var s=SB(n[a].trim(),e);s!=null&&(r[r.length]=s)}i=hr(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}var jAe=/^\s|\s$|[\t\n\r]/;function KO(t,e){if(!e.bookSST)return"";var r=[xi];r[r.length]=Ft("sst",null,{xmlns:wd[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var i=t[n],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(jAe)&&(a+=' xml:space="preserve"'),a+=">"+mn(i.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function zAe(t){return[t.read_shift(4),t.read_shift(4)]}function $Ae(t,e){var r=[],n=!1;return vc(t,function(a,s,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function GAe(t,e){return e||(e=At(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var WAe=ile;function qAe(t){var e=hs();bt(e,159,GAe(t));for(var r=0;r<t.length;++r)bt(e,19,WAe(t[r]));return bt(e,160),e.end()}function jO(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function nc(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function XAe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=nc(t,4),e.U=nc(t,4),e.W=nc(t,4),e}function YAe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},i=t.read_shift(4),a=[];i-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=a,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function JAe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(YAe(t));return e}function ZAe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function eue(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=nc(t,4),e.U=nc(t,4),e.W=nc(t,4),e}function tue(t){var e=eue(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function zO(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function $O(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function rue(t){var e=nc(t);switch(e.Minor){case 2:return[e.Minor,nue(t)];case 3:return[e.Minor,iue()];case 4:return[e.Minor,aue(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function nue(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=zO(t,r),i=$O(t,t.length-t.l);return{t:"Std",h:n,v:i}}function iue(){throw new Error("File is password-protected: ECMA-376 Extensible")}function aue(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Ia,function(a){var s=hr(a);switch(kl(s[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=s[o]});break;case"<dataIntegrity":n.encryptedHmacKey=s.encryptedHmacKey,n.encryptedHmacValue=s.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=s.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(s);break;default:throw s[0]}}),n}function sue(t,e){var r={},n=r.EncryptionVersionInfo=nc(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var i=t.read_shift(4);return e-=4,r.EncryptionHeader=zO(t,i),e-=i,r.EncryptionVerifier=$O(t,e),r}function oue(t){var e={},r=e.EncryptionVersionInfo=nc(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function kB(t){var e=0,r,n=jO(t),i=n.length+1,a,s,o,l,A;for(r=IA(i),r[0]=n.length,a=1;a!=i;++a)r[a]=n[a-1];for(a=i-1;a>=0;--a)s=r[a],o=e&16384?1:0,l=e<<1&32767,A=o|l,e=A^s;return e^52811}var GO=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(s){return(s/2|s*128)&255},i=function(s,o){return n(s^o)},a=function(s){for(var o=e[s.length-1],l=104,A=s.length-1;A>=0;--A)for(var u=s[A],d=0;d!=7;++d)u&64&&(o^=r[l]),u*=2,--l;return o};return function(s){for(var o=jO(s),l=a(o),A=o.length,u=IA(16),d=0;d!=16;++d)u[d]=0;var h,f,p;for((A&1)===1&&(h=l>>8,u[A]=i(t[0],h),--A,h=l&255,f=o[o.length-1],u[A]=i(f,h));A>0;)--A,h=l>>8,u[A]=i(o[A],h),--A,h=l&255,u[A]=i(o[A],h);for(A=15,p=15-o.length;p>0;)h=l>>8,u[A]=i(t[p],h),--A,--p,h=l&255,u[A]=i(o[A],h),--A,--p;return u}}(),lue=function(t,e,r,n,i){i||(i=e),n||(n=GO(t));var a,s;for(a=0;a!=e.length;++a)s=e[a],s^=n[r],s=(s>>5|s<<3)&255,i[a]=s,++r;return[i,r,n]},cue=function(t){var e=0,r=GO(t);return function(n){var i=lue("",n,e,r);return e=i[1],i[0]}};function Aue(t,e,r,n){var i={key:Ni(t),verificationBytes:Ni(t)};return r.password&&(i.verifier=kB(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=cue(r.password)),i}function uue(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=oue(t):n.Data=sue(t,e),n}function due(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?uue(t,e-2,n):Aue(t,r.biff>=8?e:e-2,r,n),n}var WO=function(){function t(i,a){switch(a.type){case"base64":return e(zs(i),a);case"binary":return e(i,a);case"buffer":return e(Br&&Buffer.isBuffer(i)?i.toString("binary"):jA(i),a);case"array":return e(td(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){var s=a||{},o=s.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var A={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,d){Array.isArray(o)&&(o[d]=[]);for(var h=/\\\w+\b/g,f=0,p,g=-1;p=h.exec(u);){switch(p[0]){case"\\cell":var v=u.slice(f,h.lastIndex-p[0].length);if(v[0]==" "&&(v=v.slice(1)),++g,v.length){var C={v,t:"s"};Array.isArray(o)?o[d][g]=C:o[Ar({r:d,c:g})]=C}break}f=h.lastIndex}g>A.e.c&&(A.e.c=g)}),o["!ref"]=wr(A),o}function r(i,a){return zA(t(i,a),a)}function n(i){for(var a=["{\\rtf1\\ansi"],s=Yr(i["!ref"]),o,l=Array.isArray(i),A=s.s.r;A<=s.e.r;++A){a.push("\\trowd\\trautofit1");for(var u=s.s.c;u<=s.e.c;++u)a.push("\\cellx"+(u+1));for(a.push("\\pard\\intbl"),u=s.s.c;u<=s.e.c;++u){var d=Ar({r:A,c:u});o=l?(i[A]||[])[u]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(uc(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function hue(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function J0(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function fue(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(e,r,n),a=Math.min(e,r,n),s=i-a;if(s===0)return[0,0,e];var o=0,l=0,A=i+a;switch(l=s/(A>1?2-A:A),i){case e:o=((r-n)/s+6)%6;break;case r:o=(n-e)/s+2;break;case n:o=(e-r)/s+4;break}return[o/6,l,A/2]}function mue(t){var e=t[0],r=t[1],n=t[2],i=r*2*(n<.5?n:1-n),a=n-i/2,s=[a,a,a],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=i*o,s[0]+=i,s[1]+=l;break;case 1:l=i*(2-o),s[0]+=l,s[1]+=i;break;case 2:l=i*(o-2),s[1]+=i,s[2]+=l;break;case 3:l=i*(4-o),s[1]+=l,s[2]+=i;break;case 4:l=i*(o-4),s[2]+=i,s[0]+=l;break;case 5:l=i*(6-o),s[2]+=l,s[0]+=i;break}for(var A=0;A!=3;++A)s[A]=Math.round(s[A]*255);return s}function zv(t,e){if(e===0)return t;var r=fue(hue(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),J0(mue(r))}var qO=6,pue=15,gue=1,Ea=qO;function Z0(t){return Math.floor((t+Math.round(128/Ea)/256)*Ea)}function ep(t){return Math.floor((t-5)/Ea*100+.5)/100}function $v(t){return Math.round((t*Ea+5)/Ea*256)/256}function Jy(t){return $v(ep(Z0(t)))}function TB(t){var e=Math.abs(t-Jy(t)),r=Ea;if(e>.005)for(Ea=gue;Ea<pue;++Ea)Math.abs(t-Jy(t))<=e&&(e=Math.abs(t-Jy(t)),r=Ea);Ea=r}function FA(t){t.width?(t.wpx=Z0(t.width),t.wch=ep(t.wpx),t.MDW=Ea):t.wpx?(t.wch=ep(t.wpx),t.width=$v(t.wch),t.MDW=Ea):typeof t.wch=="number"&&(t.width=$v(t.wch),t.wpx=Z0(t.width),t.MDW=Ea),t.customWidth&&delete t.customWidth}var vue=96,XO=vue;function tp(t){return t*96/XO}function ff(t){return t*XO/96}var wue={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function bue(t,e,r,n){e.Borders=[];var i={},a=!1;(t[0].match(Ia)||[]).forEach(function(s){var o=hr(s);switch(kl(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=Rn(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=Rn(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function yue(t,e,r,n){e.Fills=[];var i={},a=!1;(t[0].match(Ia)||[]).forEach(function(s){var o=hr(s);switch(kl(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function xue(t,e,r,n){e.Fonts=[];var i={},a=!1;(t[0].match(Ia)||[]).forEach(function(s){var o=hr(s);switch(kl(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=bn(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?Rn(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?Rn(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?Rn(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?Rn(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?Rn(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?Rn(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?Rn(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=iB[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=Rn(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=Fu[i.color.index];i.color.index==81&&(l=Fu[1]),l||(l=Fu[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=zv(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function _ue(t,e,r){e.NumberFmt=[];for(var n=si(lr),i=0;i<n.length;++i)e.NumberFmt[n[i]]=lr[n[i]];var a=t[0].match(Ia);if(a)for(i=0;i<a.length;++i){var s=hr(a[i]);switch(kl(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Xr(bn(s.formatCode)),l=parseInt(s.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}rc(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}function Eue(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Ft("numFmt",null,{numFmtId:n,formatCode:mn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ft("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var s1=["numFmtId","fillId","fontId","borderId","xfId"],o1=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Bue(t,e,r){e.CellXf=[];var n,i=!1;(t[0].match(Ia)||[]).forEach(function(a){var s=hr(a),o=0;switch(kl(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=s,delete n[0],o=0;o<s1.length;++o)n[s1[o]]&&(n[s1[o]]=parseInt(n[s1[o]],10));for(o=0;o<o1.length;++o)n[o1[o]]&&(n[o1[o]]=Rn(n[o1[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};s.vertical&&(l.vertical=s.vertical),s.horizontal&&(l.horizontal=s.horizontal),s.textRotation!=null&&(l.textRotation=s.textRotation),s.indent&&(l.indent=s.indent),s.wrapText&&(l.wrapText=Rn(s.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}function Cue(t){var e=[];return e[e.length]=Ft("cellXfs",null),t.forEach(function(r){e[e.length]=Ft("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ft("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Nue=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,A){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=o.match(e))&&_ue(d,u,A),(d=o.match(i))&&xue(d,u,l,A),(d=o.match(n))&&yue(d,u,l,A),(d=o.match(a))&&bue(d,u,l,A),(d=o.match(r))&&Bue(d,u,A),u}}();function YO(t,e){var r=[xi,Ft("styleSheet",null,{xmlns:wd[0],"xmlns:vt":Ui.vt})],n;return t.SSF&&(n=Eue(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Cue(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Sue(t,e){var r=t.read_shift(2),n=ka(t);return[r,n]}function kue(t,e,r){r||(r=At(6+4*e.length)),r.write_shift(2,t),qi(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Tue(t,e,r){var n={};n.sz=t.read_shift(2)/20;var i=ule(t);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var a=t.read_shift(2);switch(a===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=t.read_shift(1);s!=0&&(n.underline=s);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=Ale(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ka(t),n}function Iue(t,e){e||(e=At(25+4*32)),e.write_shift(2,t.sz*20),dle(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Vv(t.color,e);var n=0;return t.scheme=="major"&&(n=1),t.scheme=="minor"&&(n=2),e.write_shift(1,n),qi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Fue=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Zy,Pue=Ta;function $4(t,e){e||(e=At(4*3+8*7+16*1)),Zy||(Zy=tb(Fue));var r=Zy[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Vv({auto:1},e),Vv({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Lue(t,e){var r=t.l+e,n=t.read_shift(2),i=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:i}}function JO(t,e,r){r||(r=At(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function vm(t,e){return e||(e=At(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Due=Ta;function Rue(t,e){return e||(e=At(51)),e.write_shift(1,0),vm(null,e),vm(null,e),vm(null,e),vm(null,e),vm(null,e),e.length>e.l?e.slice(0,e.l):e}function Uue(t,e){return e||(e=At(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,+t.builtinId),e.write_shift(1,0),Hv(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Oue(t,e,r){var n=At(2052);return n.write_shift(4,t),Hv(e,n),Hv(r,n),n.length>n.l?n.slice(0,n.l):n}function Mue(t,e,r){var n={};n.NumberFmt=[];for(var i in lr)n.NumberFmt[i]=lr[i];n.CellXf=[],n.Fonts=[];var a=[],s=!1;return vc(t,function(l,A,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],rc(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=zv(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:a.push(u),s=!0;break;case 38:a.pop(),s=!1;break;default:if(A.T>0)a.push(u);else if(A.T<0)a.pop();else if(!s||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}function Que(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++r}),r!=0&&(bt(t,615,Uo(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&bt(t,44,kue(i,e[i]))}),bt(t,616))}}function Hue(t){var e=1;bt(t,611,Uo(e)),bt(t,43,Iue({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),bt(t,612)}function Vue(t){var e=2;bt(t,603,Uo(e)),bt(t,45,$4({patternType:"none"})),bt(t,45,$4({patternType:"gray125"})),bt(t,604)}function Kue(t){var e=1;bt(t,613,Uo(e)),bt(t,46,Rue()),bt(t,614)}function jue(t){var e=1;bt(t,626,Uo(e)),bt(t,47,JO({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),bt(t,627)}function zue(t,e){bt(t,617,Uo(e.length)),e.forEach(function(r){bt(t,47,JO(r,0))}),bt(t,618)}function $ue(t){var e=1;bt(t,619,Uo(e)),bt(t,48,Uue({xfId:0,builtinId:0,name:"Normal"})),bt(t,620)}function Gue(t){var e=0;bt(t,505,Uo(e)),bt(t,506)}function Wue(t){var e=0;bt(t,508,Oue(e,"TableStyleMedium9","PivotStyleMedium4")),bt(t,509)}function que(t,e){var r=hs();return bt(r,278),Que(r,t.SSF),Hue(r),Vue(r),Kue(r),jue(r),zue(r,e.cellXfs),$ue(r),Gue(r),Wue(r),bt(r,279),r.end()}var Xue=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Yue(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Ia)||[]).forEach(function(i){var a=hr(i);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[Xue.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function Jue(){}function Zue(){}var ede=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,tde=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,rde=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function nde(t,e,r){e.themeElements={};var n;[["clrScheme",ede,Yue],["fontScheme",tde,Jue],["fmtScheme",rde,Zue]].forEach(function(i){if(!(n=t.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,e,r)})}var ide=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function ZO(t,e){(!t||t.length===0)&&(t=IB());var r,n={};if(!(r=t.match(ide)))throw new Error("themeElements not found in theme");return nde(r[0],n,e),n.raw=t,n}function IB(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[xi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function ade(t,e,r){var n=t.l+e,i=t.read_shift(4);if(i!==124226){if(!r.cellStyles){t.l=n;return}var a=t.slice(t.l);t.l=n;var s;try{s=z6(a,{type:"array"})}catch{return}var o=Os(s,"theme/theme/theme1.xml",!0);if(o)return ZO(o,r)}}function sde(t){return t.read_shift(4)}function ode(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=lde(t,4);break;case 2:e.xclrValue=FO(t);break;case 3:e.xclrValue=sde(t);break;case 4:t.l+=4;break}return t.l+=8,e}function lde(t,e){return Ta(t,e)}function cde(t,e){return Ta(t,e)}function Ade(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=ode(t);break;case 6:n[1]=cde(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function ude(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var i=t.read_shift(2),a=[];i-- >0;)a.push(Ade(t,r-t.l));return{ixfe:n,ext:a}}function dde(t,e){e.forEach(function(r){switch(r[0]){}})}function hde(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ka(t)}}function fde(t){var e=At(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),qi(t.name,e),e.slice(0,e.l)}function mde(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function pde(t){var e=At(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function gde(t,e){var r=At(8+2*e.length);return r.write_shift(4,t),qi(e,r),r.slice(0,r.l)}function vde(t){return t.l+=4,t.read_shift(4)!=0}function wde(t,e){var r=At(8);return r.write_shift(4,t),r.write_shift(4,e?1:0),r}function bde(t,e,r){var n={Types:[],Cell:[],Value:[]},i=r||{},a=[],s=!1,o=2;return vc(t,function(l,A,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(d){o==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):o==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(u),s=!0;break;case 36:a.pop(),s=!1;break;default:if(!A.T){if(!s||i.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function yde(){var t=hs();return bt(t,332),bt(t,334,Uo(1)),bt(t,335,fde({name:"XLDAPR",version:12e4,flags:3496657072})),bt(t,336),bt(t,339,gde(1,"XLDAPR")),bt(t,52),bt(t,35,Uo(514)),bt(t,4096,Uo(0)),bt(t,4097,ao(1)),bt(t,36),bt(t,53),bt(t,340),bt(t,337,wde(1,!0)),bt(t,51,pde([[1,0]])),bt(t,338),bt(t,333),t.end()}function xde(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var i=!1,a=2,s;return t.replace(Ia,function(o){var l=hr(o);switch(kl(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<n.Types.length;++A)n.Types[A].name==l.name&&(s=n.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+l.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function e8(){var t=[xi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function _de(t){var e=[];if(!t)return e;var r=1;return(t.match(Ia)||[]).forEach(function(n){var i=hr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,e.push(i);break}}),e}function Ede(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Ar(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function Bde(t,e,r){var n=[];return vc(t,function(a,s,o){switch(o){case 63:n.push(a);break;default:if(!s.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Cde(t,e,r,n){if(!t)return t;var i=n||{},a=!1;vc(t,function(o,l,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||i.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},i)}function Nde(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var yh=1024;function t8(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[Ft("xml",null,{"xmlns:v":Ps.v,"xmlns:o":Ps.o,"xmlns:x":Ps.x,"xmlns:mv":Ps.mv}).replace(/\/>/,">"),Ft("o:shapelayout",Ft("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ft("v:shapetype",[Ft("v:stroke",null,{joinstyle:"miter"}),Ft("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];yh<t*1e3;)yh+=1e3;return e.forEach(function(a){var s=Yn(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ft("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,A=Ft("v:fill",l,o),u={on:"t",obscured:"t"};++yh,i=i.concat(["<v:shape"+q0({id:"_x0000_s"+yh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",A,Ft("v:shadow",null,u),Ft("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ca("x:Anchor",[s.c+1,0,s.r+1,0,s.c+3,20,s.r+5,20].join(",")),ca("x:AutoFill","False"),ca("x:Row",String(s.r)),ca("x:Column",String(s.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function G4(t,e,r,n){var i=Array.isArray(t),a;e.forEach(function(s){var o=Yn(s.ref);if(i?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[s.ref],!a){a={t:"z"},i?t[o.r][o.c]=a:t[s.ref]=a;var l=Yr(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var A=wr(l);A!==t["!ref"]&&(t["!ref"]=A)}a.c||(a.c=[]);var u={a:s.author,t:s.t,r:s.r,T:r};s.h&&(u.h=s.h);for(var d=a.c.length-1;d>=0;--d){if(!r&&a.c[d].T)return;r&&!a.c[d].T&&a.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(u.a==n[d].id){u.a=n[d].name||u.a;break}}a.c.push(u)})}function Sde(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=hr(o[0]),A={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=Yn(l.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var d=s.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!d&&!!d[1]&&SB(d[1])||{r:"",t:"",h:""};A.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),A.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(A.h=h.h),n.push(A)}}}}),n}function r8(t){var e=[xi,Ft("comments",null,{xmlns:wd[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(i){var a=mn(i.a);r.indexOf(a)==-1&&(r.push(a),e.push("<author>"+a+"</author>")),i.T&&i.ID&&r.indexOf("tc="+i.ID)==-1&&(r.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var i=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(i=r.indexOf(mn(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),a.length<=1)e.push(ca("t",mn(a[0]||"")));else{for(var s=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)s+=`Reply:
    `+a[o]+`
`;e.push(ca("t",mn(s)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function kde(t,e){var r=[],n=!1,i={},a=0;return t.replace(Ia,function(o,l){var A=hr(o);switch(kl(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":i.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return o}),r}function Tde(t,e,r){var n=[xi,Ft("ThreadedComments",null,{xmlns:Ui.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var a="";(i[1]||[]).forEach(function(s,o){if(!s.T){delete s.ID;return}s.a&&e.indexOf(s.a)==-1&&e.push(s.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,s.ID=l.id,s.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(s.a)).slice(-12)+"}"),n.push(Ft("threadedComment",ca("text",s.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Ide(t,e){var r=[],n=!1;return t.replace(Ia,function(a){var s=hr(a);switch(kl(s[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:s.displayname,id:s.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return a}),r}function Fde(t){var e=[xi,Ft("personList",null,{xmlns:Ui.TCMNT,"xmlns:x":wd[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Ft("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Pde(t){var e={};e.iauthor=t.read_shift(4);var r=_d(t);return e.rfx=r.s,e.ref=Ar(r.s),t.l+=16,e}function Lde(t,e){return e==null&&(e=At(36)),e.write_shift(4,t[1].iauthor),Rf(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Dde=ka;function Rde(t){return qi(t.slice(0,54))}function Ude(t,e){var r=[],n=[],i={},a=!1;return vc(t,function(o,l,A){switch(A){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),r}function Ode(t){var e=hs(),r=[];return bt(e,628),bt(e,630),t.forEach(function(n){n[1].forEach(function(i){r.indexOf(i.a)>-1||(r.push(i.a.slice(0,54)),bt(e,632,Rde(i.a)))})}),bt(e,631),bt(e,633),t.forEach(function(n){n[1].forEach(function(i){i.iauthor=r.indexOf(i.a);var a={s:Yn(n[0]),e:Yn(n[0])};bt(e,635,Lde([a,i])),i.t&&i.t.length>0&&bt(e,637,sle(i)),bt(e,636),delete i.iauthor})}),bt(e,634),bt(e,629),e.end()}var Mde="application/vnd.ms-office.vbaProject";function Qde(t){var e=ir.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");ir.utils.cfb_add(e,i,t.FileIndex[n].content)}}),ir.write(e)}function Hde(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&ir.utils.cfb_add(t,i,e.FileIndex[n].content)}})}var n8=["xlsb","xlsm","xlam","biff8","xla"];function Vde(){return{"!type":"dialog"}}function Kde(){return{"!type":"dialog"}}function jde(){return{"!type":"macro"}}function zde(){return{"!type":"macro"}}var Oh=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,i,a,s){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var A=a.length>0?parseInt(a,10)|0:0,u=s.length>0?parseInt(s,10)|0:0;return o?u+=e.c:--u,l?A+=e.r:--A,i+(o?"":"$")+Xn(u)+(l?"":"$")+yi(A)}return function(i,a){return e=a,i.replace(t,r)}}(),FB=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,PB=function(){return function(e,r){return e.replace(FB,function(n,i,a,s,o,l){var A=wB(s)-(a?0:r.c),u=vB(l)-(o?0:r.r),d=u==0?"":o?u+1:"["+u+"]",h=A==0?"":a?A+1:"["+A+"]";return i+"R"+d+"C"+h})}}();function i8(t,e){return t.replace(FB,function(r,n,i,a,s,o){return n+(i=="$"?i+a:Xn(wB(a)+e.c))+(s=="$"?s+o:yi(vB(o)+e.r))})}function $de(t,e,r){var n=fs(e),i=n.s,a=Yn(r),s={r:a.r-i.r,c:a.c-i.c};return i8(t,s)}function Gde(t){return t.length!=1}function W4(t){return t.replace(/_xlfn\./g,"")}function Ei(t){t.l+=1}function PA(t,e){var r=t.read_shift(e==1?1:2);return[r&16383,r>>14&1,r>>15&1]}function a8(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return s8(t);r.biff==12&&(n=4)}var i=t.read_shift(n),a=t.read_shift(n),s=PA(t,2),o=PA(t,2);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function s8(t){var e=PA(t,2),r=PA(t,2),n=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function Wde(t,e,r){if(r.biff<8)return s8(t);var n=t.read_shift(r.biff==12?4:2),i=t.read_shift(r.biff==12?4:2),a=PA(t,2),s=PA(t,2);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function o8(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return qde(t);var n=t.read_shift(r&&r.biff==12?4:2),i=PA(t,2);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function qde(t){var e=PA(t,2),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function Xde(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Yde(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Jde(t);var i=t.read_shift(n>=12?4:2),a=t.read_shift(2),s=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;i>524287;)i-=1048576;if(s==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:s,rRel:o}}function Jde(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:i,rRel:n}}function Zde(t,e,r){var n=(t[t.l++]&96)>>5,i=a8(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function ehe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var s=a8(t,a,r);return[n,i,s]}function the(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function rhe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[n,i]}function nhe(t,e,r){var n=(t[t.l++]&96)>>5,i=Wde(t,e-1,r);return[n,i]}function ihe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function q4(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function ahe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),i=[],a=0;a<=n;++a)i.push(t.read_shift(r&&r.biff==2?1:2));return i}function she(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function ohe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function lhe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function che(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function l8(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function Ahe(t){return t.read_shift(2),l8(t)}function uhe(t){return t.read_shift(2),l8(t)}function dhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=o8(t,0,r);return[n,i]}function hhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=Yde(t,0,r);return[n,i]}function fhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var a=o8(t,0,r);return[n,i,a]}function mhe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(r&&r.biff<=3?1:2);return[vfe[i],u8[i],n]}function phe(t,e,r){var n=t[t.l++],i=t.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:ghe(t);return[i,(a[0]===0?u8:gfe)[a[1]]]}function ghe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function vhe(t,e,r){t.l+=r&&r.biff==2?3:4}function whe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function bhe(t){return t.l++,wc[t.read_shift(1)]}function yhe(t){return t.l++,t.read_shift(2)}function xhe(t){return t.l++,t.read_shift(1)!==0}function _he(t){return t.l++,Ba(t)}function Ehe(t,e,r){return t.l++,Up(t,e-1,r)}function Bhe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=fi(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=wc[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Ba(t);break;case 2:r[1]=Ed(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Che(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),i=[],a=0;a!=n;++a)i.push((r.biff==12?_d:ib)(t));return i}function Nhe(t,e,r){var n=0,i=0;r.biff==12?(n=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var a=0,s=[];a!=n&&(s[a]=[]);++a)for(var o=0;o!=i;++o)s[a][o]=Bhe(t,r.biff);return s}function She(t,e,r){var n=t.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,a=t.read_shift(i);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,a]}function khe(t,e,r){if(r.biff==5)return The(t);var n=t.read_shift(1)>>>5&3,i=t.read_shift(2),a=t.read_shift(4);return[n,i,a]}function The(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Ihe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function Fhe(t,e,r){var n=t.read_shift(1)>>>5&3,i=t.read_shift(r&&r.biff==2?1:2);return[n,i]}function Phe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Lhe(t,e,r){var n=(t[t.l++]&96)>>5,i=t.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[n,i]}var Dhe=Ta,Rhe=Ta,Uhe=Ta;function Mp(t,e,r){return t.l+=2,[Xde(t)]}function LB(t){return t.l+=6,[]}var Ohe=Mp,Mhe=LB,Qhe=LB,Hhe=Mp;function c8(t){return t.l+=2,[Ni(t),t.read_shift(2)&1]}var Vhe=Mp,Khe=c8,jhe=LB,zhe=Mp,$he=Mp,Ghe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Whe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),i=t.read_shift(2),a=t.read_shift(2),s=Ghe[r>>2&31];return{ixti:e,coltype:r&3,rt:s,idx:n,c:i,C:a}}function qhe(t){return t.l+=2,[t.read_shift(4)]}function Xhe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Yhe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Jhe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Zhe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function efe(t){return t.l+=4,[0,0]}var X4={1:{n:"PtgExp",f:whe},2:{n:"PtgTbl",f:Uhe},3:{n:"PtgAdd",f:Ei},4:{n:"PtgSub",f:Ei},5:{n:"PtgMul",f:Ei},6:{n:"PtgDiv",f:Ei},7:{n:"PtgPower",f:Ei},8:{n:"PtgConcat",f:Ei},9:{n:"PtgLt",f:Ei},10:{n:"PtgLe",f:Ei},11:{n:"PtgEq",f:Ei},12:{n:"PtgGe",f:Ei},13:{n:"PtgGt",f:Ei},14:{n:"PtgNe",f:Ei},15:{n:"PtgIsect",f:Ei},16:{n:"PtgUnion",f:Ei},17:{n:"PtgRange",f:Ei},18:{n:"PtgUplus",f:Ei},19:{n:"PtgUminus",f:Ei},20:{n:"PtgPercent",f:Ei},21:{n:"PtgParen",f:Ei},22:{n:"PtgMissArg",f:Ei},23:{n:"PtgStr",f:Ehe},26:{n:"PtgSheet",f:Xhe},27:{n:"PtgEndSheet",f:Yhe},28:{n:"PtgErr",f:bhe},29:{n:"PtgBool",f:xhe},30:{n:"PtgInt",f:yhe},31:{n:"PtgNum",f:_he},32:{n:"PtgArray",f:ihe},33:{n:"PtgFunc",f:mhe},34:{n:"PtgFuncVar",f:phe},35:{n:"PtgName",f:She},36:{n:"PtgRef",f:dhe},37:{n:"PtgArea",f:Zde},38:{n:"PtgMemArea",f:Ihe},39:{n:"PtgMemErr",f:Dhe},40:{n:"PtgMemNoMem",f:Rhe},41:{n:"PtgMemFunc",f:Fhe},42:{n:"PtgRefErr",f:Phe},43:{n:"PtgAreaErr",f:the},44:{n:"PtgRefN",f:hhe},45:{n:"PtgAreaN",f:nhe},46:{n:"PtgMemAreaN",f:Jhe},47:{n:"PtgMemNoMemN",f:Zhe},57:{n:"PtgNameX",f:khe},58:{n:"PtgRef3d",f:fhe},59:{n:"PtgArea3d",f:ehe},60:{n:"PtgRefErr3d",f:Lhe},61:{n:"PtgAreaErr3d",f:rhe},255:{}},tfe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},rfe={1:{n:"PtgElfLel",f:c8},2:{n:"PtgElfRw",f:zhe},3:{n:"PtgElfCol",f:Ohe},6:{n:"PtgElfRwV",f:$he},7:{n:"PtgElfColV",f:Hhe},10:{n:"PtgElfRadical",f:Vhe},11:{n:"PtgElfRadicalS",f:jhe},13:{n:"PtgElfColS",f:Mhe},15:{n:"PtgElfColSV",f:Qhe},16:{n:"PtgElfRadicalLel",f:Khe},25:{n:"PtgList",f:Whe},29:{n:"PtgSxName",f:qhe},255:{}},nfe={0:{n:"PtgAttrNoop",f:efe},1:{n:"PtgAttrSemi",f:che},2:{n:"PtgAttrIf",f:ohe},4:{n:"PtgAttrChoose",f:ahe},8:{n:"PtgAttrGoto",f:she},16:{n:"PtgAttrSum",f:vhe},32:{n:"PtgAttrBaxcel",f:q4},33:{n:"PtgAttrBaxcel",f:q4},64:{n:"PtgAttrSpace",f:Ahe},65:{n:"PtgAttrSpaceSemi",f:uhe},128:{n:"PtgAttrIfError",f:lhe},255:{}};function Qp(t,e,r,n){if(n.biff<8)return Ta(t,e);for(var i=t.l+e,a=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=Nhe(t,0,n),a.push(r[s][1]);break;case"PtgMemArea":r[s][2]=Che(t,r[s][1],n),a.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=t.read_shift(4),a.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return e=i-t.l,e!==0&&a.push(Ta(t,e)),a}function Hp(t,e,r){for(var n=t.l+e,i,a,s=[];n!=t.l;)e=n-t.l,a=t[t.l],i=X4[a]||X4[tfe[a]],(a===24||a===25)&&(i=(a===24?rfe:nfe)[t[t.l+1]]),!i||!i.f?Ta(t,e):s.push([i.n,i.f(t,e,r)]);return s}function ife(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],i=[],a=0;a<n.length;++a){var s=n[a];if(s)switch(s[0]){case 2:i.push('"'+s[1].replace(/"/g,'""')+'"');break;default:i.push(s[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var afe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function sfe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function A8(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(t[n[0]][0]){case 357:return i=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[n[0]][0][3]?(i=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Y4(t,e,r){var n=A8(t,e,r);return n=="#REF"?n:sfe(n,r)}function _a(t,e,r,n,i){var a=i&&i.biff||8,s={s:{c:0,r:0},e:{c:0,r:0}},o=[],l,A,u,d=0,h=0,f,p="";if(!t[0]||!t[0][0])return"";for(var g=-1,v="",C=0,I=t[0].length;C<I;++C){var F=t[0][C];switch(F[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),A=o.pop(),g>=0){switch(t[0][g][1][0]){case 0:v=ri(" ",t[0][g][1][1]);break;case 1:v=ri("\r",t[0][g][1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}A=A+v,g=-1}o.push(A+afe[F[0]]+l);break;case"PtgIsect":l=o.pop(),A=o.pop(),o.push(A+" "+l);break;case"PtgUnion":l=o.pop(),A=o.pop(),o.push(A+","+l);break;case"PtgRange":l=o.pop(),A=o.pop(),o.push(A+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=l0(F[1][1],s,i),o.push(c0(u,a));break;case"PtgRefN":u=r?l0(F[1][1],r,i):F[1][1],o.push(c0(u,a));break;case"PtgRef3d":d=F[1][1],u=l0(F[1][2],s,i),p=Y4(n,d,i),o.push(p+"!"+c0(u,a));break;case"PtgFunc":case"PtgFuncVar":var E=F[1][0],R=F[1][1];E||(E=0),E&=127;var L=E==0?[]:o.slice(-E);o.length-=E,R==="User"&&(R=L.shift()),o.push(R+"("+L.join(",")+")");break;case"PtgBool":o.push(F[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(F[1]);break;case"PtgNum":o.push(String(F[1]));break;case"PtgStr":o.push('"'+F[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(F[1]);break;case"PtgAreaN":f=C4(F[1][1],r?{s:r}:s,i),o.push(qy(f,i));break;case"PtgArea":f=C4(F[1][1],s,i),o.push(qy(f,i));break;case"PtgArea3d":d=F[1][1],f=F[1][2],p=Y4(n,d,i),o.push(p+"!"+qy(f,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=F[1][2];var N=(n.names||[])[h-1]||(n[0]||[])[h],P=N?N.Name:"SH33TJSNAME"+String(h);P&&P.slice(0,6)=="_xlfn."&&!i.xlfn&&(P=P.slice(6)),o.push(P);break;case"PtgNameX":var x=F[1][1];h=F[1][2];var k;if(i.biff<=5)x<0&&(x=-x),n[x]&&(k=n[x][h]);else{var y="";if(((n[x]||[])[0]||[])[0]==14849||(((n[x]||[])[0]||[])[0]==1025?n[x][h]&&n[x][h].itab>0&&(y=n.SheetNames[n[x][h].itab-1]+"!"):y=n.SheetNames[h-1]+"!"),n[x]&&n[x][h])y+=n[x][h].Name;else if(n[0]&&n[0][h])y+=n[0][h].Name;else{var S=(A8(n,x,i)||"").split(";;");S[h-1]?y=S[h-1]:y+="SH33TJSERRX"}o.push(y);break}k||(k={Name:"SH33TJSERRY"}),o.push(k.Name);break;case"PtgParen":var _="(",M=")";if(g>=0){switch(v="",t[0][g][1][0]){case 2:_=ri(" ",t[0][g][1][1])+_;break;case 3:_=ri("\r",t[0][g][1][1])+_;break;case 4:M=ri(" ",t[0][g][1][1])+M;break;case 5:M=ri("\r",t[0][g][1][1])+M;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}o.push(_+o.pop()+M);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:F[1][1],r:F[1][0]};var K={c:r.c,r:r.r};if(n.sharedf[Ar(u)]){var z=n.sharedf[Ar(u)];o.push(_a(z,s,K,n,i))}else{var ae=!1;for(l=0;l!=n.arrayf.length;++l)if(A=n.arrayf[l],!(u.c<A[0].s.c||u.c>A[0].e.c)&&!(u.r<A[0].s.r||u.r>A[0].e.r)){o.push(_a(A[1],s,K,n,i)),ae=!0;break}ae||o.push(F[1])}break;case"PtgArray":o.push("{"+ife(F[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+F[1].idx+"[#"+F[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(F));default:throw new Error("Unrecognized Formula Token: "+String(F))}var te=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&g>=0&&te.indexOf(t[0][C][0])==-1){F=t[0][g];var G=!0;switch(F[1][0]){case 4:G=!1;case 0:v=ri(" ",F[1][1]);break;case 5:G=!1;case 1:v=ri("\r",F[1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+F[1][0])}o.push((G?v:"")+o.pop()+(G?"":v)),g=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function ofe(t,e,r){var n=t.l+e,i=r.biff==2?1:2,a,s=t.read_shift(i);if(s==65535)return[[],Ta(t,e-2)];var o=Hp(t,s,r);return e!==s+i&&(a=Qp(t,e-s-i,o,r)),t.l=n,[o,a]}function lfe(t,e,r){var n=t.l+e,i=r.biff==2?1:2,a,s=t.read_shift(i);if(s==65535)return[[],Ta(t,e-2)];var o=Hp(t,s,r);return e!==s+i&&(a=Qp(t,e-s-i,o,r)),t.l=n,[o,a]}function cfe(t,e,r,n){var i=t.l+e,a=Hp(t,n,r),s;return i!==t.l&&(s=Qp(t,i-t.l,a,r)),[a,s]}function Afe(t,e,r){var n=t.l+e,i,a=t.read_shift(2),s=Hp(t,a,r);return a==65535?[[],Ta(t,e-2)]:(e!==a+2&&(i=Qp(t,n-a-2,s,r)),[s,i])}function ufe(t){var e;if(Jl(t,t.l+6)!==65535)return[Ba(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function dfe(t){if(t==null){var e=At(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return rd(t);return rd(0)}function e2(t,e,r){var n=t.l+e,i=Tl(t);r.biff==2&&++t.l;var a=ufe(t),s=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=lfe(t,n-t.l,r);return{cell:i,val:a[0],formula:o,shared:s>>3&1,tt:a[1]}}function hfe(t,e,r,n,i){var a=id(e,r,i),s=dfe(t.v),o=At(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var A=At(t.bf.length),u=0;u<t.bf.length;++u)A[u]=t.bf[u];var d=Wi([a,s,o,A]);return d}function ab(t,e,r){var n=t.read_shift(4),i=Hp(t,n,r),a=t.read_shift(4),s=a>0?Qp(t,a,i,r):null;return[i,s]}var ffe=ab,sb=ab,mfe=ab,pfe=ab,gfe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},u8={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},vfe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function J4(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function wfe(t){var e="of:="+t.replace(FB,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function t2(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function bfe(t){return t.replace(/\./,"!")}var u0={},Mh={},d0=typeof Map<"u";function DB(t,e,r){var n=0,i=t.length;if(r){if(d0?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var a=d0?r.get(e):r[e];n<a.length;++n)if(t[a[n]].t===e)return t.Count++,a[n]}}else for(;n<i;++n)if(t[n].t===e)return t.Count++,n;return t[i]={t:e},t.Count++,t.Unique++,r&&(d0?(r.has(e)||r.set(e,[]),r.get(e).push(i)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(i))),i}function ob(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Ea=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=ep(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=$v(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Du(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function $A(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],i=60,a=t.length;if(n==null&&r.ssf){for(;i<392;++i)if(r.ssf[i]==null){rc(e.z,i),r.ssf[i]=e.z,r.revssf[e.z]=n=i;break}}for(i=0;i!=a;++i)if(t[i].numFmtId===n)return i;return t[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function d8(t,e,r,n,i,a){try{n.cellNF&&(t.z=lr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Qn(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(lr[e]==null&&rc(voe[e]||"General",e),t.t==="e")t.w=t.w||wc[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=G0(t.v);else if(t.t==="d"){var s=Qi(t.v);(s|0)===s?t.w=s.toString(10):t.w=G0(s)}else{if(t.v===void 0)return"";t.w=ed(t.v,Mh)}else t.t==="d"?t.w=po(e,Qi(t.v),Mh):t.w=po(e,t.v,Mh)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=a.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=zv(i.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=i.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=zv(i.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=i.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function yfe(t,e,r){if(t&&t["!ref"]){var n=Yr(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function xfe(t,e){var r=Yr(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=wr(r))}var _fe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Efe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Bfe=/<(?:\w:)?hyperlink [^>]*>/mg,Cfe=/"(\w*:\w*)"/,Nfe=/<(?:\w:)?col\b[^>]*[\/]?>/g,Sfe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,kfe=/<(?:\w:)?pageMargins[^>]*\/>/g,h8=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Tfe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ife=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Ffe(t,e,r,n,i,a,s){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",u="",d=t.match(Efe);d?(A=t.slice(0,d.index),u=t.slice(d.index+d[0].length)):A=u=t;var h=A.match(h8);h?RB(h[0],o,i,r):(h=A.match(Tfe))&&Lfe(h[0],h[1]||"",o,i,r);var f=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var p=A.slice(f,f+50).match(Cfe);p&&xfe(o,p[1])}var g=A.match(Ife);g&&g[1]&&Gfe(g[1],i);var v=[];if(e.cellStyles){var C=A.match(Nfe);C&&Vfe(v,C)}d&&Xfe(d[1],o,e,l,a,s);var I=u.match(Sfe);I&&(o["!autofilter"]=jfe(I[0]));var F=[],E=u.match(_fe);if(E)for(f=0;f!=E.length;++f)F[f]=Yr(E[f].slice(E[f].indexOf('"')+1));var R=u.match(Bfe);R&&Mfe(o,R,n);var L=u.match(kfe);if(L&&(o["!margins"]=Qfe(hr(L[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=wr(l)),e.sheetRows>0&&o["!ref"]){var N=Yr(o["!ref"]);e.sheetRows<=+N.e.r&&(N.e.r=e.sheetRows-1,N.e.r>l.e.r&&(N.e.r=l.e.r),N.e.r<N.s.r&&(N.s.r=N.e.r),N.e.c>l.e.c&&(N.e.c=l.e.c),N.e.c<N.s.c&&(N.s.c=N.e.c),o["!fullref"]=o["!ref"],o["!ref"]=wr(N))}return v.length>0&&(o["!cols"]=v),F.length>0&&(o["!merges"]=F),o}function Pfe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+wr(t[r])+'"/>';return e+"</mergeCells>"}function RB(t,e,r,n){var i=hr(t);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=Xr(bn(i.codeName)))}function Lfe(t,e,r,n,i){RB(t.slice(0,t.indexOf(">")),r,n,i)}function Dfe(t,e,r,n,i){var a=!1,s={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,s.codeName=ml(mn(l))}if(t&&t["!outline"]){var A={summaryBelow:1,summaryRight:1};t["!outline"].above&&(A.summaryBelow=0),t["!outline"].left&&(A.summaryRight=0),o=(o||"")+Ft("outlinePr",null,A)}!a&&!o||(i[i.length]=Ft("sheetPr",o,s))}var Rfe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Ufe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Ofe(t){var e={sheet:1};return Rfe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Ufe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=kB(t.password).toString(16).toUpperCase()),Ft("sheetProtection",null,e)}function Mfe(t,e,r){for(var n=Array.isArray(t),i=0;i!=e.length;++i){var a=hr(bn(e[i]),!0);if(!a.ref)return;var s=((r||{})["!id"]||[])[a.id];s?(a.Target=s.Target,a.location&&(a.Target+="#"+Xr(a.location))):(a.Target="#"+Xr(a.location),s={Target:a.Target,TargetMode:"Internal"}),a.Rel=s,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Yr(a.ref),l=o.s.r;l<=o.e.r;++l)for(var A=o.s.c;A<=o.e.c;++A){var u=Ar({c:A,r:l});n?(t[l]||(t[l]=[]),t[l][A]||(t[l][A]={t:"z",v:void 0}),t[l][A].l=a):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=a)}}}function Qfe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Hfe(t){return Du(t),Ft("pageMargins",null,t)}function Vfe(t,e){for(var r=!1,n=0;n!=e.length;++n){var i=hr(e[n],!0);i.hidden&&(i.hidden=Rn(i.hidden));var a=parseInt(i.min,10)-1,s=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,TB(i.width)),FA(i);a<=s;)t[a++]=Hn(i)}}function Kfe(t,e){for(var r=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(r[r.length]=Ft("col",null,ob(i,n)));return r[r.length]="</cols>",r.join("")}function jfe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function zfe(t,e,r,n){var i=typeof t.ref=="string"?t.ref:wr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,s=fs(i);s.s.r==s.e.r&&(s.e.r=fs(e["!ref"]).e.r,i=wr(s));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ft("autoFilter",null,{ref:i})}var $fe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Gfe(t,e){e.Views||(e.Views=[{}]),(t.match($fe)||[]).forEach(function(r,n){var i=hr(r);e.Views[n]||(e.Views[n]={}),+i.zoomScale&&(e.Views[n].zoom=+i.zoomScale),Rn(i.rightToLeft)&&(e.Views[n].RTL=!0)})}function Wfe(t,e,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ft("sheetViews",Ft("sheetView",null,i),{})}function qfe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",a=t.t,s=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=wc[t.v];break;case"d":n&&n.cellDates?i=Qn(t.v,-1).toISOString():(t=Hn(t),t.t="n",i=""+(t.v=Qi(Qn(t.v)))),typeof t.z>"u"&&(t.z=lr[14]);break;default:i=t.v;break}var o=ca("v",mn(i)),l={r:e},A=$A(n.cellXfs,t,n);switch(A!==0&&(l.s=A),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=ca("v",""+DB(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=s),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Ft("f",mn(t.f),u)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Ft("c",o,l)}var Xfe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,a=W0("v"),s=W0("f");return function(l,A,u,d,h,f){for(var p=0,g="",v=[],C=[],I=0,F=0,E=0,R="",L,N,P=0,x=0,k,y,S=0,_=0,M=Array.isArray(f.CellXf),K,z=[],ae=[],te=Array.isArray(A),G=[],ue={},de=!1,T=!!u.sheetStubs,O=l.split(e),V=0,Q=O.length;V!=Q;++V){g=O[V].trim();var X=g.length;if(X!==0){var ie=0;e:for(p=0;p<X;++p)switch(g[p]){case">":if(g[p-1]!="/"){++p;break e}if(u&&u.cellStyles){if(N=hr(g.slice(ie,p),!0),P=N.r!=null?parseInt(N.r,10):P+1,x=-1,u.sheetRows&&u.sheetRows<P)continue;ue={},de=!1,N.ht&&(de=!0,ue.hpt=parseFloat(N.ht),ue.hpx=ff(ue.hpt)),N.hidden=="1"&&(de=!0,ue.hidden=!0),N.outlineLevel!=null&&(de=!0,ue.level=+N.outlineLevel),de&&(G[P-1]=ue)}break;case"<":ie=p;break}if(ie>=p)break;if(N=hr(g.slice(ie,p),!0),P=N.r!=null?parseInt(N.r,10):P+1,x=-1,!(u.sheetRows&&u.sheetRows<P)){d.s.r>P-1&&(d.s.r=P-1),d.e.r<P-1&&(d.e.r=P-1),u&&u.cellStyles&&(ue={},de=!1,N.ht&&(de=!0,ue.hpt=parseFloat(N.ht),ue.hpx=ff(ue.hpt)),N.hidden=="1"&&(de=!0,ue.hidden=!0),N.outlineLevel!=null&&(de=!0,ue.level=+N.outlineLevel),de&&(G[P-1]=ue)),v=g.slice(p).split(t);for(var ee=0;ee!=v.length&&v[ee].trim().charAt(0)=="<";++ee);for(v=v.slice(ee),p=0;p!=v.length;++p)if(g=v[p].trim(),g.length!==0){if(C=g.match(r),I=p,F=0,E=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,C!=null&&C.length===2){for(I=0,R=C[1],F=0;F!=R.length&&!((E=R.charCodeAt(F)-64)<1||E>26);++F)I=26*I+E;--I,x=I}else++x;for(F=0;F!=g.length&&g.charCodeAt(F)!==62;++F);if(++F,N=hr(g.slice(0,F),!0),N.r||(N.r=Ar({r:P-1,c:x})),R=g.slice(F),L={t:""},(C=R.match(a))!=null&&C[1]!==""&&(L.v=Xr(C[1])),u.cellFormula){if((C=R.match(s))!=null&&C[1]!==""){if(L.f=Xr(bn(C[1])).replace(/\r\n/g,`
`),u.xlfn||(L.f=W4(L.f)),C[0].indexOf('t="array"')>-1)L.F=(R.match(i)||[])[1],L.F.indexOf(":")>-1&&z.push([Yr(L.F),L.F]);else if(C[0].indexOf('t="shared"')>-1){y=hr(C[0]);var Z=Xr(bn(C[1]));u.xlfn||(Z=W4(Z)),ae[parseInt(y.si,10)]=[y,Z,N.r]}}else(C=R.match(/<f[^>]*\/>/))&&(y=hr(C[0]),ae[y.si]&&(L.f=$de(ae[y.si][1],ae[y.si][2],N.r)));var re=Yn(N.r);for(F=0;F<z.length;++F)re.r>=z[F][0].s.r&&re.r<=z[F][0].e.r&&re.c>=z[F][0].s.c&&re.c<=z[F][0].e.c&&(L.F=z[F][1])}if(N.t==null&&L.v===void 0)if(L.f||L.F)L.v=0,L.t="n";else if(T)L.t="z";else continue;else L.t=N.t||"n";switch(d.s.c>x&&(d.s.c=x),d.e.c<x&&(d.e.c=x),L.t){case"n":if(L.v==""||L.v==null){if(!T)continue;L.t="z"}else L.v=parseFloat(L.v);break;case"s":if(typeof L.v>"u"){if(!T)continue;L.t="z"}else k=u0[parseInt(L.v,10)],L.v=k.t,L.r=k.r,u.cellHTML&&(L.h=k.h);break;case"str":L.t="s",L.v=L.v!=null?bn(L.v):"",u.cellHTML&&(L.h=fB(L.v));break;case"inlineStr":C=R.match(n),L.t="s",C!=null&&(k=SB(C[1]))?(L.v=k.t,u.cellHTML&&(L.h=k.h)):L.v="";break;case"b":L.v=Rn(L.v);break;case"d":u.cellDates?L.v=Qn(L.v,1):(L.v=Qi(Qn(L.v,1)),L.t="n");break;case"e":(!u||u.cellText!==!1)&&(L.w=L.v),L.v=mO[L.v];break}if(S=_=0,K=null,M&&N.s!==void 0&&(K=f.CellXf[N.s],K!=null&&(K.numFmtId!=null&&(S=K.numFmtId),u.cellStyles&&K.fillId!=null&&(_=K.fillId))),d8(L,S,_,u,h,f),u.cellDates&&M&&L.t=="n"&&Pf(lr[S])&&(L.t="d",L.v=nb(L.v)),N.cm&&u.xlmeta){var ce=(u.xlmeta.Cell||[])[+N.cm-1];ce&&ce.type=="XLDAPR"&&(L.D=!0)}if(te){var Y=Yn(N.r);A[Y.r]||(A[Y.r]=[]),A[Y.r][Y.c]=L}else A[N.r]=L}}}}G.length>0&&(A["!rows"]=G)}}();function Yfe(t,e,r,n){var i=[],a=[],s=Yr(t["!ref"]),o="",l,A="",u=[],d=0,h=0,f=t["!rows"],p=Array.isArray(t),g={r:A},v,C=-1;for(h=s.s.c;h<=s.e.c;++h)u[h]=Xn(h);for(d=s.s.r;d<=s.e.r;++d){for(a=[],A=yi(d),h=s.s.c;h<=s.e.c;++h){l=u[h]+A;var I=p?(t[d]||[])[h]:t[l];I!==void 0&&(o=qfe(I,l,t,e))!=null&&a.push(o)}(a.length>0||f&&f[d])&&(g={r:A},f&&f[d]&&(v=f[d],v.hidden&&(g.hidden=1),C=-1,v.hpx?C=tp(v.hpx):v.hpt&&(C=v.hpt),C>-1&&(g.ht=C,g.customHeight=1),v.level&&(g.outlineLevel=v.level)),i[i.length]=Ft("row",a.join(""),g))}if(f)for(;d<f.length;++d)f&&f[d]&&(g={r:d+1},v=f[d],v.hidden&&(g.hidden=1),C=-1,v.hpx?C=tp(v.hpx):v.hpt&&(C=v.hpt),C>-1&&(g.ht=C,g.customHeight=1),v.level&&(g.outlineLevel=v.level),i[i.length]=Ft("row","",g));return i.join("")}function f8(t,e,r,n){var i=[xi,Ft("worksheet",null,{xmlns:wd[0],"xmlns:r":Ui.r})],a=r.SheetNames[t],s=0,o="",l=r.Sheets[a];l==null&&(l={});var A=l["!ref"]||"A1",u=Yr(A);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+A+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),A=wr(u)}n||(n={}),l["!comments"]=[];var d=[];Dfe(l,r,t,e,i),i[i.length]=Ft("dimension",null,{ref:A}),i[i.length]=Wfe(l,e,t,r),e.sheetFormat&&(i[i.length]=Ft("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=Kfe(l,l["!cols"])),i[s=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Yfe(l,e),o.length>0&&(i[i.length]=o)),i.length>s+1&&(i[i.length]="</sheetData>",i[s]=i[s].replace("/>",">")),l["!protect"]&&(i[i.length]=Ofe(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=zfe(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=Pfe(l["!merges"]));var h=-1,f,p=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(g){g[1].Target&&(f={ref:g[0]},g[1].Target.charAt(0)!="#"&&(p=un(n,-1,mn(g[1].Target).replace(/#.*$/,""),Nr.HLINK),f["r:id"]="rId"+p),(h=g[1].Target.indexOf("#"))>-1&&(f.location=mn(g[1].Target.slice(h+1))),g[1].Tooltip&&(f.tooltip=mn(g[1].Tooltip)),i[i.length]=Ft("hyperlink",null,f))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=Hfe(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ca("ignoredErrors",Ft("ignoredError",null,{numberStoredAsText:1,sqref:A}))),d.length>0&&(p=un(n,-1,"../drawings/drawing"+(t+1)+".xml",Nr.DRAW),i[i.length]=Ft("drawing",null,{"r:id":"rId"+p}),l["!drawing"]=d),l["!comments"].length>0&&(p=un(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Nr.VML),i[i.length]=Ft("legacyDrawing",null,{"r:id":"rId"+p}),l["!legacy"]=p),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Jfe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=i/20),r}function Zfe(t,e,r){var n=At(145),i=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var a=320;i.hpx?a=tp(i.hpx)*20:i.hpt&&(a=i.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var s=0;i.level&&(s|=i.level),i.hidden&&(s|=16),(i.hpx||i.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var A={r:t,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var d=-1,h=-1,f=u<<10;f<u+1<<10;++f){A.c=f;var p=Array.isArray(r)?(r[A.r]||[])[A.c]:r[Ar(A)];p&&(d<0&&(d=f),h=f)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,h))}var g=n.l;return n.l=l,n.write_shift(4,o),n.l=g,n.length>n.l?n.slice(0,n.l):n}function eme(t,e,r,n){var i=Zfe(n,r,e);(i.length>17||(e["!rows"]||[])[n])&&bt(t,0,i)}var tme=_d,rme=Rf;function nme(){}function ime(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=ole(t),r}function ame(t,e,r){r==null&&(r=At(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return Vv({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),AO(t,r),r.slice(0,r.l)}function sme(t){var e=vo(t);return[e]}function ome(t,e,r){return r==null&&(r=At(8)),bd(e,r)}function lme(t){var e=yd(t);return[e]}function cme(t,e,r){return r==null&&(r=At(4)),xd(e,r)}function Ame(t){var e=vo(t),r=t.read_shift(1);return[e,r,"b"]}function ume(t,e,r){return r==null&&(r=At(9)),bd(e,r),r.write_shift(1,t.v?1:0),r}function dme(t){var e=yd(t),r=t.read_shift(1);return[e,r,"b"]}function hme(t,e,r){return r==null&&(r=At(5)),xd(e,r),r.write_shift(1,t.v?1:0),r}function fme(t){var e=vo(t),r=t.read_shift(1);return[e,r,"e"]}function mme(t,e,r){return r==null&&(r=At(9)),bd(e,r),r.write_shift(1,t.v),r}function pme(t){var e=yd(t),r=t.read_shift(1);return[e,r,"e"]}function gme(t,e,r){return r==null&&(r=At(8)),xd(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function vme(t){var e=vo(t),r=t.read_shift(4);return[e,r,"s"]}function wme(t,e,r){return r==null&&(r=At(12)),bd(e,r),r.write_shift(4,e.v),r}function bme(t){var e=yd(t),r=t.read_shift(4);return[e,r,"s"]}function yme(t,e,r){return r==null&&(r=At(8)),xd(e,r),r.write_shift(4,e.v),r}function xme(t){var e=vo(t),r=Ba(t);return[e,r,"n"]}function _me(t,e,r){return r==null&&(r=At(16)),bd(e,r),rd(t.v,r),r}function m8(t){var e=yd(t),r=Ba(t);return[e,r,"n"]}function Eme(t,e,r){return r==null&&(r=At(12)),xd(e,r),rd(t.v,r),r}function Bme(t){var e=vo(t),r=_B(t);return[e,r,"n"]}function Cme(t,e,r){return r==null&&(r=At(12)),bd(e,r),uO(t.v,r),r}function Nme(t){var e=yd(t),r=_B(t);return[e,r,"n"]}function Sme(t,e,r){return r==null&&(r=At(8)),xd(e,r),uO(t.v,r),r}function kme(t){var e=vo(t),r=bB(t);return[e,r,"is"]}function Tme(t){var e=vo(t),r=ka(t);return[e,r,"str"]}function Ime(t,e,r){return r==null&&(r=At(12+4*t.v.length)),bd(e,r),qi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Fme(t){var e=yd(t),r=ka(t);return[e,r,"str"]}function Pme(t,e,r){return r==null&&(r=At(8+4*t.v.length)),xd(e,r),qi(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Lme(t,e,r){var n=t.l+e,i=vo(t);i.r=r["!row"];var a=t.read_shift(1),s=[i,a,"b"];if(r.cellFormula){t.l+=2;var o=sb(t,n-t.l,r);s[3]=_a(o,null,i,r.supbooks,r)}else t.l=n;return s}function Dme(t,e,r){var n=t.l+e,i=vo(t);i.r=r["!row"];var a=t.read_shift(1),s=[i,a,"e"];if(r.cellFormula){t.l+=2;var o=sb(t,n-t.l,r);s[3]=_a(o,null,i,r.supbooks,r)}else t.l=n;return s}function Rme(t,e,r){var n=t.l+e,i=vo(t);i.r=r["!row"];var a=Ba(t),s=[i,a,"n"];if(r.cellFormula){t.l+=2;var o=sb(t,n-t.l,r);s[3]=_a(o,null,i,r.supbooks,r)}else t.l=n;return s}function Ume(t,e,r){var n=t.l+e,i=vo(t);i.r=r["!row"];var a=ka(t),s=[i,a,"str"];if(r.cellFormula){t.l+=2;var o=sb(t,n-t.l,r);s[3]=_a(o,null,i,r.supbooks,r)}else t.l=n;return s}var Ome=_d,Mme=Rf;function Qme(t,e){return e==null&&(e=At(4)),e.write_shift(4,t),e}function Hme(t,e){var r=t.l+e,n=_d(t),i=yB(t),a=ka(t),s=ka(t),o=ka(t);t.l=r;var l={rfx:n,relId:i,loc:a,display:o};return s&&(l.Tooltip=s),l}function Vme(t,e){var r=At(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Rf({s:Yn(t[0]),e:Yn(t[0])},r),xB("rId"+e,r);var n=t[1].Target.indexOf("#"),i=n==-1?"":t[1].Target.slice(n+1);return qi(i||"",r),qi(t[1].Tooltip||"",r),qi("",r),r.slice(0,r.l)}function Kme(){}function jme(t,e,r){var n=t.l+e,i=dO(t),a=t.read_shift(1),s=[i];if(s[2]=a,r.cellFormula){var o=ffe(t,n-t.l,r);s[1]=o}else t.l=n;return s}function zme(t,e,r){var n=t.l+e,i=_d(t),a=[i];if(r.cellFormula){var s=pfe(t,n-t.l,r);a[1]=s,t.l=n}else t.l=n;return a}function $me(t,e,r){r==null&&(r=At(18));var n=ob(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),r.write_shift(2,i),r}var p8=["left","right","top","bottom","header","footer"];function Gme(t){var e={};return p8.forEach(function(r){e[r]=Ba(t)}),e}function Wme(t,e){return e==null&&(e=At(6*8)),Du(t),p8.forEach(function(r){rd(t[r],e)}),e}function qme(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Xme(t,e,r){r==null&&(r=At(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Yme(t){var e=At(24);return e.write_shift(4,4),e.write_shift(4,1),Rf(t,e),e}function Jme(t,e){return e==null&&(e=At(16*4+2)),e.write_shift(2,t.password?kB(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function Zme(){}function e0e(){}function t0e(t,e,r,n,i,a,s){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},A,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,h=!1,f,p,g,v,C,I,F,E,R,L=[];o.biff=12,o["!row"]=0;var N=0,P=!1,x=[],k={},y=o.supbooks||i.supbooks||[[]];if(y.sharedf=k,y.arrayf=x,y.SheetNames=i.SheetNames||i.Sheets.map(function(te){return te.name}),!o.supbooks&&(o.supbooks=y,i.Names))for(var S=0;S<i.Names.length;++S)y[0][S+1]=i.Names[S];var _=[],M=[],K=!1;rp[16]={n:"BrtShortReal",f:m8};var z;if(vc(t,function(G,ue,de){if(!h)switch(de){case 148:A=G;break;case 0:f=G,o.sheetRows&&o.sheetRows<=f.r&&(h=!0),E=yi(v=f.r),o["!row"]=f.r,(G.hidden||G.hpt||G.level!=null)&&(G.hpt&&(G.hpx=ff(G.hpt)),M[G.r]=G);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:G[2]},G[2]){case"n":p.v=G[1];break;case"s":F=u0[G[1]],p.v=F.t,p.r=F.r;break;case"b":p.v=!!G[1];break;case"e":p.v=G[1],o.cellText!==!1&&(p.w=wc[p.v]);break;case"str":p.t="s",p.v=G[1];break;case"is":p.t="s",p.v=G[1].t;break}if((g=s.CellXf[G[0].iStyleRef])&&d8(p,g.numFmtId,null,o,a,s),C=G[0].c==-1?C+1:G[0].c,o.dense?(l[v]||(l[v]=[]),l[v][C]=p):l[Xn(C)+E]=p,o.cellFormula){for(P=!1,N=0;N<x.length;++N){var T=x[N];f.r>=T[0].s.r&&f.r<=T[0].e.r&&C>=T[0].s.c&&C<=T[0].e.c&&(p.F=wr(T[0]),P=!0)}!P&&G.length>3&&(p.f=G[3])}if(u.s.r>f.r&&(u.s.r=f.r),u.s.c>C&&(u.s.c=C),u.e.r<f.r&&(u.e.r=f.r),u.e.c<C&&(u.e.c=C),o.cellDates&&g&&p.t=="n"&&Pf(lr[g.numFmtId])){var O=_u(p.v);O&&(p.t="d",p.v=new Date(O.y,O.m-1,O.d,O.H,O.M,O.S,O.u))}z&&(z.type=="XLDAPR"&&(p.D=!0),z=void 0);break;case 1:case 12:if(!o.sheetStubs||d)break;p={t:"z",v:void 0},C=G[0].c==-1?C+1:G[0].c,o.dense?(l[v]||(l[v]=[]),l[v][C]=p):l[Xn(C)+E]=p,u.s.r>f.r&&(u.s.r=f.r),u.s.c>C&&(u.s.c=C),u.e.r<f.r&&(u.e.r=f.r),u.e.c<C&&(u.e.c=C),z&&(z.type=="XLDAPR"&&(p.D=!0),z=void 0);break;case 176:L.push(G);break;case 49:z=((o.xlmeta||{}).Cell||[])[G-1];break;case 494:var V=n["!id"][G.relId];for(V?(G.Target=V.Target,G.loc&&(G.Target+="#"+G.loc),G.Rel=V):G.relId==""&&(G.Target="#"+G.loc),v=G.rfx.s.r;v<=G.rfx.e.r;++v)for(C=G.rfx.s.c;C<=G.rfx.e.c;++C)o.dense?(l[v]||(l[v]=[]),l[v][C]||(l[v][C]={t:"z",v:void 0}),l[v][C].l=G):(I=Ar({c:C,r:v}),l[I]||(l[I]={t:"z",v:void 0}),l[I].l=G);break;case 426:if(!o.cellFormula)break;x.push(G),R=o.dense?l[v][C]:l[Xn(C)+E],R.f=_a(G[1],u,{r:f.r,c:C},y,o),R.F=wr(G[0]);break;case 427:if(!o.cellFormula)break;k[Ar(G[0].s)]=G[1],R=o.dense?l[v][C]:l[Xn(C)+E],R.f=_a(G[1],u,{r:f.r,c:C},y,o);break;case 60:if(!o.cellStyles)break;for(;G.e>=G.s;)_[G.e--]={width:G.w/256,hidden:!!(G.flags&1),level:G.level},K||(K=!0,TB(G.w/256)),FA(_[G.e+1]);break;case 161:l["!autofilter"]={ref:wr(G)};break;case 476:l["!margins"]=G;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),G.name&&(i.Sheets[r].CodeName=G.name),(G.above||G.left)&&(l["!outline"]={above:G.above,left:G.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),G.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!ue.T){if(!d||o.WTF)throw new Error("Unexpected record 0x"+de.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(l["!ref"]=wr(A||u)),o.sheetRows&&l["!ref"]){var ae=Yr(l["!ref"]);o.sheetRows<=+ae.e.r&&(ae.e.r=o.sheetRows-1,ae.e.r>u.e.r&&(ae.e.r=u.e.r),ae.e.r<ae.s.r&&(ae.s.r=ae.e.r),ae.e.c>u.e.c&&(ae.e.c=u.e.c),ae.e.c<ae.s.c&&(ae.s.c=ae.e.c),l["!fullref"]=l["!ref"],l["!ref"]=wr(ae))}return L.length>0&&(l["!merges"]=L),_.length>0&&(l["!cols"]=_),M.length>0&&(l["!rows"]=M),l}function r0e(t,e,r,n,i,a,s){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Hn(e),e.z=e.z||lr[14],e.v=Qi(Qn(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=$A(i.cellXfs,e,i),e.l&&a["!links"].push([Ar(l),e.l]),e.c&&a["!comments"].push([Ar(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=DB(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,s?bt(t,18,yme(e,l)):bt(t,7,wme(e,l))):(l.t="str",s?bt(t,17,Pme(e,l)):bt(t,6,Ime(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?s?bt(t,13,Sme(e,l)):bt(t,2,Cme(e,l)):s?bt(t,16,Eme(e,l)):bt(t,5,_me(e,l)),!0;case"b":return l.t="b",s?bt(t,15,hme(e,l)):bt(t,4,ume(e,l)),!0;case"e":return l.t="e",s?bt(t,14,gme(e,l)):bt(t,3,mme(e,l)),!0}return s?bt(t,12,cme(e,l)):bt(t,1,ome(e,l)),!0}function n0e(t,e,r,n){var i=Yr(e["!ref"]||"A1"),a,s="",o=[];bt(t,145);var l=Array.isArray(e),A=i.e.r;e["!rows"]&&(A=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=A;++u){s=yi(u),eme(t,e,i,u);var d=!1;if(u<=i.e.r)for(var h=i.s.c;h<=i.e.c;++h){u===i.s.r&&(o[h]=Xn(h)),a=o[h]+s;var f=l?(e[u]||[])[h]:e[a];if(!f){d=!1;continue}d=r0e(t,f,u,h,n,e,d)}}bt(t,146)}function i0e(t,e){!e||!e["!merges"]||(bt(t,177,Qme(e["!merges"].length)),e["!merges"].forEach(function(r){bt(t,176,Mme(r))}),bt(t,178))}function a0e(t,e){!e||!e["!cols"]||(bt(t,390),e["!cols"].forEach(function(r,n){r&&bt(t,60,$me(n,r))}),bt(t,391))}function s0e(t,e){!e||!e["!ref"]||(bt(t,648),bt(t,649,Yme(Yr(e["!ref"]))),bt(t,650))}function o0e(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var i=un(r,-1,n[1].Target.replace(/#.*$/,""),Nr.HLINK);bt(t,494,Vme(n,i))}}),delete e["!links"]}function l0e(t,e,r,n){if(e["!comments"].length>0){var i=un(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Nr.VML);bt(t,551,xB("rId"+i)),e["!legacy"]=i}}function c0e(t,e,r,n){if(e["!autofilter"]){var i=e["!autofilter"],a=typeof i.ref=="string"?i.ref:wr(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=fs(a);o.s.r==o.e.r&&(o.e.r=fs(e["!ref"]).e.r,a=wr(o));for(var l=0;l<s.length;++l){var A=s[l];if(A.Name=="_xlnm._FilterDatabase"&&A.Sheet==n){A.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),bt(t,161,Rf(Yr(a))),bt(t,162)}}function A0e(t,e,r){bt(t,133),bt(t,137,Xme(e,r)),bt(t,138),bt(t,134)}function u0e(t,e){e["!protect"]&&bt(t,535,Jme(e["!protect"]))}function d0e(t,e,r,n){var i=hs(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=Yr(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],bt(i,129),(r.vbaraw||s["!outline"])&&bt(i,147,ame(o,s["!outline"])),bt(i,148,rme(l)),A0e(i,s,r.Workbook),a0e(i,s),n0e(i,s,t,e),u0e(i,s),c0e(i,s,r,t),i0e(i,s),o0e(i,s,n),s["!margins"]&&bt(i,476,Wme(s["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&s0e(i,s),l0e(i,s,t,n),bt(i,130),i.end()}function h0e(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var s=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);s&&(e[+s[1]]=r?+s[2]:s[2])});var i=Xr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[e,i,n]}function f0e(t,e,r,n,i,a){var s=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,A="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var h=h0e(d);u.s.r=u.s.c=0,u.e.c=o,A=Xn(o),h[0].forEach(function(f,p){s[A+yi(p)]={t:"n",v:f,z:h[1]},l=p}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(s["!ref"]=wr(u)),s}function m0e(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s,o=t.match(h8);return o&&RB(o[0],a,i,r),(s=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=s[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function p0e(t,e){t.l+=10;var r=ka(t);return{name:r}}function g0e(t,e,r,n,i){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s=!1;return vc(t,function(l,A,u){switch(u){case 550:a["!rel"]=l;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),l.name&&(i.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var UB=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],v0e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],w0e=[],b0e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Z4(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],i=0;i!=e.length;++i){var a=e[i];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Rn(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function eF(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Rn(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function g8(t){eF(t.WBProps,UB),eF(t.CalcPr,b0e),Z4(t.WBView,v0e),Z4(t.Sheets,w0e),Mh.date1904=Rn(t.WBProps.date1904)}function y0e(t){return!t.Workbook||!t.Workbook.WBProps?"false":Rn(t.Workbook.WBProps.date1904)?"true":"false"}var x0e="][*?/\\".split("");function v8(t,e){if(t.length>31){if(e)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return x0e.forEach(function(n){if(t.indexOf(n)!=-1){if(!e)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}function _0e(t,e,r){t.forEach(function(n,i){v8(n);for(var a=0;a<i;++a)if(n==t[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=e&&e[i]&&e[i].CodeName||n;if(s.charCodeAt(0)==95&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}})}function E0e(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];_0e(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)yfe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var B0e=/<\w+:workbook/;function C0e(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",a={},s=0;if(t.replace(Ia,function(l,A){var u=hr(l);switch(kl(u[0])){case"<?xml":break;case"<workbook":l.match(B0e)&&(i="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[i];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":UB.forEach(function(d){if(u[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=Rn(u[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(u[d[0]],10);break;default:r.WBProps[d[0]]=u[d[0]]}}),u.codeName&&(r.WBProps.CodeName=bn(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Xr(bn(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=bn(u.name),u.comment&&(a.Comment=u.comment),u.localSheetId&&(a.Sheet=+u.localSheetId),Rn(u.hidden||"0")&&(a.Hidden=!0),s=A+l.length;break;case"</definedName>":a.Ref=Xr(bn(t.slice(s,A))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),wd.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return g8(r),r}function w8(t){var e=[xi];e[e.length]=Ft("workbook",null,{xmlns:wd[0],"xmlns:r":Ui.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(UB.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Ft("workbookPr",null,n);var i=t.Workbook&&t.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!i[a]||!i[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var s={name:mn(t.SheetNames[a].slice(0,31))};if(s.sheetId=""+(a+1),s["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden";break}e[e.length]=Ft("sheet",null,s)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Ft("definedName",mn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function N0e(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Vx(t),r.name=ka(t),r}function S0e(t,e){return e||(e=At(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),xB(t.strRelID,e),qi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function k0e(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var i=e>8?ka(t):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function T0e(t,e){e||(e=At(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),AO(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function I0e(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function F0e(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),a=lle(t),s=mfe(t,0,r),o=yB(t);t.l=n;var l={Name:a,Ptg:s};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function P0e(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;e||(e={}),e.biff=12;var a=[],s=[[]];return s.SheetNames=[],s.XTI=[],rp[16]={n:"BrtFRTArchID$",f:I0e},vc(t,function(l,A,u){switch(u){case 156:s.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=_a(l.Ptg,null,null,s,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:s[0].length?s.push([u,l]):s[0]=[u,l],s[s.length-1].XTI=[];break;case 362:s.length===0&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(l),s.XTI=s.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(u),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!A.T){if(!i||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),g8(r),r.Names=a,r.supbooks=s,r}function L0e(t,e){bt(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,i={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};bt(t,156,S0e(i))}bt(t,144)}function D0e(t,e){e||(e=At(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return qi("SheetJS",e),qi(Dv.version,e),qi(Dv.version,e),qi("7262",e),e.length>e.l?e.slice(0,e.l):e}function R0e(t,e){e||(e=At(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function U0e(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,i=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&i==-1?i=n:r[n].Hidden==1&&a==-1&&(a=n);a>i||(bt(t,135),bt(t,158,R0e(i)),bt(t,136))}}function O0e(t,e){var r=hs();return bt(r,131),bt(r,128,D0e()),bt(r,153,T0e(t.Workbook&&t.Workbook.WBProps||null)),U0e(r,t),L0e(r,t),bt(r,132),r.end()}function M0e(t,e,r){return e.slice(-4)===".bin"?P0e(t,r):C0e(t,r)}function Q0e(t,e,r,n,i,a,s,o){return e.slice(-4)===".bin"?t0e(t,n,r,i,a,s,o):Ffe(t,n,r,i,a,s,o)}function H0e(t,e,r,n,i,a,s,o){return e.slice(-4)===".bin"?g0e(t,n,r,i,a):m0e(t,n,r,i,a)}function V0e(t,e,r,n,i,a,s,o){return e.slice(-4)===".bin"?jde():zde()}function K0e(t,e,r,n,i,a,s,o){return e.slice(-4)===".bin"?Vde():Kde()}function j0e(t,e,r,n){return e.slice(-4)===".bin"?Mue(t,r,n):Nue(t,r,n)}function z0e(t,e,r){return ZO(t,r)}function $0e(t,e,r){return e.slice(-4)===".bin"?$Ae(t,r):KAe(t,r)}function G0e(t,e,r){return e.slice(-4)===".bin"?Ude(t,r):Sde(t,r)}function W0e(t,e,r){return e.slice(-4)===".bin"?Bde(t):_de(t)}function q0e(t,e,r,n){return r.slice(-4)===".bin"?Cde(t,e,r,n):void 0}function X0e(t,e,r){return e.slice(-4)===".bin"?bde(t,e,r):xde(t,e,r)}function Y0e(t,e,r){return(e.slice(-4)===".bin"?O0e:w8)(t)}function J0e(t,e,r,n,i){return(e.slice(-4)===".bin"?d0e:f8)(t,r,n,i)}function Z0e(t,e,r){return(e.slice(-4)===".bin"?que:YO)(t,r)}function epe(t,e,r){return(e.slice(-4)===".bin"?qAe:KO)(t,r)}function tpe(t,e,r){return(e.slice(-4)===".bin"?Ode:r8)(t)}function rpe(t){return(t.slice(-4)===".bin"?yde:e8)()}var b8=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,y8=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function So(t,e){var r=t.split(/\s+/),n=[];if(e||(n[0]=r[0]),r.length===1)return n;var i=t.match(b8),a,s,o,l;if(i)for(l=0;l!=i.length;++l)a=i[l].match(y8),(s=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),n[o]=a[2].slice(1,a[2].length-1));return n}function npe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(b8),i,a,s,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(y8),(a=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?s="xmlns"+i[1].slice(6):s=i[1].slice(a+1),r[s]=i[2].slice(1,i[2].length-1));return r}var h0;function ipe(t,e){var r=h0[t]||Xr(t);return r==="General"?ed(e):po(r,e)}function ape(t,e,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Rn(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=Qn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Xr(e)]=i}function spe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||wc[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=G0(t.v):t.w=ed(t.v):t.w=ipe(e||"General",t.v)}catch(a){if(r.WTF)throw a}try{var n=h0[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Pf(n)){var i=_u(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(a){if(r.WTF)throw a}}}function ope(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=wue[n.Pattern]||n.Pattern)}t[e.ID]=e}function lpe(t,e,r,n,i,a,s,o,l,A){var u="General",d=n.StyleID,h={};A=A||{};var f=[],p=0;for(d===void 0&&o&&(d=o.StyleID),d===void 0&&s&&(d=s.StyleID);a[d]!==void 0&&(a[d].nf&&(u=a[d].nf),a[d].Interior&&f.push(a[d].Interior),!!a[d].Parent);)d=a[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Rn(t);break;case"String":n.t="s",n.r=g4(Xr(t)),n.v=t.indexOf("<")>-1?Xr(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Qn(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Xr(t):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=mO[t],A.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=g4(e||t));break}if(spe(n,u,A),A.cellFormula!==!1)if(n.Formula){var g=Xr(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=Oh(g,i),delete n.Formula,n.ArrayRange=="RC"?n.F=Oh("RC:RC",i):n.ArrayRange&&(n.F=Oh(n.ArrayRange,i),l.push([Yr(n.F),n.F]))}else for(p=0;p<l.length;++p)i.r>=l[p][0].s.r&&i.r<=l[p][0].e.r&&i.c>=l[p][0].s.c&&i.c<=l[p][0].e.c&&(n.F=l[p][1]);A.cellStyles&&(f.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function cpe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function r2(t,e){var r=e||{};Lf();var n=Lm(mB(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=bn(n));var i=n.slice(0,1024).toLowerCase(),a=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var s=Hn(r);return s.type="string",hf.to_workbook(n,s)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ue){i.indexOf("<"+Ue)>=0&&(a=!0)}),a)return Wpe(n,r);h0={"General Number":"General","General Date":lr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":lr[15],"Short Date":lr[14],"Long Time":lr[19],"Medium Time":lr[18],"Short Time":lr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:lr[2],Standard:lr[4],Percent:lr[10],Scientific:lr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],A,u={},d=[],h=r.dense?[]:{},f="",p={},g={},v=So('<Data ss:Type="String">'),C=0,I=0,F=0,E={s:{r:2e6,c:2e6},e:{r:0,c:0}},R={},L={},N="",P=0,x=[],k={},y={},S=0,_=[],M=[],K={},z=[],ae,te=!1,G=[],ue=[],de={},T=0,O=0,V={Sheets:[],WBProps:{date1904:!1}},Q={};X0.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var X="";o=X0.exec(n);)switch(o[3]=(X=o[3]).toLowerCase()){case"data":if(X=="data"){if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?lpe(n.slice(C,o.index),N,v,l[l.length-1][0]=="comment"?K:p,{c:I,r:F},R,z[I],g,G,r):(N="",v=So(o[0]),C=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(M.length>0&&(p.c=M),(!r.sheetRows||r.sheetRows>F)&&p.v!==void 0&&(r.dense?(h[F]||(h[F]=[]),h[F][I]=p):h[Xn(I)+yi(F)]=p),p.HRef&&(p.l={Target:Xr(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(T=I+(parseInt(p.MergeAcross,10)|0),O=F+(parseInt(p.MergeDown,10)|0),x.push({s:{c:I,r:F},e:{c:T,r:O}})),!r.sheetStubs)p.MergeAcross?I=T+1:++I;else if(p.MergeAcross||p.MergeDown){for(var ie=I;ie<=T;++ie)for(var ee=F;ee<=O;++ee)(ie>I||ee>F)&&(r.dense?(h[ee]||(h[ee]=[]),h[ee][ie]={t:"z"}):h[Xn(ie)+yi(ee)]={t:"z"});I=T+1}else++I;else p=npe(o[0]),p.Index&&(I=+p.Index-1),I<E.s.c&&(E.s.c=I),I>E.e.c&&(E.e.c=I),o[0].slice(-2)==="/>"&&++I,M=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(F<E.s.r&&(E.s.r=F),F>E.e.r&&(E.e.r=F),o[0].slice(-2)==="/>"&&(g=So(o[0]),g.Index&&(F=+g.Index-1)),I=0,++F):(g=So(o[0]),g.Index&&(F=+g.Index-1),de={},(g.AutoFitHeight=="0"||g.Height)&&(de.hpx=parseInt(g.Height,10),de.hpt=tp(de.hpx),ue[F]=de),g.Hidden=="1"&&(de.hidden=!0,ue[F]=de));break;case"worksheet":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"));d.push(f),E.s.r<=E.e.r&&E.s.c<=E.e.c&&(h["!ref"]=wr(E),r.sheetRows&&r.sheetRows<=E.e.r&&(h["!fullref"]=h["!ref"],E.e.r=r.sheetRows-1,h["!ref"]=wr(E))),x.length&&(h["!merges"]=x),z.length>0&&(h["!cols"]=z),ue.length>0&&(h["!rows"]=ue),u[f]=h}else E={s:{r:2e6,c:2e6},e:{r:0,c:0}},F=I=0,l.push([o[3],!1]),A=So(o[0]),f=Xr(A.Name),h=r.dense?[]:{},x=[],G=[],ue=[],Q={name:f,Hidden:0},V.Sheets.push(Q);break;case"table":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),z=[],te=!1}break;case"style":o[1]==="/"?ope(R,L,r):L=So(o[0]);break;case"numberformat":L.nf=Xr(So(o[0]).Format||"General"),h0[L.nf]&&(L.nf=h0[L.nf]);for(var Z=0;Z!=392&&lr[Z]!=L.nf;++Z);if(Z==392){for(Z=57;Z!=392;++Z)if(lr[Z]==null){rc(L.nf,Z);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(ae=So(o[0]),ae.Hidden&&(ae.hidden=!0,delete ae.Hidden),ae.Width&&(ae.wpx=parseInt(ae.Width,10)),!te&&ae.wpx>10){te=!0,Ea=qO;for(var re=0;re<z.length;++re)z[re]&&FA(z[re])}te&&FA(ae),z[ae.Index-1||z.length]=ae;for(var ce=0;ce<+ae.Span;++ce)z[z.length]=Hn(ae);break;case"namedrange":if(o[1]==="/")break;V.Names||(V.Names=[]);var Y=hr(o[0]),ge={Name:Y.Name,Ref:Oh(Y.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(ge.Sheet=V.Sheets.length-1),V.Names.push(ge);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?N+=n.slice(P,o.index):P=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;L.Interior=So(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Ple(k,X,n.slice(S,o.index)):S=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"));cpe(K),M.push(K)}else l.push([o[3],!1]),A=So(o[0]),K={a:A.Author};break;case"autofilter":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var q=So(o[0]);h["!autofilter"]={ref:Oh(q.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((A=l.pop())[0]!==o[3])throw new Error("Bad state: "+A.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return aF(n,r);var W=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:W=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:W=!1}break;case"excelworkbook":switch(o[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:W=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:W=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(S,o.index)){case"SheetHidden":Q.Hidden=1;break;case"SheetVeryHidden":Q.Hidden=2;break}else S=o.index+o[0].length;break;case"header":h["!margins"]||Du(h["!margins"]={},"xlml"),isNaN(+hr(o[0]).Margin)||(h["!margins"].header=+hr(o[0]).Margin);break;case"footer":h["!margins"]||Du(h["!margins"]={},"xlml"),isNaN(+hr(o[0]).Margin)||(h["!margins"].footer=+hr(o[0]).Margin);break;case"pagemargins":var xe=hr(o[0]);h["!margins"]||Du(h["!margins"]={},"xlml"),isNaN(+xe.Top)||(h["!margins"].top=+xe.Top),isNaN(+xe.Left)||(h["!margins"].left=+xe.Left),isNaN(+xe.Right)||(h["!margins"].right=+xe.Right),isNaN(+xe.Bottom)||(h["!margins"].bottom=+xe.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:W=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:W=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:W=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:W=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:W=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:W=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:W=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:W=!1}break;case"smarttags":break;default:W=!1;break}if(W||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?ape(y,X,_,n.slice(S,o.index)):(_=o,S=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ye={};return!r.bookSheets&&!r.bookProps&&(ye.Sheets=u),ye.SheetNames=d,ye.Workbook=V,ye.SSF=Hn(lr),ye.Props=k,ye.Custprops=y,ye}function qx(t,e){switch(MB(e=e||{}),e.type||"base64"){case"base64":return r2(zs(t),e);case"binary":case"buffer":case"file":return r2(t,e);case"array":return r2(jA(t),e)}}function Ape(t,e){var r=[];return t.Props&&r.push(Lle(t.Props,e)),t.Custprops&&r.push(Dle(t.Props,t.Custprops)),r.join("")}function upe(){return""}function dpe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var a=[];a.push(Ft("NumberFormat",null,{"ss:Format":mn(lr[n.numFmtId])}));var s={"ss:ID":"s"+(21+i)};r.push(Ft("Style",a.join(""),s))}),Ft("Styles",r.join(""))}function x8(t){return Ft("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+PB(t.Ref,{r:0,c:0})})}function hpe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||r.push(x8(i)))}return Ft("Names",r.join(""))}function fpe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,a=[],s=0;s<i.length;++s){var o=i[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(x8(o)))}return a.join("")}function mpe(t,e,r,n){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Ft("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Ft("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Ft("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(Ft("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(ca("ProtectContents","True")),t["!protect"].objects&&i.push(ca("ProtectObjects","True")),t["!protect"].scenarios&&i.push(ca("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(ca("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(ca("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(s){t["!protect"][s[0]]&&i.push("<"+s[1]+"/>")})),i.length==0?"":Ft("WorksheetOptions",i.join(""),{xmlns:Ps.x})}function ppe(t){return t.map(function(e){var r=Uoe(e.t||""),n=Ft("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ft("Comment",n,{"ss:Author":e.a})}).join("")}function gpe(t,e,r,n,i,a,s){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+mn(PB(t.f,s))),t.F&&t.F.slice(0,e.length)==e){var l=Yn(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==s.r?"":"["+(l.r-s.r)+"]")+"C"+(l.c==s.c?"":"["+(l.c-s.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=mn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=mn(t.l.Tooltip))),r["!merges"])for(var A=r["!merges"],u=0;u!=A.length;++u)A[u].s.c!=s.c||A[u].s.r!=s.r||(A[u].e.c>A[u].s.c&&(o["ss:MergeAcross"]=A[u].e.c-A[u].s.c),A[u].e.r>A[u].s.r&&(o["ss:MergeDown"]=A[u].e.r-A[u].s.r));var d="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",h=String(t.v);break;case"b":d="Boolean",h=t.v?"1":"0";break;case"e":d="Error",h=wc[t.v];break;case"d":d="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||lr[14]);break;case"s":d="String",h=Roe(t.v||"");break}var f=$A(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=s.c+1;var p=t.v!=null?h:"",g=t.t=="z"?"":'<Data ss:Type="'+d+'">'+p+"</Data>";return(t.c||[]).length>0&&(g+=ppe(t.c)),Ft("Cell",g,o)}function vpe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=ff(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function wpe(t,e,r,n){if(!t["!ref"])return"";var i=Yr(t["!ref"]),a=t["!merges"]||[],s=0,o=[];t["!cols"]&&t["!cols"].forEach(function(v,C){FA(v);var I=!!v.width,F=ob(C,v),E={"ss:Index":C+1};I&&(E["ss:Width"]=Z0(F.width)),v.hidden&&(E["ss:Hidden"]="1"),o.push(Ft("Column",null,E))});for(var l=Array.isArray(t),A=i.s.r;A<=i.e.r;++A){for(var u=[vpe(A,(t["!rows"]||[])[A])],d=i.s.c;d<=i.e.c;++d){var h=!1;for(s=0;s!=a.length;++s)if(!(a[s].s.c>d)&&!(a[s].s.r>A)&&!(a[s].e.c<d)&&!(a[s].e.r<A)){(a[s].s.c!=d||a[s].s.r!=A)&&(h=!0);break}if(!h){var f={r:A,c:d},p=Ar(f),g=l?(t[A]||[])[d]:t[p];u.push(gpe(g,p,t,e,r,n,f))}}u.push("</Row>"),u.length>2&&o.push(u.join(""))}return o.join("")}function bpe(t,e,r){var n=[],i=r.SheetNames[t],a=r.Sheets[i],s=a?fpe(a,e,t,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=a?wpe(a,e,t,r):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(mpe(a,e,t,r)),n.join("")}function ype(t,e){e||(e={}),t.SSF||(t.SSF=Hn(lr)),t.SSF&&(Lf(),eb(t.SSF),e.revssf=rb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],$A(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Ape(t,e)),r.push(upe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Ft("Worksheet",bpe(n,e,t),{"ss:Name":mn(t.SheetNames[n])}));return r[2]=dpe(t,e),r[3]=hpe(t),xi+Ft("Workbook",r.join(""),{xmlns:Ps.ss,"xmlns:o":Ps.o,"xmlns:x":Ps.x,"xmlns:ss":Ps.ss,"xmlns:dt":Ps.dt,"xmlns:html":Ps.html})}function xpe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=hle(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=fle(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var _pe=[60,1084,2066,2165,2175];function Epe(t,e,r,n,i){var a=n,s=[],o=r.slice(r.l,r.l+a);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}s.push(o),r.l+=a;for(var l=Jl(r,r.l),A=Xx[l],u=0;A!=null&&_pe.indexOf(l)>-1;)a=Jl(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+a),s.push(o),r.l+=4+a,A=Xx[l=Jl(r,r.l)];var d=Wi(s);oa(d,0);var h=0;d.lens=[];for(var f=0;f<s.length;++f)d.lens.push(h),h+=s[f].length;if(d.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+d.length+" < "+n;return e.f(d,d.length,i)}function rl(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=lr[n])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||wc[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=G0(t.v):t.w=ed(t.v):t.w=po(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&n&&t.t=="n"&&Pf(lr[n]||String(n))){var i=_u(t.v);i&&(t.t="d",t.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function l1(t,e,r){return{v:t,ixfe:e,t:r}}function Bpe(t,e){var r={opts:{}},n={},i=e.dense?[]:{},a={},s={},o=null,l=[],A="",u={},d,h="",f,p,g,v,C={},I=[],F,E,R=[],L=[],N={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},x=function(ve){return ve<8?Fu[ve]:ve<64&&L[ve-8]||Fu[ve]},k=function(ve,Ce,Ke){var Ve=Ce.XF.data;if(!(!Ve||!Ve.patternType||!Ke||!Ke.cellStyles)){Ce.s={},Ce.s.patternType=Ve.patternType;var ot;(ot=J0(x(Ve.icvFore)))&&(Ce.s.fgColor={rgb:ot}),(ot=J0(x(Ve.icvBack)))&&(Ce.s.bgColor={rgb:ot})}},y=function(ve,Ce,Ke){if(!(de>1)&&!(Ke.sheetRows&&ve.r>=Ke.sheetRows)){if(Ke.cellStyles&&Ce.XF&&Ce.XF.data&&k(ve,Ce,Ke),delete Ce.ixfe,delete Ce.XF,d=ve,h=Ar(ve),(!s||!s.s||!s.e)&&(s={s:{r:0,c:0},e:{r:0,c:0}}),ve.r<s.s.r&&(s.s.r=ve.r),ve.c<s.s.c&&(s.s.c=ve.c),ve.r+1>s.e.r&&(s.e.r=ve.r+1),ve.c+1>s.e.c&&(s.e.c=ve.c+1),Ke.cellFormula&&Ce.f){for(var Ve=0;Ve<I.length;++Ve)if(!(I[Ve][0].s.c>ve.c||I[Ve][0].s.r>ve.r)&&!(I[Ve][0].e.c<ve.c||I[Ve][0].e.r<ve.r)){Ce.F=wr(I[Ve][0]),(I[Ve][0].s.c!=ve.c||I[Ve][0].s.r!=ve.r)&&delete Ce.f,Ce.f&&(Ce.f=""+_a(I[Ve][1],s,ve,G,S));break}}Ke.dense?(i[ve.r]||(i[ve.r]=[]),i[ve.r][ve.c]=Ce):i[h]=Ce}},S={enc:!1,sbcch:0,snames:[],sharedf:C,arrayf:I,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(S.password=e.password);var _,M=[],K=[],z=[],ae=[],te=!1,G=[];G.SheetNames=S.snames,G.sharedf=S.sharedf,G.arrayf=S.arrayf,G.names=[],G.XTI=[];var ue=0,de=0,T=0,O=[],V=[],Q;S.codepage=1200,Po(1200);for(var X=!1;t.l<t.length-1;){var ie=t.l,ee=t.read_shift(2);if(ee===0&&ue===10)break;var Z=t.l===t.length?0:t.read_shift(2),re=Xx[ee];if(re&&re.f){if(e.bookSheets&&ue===133&&ee!==133)break;if(ue=ee,re.r===2||re.r==12){var ce=t.read_shift(2);if(Z-=2,!S.enc&&ce!==ee&&((ce&255)<<8|ce>>8)!==ee)throw new Error("rt mismatch: "+ce+"!="+ee);re.r==12&&(t.l+=10,Z-=10)}var Y={};if(ee===10?Y=re.f(t,Z,S):Y=Epe(ee,re,t,Z,S),de==0&&[9,521,1033,2057].indexOf(ue)===-1)continue;switch(ee){case 34:r.opts.Date1904=N.WBProps.date1904=Y;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(S.enc||(t.l=0),S.enc=Y,!e.password)throw new Error("File is password-protected");if(Y.valid==null)throw new Error("Encryption scheme unsupported");if(!Y.valid)throw new Error("Password is incorrect");break;case 92:S.lastuser=Y;break;case 66:var ge=Number(Y);switch(ge){case 21010:ge=1200;break;case 32768:ge=1e4;break;case 32769:ge=1252;break}Po(S.codepage=ge),X=!0;break;case 317:S.rrtabid=Y;break;case 25:S.winlocked=Y;break;case 439:r.opts.RefreshAll=Y;break;case 12:r.opts.CalcCount=Y;break;case 16:r.opts.CalcDelta=Y;break;case 17:r.opts.CalcIter=Y;break;case 13:r.opts.CalcMode=Y;break;case 14:r.opts.CalcPrecision=Y;break;case 95:r.opts.CalcSaveRecalc=Y;break;case 15:S.CalcRefMode=Y;break;case 2211:r.opts.FullCalc=Y;break;case 129:Y.fDialog&&(i["!type"]="dialog"),Y.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),Y.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:R.push(Y);break;case 430:G.push([Y]),G[G.length-1].XTI=[];break;case 35:case 547:G[G.length-1].push(Y);break;case 24:case 536:Q={Name:Y.Name,Ref:_a(Y.rgce,s,null,G,S)},Y.itab>0&&(Q.Sheet=Y.itab-1),G.names.push(Q),G[0]||(G[0]=[],G[0].XTI=[]),G[G.length-1].push(Y),Y.Name=="_xlnm._FilterDatabase"&&Y.itab>0&&Y.rgce&&Y.rgce[0]&&Y.rgce[0][0]&&Y.rgce[0][0][0]=="PtgArea3d"&&(V[Y.itab-1]={ref:wr(Y.rgce[0][0][1][2])});break;case 22:S.ExternCount=Y;break;case 23:G.length==0&&(G[0]=[],G[0].XTI=[]),G[G.length-1].XTI=G[G.length-1].XTI.concat(Y),G.XTI=G.XTI.concat(Y);break;case 2196:if(S.biff<8)break;Q!=null&&(Q.Comment=Y[1]);break;case 18:i["!protect"]=Y;break;case 19:Y!==0&&S.WTF&&console.error("Password verifier: "+Y);break;case 133:a[Y.pos]=Y,S.snames.push(Y.name);break;case 10:{if(--de)break;if(s.e){if(s.e.r>0&&s.e.c>0){if(s.e.r--,s.e.c--,i["!ref"]=wr(s),e.sheetRows&&e.sheetRows<=s.e.r){var q=s.e.r;s.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=wr(s),s.e.r=q}s.e.r++,s.e.c++}M.length>0&&(i["!merges"]=M),K.length>0&&(i["!objects"]=K),z.length>0&&(i["!cols"]=z),ae.length>0&&(i["!rows"]=ae),N.Sheets.push(P)}A===""?u=i:n[A]=i,i=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(S.biff===8&&(S.biff={9:2,521:3,1033:4}[ee]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Y.BIFFVer]||8),S.biffguess=Y.BIFFVer==0,Y.BIFFVer==0&&Y.dt==4096&&(S.biff=5,X=!0,Po(S.codepage=28591)),S.biff==8&&Y.BIFFVer==0&&Y.dt==16&&(S.biff=2),de++)break;if(i=e.dense?[]:{},S.biff<8&&!X&&(X=!0,Po(S.codepage=e.codepage||1252)),S.biff<5||Y.BIFFVer==0&&Y.dt==4096){A===""&&(A="Sheet1"),s={s:{r:0,c:0},e:{r:0,c:0}};var W={pos:t.l-Z,name:A};a[W.pos]=W,S.snames.push(A)}else A=(a[ie]||{name:""}).name;Y.dt==32&&(i["!type"]="chart"),Y.dt==64&&(i["!type"]="macro"),M=[],K=[],S.arrayf=I=[],z=[],ae=[],te=!1,P={Hidden:(a[ie]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i[Y.r]||[])[Y.c]:i[Ar({c:Y.c,r:Y.r})])&&++Y.c,F={ixfe:Y.ixfe,XF:R[Y.ixfe]||{},v:Y.val,t:"n"},T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y({c:Y.c,r:Y.r},F,e);break;case 5:case 517:F={ixfe:Y.ixfe,XF:R[Y.ixfe],v:Y.val,t:Y.t},T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y({c:Y.c,r:Y.r},F,e);break;case 638:F={ixfe:Y.ixfe,XF:R[Y.ixfe],v:Y.rknum,t:"n"},T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y({c:Y.c,r:Y.r},F,e);break;case 189:for(var xe=Y.c;xe<=Y.C;++xe){var ye=Y.rkrec[xe-Y.c][0];F={ixfe:ye,XF:R[ye],v:Y.rkrec[xe-Y.c][1],t:"n"},T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y({c:xe,r:Y.r},F,e)}break;case 6:case 518:case 1030:{if(Y.val=="String"){o=Y;break}if(F=l1(Y.val,Y.cell.ixfe,Y.tt),F.XF=R[F.ixfe],e.cellFormula){var Ue=Y.formula;if(Ue&&Ue[0]&&Ue[0][0]&&Ue[0][0][0]=="PtgExp"){var Me=Ue[0][0][1][0],$e=Ue[0][0][1][1],fe=Ar({r:Me,c:$e});C[fe]?F.f=""+_a(Y.formula,s,Y.cell,G,S):F.F=((e.dense?(i[Me]||[])[$e]:i[fe])||{}).F}else F.f=""+_a(Y.formula,s,Y.cell,G,S)}T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y(Y.cell,F,e),o=Y}break;case 7:case 519:if(o)o.val=Y,F=l1(Y,o.cell.ixfe,"s"),F.XF=R[F.ixfe],e.cellFormula&&(F.f=""+_a(o.formula,s,o.cell,G,S)),T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y(o.cell,F,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{I.push(Y);var Oe=Ar(Y[0].s);if(f=e.dense?(i[Y[0].s.r]||[])[Y[0].s.c]:i[Oe],e.cellFormula&&f){if(!o||!Oe||!f)break;f.f=""+_a(Y[1],s,Y[0],G,S),f.F=wr(Y[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!o)break;C[Ar(o.cell)]=Y[0],f=e.dense?(i[o.cell.r]||[])[o.cell.c]:i[Ar(o.cell)],(f||{}).f=""+_a(Y[0],s,d,G,S)}}break;case 253:F=l1(l[Y.isst].t,Y.ixfe,"s"),l[Y.isst].h&&(F.h=l[Y.isst].h),F.XF=R[F.ixfe],T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y({c:Y.c,r:Y.r},F,e);break;case 513:e.sheetStubs&&(F={ixfe:Y.ixfe,XF:R[Y.ixfe],t:"z"},T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y({c:Y.c,r:Y.r},F,e));break;case 190:if(e.sheetStubs)for(var Re=Y.c;Re<=Y.C;++Re){var He=Y.ixfe[Re-Y.c];F={ixfe:He,XF:R[He],t:"z"},T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y({c:Re,r:Y.r},F,e)}break;case 214:case 516:case 4:F=l1(Y.val,Y.ixfe,"s"),F.XF=R[F.ixfe],T>0&&(F.z=O[F.ixfe>>8&63]),rl(F,e,r.opts.Date1904),y({c:Y.c,r:Y.r},F,e);break;case 0:case 512:de===1&&(s=Y);break;case 252:l=Y;break;case 1054:if(S.biff==4){O[T++]=Y[1];for(var pe=0;pe<T+163&&lr[pe]!=Y[1];++pe);pe>=163&&rc(Y[1],T+163)}else rc(Y[1],Y[0]);break;case 30:{O[T++]=Y;for(var Le=0;Le<T+163&&lr[Le]!=Y;++Le);Le>=163&&rc(Y,T+163)}break;case 229:M=M.concat(Y);break;case 93:K[Y.cmo[0]]=S.lastobj=Y;break;case 438:S.lastobj.TxO=Y;break;case 127:S.lastobj.ImData=Y;break;case 440:for(v=Y[0].s.r;v<=Y[0].e.r;++v)for(g=Y[0].s.c;g<=Y[0].e.c;++g)f=e.dense?(i[v]||[])[g]:i[Ar({c:g,r:v})],f&&(f.l=Y[1]);break;case 2048:for(v=Y[0].s.r;v<=Y[0].e.r;++v)for(g=Y[0].s.c;g<=Y[0].e.c;++g)f=e.dense?(i[v]||[])[g]:i[Ar({c:g,r:v})],f&&f.l&&(f.l.Tooltip=Y[1]);break;case 28:{if(S.biff<=5&&S.biff>=2)break;f=e.dense?(i[Y[0].r]||[])[Y[0].c]:i[Ar(Y[0])];var lt=K[Y[2]];f||(e.dense?(i[Y[0].r]||(i[Y[0].r]=[]),f=i[Y[0].r][Y[0].c]={t:"z"}):f=i[Ar(Y[0])]={t:"z"},s.e.r=Math.max(s.e.r,Y[0].r),s.s.r=Math.min(s.s.r,Y[0].r),s.e.c=Math.max(s.e.c,Y[0].c),s.s.c=Math.min(s.s.c,Y[0].c)),f.c||(f.c=[]),p={a:Y[1],t:lt.TxO.t},f.c.push(p)}break;case 2173:dde(R[Y.ixfe],Y.ext);break;case 125:{if(!S.cellStyles)break;for(;Y.e>=Y.s;)z[Y.e--]={width:Y.w/256,level:Y.level||0,hidden:!!(Y.flags&1)},te||(te=!0,TB(Y.w/256)),FA(z[Y.e+1])}break;case 520:{var Ae={};Y.level!=null&&(ae[Y.r]=Ae,Ae.level=Y.level),Y.hidden&&(ae[Y.r]=Ae,Ae.hidden=!0),Y.hpt&&(ae[Y.r]=Ae,Ae.hpt=Y.hpt,Ae.hpx=ff(Y.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Du(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ee]]=Y;break;case 161:i["!margins"]||Du(i["!margins"]={}),i["!margins"].header=Y.header,i["!margins"].footer=Y.footer;break;case 574:Y.RTL&&(N.Views[0].RTL=!0);break;case 146:L=Y;break;case 2198:_=Y;break;case 140:E=Y;break;case 442:A?P.CodeName=Y||P.name:N.WBProps.CodeName=Y||"ThisWorkbook";break}}else re||console.error("Missing Info for XLS Record 0x"+ee.toString(16)),t.l+=Z}return r.SheetNames=si(a).sort(function(Ne,ve){return Number(Ne)-Number(ve)}).map(function(Ne){return a[Ne].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&V.forEach(function(Ne,ve){r.Sheets[r.SheetNames[ve]]["!autofilter"]=Ne}),r.Strings=l,r.SSF=Hn(lr),S.enc&&(r.Encryption=S.enc),_&&(r.Themes=_),r.Metadata={},E!==void 0&&(r.Metadata.Country=E),G.names.length>0&&(N.Names=G.names),r.Workbook=N,r}var f0={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Cpe(t,e,r){var n=ir.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=D4(n,Kx,f0.DSI);for(var a in i)e[a]=i[a]}catch(A){if(r.WTF)throw A}var s=ir.find(t,"/!SummaryInformation");if(s&&s.size>0)try{var o=D4(s,jx,f0.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(A){if(r.WTF)throw A}e.HeadingPairs&&e.TitlesOfParts&&(yO(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function Npe(t,e){var r=[],n=[],i=[],a=0,s,o=u4(Kx,"n"),l=u4(jx,"n");if(t.Props)for(s=si(t.Props),a=0;a<s.length;++a)(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],t.Props[s[a]]]);if(t.Custprops)for(s=si(t.Custprops),a=0;a<s.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},s[a])||(Object.prototype.hasOwnProperty.call(o,s[a])?r:Object.prototype.hasOwnProperty.call(l,s[a])?n:i).push([s[a],t.Custprops[s[a]]]);var A=[];for(a=0;a<i.length;++a)SO.indexOf(i[a][0])>-1||bO.indexOf(i[a][0])>-1||i[a][1]!=null&&A.push(i[a]);n.length&&ir.utils.cfb_add(e,"/SummaryInformation",R4(n,f0.SI,l,jx)),(r.length||A.length)&&ir.utils.cfb_add(e,"/DocumentSummaryInformation",R4(r,f0.DSI,o,Kx,A.length?A:null,f0.UDI))}function _8(t,e){e||(e={}),MB(e),sB(),e.codepage&&aB(e.codepage);var r,n;if(t.FullPaths){if(ir.find(t,"/encryption"))throw new Error("File is password-protected");r=ir.find(t,"!CompObj"),n=ir.find(t,"/Workbook")||ir.find(t,"/Book")}else{switch(e.type){case"base64":t=Us(zs(t));break;case"binary":t=Us(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}oa(t,0),n={content:t}}var i,a;if(r&&xpe(r),e.bookProps&&!e.bookSheets)i={};else{var s=Br?"buffer":"array";if(n&&n.content)i=Bpe(n.content,e);else if((a=ir.find(t,"PerfectOffice_MAIN"))&&a.content)i=Lu.to_workbook(a.content,(e.type=s,e));else if((a=ir.find(t,"NativeContent_MAIN"))&&a.content)i=Lu.to_workbook(a.content,(e.type=s,e));else throw(a=ir.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&ir.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=Qde(t))}var o={};return t.FullPaths&&Cpe(t,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=t),i}function Spe(t,e){var r=e||{},n=ir.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return ir.utils.cfb_add(n,i,E8(t,r)),r.biff==8&&(t.Props||t.Custprops)&&Npe(t,n),r.biff==8&&t.vbaraw&&Hde(n,ir.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var rp={0:{f:Jfe},1:{f:sme},2:{f:Bme},3:{f:fme},4:{f:Ame},5:{f:xme},6:{f:Tme},7:{f:vme},8:{f:Ume},9:{f:Rme},10:{f:Lme},11:{f:Dme},12:{f:lme},13:{f:Nme},14:{f:pme},15:{f:dme},16:{f:m8},17:{f:Fme},18:{f:bme},19:{f:bB},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:F0e},40:{},42:{},43:{f:Tue},44:{f:Sue},45:{f:Pue},46:{f:Due},47:{f:Lue},48:{},49:{f:tle},50:{},51:{f:mde},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:MO},62:{f:kme},63:{f:Ede},64:{f:Zme},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ta,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:qme},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ime},148:{f:tme,p:16},151:{f:Kme},152:{},153:{f:k0e},154:{},155:{},156:{f:N0e},157:{},158:{},159:{T:1,f:zAe},160:{T:-1},161:{T:1,f:_d},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Ome},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:hde},336:{T:-1},337:{f:vde,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Vx},357:{},358:{},359:{},360:{T:1},361:{},362:{f:OO},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:jme},427:{f:zme},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Gme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:nme},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Hme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Vx},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Dde},633:{T:1},634:{T:-1},635:{T:1,f:Pde},636:{T:-1},637:{f:ale},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:p0e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:e0e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Xx={6:{f:e2},10:{f:Mc},12:{f:Ni},13:{f:Ni},14:{f:fi},15:{f:fi},16:{f:Ba},17:{f:fi},18:{f:fi},19:{f:Ni},20:{f:V4},21:{f:V4},23:{f:OO},24:{f:j4},25:{f:fi},26:{},27:{},28:{f:eAe},29:{},34:{f:fi},35:{f:K4},38:{f:Ba},39:{f:Ba},40:{f:Ba},41:{f:Ba},42:{f:fi},43:{f:fi},47:{f:due},49:{f:Nce},51:{f:Ni},60:{},61:{f:xce},64:{f:fi},65:{f:Cce},66:{f:Ni},77:{},80:{},81:{},82:{},85:{f:Ni},89:{},90:{},91:{},92:{f:uce},93:{f:nAe},94:{},95:{f:fi},96:{},97:{},99:{f:fi},125:{f:MO},128:{f:Vce},129:{f:hce},130:{f:Ni},131:{f:fi},132:{f:fi},133:{f:fce},134:{},140:{f:uAe},141:{f:Ni},144:{},146:{f:fAe},151:{},152:{},153:{},154:{},155:{},156:{f:Ni},157:{},158:{},160:{f:yAe},161:{f:gAe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Oce},190:{f:Mce},193:{f:Mc},197:{},198:{},199:{},200:{},201:{},202:{f:fi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ni},220:{},221:{f:fi},222:{},224:{f:Hce},225:{f:Ace},226:{f:Mc},227:{},229:{f:tAe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:pce},253:{f:kce},255:{f:vce},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:kO},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:fi},353:{f:Mc},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Gce},431:{f:fi},432:{},433:{},434:{},437:{},438:{f:sAe},439:{f:fi},440:{f:oAe},441:{},442:{f:Op},443:{},444:{f:Ni},445:{},446:{},448:{f:Mc},449:{f:yce,r:2},450:{f:Mc},512:{f:M4},513:{f:bAe},515:{f:zce},516:{f:Ice},517:{f:H4},519:{f:xAe},520:{f:wce},523:{},545:{f:z4},549:{f:O4},566:{},574:{f:Ece},638:{f:Uce},659:{},1048:{},1054:{f:Pce},1084:{},1212:{f:Yce},2048:{f:cAe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:a1},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Mc},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:mAe,r:12},2173:{f:ude,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:fi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Xce,r:12},2197:{},2198:{f:ade,r:12},2199:{},2200:{},2201:{},2202:{f:Jce,r:12},2203:{f:Mc},2204:{},2205:{},2206:{},2207:{},2211:{f:bce},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ni},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:vAe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:hAe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:M4},1:{},2:{f:NAe},3:{f:BAe},4:{f:EAe},5:{f:H4},7:{f:kAe},8:{},9:{f:a1},11:{},22:{f:Ni},30:{f:Dce},31:{},32:{},33:{f:z4},36:{},37:{f:O4},50:{f:TAe},62:{},52:{},67:{},68:{f:Ni},69:{},86:{},126:{},127:{f:_Ae},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:IAe},223:{},234:{},354:{},421:{},518:{f:e2},521:{f:a1},536:{f:j4},547:{f:K4},561:{},579:{},1030:{f:e2},1033:{f:a1},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Pt(t,e,r,n){var i=e;if(!isNaN(i)){var a=n||(r||[]).length||0,s=t.next(4);s.write_shift(2,i),s.write_shift(2,a),a>0&&gB(r)&&t.push(r)}}function kpe(t,e,r,n){var i=n||(r||[]).length||0;if(i<=8224)return Pt(t,e,r,i);var a=e;if(!isNaN(a)){for(var s=r.parts||[],o=0,l=0,A=0;A+(s[o]||8224)<=8224;)A+=s[o]||8224,o++;var u=t.next(4);for(u.write_shift(2,a),u.write_shift(2,A),t.push(r.slice(l,l+A)),l+=A;l<i;){for(u=t.next(4),u.write_shift(2,60),A=0;A+(s[o]||8224)<=8224;)A+=s[o]||8224,o++;u.write_shift(2,A),t.push(r.slice(l,l+A)),l+=A}}}function Vp(t,e,r){return t||(t=At(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Tpe(t,e,r,n){var i=At(9);return Vp(i,t,e),TO(r,n||"b",i),i}function Ipe(t,e,r){var n=At(8+2*r.length);return Vp(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Fpe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Qi(Qn(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Pt(t,2,SAe(r,n,i)):Pt(t,3,CAe(r,n,i));return;case"b":case"e":Pt(t,5,Tpe(r,n,e.v,e.t));return;case"s":case"str":Pt(t,4,Ipe(r,n,(e.v||"").slice(0,255)));return}Pt(t,1,Vp(null,r,n))}function Ppe(t,e,r,n){var i=Array.isArray(e),a=Yr(e["!ref"]||"A1"),s,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),s=wr(a)}for(var A=a.s.r;A<=a.e.r;++A){o=yi(A);for(var u=a.s.c;u<=a.e.c;++u){A===a.s.r&&(l[u]=Xn(u)),s=l[u]+o;var d=i?(e[A]||[])[u]:e[s];d&&Fpe(t,d,A,u)}}}function Lpe(t,e){for(var r=e||{},n=hs(),i=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==r.sheet&&(i=a);if(i==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Pt(n,r.biff==4?1033:r.biff==3?521:9,NB(t,16,r)),Ppe(n,t.Sheets[t.SheetNames[i]],i,r),Pt(n,10),n.end()}function Dpe(t,e,r){Pt(t,49,Sce({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function Rpe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&Pt(t,1054,Lce(i,e[i],r))})}function Upe(t,e){var r=At(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Pt(t,2151,r),r=At(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),DO(Yr(e["!ref"]||"A1"),r),r.write_shift(4,4),Pt(t,2152,r)}function Ope(t,e){for(var r=0;r<16;++r)Pt(t,224,Q4({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Pt(t,224,Q4(n,0,e))})}function Mpe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Pt(t,440,lAe(n)),n[1].Tooltip&&Pt(t,2048,AAe(n))}delete e["!links"]}function Qpe(t,e){if(e){var r=0;e.forEach(function(n,i){++r<=256&&n&&Pt(t,125,pAe(ob(i,n),i))})}}function Hpe(t,e,r,n,i){var a=16+$A(i.cellXfs,e,i);if(e.v==null&&!e.bf){Pt(t,513,id(r,n,a));return}if(e.bf)Pt(t,6,hfe(e,r,n,i,a));else switch(e.t){case"d":case"n":var s=e.t=="d"?Qi(Qn(e.v)):e.v;Pt(t,515,$ce(r,n,s,a));break;case"b":case"e":Pt(t,517,jce(r,n,e.v,a,i,e.t));break;case"s":case"str":if(i.bookSST){var o=DB(i.Strings,e.v,i.revStrings);Pt(t,253,Tce(r,n,o,a))}else Pt(t,516,Fce(r,n,(e.v||"").slice(0,255),a,i));break;default:Pt(t,513,id(r,n,a))}}function Vpe(t,e,r){var n=hs(),i=r.SheetNames[t],a=r.Sheets[i]||{},s=(r||{}).Workbook||{},o=(s.Sheets||[])[t]||{},l=Array.isArray(a),A=e.biff==8,u,d="",h=[],f=Yr(a["!ref"]||"A1"),p=A?65536:16384;if(f.e.c>255||f.e.r>=p){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}Pt(n,2057,NB(r,16,e)),Pt(n,13,ao(1)),Pt(n,12,ao(100)),Pt(n,15,$a(!0)),Pt(n,17,$a(!1)),Pt(n,16,rd(.001)),Pt(n,95,$a(!0)),Pt(n,42,$a(!1)),Pt(n,43,$a(!1)),Pt(n,130,ao(1)),Pt(n,128,Kce([0,0])),Pt(n,131,$a(!1)),Pt(n,132,$a(!1)),A&&Qpe(n,a["!cols"]),Pt(n,512,Rce(f,e)),A&&(a["!links"]=[]);for(var g=f.s.r;g<=f.e.r;++g){d=yi(g);for(var v=f.s.c;v<=f.e.c;++v){g===f.s.r&&(h[v]=Xn(v)),u=h[v]+d;var C=l?(a[g]||[])[v]:a[u];C&&(Hpe(n,C,g,v,e),A&&C.l&&a["!links"].push([u,C.l]))}}var I=o.CodeName||o.name||i;return A&&Pt(n,574,Bce((s.Views||[])[0])),A&&(a["!merges"]||[]).length&&Pt(n,229,rAe(a["!merges"])),A&&Mpe(n,a),Pt(n,442,IO(I)),A&&Upe(n,a),Pt(n,10),n.end()}function Kpe(t,e,r){var n=hs(),i=(t||{}).Workbook||{},a=i.Sheets||[],s=i.WBProps||{},o=r.biff==8,l=r.biff==5;if(Pt(n,2057,NB(t,5,r)),r.bookType=="xla"&&Pt(n,135),Pt(n,225,o?ao(1200):null),Pt(n,193,jle(2)),l&&Pt(n,191),l&&Pt(n,192),Pt(n,226),Pt(n,92,dce("SheetJS",r)),Pt(n,66,ao(o?1200:1252)),o&&Pt(n,353,ao(0)),o&&Pt(n,448),Pt(n,317,wAe(t.SheetNames.length)),o&&t.vbaraw&&Pt(n,211),o&&t.vbaraw){var A=s.CodeName||"ThisWorkbook";Pt(n,442,IO(A))}Pt(n,156,ao(17)),Pt(n,25,$a(!1)),Pt(n,18,$a(!1)),Pt(n,19,ao(0)),o&&Pt(n,431,$a(!1)),o&&Pt(n,444,ao(0)),Pt(n,61,_ce()),Pt(n,64,$a(!1)),Pt(n,141,ao(0)),Pt(n,34,$a(y0e(t)=="true")),Pt(n,14,$a(!0)),o&&Pt(n,439,$a(!1)),Pt(n,218,ao(0)),Dpe(n,t,r),Rpe(n,t.SSF,r),Ope(n,r),o&&Pt(n,352,$a(!1));var u=n.end(),d=hs();o&&Pt(d,140,dAe()),o&&r.Strings&&kpe(d,252,gce(r.Strings)),Pt(d,10);var h=d.end(),f=hs(),p=0,g=0;for(g=0;g<t.SheetNames.length;++g)p+=(o?12:11)+(o?2:1)*t.SheetNames[g].length;var v=u.length+p+h.length;for(g=0;g<t.SheetNames.length;++g){var C=a[g]||{};Pt(f,133,mce({pos:v,hs:C.Hidden||0,dt:0,name:t.SheetNames[g]},r)),v+=e[g].length}var I=f.end();if(p!=I.length)throw new Error("BS8 "+p+" != "+I.length);var F=[];return u.length&&F.push(u),I.length&&F.push(I),h.length&&F.push(h),Wi(F)}function jpe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Hn(lr)),t&&t.SSF&&(Lf(),eb(t.SSF),r.revssf=rb(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,QB(r),r.cellXfs=[],$A(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)n[n.length]=Vpe(i,r,t);return n.unshift(Kpe(t,n,r)),Wi(n)}function E8(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var i=fs(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return jpe(t,e);case 4:case 3:case 2:return Lpe(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function tF(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var i=t.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),s=i.index,o=a&&a.index||t.length,l=koe(t.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,u=0,d=0,h=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(s=0;s<l.length;++s){var g=l[s].trim(),v=g.slice(0,3).toLowerCase();if(v=="<tr"){if(++A,r.sheetRows&&r.sheetRows<=A){--A;break}u=0;continue}if(!(v!="<td"&&v!="<th")){var C=g.split(/<\/t[dh]>/i);for(o=0;o<C.length;++o){var I=C[o].trim();if(I.match(/<t[dh]/i)){for(var F=I,E=0;F.charAt(0)=="<"&&(E=F.indexOf(">"))>-1;)F=F.slice(E+1);for(var R=0;R<p.length;++R){var L=p[R];L.s.c==u&&L.s.r<A&&A<=L.e.r&&(u=L.e.c+1,R=-1)}var N=hr(I.slice(0,I.indexOf(">")));h=N.colspan?+N.colspan:1,((d=+N.rowspan)>1||h>1)&&p.push({s:{r:A,c:u},e:{r:A+(d||1)-1,c:u+h-1}});var P=N.t||N["data-t"]||"";if(!F.length){u+=h;continue}if(F=W6(F),f.s.r>A&&(f.s.r=A),f.e.r<A&&(f.e.r=A),f.s.c>u&&(f.s.c=u),f.e.c<u&&(f.e.c=u),!F.length){u+=h;continue}var x={t:"s",v:F};r.raw||!F.trim().length||P=="s"||(F==="TRUE"?x={t:"b",v:!0}:F==="FALSE"?x={t:"b",v:!1}:isNaN(Ro(F))?isNaN(df(F).getDate())||(x={t:"d",v:Qn(F)},r.cellDates||(x={t:"n",v:Qi(x.v)}),x.z=r.dateNF||lr[14]):x={t:"n",v:Ro(F)}),r.dense?(n[A]||(n[A]=[]),n[A][u]=x):n[Ar({r:A,c:u})]=x,u+=h}}}}return n["!ref"]=wr(f),p.length&&(n["!merges"]=p),n}function zpe(t,e,r,n){for(var i=t["!merges"]||[],a=[],s=e.s.c;s<=e.e.c;++s){for(var o=0,l=0,A=0;A<i.length;++A)if(!(i[A].s.r>r||i[A].s.c>s)&&!(i[A].e.r<r||i[A].e.c<s)){if(i[A].s.r<r||i[A].s.c<s){o=-1;break}o=i[A].e.r-i[A].s.r+1,l=i[A].e.c-i[A].s.c+1;break}if(!(o<0)){var u=Ar({r,c:s}),d=n.dense?(t[r]||[])[s]:t[u],h=d&&d.v!=null&&(d.h||fB(d.w||(uc(d),d.w)||""))||"",f={};o>1&&(f.rowspan=o),l>1&&(f.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":d&&(f["data-t"]=d&&d.t||"z",d.v!=null&&(f["data-v"]=d.v),d.z!=null&&(f["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+d.l.Target+'">'+h+"</a>")),f.id=(n.id||"sjs")+"-"+u,a.push(Ft("td",h,f))}}var p="<tr>";return p+a.join("")+"</tr>"}var $pe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Gpe="</body></html>";function Wpe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return zA(tF(r[0],e),e);var n=KB();return r.forEach(function(i,a){jB(n,tF(i,e),"Sheet"+(a+1))}),n}function qpe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function B8(t,e){var r=e||{},n=r.header!=null?r.header:$pe,i=r.footer!=null?r.footer:Gpe,a=[n],s=fs(t["!ref"]);r.dense=Array.isArray(t),a.push(qpe(t,s,r));for(var o=s.s.r;o<=s.e.r;++o)a.push(zpe(t,s,o,r));return a.push("</table>"+i),a.join("")}function C8(t,e,r){var n=r||{},i=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var s=typeof n.origin=="string"?Yn(n.origin):n.origin;i=s.r,a=s.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),A={s:{r:0,c:0},e:{r:i,c:a}};if(t["!ref"]){var u=fs(t["!ref"]);A.s.r=Math.min(A.s.r,u.s.r),A.s.c=Math.min(A.s.c,u.s.c),A.e.r=Math.max(A.e.r,u.e.r),A.e.c=Math.max(A.e.c,u.e.c),i==-1&&(A.e.r=i=u.e.r+1)}var d=[],h=0,f=t["!rows"]||(t["!rows"]=[]),p=0,g=0,v=0,C=0,I=0,F=0;for(t["!cols"]||(t["!cols"]=[]);p<o.length&&g<l;++p){var E=o[p];if(rF(E)){if(n.display)continue;f[g]={hidden:!0}}var R=E.children;for(v=C=0;v<R.length;++v){var L=R[v];if(!(n.display&&rF(L))){var N=L.hasAttribute("data-v")?L.getAttribute("data-v"):L.hasAttribute("v")?L.getAttribute("v"):W6(L.innerHTML),P=L.getAttribute("data-z")||L.getAttribute("z");for(h=0;h<d.length;++h){var x=d[h];x.s.c==C+a&&x.s.r<g+i&&g+i<=x.e.r&&(C=x.e.c+1-a,h=-1)}F=+L.getAttribute("colspan")||1,((I=+L.getAttribute("rowspan")||1)>1||F>1)&&d.push({s:{r:g+i,c:C+a},e:{r:g+i+(I||1)-1,c:C+a+(F||1)-1}});var k={t:"s",v:N},y=L.getAttribute("data-t")||L.getAttribute("t")||"";N!=null&&(N.length==0?k.t=y||"z":n.raw||N.trim().length==0||y=="s"||(N==="TRUE"?k={t:"b",v:!0}:N==="FALSE"?k={t:"b",v:!1}:isNaN(Ro(N))?isNaN(df(N).getDate())||(k={t:"d",v:Qn(N)},n.cellDates||(k={t:"n",v:Qi(k.v)}),k.z=n.dateNF||lr[14]):k={t:"n",v:Ro(N)})),k.z===void 0&&P!=null&&(k.z=P);var S="",_=L.getElementsByTagName("A");if(_&&_.length)for(var M=0;M<_.length&&!(_[M].hasAttribute("href")&&(S=_[M].getAttribute("href"),S.charAt(0)!="#"));++M);S&&S.charAt(0)!="#"&&(k.l={Target:S}),n.dense?(t[g+i]||(t[g+i]=[]),t[g+i][C+a]=k):t[Ar({c:C+a,r:g+i})]=k,A.e.c<C+a&&(A.e.c=C+a),C+=F}}++g}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),A.e.r=Math.max(A.e.r,g-1+i),t["!ref"]=wr(A),g>=l&&(t["!fullref"]=wr((A.e.r=o.length-p+g-1+i,A))),t}function N8(t,e){var r=e||{},n=r.dense?[]:{};return C8(n,t,e)}function Xpe(t,e){return zA(N8(t,e),e)}function rF(t){var e="",r=Ype(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Ype(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Jpe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Xr(e.replace(/<[^>]*>/g,""));return[r]}var nF={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function S8(t,e){var r=e||{},n=mB(t),i=[],a,s,o={name:""},l="",A=0,u,d,h={},f=[],p=r.dense?[]:{},g,v,C={value:""},I="",F=0,E=[],R=-1,L=-1,N={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,x={},k=[],y={},S=0,_=0,M=[],K=1,z=1,ae=[],te={Names:[]},G={},ue=["",""],de=[],T={},O="",V=0,Q=!1,X=!1,ie=0;for(X0.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=X0.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(N.e.c>=N.s.c&&N.e.r>=N.s.r?p["!ref"]=wr(N):p["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=N.e.r&&(p["!fullref"]=p["!ref"],N.e.r=r.sheetRows-1,p["!ref"]=wr(N)),k.length&&(p["!merges"]=k),M.length&&(p["!rows"]=M),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),f.push(u.name),h[u.name]=p,X=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=hr(g[0],!1),R=L=-1,N.s.r=N.s.c=1e7,N.e.r=N.e.c=0,p=r.dense?[]:{},k=[],M=[],X=!0);break;case"table-row-group":g[1]==="/"?--P:++P;break;case"table-row":case"":if(g[1]==="/"){R+=K,K=1;break}if(d=hr(g[0],!1),d.?R=d.-1:R==-1&&(R=0),K=+d["number-rows-repeated"]||1,K<10)for(ie=0;ie<K;++ie)P>0&&(M[R+ie]={level:P});L=-1;break;case"covered-table-cell":g[1]!=="/"&&++L,r.sheetStubs&&(r.dense?(p[R]||(p[R]=[]),p[R][L]={t:"z"}):p[Ar({r:R,c:L})]={t:"z"}),I="",E=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++L,C=hr(g[0],!1),z=parseInt(C["number-columns-repeated"]||"1",10),v={t:"z",v:null},C.formula&&r.cellFormula!=!1&&(v.f=J4(Xr(C.formula))),(C.||C["value-type"])=="string"&&(v.t="s",v.v=Xr(C["string-value"]||""),r.dense?(p[R]||(p[R]=[]),p[R][L]=v):p[Ar({r:R,c:L})]=v),L+=z-1;else if(g[1]!=="/"){++L,I="",F=0,E=[],z=1;var ee=K?R+K-1:R;if(L>N.e.c&&(N.e.c=L),L<N.s.c&&(N.s.c=L),R<N.s.r&&(N.s.r=R),ee>N.e.r&&(N.e.r=ee),C=hr(g[0],!1),de=[],T={},v={t:C.||C["value-type"],v:null},r.cellFormula)if(C.formula&&(C.formula=Xr(C.formula)),C["number-matrix-columns-spanned"]&&C["number-matrix-rows-spanned"]&&(S=parseInt(C["number-matrix-rows-spanned"],10)||0,_=parseInt(C["number-matrix-columns-spanned"],10)||0,y={s:{r:R,c:L},e:{r:R+S-1,c:L+_-1}},v.F=wr(y),ae.push([y,v.F])),C.formula)v.f=J4(C.formula);else for(ie=0;ie<ae.length;++ie)R>=ae[ie][0].s.r&&R<=ae[ie][0].e.r&&L>=ae[ie][0].s.c&&L<=ae[ie][0].e.c&&(v.F=ae[ie][1]);switch((C["number-columns-spanned"]||C["number-rows-spanned"])&&(S=parseInt(C["number-rows-spanned"],10)||0,_=parseInt(C["number-columns-spanned"],10)||0,y={s:{r:R,c:L},e:{r:R+S-1,c:L+_-1}},k.push(y)),C["number-columns-repeated"]&&(z=parseInt(C["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Rn(C["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(C.value);break;case"percentage":v.t="n",v.v=parseFloat(C.value);break;case"currency":v.t="n",v.v=parseFloat(C.value);break;case"date":v.t="d",v.v=Qn(C["date-value"]),r.cellDates||(v.t="n",v.v=Qi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=Coe(C["time-value"])/86400,r.cellDates&&(v.t="d",v.v=nb(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(C.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",C["string-value"]!=null&&(I=Xr(C["string-value"]),E=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(Q=!1,v.t==="s"&&(v.v=I||"",E.length&&(v.R=E),Q=F==0),G.Target&&(v.l=G),de.length>0&&(v.c=de,de=[]),I&&r.cellText!==!1&&(v.w=I),Q&&(v.t="z",delete v.v),(!Q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=R))for(var Z=0;Z<K;++Z){if(z=parseInt(C["number-columns-repeated"]||"1",10),r.dense)for(p[R+Z]||(p[R+Z]=[]),p[R+Z][L]=Z==0?v:Hn(v);--z>0;)p[R+Z][L+z]=Hn(v);else for(p[Ar({r:R+Z,c:L})]=v;--z>0;)p[Ar({r:R+Z,c:L+z})]=Hn(v);N.e.c<=L&&(N.e.c=L)}z=parseInt(C["number-columns-repeated"]||"1",10),L+=z-1,z=0,v={},I="",E=[]}G={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((a=i.pop())[0]!==g[3])throw"Bad state: "+a}else g[0].charAt(g[0].length-2)!=="/"&&i.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((a=i.pop())[0]!==g[3])throw"Bad state: "+a;T.t=I,E.length&&(T.R=E),T.a=O,de.push(T)}else g[0].charAt(g[0].length-2)!=="/"&&i.push([g[3],!1]);O="",V=0,I="",F=0,E=[];break;case"creator":g[1]==="/"?O=n.slice(V,g.index):V=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((a=i.pop())[0]!==g[3])throw"Bad state: "+a}else g[0].charAt(g[0].length-2)!=="/"&&i.push([g[3],!1]);I="",F=0,E=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(x[o.name]=l,(a=i.pop())[0]!==g[3])throw"Bad state: "+a}else g[0].charAt(g[0].length-2)!=="/"&&(l="",o=hr(g[0],!1),i.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":s=hr(g[0],!1),l+=nF[g[3]][s.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":s=hr(g[0],!1),l+=nF[g[3]][s.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(A,g.index);break}else A=g.index+g[0].length;break;case"named-range":s=hr(g[0],!1),ue=t2(s["cell-range-address"]);var re={Name:s.name,Ref:ue[0]+"!"+ue[1]};X&&(re.Sheet=f.length),te.Names.push(re);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(g[1]==="/"&&(!C||!C["string-value"])){var ce=Jpe(n.slice(F,g.index));I=(I.length>0?I+`
`:"")+ce[0]}else hr(g[0],!1),F=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{ue=t2(hr(g[0])["target-range-address"]),h[ue[0]]["!autofilter"]={ref:ue[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(G=hr(g[0],!1),!G.href)break;G.Target=Xr(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(ue=t2(G.Target.slice(1)),G.Target="#"+ue[0]+"!"+ue[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var Y={Sheets:h,SheetNames:f,Workbook:te};return r.bookSheets&&delete Y.Sheets,Y}function iF(t,e){e=e||{},io(t,"META-INF/manifest.xml")&&Ble(Ci(t,"META-INF/manifest.xml"),e);var r=Os(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=S8(bn(r),e);return io(t,"meta.xml")&&(n.Props=vO(Ci(t,"meta.xml"))),n}function aF(t,e){return S8(t,e)}var Zpe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+q0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return xi+e}}(),sF=function(){var t=function(a){return mn(a).replace(/  +/g,function(s){return'<text:s text:c="'+s.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,s,o){var l=[];l.push('      <table:table table:name="'+mn(s.SheetNames[o])+`" table:style-name="ta1">
`);var A=0,u=0,d=fs(a["!ref"]||"A1"),h=a["!merges"]||[],f=0,p=Array.isArray(a);if(a["!cols"])for(u=0;u<=d.e.c;++u)l.push("        <table:table-column"+(a["!cols"][u]?' table:style-name="co'+a["!cols"][u].ods+'"':"")+`></table:table-column>
`);var g="",v=a["!rows"]||[];for(A=0;A<d.s.r;++A)g=v[A]?' table:style-name="ro'+v[A].ods+'"':"",l.push("        <table:table-row"+g+`></table:table-row>
`);for(;A<=d.e.r;++A){for(g=v[A]?' table:style-name="ro'+v[A].ods+'"':"",l.push("        <table:table-row"+g+`>
`),u=0;u<d.s.c;++u)l.push(e);for(;u<=d.e.c;++u){var C=!1,I={},F="";for(f=0;f!=h.length;++f)if(!(h[f].s.c>u)&&!(h[f].s.r>A)&&!(h[f].e.c<u)&&!(h[f].e.r<A)){(h[f].s.c!=u||h[f].s.r!=A)&&(C=!0),I["table:number-columns-spanned"]=h[f].e.c-h[f].s.c+1,I["table:number-rows-spanned"]=h[f].e.r-h[f].s.r+1;break}if(C){l.push(r);continue}var E=Ar({r:A,c:u}),R=p?(a[A]||[])[u]:a[E];if(R&&R.f&&(I["table:formula"]=mn(wfe(R.f)),R.F&&R.F.slice(0,E.length)==E)){var L=fs(R.F);I["table:number-matrix-columns-spanned"]=L.e.c-L.s.c+1,I["table:number-matrix-rows-spanned"]=L.e.r-L.s.r+1}if(!R){l.push(e);continue}switch(R.t){case"b":F=R.v?"TRUE":"FALSE",I["office:value-type"]="boolean",I["office:boolean-value"]=R.v?"true":"false";break;case"n":F=R.w||String(R.v||0),I["office:value-type"]="float",I["office:value"]=R.v||0;break;case"s":case"str":F=R.v==null?"":R.v,I["office:value-type"]="string";break;case"d":F=R.w||Qn(R.v).toISOString(),I["office:value-type"]="date",I["office:date-value"]=Qn(R.v).toISOString(),I["table:style-name"]="ce1";break;default:l.push(e);continue}var N=t(F);if(R.l&&R.l.Target){var P=R.l.Target;P=P.charAt(0)=="#"?"#"+bfe(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),N=Ft("text:a",N,{"xlink:href":P.replace(/&/g,"&amp;")})}l.push("          "+Ft("table:table-cell",Ft("text:p",N,{}),I)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(a,s){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;s.SheetNames.map(function(A){return s.Sheets[A]}).forEach(function(A){if(A&&A["!cols"]){for(var u=0;u<A["!cols"].length;++u)if(A["!cols"][u]){var d=A["!cols"][u];if(d.width==null&&d.wpx==null&&d.wch==null)continue;FA(d),d.ods=o;var h=A["!cols"][u].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;s.SheetNames.map(function(A){return s.Sheets[A]}).forEach(function(A){if(A&&A["!rows"]){for(var u=0;u<A["!rows"].length;++u)if(A["!rows"][u]){A["!rows"][u].ods=l;var d=A["!rows"][u].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(s,o){var l=[xi],A=q0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=q0({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+A+u+`>
`),l.push(gO().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+A+`>
`),i(l,s),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=s.SheetNames.length;++d)l.push(n(s.Sheets[s.SheetNames[d]],s,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function k8(t,e){if(e.bookType=="fods")return sF(t,e);var r=uB(),n="",i=[],a=[];return n="mimetype",xr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",xr(r,n,sF(t,e)),i.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",xr(r,n,Zpe(t,e)),i.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",xr(r,n,xi+gO()),i.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",xr(r,n,Sle(a)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",xr(r,n,Cle(i)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ad(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Yx(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):bn(jA(t))}function ege(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Us(ml(t))}function tge(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function LA(t){var e=t.reduce(function(i,a){return i+a.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(i){r.set(i,n),n+=i.length}),r}function oF(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function rge(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,i=e+13;i>=e;--i)n=n*256+t[i];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function nge(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var a=0;i>=1;++a,i/=256)t[e+a]=i&255;t[e+15]|=r>=0?0:128}function np(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function An(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function ni(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Zr(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],i=np(t,r),a=i&7;i=Math.floor(i/8);var s=0,o;if(i==0)break;switch(a){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:s=4,o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=np(t,r),o=t.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(n))}var A={data:o,type:a};e[i]==null?e[i]=[A]:e[i].push(A)}return e}function na(t){var e=[];return t.forEach(function(r,n){r.forEach(function(i){i.data&&(e.push(An(n*8+i.type)),i.type==2&&e.push(An(i.data.length)),e.push(i.data))})}),LA(e)}function OB(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function eo(t){for(var e,r=[],n=[0];n[0]<t.length;){var i=np(t,n),a=Zr(t.slice(n[0],n[0]+i));n[0]+=i;var s={id:ni(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Zr(o.data),A=ni(l[3][0].data);s.messages.push({meta:l,data:t.slice(n[0],n[0]+A)}),n[0]+=A}),(e=a[3])!=null&&e[0]&&(s.merge=ni(a[3][0].data)>>>0>0),r.push(s)}return r}function ih(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:An(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:An(+!!r.merge),type:0}]);var i=[];r.messages.forEach(function(s){i.push(s.data),s.meta[3]=[{type:0,data:An(s.data.length)}],n[2].push({data:na(s.meta),type:2})});var a=na(n);e.push(An(a.length)),e.push(a),i.forEach(function(s){return e.push(s)})}),LA(e)}function ige(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=np(e,r),i=[];r[0]<e.length;){var a=e[r[0]]&3;if(a==0){var s=e[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=e[r[0]],o>1&&(s|=e[r[0]+1]<<8),o>2&&(s|=e[r[0]+2]<<16),o>3&&(s|=e[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}i.push(e.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var l=0,A=0;if(a==1?(A=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(A=(e[r[0]++]>>2)+1,a==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),i=[LA(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(A>=l)for(i.push(i[0].slice(-l)),A-=l;A>=i[i.length-1].length;)i.push(i[i.length-1]),A-=i[i.length-1].length;i.push(i[0].slice(-l,-l+A))}}var u=LA(i);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function to(t){for(var e=[],r=0;r<t.length;){var n=t[r++],i=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(ige(n,t.slice(r,r+i))),r+=i}if(r!==t.length)throw new Error("data is not a valid framed stream!");return LA(e)}function ah(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),i=new Uint8Array(4);e.push(i);var a=An(n),s=a.length;e.push(a),n<=60?(s++,e.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),s+=n,i[0]=0,i[1]=s&255,i[2]=s>>8&255,i[3]=s>>16&255,r+=n}return LA(e)}function age(t,e,r,n){var i=ad(t),a=i.getUint32(4,!0),s=(n>1?12:8)+oF(a&(n>1?3470:398))*4,o=-1,l=-1,A=NaN,u=new Date(2001,0,1);a&512&&(o=i.getUint32(s,!0),s+=4),s+=oF(a&(n>1?12288:4096))*4,a&16&&(l=i.getUint32(s,!0),s+=4),a&32&&(A=i.getFloat64(s,!0),s+=8),a&64&&(u.setTime(u.getTime()+i.getFloat64(s,!0)*1e3),s+=8);var d;switch(t[2]){case 0:break;case 2:d={t:"n",v:A};break;case 3:d={t:"s",v:e[l]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:A>0};break;case 7:d={t:"n",v:A/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else if(l>-1)d={t:"s",v:e[l]};else if(!isNaN(A))d={t:"n",v:A};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return d}function sge(t,e,r){var n=ad(t),i=n.getUint32(8,!0),a=12,s=-1,o=-1,l=NaN,A=NaN,u=new Date(2001,0,1);i&1&&(l=rge(t,a),a+=16),i&2&&(A=n.getFloat64(a,!0),a+=8),i&4&&(u.setTime(u.getTime()+n.getFloat64(a,!0)*1e3),a+=8),i&8&&(o=n.getUint32(a,!0),a+=4),i&16&&(s=n.getUint32(a,!0),a+=4);var d;switch(t[1]){case 0:break;case 2:d={t:"n",v:l};break;case 3:d={t:"s",v:e[o]};break;case 5:d={t:"d",v:u};break;case 6:d={t:"b",v:A>0};break;case 7:d={t:"n",v:A/86400};break;case 8:d={t:"e",v:0};break;case 9:if(s>-1)d={t:"s",v:r[s]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)));break;case 10:d={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(i&31," : ").concat(t.slice(0,4)))}return d}function n2(t,e){var r=new Uint8Array(32),n=ad(r),i=12,a=0;switch(r[0]=5,t.t){case"n":r[1]=2,nge(r,i,t.v),a|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,t.v?1:0,!0),a|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(i,e.indexOf(t.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,a,!0),r.slice(0,i)}function i2(t,e){var r=new Uint8Array(32),n=ad(r),i=12,a=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(i,t.v,!0),a|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,t.v?1:0,!0),a|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(i,e.indexOf(t.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,a,!0),r.slice(0,i)}function oge(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return age(t,e,r,t[0]);case 5:return sge(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function ya(t){var e=Zr(t);return np(e[1][0].data)}function lF(t,e){var r=Zr(e.data),n=ni(r[1][0].data),i=r[3],a=[];return(i||[]).forEach(function(s){var o=Zr(s.data),l=ni(o[1][0].data)>>>0;switch(n){case 1:a[l]=Yx(o[3][0].data);break;case 8:{var A=t[ya(o[9][0].data)][0],u=Zr(A.data),d=t[ya(u[1][0].data)][0],h=ni(d.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var f=Zr(d.data);a[l]=f[3].map(function(p){return Yx(p.data)}).join("")}break}}),a}function lge(t,e){var r,n,i,a,s,o,l,A,u,d,h,f,p,g,v=Zr(t),C=ni(v[1][0].data)>>>0,I=ni(v[2][0].data)>>>0,F=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&ni(v[8][0].data)>0||!1,E,R;if((a=(i=v[7])==null?void 0:i[0])!=null&&a.data&&e!=0)E=(o=(s=v[7])==null?void 0:s[0])==null?void 0:o.data,R=(A=(l=v[6])==null?void 0:l[0])==null?void 0:A.data;else if((d=(u=v[4])==null?void 0:u[0])!=null&&d.data&&e!=1)E=(f=(h=v[4])==null?void 0:h[0])==null?void 0:f.data,R=(g=(p=v[3])==null?void 0:p[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var L=F?4:1,N=ad(E),P=[],x=0;x<E.length/2;++x){var k=N.getUint16(x*2,!0);k<65535&&P.push([x,k])}if(P.length!=I)throw"Expected ".concat(I," cells, found ").concat(P.length);var y=[];for(x=0;x<P.length-1;++x)y[P[x][0]]=R.subarray(P[x][1]*L,P[x+1][1]*L);return P.length>=1&&(y[P[P.length-1][0]]=R.subarray(P[P.length-1][1]*L)),{R:C,cells:y}}function cge(t,e){var r,n=Zr(e.data),i=(r=n==null?void 0:n[7])!=null&&r[0]?ni(n[7][0].data)>>>0>0?1:0:-1,a=OB(n[5],function(s){return lge(s,i)});return{nrows:ni(n[4][0].data)>>>0,data:a.reduce(function(s,o){return s[o.R]||(s[o.R]=[]),o.cells.forEach(function(l,A){if(s[o.R][A])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(A));s[o.R][A]=l}),s},[])}}function Age(t,e,r){var n,i=Zr(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ni(i[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(a.e.c=(ni(i[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=wr(a);var s=Zr(i[4][0].data),o=lF(t,t[ya(s[4][0].data)][0]),l=(n=s[17])!=null&&n[0]?lF(t,t[ya(s[17][0].data)][0]):[],A=Zr(s[3][0].data),u=0;A[1].forEach(function(d){var h=Zr(d.data),f=t[ya(h[2][0].data)][0],p=ni(f.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var g=cge(t,f);g.data.forEach(function(v,C){v.forEach(function(I,F){var E=Ar({r:u+C,c:F}),R=oge(I,o,l);R&&(r[E]=R)})}),u+=g.nrows})}function uge(t,e){var r=Zr(e.data),n={"!ref":"A1"},i=t[ya(r[2][0].data)],a=ni(i[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return Age(t,i[0],n),n}function dge(t,e){var r,n=Zr(e.data),i={name:(r=n[1])!=null&&r[0]?Yx(n[1][0].data):"",sheets:[]},a=OB(n[2],ya);return a.forEach(function(s){t[s].forEach(function(o){var l=ni(o.meta[1][0].data);l==6e3&&i.sheets.push(uge(t,o))})}),i}function hge(t,e){var r=KB(),n=Zr(e.data),i=OB(n[1],ya);if(i.forEach(function(a){t[a].forEach(function(s){var o=ni(s.meta[1][0].data);if(o==2){var l=dge(t,s);l.sheets.forEach(function(A,u){jB(r,A,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function a2(t){var e,r,n,i,a={},s=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var A;try{A=to(l.content)}catch(d){return console.log("?? "+l.content.length+" "+(d.message||d))}var u;try{u=eo(A)}catch(d){return console.log("## "+(d.message||d))}u.forEach(function(d){a[d.id]=d.messages,s.push(d.id)})}}),!s.length)throw new Error("File has no messages");var o=((i=(n=(r=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&ni(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||s.forEach(function(l){a[l].forEach(function(A){var u=ni(A.meta[1][0].data)>>>0;if(u==1)if(!o)o=A;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return hge(a,o)}function fge(t,e,r){var n,i,a,s;if(!((n=t[6])!=null&&n[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((s=(a=t[8])==null?void 0:a[0])==null?void 0:s.data)&&ni(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,A=ad(t[7][0].data),u=0,d=[],h=ad(t[4][0].data),f=0,p=[],g=0;g<e.length;++g){if(e[g]==null){A.setUint16(g*2,65535,!0),h.setUint16(g*2,65535);continue}A.setUint16(g*2,u,!0),h.setUint16(g*2,f,!0);var v,C;switch(typeof e[g]){case"string":v=n2({t:"s",v:e[g]},r),C=i2({t:"s",v:e[g]},r);break;case"number":v=n2({t:"n",v:e[g]},r),C=i2({t:"n",v:e[g]},r);break;case"boolean":v=n2({t:"b",v:e[g]},r),C=i2({t:"b",v:e[g]},r);break;default:throw new Error("Unsupported value "+e[g])}d.push(v),u+=v.length,p.push(C),f+=C.length,++l}for(t[2][0].data=An(l);g<t[7][0].data.length/2;++g)A.setUint16(g*2,65535,!0),h.setUint16(g*2,65535,!0);return t[6][0].data=LA(d),t[3][0].data=LA(p),l}function mge(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=fs(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(wr(n)));var a=Wv(r,{range:n,header:1}),s=["~Sh33tJ5~"];a.forEach(function(O){return O.forEach(function(V){typeof V=="string"&&s.push(V)})});var o={},l=[],A=ir.read(e.numbers,{type:"base64"});A.FileIndex.map(function(O,V){return[O,A.FullPaths[V]]}).forEach(function(O){var V=O[0],Q=O[1];if(V.type==2&&V.name.match(/\.iwa/)){var X=V.content,ie=to(X),ee=eo(ie);ee.forEach(function(Z){l.push(Z.id),o[Z.id]={deps:[],location:Q,type:ni(Z.messages[0].meta[1][0].data)}})}}),l.sort(function(O,V){return O-V});var u=l.filter(function(O){return O>1}).map(function(O){return[O,An(O)]});A.FileIndex.map(function(O,V){return[O,A.FullPaths[V]]}).forEach(function(O){var V=O[0];if(O[1],!!V.name.match(/\.iwa/)){var Q=eo(to(V.content));Q.forEach(function(X){X.messages.forEach(function(ie){u.forEach(function(ee){X.messages.some(function(Z){return ni(Z.meta[1][0].data)!=11006&&tge(Z.data,ee[1])})&&o[ee[0]].deps.push(X.id)})})})}});for(var d=ir.find(A,o[1].location),h=eo(to(d.content)),f,p=0;p<h.length;++p){var g=h[p];g.id==1&&(f=g)}var v=ya(Zr(f.messages[0].data)[1][0].data);for(d=ir.find(A,o[v].location),h=eo(to(d.content)),p=0;p<h.length;++p)g=h[p],g.id==v&&(f=g);for(v=ya(Zr(f.messages[0].data)[2][0].data),d=ir.find(A,o[v].location),h=eo(to(d.content)),p=0;p<h.length;++p)g=h[p],g.id==v&&(f=g);for(v=ya(Zr(f.messages[0].data)[2][0].data),d=ir.find(A,o[v].location),h=eo(to(d.content)),p=0;p<h.length;++p)g=h[p],g.id==v&&(f=g);var C=Zr(f.messages[0].data);{C[6][0].data=An(n.e.r+1),C[7][0].data=An(n.e.c+1);var I=ya(C[46][0].data),F=ir.find(A,o[I].location),E=eo(to(F.content));{for(var R=0;R<E.length&&E[R].id!=I;++R);if(E[R].id!=I)throw"Bad ColumnRowUIDMapArchive";var L=Zr(E[R].messages[0].data);L[1]=[],L[2]=[],L[3]=[];for(var N=0;N<=n.e.c;++N){var P=[];P[1]=P[2]=[{type:0,data:An(N+420690)}],L[1].push({type:2,data:na(P)}),L[2].push({type:0,data:An(N)}),L[3].push({type:0,data:An(N)})}L[4]=[],L[5]=[],L[6]=[];for(var x=0;x<=n.e.r;++x)P=[],P[1]=P[2]=[{type:0,data:An(x+726270)}],L[4].push({type:2,data:na(P)}),L[5].push({type:0,data:An(x)}),L[6].push({type:0,data:An(x)});E[R].messages[0].data=na(L)}F.content=ah(ih(E)),F.size=F.content.length,delete C[46];var k=Zr(C[4][0].data);{k[7][0].data=An(n.e.r+1);var y=Zr(k[1][0].data),S=ya(y[2][0].data);F=ir.find(A,o[S].location),E=eo(to(F.content));{if(E[0].id!=S)throw"Bad HeaderStorageBucket";var _=Zr(E[0].messages[0].data);for(x=0;x<a.length;++x){var M=Zr(_[2][0].data);M[1][0].data=An(x),M[4][0].data=An(a[x].length),_[2][x]={type:_[2][0].type,data:na(M)}}E[0].messages[0].data=na(_)}F.content=ah(ih(E)),F.size=F.content.length;var K=ya(k[2][0].data);F=ir.find(A,o[K].location),E=eo(to(F.content));{if(E[0].id!=K)throw"Bad HeaderStorageBucket";for(_=Zr(E[0].messages[0].data),N=0;N<=n.e.c;++N)M=Zr(_[2][0].data),M[1][0].data=An(N),M[4][0].data=An(n.e.r+1),_[2][N]={type:_[2][0].type,data:na(M)};E[0].messages[0].data=na(_)}F.content=ah(ih(E)),F.size=F.content.length;var z=ya(k[4][0].data);(function(){for(var O=ir.find(A,o[z].location),V=eo(to(O.content)),Q,X=0;X<V.length;++X){var ie=V[X];ie.id==z&&(Q=ie)}var ee=Zr(Q.messages[0].data);{ee[3]=[];var Z=[];s.forEach(function(Y,ge){Z[1]=[{type:0,data:An(ge)}],Z[2]=[{type:0,data:An(1)}],Z[3]=[{type:2,data:ege(Y)}],ee[3].push({type:2,data:na(Z)})})}Q.messages[0].data=na(ee);var re=ih(V),ce=ah(re);O.content=ce,O.size=O.content.length})();var ae=Zr(k[3][0].data);{var te=ae[1][0];delete ae[2];var G=Zr(te.data);{var ue=ya(G[2][0].data);(function(){for(var O=ir.find(A,o[ue].location),V=eo(to(O.content)),Q,X=0;X<V.length;++X){var ie=V[X];ie.id==ue&&(Q=ie)}var ee=Zr(Q.messages[0].data);{delete ee[6],delete ae[7];var Z=new Uint8Array(ee[5][0].data);ee[5]=[];for(var re=0,ce=0;ce<=n.e.r;++ce){var Y=Zr(Z);re+=fge(Y,a[ce],s),Y[1][0].data=An(ce),ee[5].push({data:na(Y),type:2})}ee[1]=[{type:0,data:An(n.e.c+1)}],ee[2]=[{type:0,data:An(n.e.r+1)}],ee[3]=[{type:0,data:An(re)}],ee[4]=[{type:0,data:An(n.e.r+1)}]}Q.messages[0].data=na(ee);var ge=ih(V),q=ah(ge);O.content=q,O.size=O.content.length})()}te.data=na(G)}k[3][0].data=na(ae)}C[4][0].data=na(k)}f.messages[0].data=na(C);var de=ih(h),T=ah(de);return d.content=T,d.size=d.content.length,A}function T8(t){return function(r){for(var n=0;n!=t.length;++n){var i=t[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function MB(t){T8([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function QB(t){T8([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function pge(t){return Nr.WS.indexOf(t)>-1?"sheet":t==Nr.CS?"chart":t==Nr.DS?"dialog":t==Nr.MS?"macro":t&&t.length?t:"sheet"}function gge(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,pge(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function vge(t,e,r,n,i,a,s,o,l,A,u,d){try{a[n]=A0(Os(t,r,!0),e);var h=Ci(t,e),f;switch(o){case"sheet":f=Q0e(h,e,i,l,a[n],A,u,d);break;case"chart":if(f=H0e(h,e,i,l,a[n],A,u,d),!f||!f["!drawel"])break;var p=Rm(f["!drawel"].Target,e),g=Y0(p),v=Nde(Os(t,p,!0),A0(Os(t,g,!0),p)),C=Rm(v,p),I=Y0(C);f=f0e(Os(t,C,!0),C,l,A0(Os(t,I,!0),C),A,f);break;case"macro":f=V0e(h,e,i,l,a[n],A,u,d);break;case"dialog":f=K0e(h,e,i,l,a[n],A,u,d);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=f;var F=[];a&&a[n]&&si(a[n]).forEach(function(E){var R="";if(a[n][E].Type==Nr.CMNT){R=Rm(a[n][E].Target,e);var L=G0e(Ci(t,R,!0),R,l);if(!L||!L.length)return;G4(f,L,!1)}a[n][E].Type==Nr.TCMNT&&(R=Rm(a[n][E].Target,e),F=F.concat(kde(Ci(t,R,!0),l)))}),F&&F.length&&G4(f,F,!0,l.people||[])}catch(E){if(l.WTF)throw E}}function Js(t){return t.charAt(0)=="/"?t.slice(1):t}function wge(t,e){if(Lf(),e=e||{},MB(e),io(t,"META-INF/manifest.xml")||io(t,"objectdata.xml"))return iF(t,e);if(io(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof a2<"u"){if(t.FileIndex)return a2(t);var r=ir.utils.cfb_new();return f4(t).forEach(function(M){xr(r,M,j6(t,M))}),a2(r)}throw new Error("Unsupported NUMBERS file")}if(!io(t,"[Content_Types].xml"))throw io(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):io(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=f4(t),i=_le(Os(t,"[Content_Types].xml")),a=!1,s,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",Ci(t,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!Ci(t,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),a=!0}i.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},A={};if(!e.bookSheets&&!e.bookProps){if(u0=[],i.sst)try{u0=$0e(Ci(t,Js(i.sst)),i.sst,e)}catch(M){if(e.WTF)throw M}e.cellStyles&&i.themes.length&&(l=z0e(Os(t,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],e)),i.style&&(A=j0e(Ci(t,Js(i.style)),i.style,l,e))}i.links.map(function(M){try{var K=A0(Os(t,Y0(Js(M))),M);return q0e(Ci(t,Js(M)),K,M,e)}catch{}});var u=M0e(Ci(t,Js(i.workbooks[0])),i.workbooks[0],e),d={},h="";i.coreprops.length&&(h=Ci(t,Js(i.coreprops[0]),!0),h&&(d=vO(h)),i.extprops.length!==0&&(h=Ci(t,Js(i.extprops[0]),!0),h&&Tle(h,d,e)));var f={};(!e.bookSheets||e.bookProps)&&i.custprops.length!==0&&(h=Os(t,Js(i.custprops[0]),!0),h&&(f=Fle(h,e)));var p={};if((e.bookSheets||e.bookProps)&&(u.Sheets?s=u.Sheets.map(function(K){return K.name}):d.Worksheets&&d.SheetNames.length>0&&(s=d.SheetNames),e.bookProps&&(p.Props=d,p.Custprops=f),e.bookSheets&&typeof s<"u"&&(p.SheetNames=s),e.bookSheets?p.SheetNames:e.bookProps))return p;s={};var g={};e.bookDeps&&i.calcchain&&(g=W0e(Ci(t,Js(i.calcchain)),i.calcchain));var v=0,C={},I,F;{var E=u.Sheets;d.Worksheets=E.length,d.SheetNames=[];for(var R=0;R!=E.length;++R)d.SheetNames[R]=E[R].name}var L=a?"bin":"xml",N=i.workbooks[0].lastIndexOf("/"),P=(i.workbooks[0].slice(0,N+1)+"_rels/"+i.workbooks[0].slice(N+1)+".rels").replace(/^\//,"");io(t,P)||(P="xl/_rels/workbook."+L+".rels");var x=A0(Os(t,P,!0),P.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(e.xlmeta=X0e(Ci(t,Js(i.metadata[0])),i.metadata[0],e)),(i.people||[]).length>=1&&(e.people=Ide(Ci(t,Js(i.people[0])),e)),x&&(x=gge(x,u.Sheets));var k=Ci(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=d.Worksheets;++v){var y="sheet";if(x&&x[v]?(I="xl/"+x[v][1].replace(/[\/]?xl\//,""),io(t,I)||(I=x[v][1]),io(t,I)||(I=P.replace(/_rels\/.*$/,"")+x[v][1]),y=x[v][2]):(I="xl/worksheets/sheet"+(v+1-k)+"."+L,I=I.replace(/sheet0\./,"sheet.")),F=I.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(v!=e.sheets)continue e;break;case"string":if(d.SheetNames[v].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var S=!1,_=0;_!=e.sheets.length;++_)typeof e.sheets[_]=="number"&&e.sheets[_]==v&&(S=1),typeof e.sheets[_]=="string"&&e.sheets[_].toLowerCase()==d.SheetNames[v].toLowerCase()&&(S=1);if(!S)continue e}}vge(t,I,F,d.SheetNames[v],v,C,s,y,e,u,l,A)}return p={Directory:i,Workbook:u,Props:d,Custprops:f,Deps:g,Sheets:s,SheetNames:d.SheetNames,Strings:u0,Styles:A,Themes:l,SSF:Hn(lr)},e&&e.bookFiles&&(t.files?(p.keys=n,p.files=t.files):(p.keys=[],p.files={},t.FullPaths.forEach(function(M,K){M=M.replace(/^Root Entry[\/]/,""),p.keys.push(M),p.files[M]=t.FileIndex[K]}))),e&&e.bookVBA&&(i.vba.length>0?p.vbaraw=Ci(t,Js(i.vba[0]),!0):i.defaults&&i.defaults.bin===Mde&&(p.vbaraw=Ci(t,"xl/vbaProject.bin",!0))),p}function bge(t,e){var r=e||{},n="Workbook",i=ir.find(t,n);try{if(n="/!DataSpaces/Version",i=ir.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(XAe(i.content),n="/!DataSpaces/DataSpaceMap",i=ir.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=JAe(i.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=ir.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=ZAe(i.content);if(s.length!=1||s[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=ir.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);tue(i.content)}catch{}if(n="/EncryptionInfo",i=ir.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=rue(i.content);if(n="/EncryptedPackage",i=ir.find(t,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function yge(t,e){return e.bookType=="ods"?k8(t,e):e.bookType=="numbers"?mge(t,e):e.bookType=="xlsb"?xge(t,e):_ge(t,e)}function xge(t,e){yh=1024,t&&!t.SSF&&(t.SSF=Hn(lr)),t&&t.SSF&&(Lf(),eb(t.SSF),e.revssf=rb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,d0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=n8.indexOf(e.bookType)>-1,i=BB();QB(e=e||{});var a=uB(),s="",o=0;if(e.cellXfs=[],$A(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),s="docProps/core.xml",xr(a,s,wO(t.Props,e)),i.coreprops.push(s),un(e.rels,2,s,Nr.CORE_PROPS),s="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],A=0;A<t.SheetNames.length;++A)(t.Workbook.Sheets[A]||{}).Hidden!=2&&l.push(t.SheetNames[A]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,xr(a,s,xO(t.Props)),i.extprops.push(s),un(e.rels,3,s,Nr.EXT_PROPS),t.Custprops!==t.Props&&si(t.Custprops||{}).length>0&&(s="docProps/custom.xml",xr(a,s,_O(t.Custprops)),i.custprops.push(s),un(e.rels,4,s,Nr.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var u={"!id":{}},d=t.Sheets[t.SheetNames[o-1]],h=(d||{})["!type"]||"sheet";switch(h){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,xr(a,s,J0e(o-1,s,e,t,u)),i.sheets.push(s),un(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Nr.WS[0])}if(d){var f=d["!comments"],p=!1,g="";f&&f.length>0&&(g="xl/comments"+o+"."+r,xr(a,g,tpe(f,g)),i.comments.push(g),un(u,-1,"../comments"+o+"."+r,Nr.CMNT),p=!0),d["!legacy"]&&p&&xr(a,"xl/drawings/vmlDrawing"+o+".vml",t8(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&xr(a,Y0(s),Uh(u))}return e.Strings!=null&&e.Strings.length>0&&(s="xl/sharedStrings."+r,xr(a,s,epe(e.Strings,s,e)),i.strs.push(s),un(e.wbrels,-1,"sharedStrings."+r,Nr.SST)),s="xl/workbook."+r,xr(a,s,Y0e(t,s)),i.workbooks.push(s),un(e.rels,1,s,Nr.WB),s="xl/theme/theme1.xml",xr(a,s,IB(t.Themes,e)),i.themes.push(s),un(e.wbrels,-1,"theme/theme1.xml",Nr.THEME),s="xl/styles."+r,xr(a,s,Z0e(t,s,e)),i.styles.push(s),un(e.wbrels,-1,"styles."+r,Nr.STY),t.vbaraw&&n&&(s="xl/vbaProject.bin",xr(a,s,t.vbaraw),i.vba.push(s),un(e.wbrels,-1,"vbaProject.bin",Nr.VBA)),s="xl/metadata."+r,xr(a,s,rpe(s)),i.metadata.push(s),un(e.wbrels,-1,"metadata."+r,Nr.XLMETA),xr(a,"[Content_Types].xml",pO(i,e)),xr(a,"_rels/.rels",Uh(e.rels)),xr(a,"xl/_rels/workbook."+r+".rels",Uh(e.wbrels)),delete e.revssf,delete e.ssf,a}function _ge(t,e){yh=1024,t&&!t.SSF&&(t.SSF=Hn(lr)),t&&t.SSF&&(Lf(),eb(t.SSF),e.revssf=rb(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,d0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=n8.indexOf(e.bookType)>-1,i=BB();QB(e=e||{});var a=uB(),s="",o=0;if(e.cellXfs=[],$A(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),s="docProps/core.xml",xr(a,s,wO(t.Props,e)),i.coreprops.push(s),un(e.rels,2,s,Nr.CORE_PROPS),s="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],A=0;A<t.SheetNames.length;++A)(t.Workbook.Sheets[A]||{}).Hidden!=2&&l.push(t.SheetNames[A]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,xr(a,s,xO(t.Props)),i.extprops.push(s),un(e.rels,3,s,Nr.EXT_PROPS),t.Custprops!==t.Props&&si(t.Custprops||{}).length>0&&(s="docProps/custom.xml",xr(a,s,_O(t.Custprops)),i.custprops.push(s),un(e.rels,4,s,Nr.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:s="xl/worksheets/sheet"+o+"."+r,xr(a,s,f8(o-1,e,t,d)),i.sheets.push(s),un(e.wbrels,-1,"worksheets/sheet"+o+"."+r,Nr.WS[0])}if(h){var p=h["!comments"],g=!1,v="";if(p&&p.length>0){var C=!1;p.forEach(function(I){I[1].forEach(function(F){F.T==!0&&(C=!0)})}),C&&(v="xl/threadedComments/threadedComment"+o+"."+r,xr(a,v,Tde(p,u,e)),i.threadedcomments.push(v),un(d,-1,"../threadedComments/threadedComment"+o+"."+r,Nr.TCMNT)),v="xl/comments"+o+"."+r,xr(a,v,r8(p)),i.comments.push(v),un(d,-1,"../comments"+o+"."+r,Nr.CMNT),g=!0}h["!legacy"]&&g&&xr(a,"xl/drawings/vmlDrawing"+o+".vml",t8(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&xr(a,Y0(s),Uh(d))}return e.Strings!=null&&e.Strings.length>0&&(s="xl/sharedStrings."+r,xr(a,s,KO(e.Strings,e)),i.strs.push(s),un(e.wbrels,-1,"sharedStrings."+r,Nr.SST)),s="xl/workbook."+r,xr(a,s,w8(t)),i.workbooks.push(s),un(e.rels,1,s,Nr.WB),s="xl/theme/theme1.xml",xr(a,s,IB(t.Themes,e)),i.themes.push(s),un(e.wbrels,-1,"theme/theme1.xml",Nr.THEME),s="xl/styles."+r,xr(a,s,YO(t,e)),i.styles.push(s),un(e.wbrels,-1,"styles."+r,Nr.STY),t.vbaraw&&n&&(s="xl/vbaProject.bin",xr(a,s,t.vbaraw),i.vba.push(s),un(e.wbrels,-1,"vbaProject.bin",Nr.VBA)),s="xl/metadata."+r,xr(a,s,e8()),i.metadata.push(s),un(e.wbrels,-1,"metadata."+r,Nr.XLMETA),u.length>1&&(s="xl/persons/person.xml",xr(a,s,Fde(u)),i.people.push(s),un(e.wbrels,-1,"persons/person.xml",Nr.PEOPLE)),xr(a,"[Content_Types].xml",pO(i,e)),xr(a,"_rels/.rels",Uh(e.rels)),xr(a,"xl/_rels/workbook."+r+".rels",Uh(e.wbrels)),delete e.revssf,delete e.ssf,a}function HB(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=zs(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Ege(t,e){return ir.find(t,"EncryptedPackage")?bge(t,e):_8(t,e)}function Bge(t,e){var r,n=t,i=e||{};return i.type||(i.type=Br&&Buffer.isBuffer(t)?"buffer":"base64"),r=z6(n,i),wge(r,i)}function I8(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return qx(t.slice(r),e);default:break e}return hf.to_workbook(t,e)}function Cge(t,e){var r="",n=HB(t,e);switch(e.type){case"base64":r=zs(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=td(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=bn(r)),e.type="binary",I8(r,e)}function Nge(t,e){var r=t;return e.type=="base64"&&(r=zs(r)),r=Zc.utils.decode(1200,r.slice(2),"str"),e.type="binary",I8(r,e)}function Sge(t){return t.match(/[^\x00-\x7F]/)?ml(t):t}function s2(t,e,r,n){return n?(r.type="string",hf.to_workbook(t,r)):hf.to_workbook(e,r)}function Gv(t,e){sB();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Gv(new Uint8Array(t),(r=Hn(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,i=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Mh={},r.dateNF&&(Mh.dateNF=r.dateNF),r.type||(r.type=Br&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Br?"buffer":"binary",n=_oe(t),typeof Uint8Array<"u"&&!Br&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=Sge(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return r=Hn(r),r.type="array",Gv(oB(n),r)}switch((i=HB(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return Ege(ir.read(n,r),r);break;case 9:if(i[1]<=8)return _8(n,r);break;case 60:return qx(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return PAe(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return HO.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?Bge(n,r):s2(t,n,r,a);case 239:return i[3]===60?qx(n,r):s2(t,n,r,a);case 255:if(i[1]===254)return Nge(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return Lu.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Lu.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Wx.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return WO.to_workbook(n,r);break;case 10:case 13:case 32:return Cge(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return FAe.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?Wx.to_workbook(n,r):s2(t,n,r,a)}function F8(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Dp(e.file,ir.write(t,{type:Br?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return ir.write(t,e)}function kge(t,e){var r=Hn(e||{}),n=yge(t,r);return Tge(n,r)}function Tge(t,e){var r={},n=Br?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?ir.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(Zw(i))}return e.password&&typeof encrypt_agile<"u"?F8(encrypt_agile(i,e.password),e):e.type==="file"?Dp(e.file,i):e.type=="string"?bn(i):i}function Ige(t,e){var r=e||{},n=Spe(t,r);return F8(n,r)}function sl(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return $0(ml(n));case"binary":return ml(n);case"string":return t;case"file":return Dp(e.file,n,"utf8");case"buffer":return Br?gc(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):sl(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Fge(t,e){switch(e.type){case"base64":return $0(t);case"binary":return t;case"string":return t;case"file":return Dp(e.file,t,"binary");case"buffer":return Br?gc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function c1(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?$0(r):e.type=="string"?bn(r):r;case"file":return Dp(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function P8(t,e){sB(),E0e(t);var r=Hn(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=P8(t,r);return r.type="array",Zw(n)}var i=0;if(r.sheet&&(typeof r.sheet=="number"?i=r.sheet:i=t.SheetNames.indexOf(r.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return sl(ype(t,r),r);case"slk":case"sylk":return sl(QO.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"htm":case"html":return sl(B8(t.Sheets[t.SheetNames[i]],r),r);case"txt":return Fge(D8(t.Sheets[t.SheetNames[i]],r),r);case"csv":return sl(VB(t.Sheets[t.SheetNames[i]],r),r,"\uFEFF");case"dif":return sl(HO.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"dbf":return c1(Wx.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"prn":return sl(hf.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"rtf":return sl(WO.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"eth":return sl(VO.from_sheet(t.Sheets[t.SheetNames[i]],r),r);case"fods":return sl(k8(t,r),r);case"wk1":return c1(Lu.sheet_to_wk1(t.Sheets[t.SheetNames[i]],r),r);case"wk3":return c1(Lu.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),c1(E8(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Ige(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return kge(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Pge(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function L8(t,e,r){var n=r||{};return n.type="file",n.file=e,Pge(n),P8(t,n)}function Lge(t,e,r,n,i,a,s,o){var l=yi(r),A=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!s||t[r])for(var f=e.s.c;f<=e.e.c;++f){var p=s?t[r][f]:t[n[f]+l];if(p===void 0||p.t===void 0){if(A===void 0)continue;a[f]!=null&&(h[a[f]]=A);continue}var g=p.v;switch(p.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(a[f]!=null){if(g==null)if(p.t=="e"&&g===null)h[a[f]]=null;else if(A!==void 0)h[a[f]]=A;else if(u&&g===null)h[a[f]]=null;else continue;else h[a[f]]=u&&(p.t!=="n"||p.t==="n"&&o.rawNumbers!==!1)?g:uc(p,g,o);g!=null&&(d=!1)}}return{row:h,isempty:d}}function Wv(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},A=e||{},u=A.range!=null?A.range:t["!ref"];switch(A.header===1?n=1:A.header==="A"?n=2:Array.isArray(A.header)?n=3:A.header==null&&(n=0),typeof u){case"string":l=Yr(u);break;case"number":l=Yr(t["!ref"]),l.s.r=u;break;default:l=u}n>0&&(i=0);var d=yi(l.s.r),h=[],f=[],p=0,g=0,v=Array.isArray(t),C=l.s.r,I=0,F={};v&&!t[C]&&(t[C]=[]);var E=A.skipHidden&&t["!cols"]||[],R=A.skipHidden&&t["!rows"]||[];for(I=l.s.c;I<=l.e.c;++I)if(!(E[I]||{}).hidden)switch(h[I]=Xn(I),r=v?t[C][I]:t[h[I]+d],n){case 1:a[I]=I-l.s.c;break;case 2:a[I]=h[I];break;case 3:a[I]=A.header[I-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=uc(r,null,A),g=F[s]||0,!g)F[s]=1;else{do o=s+"_"+g++;while(F[o]);F[s]=g,F[o]=1}a[I]=o}for(C=l.s.r+i;C<=l.e.r;++C)if(!(R[C]||{}).hidden){var L=Lge(t,l,C,h,n,a,v,A);(L.isempty===!1||(n===1?A.blankrows!==!1:A.blankrows))&&(f[p++]=L.row)}return f.length=p,f}var cF=/"/g;function Dge(t,e,r,n,i,a,s,o){for(var l=!0,A=[],u="",d=yi(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var f=o.dense?(t[r]||[])[h]:t[n[h]+d];if(f==null)u="";else if(f.v!=null){l=!1,u=""+(o.rawNumbers&&f.t=="n"?f.v:uc(f,null,o));for(var p=0,g=0;p!==u.length;++p)if((g=u.charCodeAt(p))===i||g===a||g===34||o.forceQuotes){u='"'+u.replace(cF,'""')+'"';break}u=="ID"&&(u='"ID"')}else f.f!=null&&!f.F?(l=!1,u="="+f.f,u.indexOf(",")>=0&&(u='"'+u.replace(cF,'""')+'"')):u="";A.push(u)}return o.blankrows===!1&&l?null:A.join(s)}function VB(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var i=Yr(t["!ref"]),a=n.FS!==void 0?n.FS:",",s=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),A=new RegExp((a=="|"?"\\|":a)+"+$"),u="",d=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],f=n.skipHidden&&t["!rows"]||[],p=i.s.c;p<=i.e.c;++p)(h[p]||{}).hidden||(d[p]=Xn(p));for(var g=0,v=i.s.r;v<=i.e.r;++v)(f[v]||{}).hidden||(u=Dge(t,i,v,d,s,l,a,n),u!=null&&(n.strip&&(u=u.replace(A,"")),(u||n.blankrows!==!1)&&r.push((g++?o:"")+u)));return delete n.dense,r.join("")}function D8(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=VB(t,e);return r}function Rge(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var i=Yr(t["!ref"]),a="",s=[],o,l=[],A=Array.isArray(t);for(o=i.s.c;o<=i.e.c;++o)s[o]=Xn(o);for(var u=i.s.r;u<=i.e.r;++u)for(a=yi(u),o=i.s.c;o<=i.e.c;++o)if(e=s[o]+a,r=A?(t[u]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function R8(t,e,r){var n=r||{},i=+!n.skipHeader,a=t||{},s=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Yn(n.origin):n.origin;s=l.r,o=l.c}var A,u={s:{c:0,r:0},e:{c:o,r:s+e.length-1+i}};if(a["!ref"]){var d=Yr(a["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),s==-1&&(s=d.e.r+1,u.e.r=s+e.length-1+i)}else s==-1&&(s=0,u.e.r=e.length-1+i);var h=n.header||[],f=0;e.forEach(function(g,v){si(g).forEach(function(C){(f=h.indexOf(C))==-1&&(h[f=h.length]=C);var I=g[C],F="z",E="",R=Ar({c:o+f,r:s+v+i});A=ip(a,R),I&&typeof I=="object"&&!(I instanceof Date)?a[R]=I:(typeof I=="number"?F="n":typeof I=="boolean"?F="b":typeof I=="string"?F="s":I instanceof Date?(F="d",n.cellDates||(F="n",I=Qi(I)),E=n.dateNF||lr[14]):I===null&&n.nullError&&(F="e",I=0),A?(A.t=F,A.v=I,delete A.w,delete A.R,E&&(A.z=E)):a[R]=A={t:F,v:I},E&&(A.z=E))})}),u.e.c=Math.max(u.e.c,o+h.length-1);var p=yi(s);if(i)for(f=0;f<h.length;++f)a[Xn(f+o)+p]={t:"s",v:h[f]};return a["!ref"]=wr(u),a}function Uge(t,e){return R8(null,t,e)}function ip(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Yn(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ip(t,Ar(e)):ip(t,Ar({r:e,c:r||0}))}function Oge(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function KB(){return{SheetNames:[],Sheets:{}}}function jB(t,e,r,n){var i=1;if(!r)for(;i<=65535&&t.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||r;for(++i;i<=65535&&t.SheetNames.indexOf(r=s+i)!=-1;++i);}if(v8(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Mge(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Oge(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Qge(t,e){return t.z=e,t}function U8(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Hge(t,e,r){return U8(t,"#"+e,r)}function Vge(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Kge(t,e,r,n){for(var i=typeof e!="string"?e:Yr(e),a=typeof e=="string"?e:wr(e),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=ip(t,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return t}var uA={encode_col:Xn,encode_row:yi,encode_cell:Ar,encode_range:wr,decode_col:wB,decode_row:vB,split_cell:ele,decode_cell:Yn,decode_range:fs,format_cell:uc,sheet_add_aoa:cO,sheet_add_json:R8,sheet_add_dom:C8,aoa_to_sheet:Df,json_to_sheet:Uge,table_to_sheet:N8,table_to_book:Xpe,sheet_to_csv:VB,sheet_to_txt:D8,sheet_to_json:Wv,sheet_to_html:B8,sheet_to_formulae:Rge,sheet_to_row_object_array:Wv,sheet_get_cell:ip,book_new:KB,book_append_sheet:jB,book_set_sheet_visibility:Mge,cell_set_number_format:Qge,cell_set_hyperlink:U8,cell_set_internal_link:Hge,cell_add_comment:Vge,sheet_set_array_formula:Kge,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const O8=({sites:t,setSites:e,transactions:r,setTransactions:n,agreements:i,setAgreements:a,companies:s,setCompanies:o,refreshData:l})=>{const A=async()=>{try{return await Yi()}catch(v){return console.error("Error fetching sites:",v),[]}};return{getSites:A,getTransactions:async()=>{try{return await lc()}catch(v){return console.error("Error fetching transactions:",v),[]}},getAgreements:async()=>{try{return await Sa()}catch(v){return console.error("Error fetching agreements:",v),[]}},getCompanies:async()=>{try{return await Xa()}catch(v){return console.error("Error fetching companies:",v),[]}},handleArchiveSite:async v=>{var F;const C=((F=t.find(E=>E.id===v))==null?void 0:F.name)||"Bilinmeyen Site";if(await window.showConfirm("Site Arivle",`${C} isimli siteyi arivlemek istediinize emin misiniz?`,"warning"))try{const E=await iq(v);return E&&E.success!==!1?(await Un({user:"Admin",action:`Site arivlendi: ${C}`}),l?await l(!0):e(t.filter(R=>R.id!==v)),await window.showAlert("Baarl","Site baaryla arivlendi.","success"),!0):(await window.showAlert("Hata","Site arivlenirken bir hata olutu.","error"),!1)}catch(E){return console.error("Error archiving site:",E),await window.showAlert("Hata","Site arivlenirken bir hata olutu: "+(E.message||"Bilinmeyen hata"),"error"),!1}return!1},handleDeleteSite:async v=>{console.log("handleDeleteSite called with siteId:",v);let C=t&&t.length>0?t:[];if(C.length===0)try{C=await A()}catch(L){console.error("Error fetching sites:",L),C=[]}console.log("Current sites:",C.map(L=>({id:L.id,_docId:L._docId,name:L.name})));const I=C.find(L=>!!(L.id===v||L._docId===v||L.id&&L.id.toString()===v.toString()||L._docId&&L._docId.toString()===v.toString()||!L._docId&&L.id===v)),F=(I==null?void 0:I.name)||"Bilinmeyen Site";if(!I){if(console.log("Site not found in state, but attempting deletion anyway:",v),console.log("Available site IDs:",C.map(N=>({id:N.id,_docId:N._docId,name:N.name}))),await window.showConfirm("Site Sil","Siteyi kalc olarak silmek istediinize emin misiniz? Bu ilem geri alnamaz!","error"))try{const N=await Gb(v);if(console.log("deleteSite result:",N,"siteId:",v),N){if(l)await l();else{const P=await Yi();e(P)}return await window.showAlert("Baarl","Site baaryla silindi.","success"),!0}else return await window.showAlert("Hata","Site silinirken bir hata olutu.","error"),!1}catch(N){return console.error("Error deleting site:",N),await window.showAlert("Hata",`Site silinirken bir hata olutu: ${N.message}`,"error"),!1}return!1}const E=I.id||I._docId||v;if(await window.showConfirm("Site Sil",`${F} isimli siteyi kalc olarak silmek istediinize emin misiniz? Bu ilem geri alnamaz!`,"error"))try{const L=await Gb(E);return console.log("deleteSite result:",L,"idToDelete:",E),L?(e(N=>{const P=N.filter(x=>{const k=x.id===E||x._docId===E||x.id===I.id||x._docId===I._docId;return k&&console.log("Removing site from state:",x.id,x._docId,x.name),!k});return console.log("Sites after filter:",P.length,"remaining"),P}),await Un({user:"Admin",action:`Site kalc olarak silindi: ${F}`}),await window.showAlert("Baarl","Site baaryla silindi.","success"),!0):(await window.showAlert("Hata","Site silinirken bir hata olutu.","error"),!1)}catch(L){return console.error("Error deleting site:",L),await window.showAlert("Hata","Site silinirken bir hata olutu.","error"),!1}return!1},handleDeleteAllSites:async()=>{let v=t&&t.length>0?t:[];if(v.length===0)try{v=await A()||[]}catch(I){console.error("Error fetching sites:",I),v=[]}if(!v||v.length===0){await window.showAlert("Bilgi","Silinecek site bulunmamaktadr.","info");return}if(await window.showConfirm("Tm Siteleri Kalc Olarak Sil",`Tm ${v.length} siteyi kalc olarak silmek istediinize emin misiniz? Bu ilem geri alnamaz!`,"error"))try{let I=0,F=0;const E=v.map(async R=>{try{const L=R.id||R._docId;return L?await Gb(L)?(I++,await Un({user:"Admin",action:`Site kalc olarak silindi: ${R.name||L}`}),{success:!0,siteId:L}):(F++,{success:!1,siteId:L}):(console.error("Site has no ID:",R),F++,{success:!1,siteId:null,error:"Site has no ID"})}catch(L){return console.error("Error deleting site:",R.id,L),F++,{success:!1,siteId:R.id,error:L.message}}});await Promise.all(E),e([]),l&&await l(),await window.showAlert("lem Tamamland",`${I} site baaryla silindi. ${F} site silinirken hata olutu.`,"info")}catch(I){console.error("Error deleting all sites:",I),await window.showAlert("Hata","Siteler silinirken bir hata olutu: "+I.message,"error")}}}},jge=({sites:t,setSites:e,transactions:r,setTransactions:n,selectedSiteForPayment:i,setSelectedSiteForPayment:a,setShowPaymentSelection:s,setPendingPayments:o,formatCurrency:l,refreshData:A,processedPayments:u=[],setProcessedPayments:d,helpers:h,agreements:f,companies:p})=>{const g=async F=>{if(!F.hasPendingPayment||!F.pendingPayments||F.pendingPayments.length===0){typeof window.showAlert=="function"?await window.showAlert("Bilgi","Bu site iin denecek bir tutar bulunmamaktadr.","info"):alert("Bu site iin denecek bir tutar bulunmamaktadr.");return}a(F),o(F.pendingPayments),s(!0)},v=async(F,E,R=!1)=>{try{if(!F||!E)throw new Error("Invalid site or payment data");if(!F.id||!E.agreementId||!E.amount)throw new Error("Missing required payment data: site ID, agreement ID, or amount");const L=r.reduce((x,k)=>x+k.amount,0);if(L<E.amount){const x=`Kasada yeterli bakiye bulunmamaktadr. Gerekli tutar: ${l?l(E.amount):E.amount+""}, Kasa bakiyesi: ${l?l(L):L+""}`;typeof window.showAlert=="function"?await window.showAlert("Yetersiz Bakiye",x,"warning"):alert(x),s(!1),a(null),o([]);return}const N={date:new Date().toISOString().split("T")[0],type:"expense",source:`Site demesi - ${F.name||"Unknown Site"}`,description:`${F.name||"Unknown Site"} iin ${E.companyName||"Unknown Company"} anlamasndan gelen deme (${F.agreementPercentage||25}% pay) - ${l?l(E.amount):E.amount+""}`,amount:-Math.abs(E.amount),siteId:F.id,agreementId:E.agreementId};console.log("Creating transaction with data:",N);const P=await hl(N);if(console.log("Transaction response:",P),P){const x=[...r,P];n(x);const k=t.map(y=>{const S=h.calculatePendingPayments(y,f,p,x);return{...y,pendingPayments:S,hasPendingPayment:S.length>0}});e(k);try{const y=k.find(S=>S.id===F.id);if(y){console.log("Updating site with data:",y);const S=await SA(F.id,y);console.log("Site update result:",S)}}catch(y){console.error("Error updating site in backend:",y)}if(await Un({user:"Admin",action:`Site demesi yapld: ${F.name||"Unknown Site"} (${l?l(E.amount):E.amount+""}) - ${E.companyName||"Unknown Company"} anlamas`}),!R){const y=`${F.name||"Unknown Site"} iin ${l?l(E.amount):E.amount+""} tutarnda deme yapld. (${E.companyName||"Unknown Company"} anlamas)`;typeof window.showAlert=="function"?await window.showAlert("Baarl",y,"success"):alert(y)}A&&await A()}else throw new Error("Transaction creation failed - no response from server")}catch(L){console.error("Error processing site payment:",L);const N="deme ilemi srasnda bir hata olutu: "+(L.message||L.toString());throw typeof window.showAlert=="function"?await window.showAlert("Hata",N,"error"):alert(N),L}finally{R||(s(!1),a(null),o([]))}};return{handlePaymentSite:g,processSitePayment:v,handleSelectPayment:F=>{i&&(d([...u,F.agreementId]),v(i,F))},handlePayAllPayments:async F=>{if(!(!F||!F.pendingPayments||F.pendingPayments.length===0))try{for(const L of F.pendingPayments)await v(F,L,!0);const E=F.pendingPayments.reduce((L,N)=>L+N.amount,0),R=`${F.name} iin toplam ${l?l(E):E+""} tutarnda ${F.pendingPayments.length} deme ilemi tamamland.`;typeof window.showAlert=="function"?await window.showAlert("Baarl",R,"success"):alert(R),s(!1),a(null),o([]),d([])}catch(E){console.error("Error processing bulk payments:",E);const R="Toplu deme ilemi srasnda bir hata olutu: "+(E.message||E.toString());typeof window.showAlert=="function"?await window.showAlert("Hata",R,"error"):alert(R)}}}},M8=({sites:t,setSites:e,refreshData:r})=>{const n=async s=>{const o=s.target.files[0];if(!o)return;const l=o.name.split(".").pop().toLowerCase();if(l!=="xlsx"&&l!=="xls"){typeof window.showAlert=="function"?await window.showAlert("Hata","Ltfen geerli bir Excel dosyas ykleyin (.xlsx veya .xls)","error"):alert("Ltfen geerli bir Excel dosyas ykleyin (.xlsx veya .xls)");return}if(o.size>5242880){typeof window.showAlert=="function"?await window.showAlert("Hata","Dosya boyutu 5MB'dan byk olamaz","error"):alert("Dosya boyutu 5MB'dan byk olamaz");return}const A=new FileReader;A.onload=async u=>{try{const d=u.target.result,h=Gv(d,{type:"binary"}),f=h.SheetNames[0],p=h.Sheets[f],g=uA.sheet_to_json(p,{header:1,defval:""});if(!g||g.length===0){typeof window.showAlert=="function"?await window.showAlert("Uyar","Excel dosyasnda ie aktarlacak veri bulunamad. Ltfen ablonu kullandnzdan emin olun.","warning"):alert("Excel dosyasnda ie aktarlacak veri bulunamad. Ltfen ablonu kullandnzdan emin olun.");return}let v=0;const I=(g[0]||[]).map(R=>String(R||"").toLowerCase().trim()).join(" ");if((I.includes("site ad")||I.includes("mahalle")||I.includes("ynetici")||I.includes("site tr"))&&(v=1),g.length<=v){typeof window.showAlert=="function"?await window.showAlert("Uyar","Excel dosyasnda ie aktarlacak veri bulunamad. Ltfen ablonu kullandnzdan emin olun.","warning"):alert("Excel dosyasnda ie aktarlacak veri bulunamad. Ltfen ablonu kullandnzdan emin olun.");return}const F=[],E=[];for(let R=v;R<g.length;R++){const L=g[R];if(!L||L.length===0||L.length===1&&!L[0])continue;for(;L.length<13;)L.push("");const N=L.map(y=>y==null?"":String(y).trim());console.log(`Processing row ${R+1}:`,N);const P=N[4]?String(N[4]).trim():"",x=P==="2"||P==="2.0"?"business_center":"site",k={name:N[0]||"",neighborhood:N[1]||"",manager:N[2]||"",phone:N[3]||"",siteType:x,blocks:N[5]||"",elevatorsPerBlock:N[6]||"",agreementPercentage:N[7]||"",apartmentCount:N[8]||"",averagePeople:N[9]||"",businessCount:N[10]||"",peopleCount:N[11]||"",notes:N[12]||""};if((!k.phone||k.phone.trim()==="")&&(k.phone="123456"),console.log(`Parsed site data for row ${R+1}:`,k),!k.name){E.push(`Satr ${R+1}: Site ad eksik`);continue}if(!k.manager){E.push(`Satr ${R+1}: Ynetici ad eksik`);continue}if(k.blocks!==""){const y=k.blocks.toString().trim();if(y&&(isNaN(parseInt(y))||parseInt(y)<0)){E.push(`Satr ${R+1}: Blok says geersiz (${y})`);continue}k.blocks=y?parseInt(y):""}else k.blocks="";if(k.elevatorsPerBlock!==""){const y=k.elevatorsPerBlock.toString().trim();if(y&&(isNaN(parseInt(y))||parseInt(y)<0)){E.push(`Satr ${R+1}: Asansr says geersiz (${y})`);continue}k.elevatorsPerBlock=y?parseInt(y):""}else k.elevatorsPerBlock="";if(k.agreementPercentage!==""){const y=k.agreementPercentage.toString().trim();if(y&&(isNaN(parseFloat(y))||parseFloat(y)<0||parseFloat(y)>100)){E.push(`Satr ${R+1}: Anlama yzdesi geersiz (${y}). 0-100 arasnda bir deer olmaldr.`);continue}k.agreementPercentage=y?parseFloat(y):""}else k.agreementPercentage="";if(k.siteType==="site"){if(k.apartmentCount!==""){const y=k.apartmentCount.toString().trim();if(y&&(isNaN(parseInt(y))||parseInt(y)<0)){E.push(`Satr ${R+1}: Daire says geersiz (${y})`);continue}k.apartmentCount=y?parseInt(y):""}else k.apartmentCount="";k.apartmentCount&&k.apartmentCount!==""?k.averagePeople=parseInt(k.apartmentCount)*3:k.averagePeople="",k.businessCount="",k.peopleCount=""}else if(k.siteType==="business_center"){if(k.businessCount!==""){const y=k.businessCount.toString().trim();if(y&&(isNaN(parseInt(y))||parseInt(y)<0)){E.push(`Satr ${R+1}: yeri says geersiz (${y})`);continue}k.businessCount=y?parseInt(y):""}else k.businessCount="";if(k.peopleCount!==""){const y=k.peopleCount.toString().trim();if(y&&(isNaN(parseInt(y))||parseInt(y)<0)){E.push(`Satr ${R+1}:  merkezine giren kii says geersiz (${y})`);continue}k.peopleCount=y?parseInt(y):""}else k.peopleCount="";k.apartmentCount="",k.averagePeople="",k.elevators=0,k.panels=0}if(k.siteType==="site"){const y=parseInt(k.blocks)||0,S=parseInt(k.elevatorsPerBlock)||0;k.elevators=y*S,k.panels=k.elevators*2}F.push(k)}if(E.length>0&&(console.log("Skipped rows:",E),typeof window.showAlert=="function"?await window.showAlert("Uyar",`${E.length} satr atland. Detayl bilgi iin konsolu kontrol edin.`,"warning"):alert(`${E.length} satr atland. Detayl bilgi iin konsolu kontrol edin.`)),F.length===0){typeof window.showAlert=="function"?await window.showAlert("Uyar","e aktarlacak geerli site bulunamad. Ltfen ablon dosyasn kullandnzdan emin olun ve gerekli alanlar doldurun.","warning"):alert("e aktarlacak geerli site bulunamad. Ltfen ablon dosyasn kullandnzdan emin olun ve gerekli alanlar doldurun.");return}console.log("Sites to import:",F),await i(F)}catch(d){console.error("Error reading Excel file:",d),typeof window.showAlert=="function"?await window.showAlert("Hata","Excel dosyas okunurken bir hata olutu: "+d.message,"error"):alert("Excel dosyas okunurken bir hata olutu: "+d.message)}},A.readAsBinaryString(o)},i=async s=>{if(console.log("Importing sites data:",s),!s||s.length===0){typeof window.showAlert=="function"?await window.showAlert("Uyar","e aktarlacak site bulunamad. Ltfen ablon dosyasn kullandnzdan emin olun ve en az bir satr veri ekleyin.","warning"):alert("e aktarlacak site bulunamad. Ltfen ablon dosyasn kullandnzdan emin olun ve en az bir satr veri ekleyin.");return}try{const o=await Yi();let l=0,A=0,u=0;const d=[];for(let h=0;h<s.length;h++){const f=s[h];try{if(console.log(`Processing site ${h+1}/${s.length}:`,f),!f.name||!f.manager){const g=`Satr ${h+2}: Gerekli alanlar eksik (Site: ${f.name||"Bilinmeyen"}, Ynetici: ${f.manager||"Bilinmeyen"})`;console.log(g),d.push(g),u++;continue}const p=o.find(g=>g.name.toLowerCase()===f.name.toLowerCase()&&g.neighborhood.toLowerCase()===f.neighborhood.toLowerCase());if(p){console.log(`Updating existing site: ${p.id}`,f);const g={...p,...f,id:p.id,pendingPayments:p.pendingPayments||[],hasPendingPayment:p.hasPendingPayment||!1,elevators:f.blocks&&f.elevatorsPerBlock?parseInt(f.blocks)*parseInt(f.elevatorsPerBlock):p.elevators||0,panels:f.blocks&&f.elevatorsPerBlock?parseInt(f.blocks)*parseInt(f.elevatorsPerBlock)*2:p.panels||0},v=await SA(p.id,g);if(v)e(C=>C.map(I=>I.id===p.id?v:I)),A++,await Un({user:"Admin",action:`Site gncellendi (Excel ie aktarma): ${f.name}`}),await new Promise(C=>setTimeout(C,100));else{const C=`Satr ${h+2}: Mevcut site gncellenemedi - ${f.name}`;console.log(C),d.push(C),u++}}else{const g=o.length+h+1,v=await $D(f,null,g);if(v)e(C=>[...C,v]),l++,await Un({user:"Admin",action:`Site Excel ile ie aktarld: ${f.name}`}),await new Promise(C=>setTimeout(C,100));else{const C=`Satr ${h+2}: Site oluturulamad - ${f.name}`;console.log(C),d.push(C),u++}}}catch(p){const g=`Satr ${h+2}: Hata olutu - ${f.name}: ${p.message}`;console.error(g,p),d.push(g),u++}}if(d.length>0&&console.log("Import error details:",d),l>0||A>0||u>0){let h="";l>0&&(h+=`${l} yeni site oluturuldu. `),A>0&&(h+=`${A} site gncellendi. `),u>0&&(h+=`${u} site ilenemedi. `),u>0&&(h+="Detayl bilgi iin konsolu kontrol edin."),typeof window.showAlert=="function"?await window.showAlert("e Aktarma Tamamland",h,l>0||A>0?"success":"warning"):alert(h)}else typeof window.showAlert=="function"?await window.showAlert("Uyar","e aktarlacak site bulunamad. Ltfen ablon dosyasn kullandnzdan emin olun ve en az bir satr veri ekleyin.","warning"):alert("e aktarlacak site bulunamad. Ltfen ablon dosyasn kullandnzdan emin olun ve en az bir satr veri ekleyin.")}catch(o){console.error("Error importing sites from Excel:",o),typeof window.showAlert=="function"?await window.showAlert("Hata","Siteler ie aktarlrken bir hata olutu: "+o.message,"error"):alert("Siteler ie aktarlrken bir hata olutu: "+o.message)}};return{handleExcelImport:n,importSitesFromExcel:i,exportSitesToExcel:(s=null)=>{const o=s||t;if(console.log("Exporting sites to Excel, sites data:",o),!o||o.length===0){console.error("No sites data available for export"),typeof window.showAlert=="function"?window.showAlert("Uyar","ndirilecek site verisi bulunamad. Ltfen nce siteleri ykleyin.","warning"):alert("ndirilecek site verisi bulunamad. Ltfen nce siteleri ykleyin.");return}const l=o.map(d=>({"Site Ad":d.name,Mahalle:d.neighborhood,"Ynetici Ad":d.manager,"Ynetici letiim":d.phone,"Site Tr":d.siteType==="site"?"Site":" Merkezi","Blok Says":d.blocks,"1 Blok iin Asansr Says":d.elevatorsPerBlock,"Toplam Asansr":d.elevators,"Panel Says":d.panels,"Anlama Yzdesi":d.agreementPercentage,"Daire Says":d.siteType==="site"?d.apartmentCount||0:"-","Ortalama nsan Says":d.siteType==="site"?d.averagePeople||0:"-","yeri Says":d.siteType==="business_center"?d.businessCount||0:"-"," Merkezine Giren Kii Says":d.siteType==="business_center"?d.peopleCount||0:"-",Not:d.notes})),A=uA.json_to_sheet(l),u=uA.book_new();uA.book_append_sheet(u,A,"Siteler"),console.log("Exporting Excel file with data:",l);try{L8(u,"siteler.xlsx"),console.log("Excel file exported successfully")}catch(d){console.error("Error exporting Excel file:",d),alert("Excel dosyas indirilirken hata olutu: "+d.message)}}}};let o2=!1;const zge=({sites:t,setSites:e,currentSite:r,setCurrentSite:n,setShowAddForm:i,setFormData:a,formData:s,calculateTotalElevators:o,calculatePanels:l,calculateAveragePeople:A,refreshData:u})=>({handleFormSubmit:async h=>{if(h.preventDefault(),o2){console.warn("Site form submit already in progress, ignoring duplicate submit.");return}o2=!0;const f=s||{};console.log("Form submitted with data:",f),console.log("FormData keys:",Object.keys(f)),console.log("FormData values:",Object.values(f));const p=f;if(!p.name||!p.manager){typeof window.showAlert=="function"?await window.showAlert("Eksik Bilgi","Ltfen zorunlu alanlar doldurunuz (Site Ad ve Ynetici Ad).","warning"):alert("Ltfen zorunlu alanlar doldurunuz (Site Ad ve Ynetici Ad).");return}if(p.siteType==="site"){if(!p.apartmentCount||parseInt(p.apartmentCount)<=0){typeof window.showAlert=="function"?await window.showAlert("Eksik Bilgi","Site iin daire saysn girmeniz gerekiyor.","warning"):alert("Site iin daire saysn girmeniz gerekiyor.");return}}else if(p.siteType==="business_center"){if(!p.manualPanels||parseInt(p.manualPanels)<=0){typeof window.showAlert=="function"?await window.showAlert("Eksik Bilgi"," merkezi iin panel saysn girmeniz gerekiyor.","warning"):alert(" merkezi iin panel saysn girmeniz gerekiyor.");return}if(!p.businessCount||parseInt(p.businessCount)<=0){typeof window.showAlert=="function"?await window.showAlert("Eksik Bilgi"," merkezi iin iyeri saysn girmeniz gerekiyor.","warning"):alert(" merkezi iin iyeri saysn girmeniz gerekiyor.");return}if(!p.peopleCount||parseInt(p.peopleCount)<=0){typeof window.showAlert=="function"?await window.showAlert("Eksik Bilgi"," merkezine giren kii saysn girmeniz gerekiyor.","warning"):alert(" merkezine giren kii saysn girmeniz gerekiyor.");return}}const g={...p,elevators:o(p.blocks,p.elevatorsPerBlock),panels:p.siteType==="business_center"?parseInt(p.manualPanels)||0:l(p.blocks,p.elevatorsPerBlock),averagePeople:p.siteType==="site"?A(p.apartmentCount):p.averagePeople||0};console.log("Site data to be saved:",g);try{if(r){console.log("Updating existing site:",r.id);const v=await SA(r.id,g);if(console.log("Update result:",v),v)e(t.map(C=>C.id===r.id?v:C)),i(!1),await Un({user:"Admin",action:`Site gncellendi: ${g.name}`}),typeof window.showAlert=="function"?await window.showAlert("Baarl","Site baaryla gncellendi.","success"):alert("Site baaryla gncellendi.");else throw new Error("Site gncelleme ilemi baarsz oldu")}else{console.log("Creating new site");const v=await $D(g);if(console.log("Create result:",v),v)e(C=>C.some(F=>F.id===v.id||F._docId===v.id||F.id===v._docId)?(console.warn("Site already exists in state, skipping duplicate:",v.id),C):[...C,v]),i(!1),a({name:"",manager:"",phone:"",blocks:"",elevatorsPerBlock:"",agreementPercentage:"",notes:"",neighborhood:"",siteType:"site",manualPanels:"",apartmentCount:"",averagePeople:"",businessCount:"",peopleCount:""}),await Un({user:"Admin",action:`Yeni ${p.siteType==="business_center"?"i merkezi":"site"} eklendi: ${g.name}`}),typeof window.showAlert=="function"?await window.showAlert("Baarl",`Yeni ${p.siteType==="business_center"?"i merkezi":"site"} baaryla eklendi.`,"success"):alert("Yeni site baaryla eklendi.");else throw new Error("Site oluturma ilemi baarsz oldu")}}catch(v){console.error("Error saving site:",v),typeof window.showAlert=="function"?await window.showAlert("Hata",`Site kaydedilirken bir hata olutu: ${v.message}`,"error"):alert(`Site kaydedilirken bir hata olutu: ${v.message}`)}finally{o2=!1}}}),$ge=({sites:t,setSites:e,transactions:r,setTransactions:n,agreements:i,setAgreements:a,companies:s,setCompanies:o,formData:l,setFormData:A,selectedSiteForPayment:u,setSelectedSiteForPayment:d,pendingPayments:h,setPendingPayments:f,showPaymentSelection:p,setShowPaymentSelection:g,currentSiteForAgreements:v,setCurrentSiteForAgreements:C,currentSite:I,setCurrentSite:F,setShowAddForm:E,calculateTotalElevators:R,calculatePanels:L,formatCurrency:N,refreshData:P,processedPayments:x,setProcessedPayments:k,helpers:y})=>{const S=te=>{console.log("Show site:",te)},_=te=>{C(te)},M=O8({sites:t,setSites:e,transactions:r,setTransactions:n,agreements:i,setAgreements:a,companies:s,setCompanies:o,refreshData:P}),K=jge({sites:t,setSites:e,transactions:r,setTransactions:n,selectedSiteForPayment:u,setSelectedSiteForPayment:d,setShowPaymentSelection:g,setPendingPayments:f,formatCurrency:N,refreshData:P,processedPayments:x,setProcessedPayments:k,helpers:y,agreements:i,companies:s}),z=M8({sites:t,setSites:e,refreshData:P}),ae=zge({sites:t,setSites:e,currentSite:I,setCurrentSite:F,setShowAddForm:E,setFormData:A,formData:l,calculateTotalElevators:R,calculatePanels:L,calculateAveragePeople:y.calculateAveragePeople,refreshData:P});return{getSites:M.getSites,getTransactions:M.getTransactions,getAgreements:M.getAgreements,getCompanies:M.getCompanies,handleArchiveSite:M.handleArchiveSite,handleDeleteAllSites:M.handleDeleteAllSites,handlePaymentSite:K.handlePaymentSite,processSitePayment:K.processSitePayment,handleSelectPayment:K.handleSelectPayment,handlePayAllPayments:K.handlePayAllPayments,handleExcelImport:z.handleExcelImport,importSitesFromExcel:z.importSitesFromExcel,handleExportToExcel:()=>z.exportSitesToExcel(t),handleFormSubmit:ae.handleFormSubmit,handleShowSite:S,handleShowActiveAgreements:_,refreshData:P,sites:t,transactions:r}},Gge=({setShowModal:t,setCurrentSite:e,setShowAddForm:r,setFormData:n,setShowPaymentSelection:i,setSelectedSiteForPayment:a,setPendingPayments:s,setShowActiveAgreements:o,setCurrentSiteForAgreements:l,setShowExcelInfo:A,fileInputRef:u,calculateTotalElevators:d,calculatePanels:h})=>({handleAddSite:()=>{n({name:"",manager:"",phone:"",blocks:"",elevatorsPerBlock:"",agreementPercentage:"",notes:"",neighborhood:"",siteType:"site",manualPanels:"",apartmentCount:"",averagePeople:"",businessCount:"",peopleCount:"",bankAccountName:"",iban:""}),e(null),r(!0)},handleEditSite:N=>{n({name:N.name||"",manager:N.manager||"",phone:N.phone||"",blocks:N.blocks||"",elevatorsPerBlock:N.elevatorsPerBlock||"",agreementPercentage:N.agreementPercentage||"",notes:N.notes||"",neighborhood:N.neighborhood||"",siteType:N.siteType||"site",manualPanels:N.manualPanels||"",apartmentCount:N.apartmentCount||"",averagePeople:N.averagePeople||"",businessCount:N.businessCount||"",peopleCount:N.peopleCount||"",bankAccountName:N.bankAccountName||"",iban:N.iban||""}),e(N),r(!0)},handleShowSite:N=>{e(N),t(!0)},handleCloseModal:()=>{t(!1),e(null)},handleCloseAddForm:()=>{r(!1),e(null)},handleFormChange:N=>{const{name:P,value:x}=N.target;n(k=>({...k,[P]:x}))},handleClosePaymentSelection:()=>{i(!1),a(null),s([])},handleShowActiveAgreements:N=>{l(N),o(!0)},handleCloseActiveAgreements:()=>{o(!1),l(null)},setShowExcelInfo:N=>{A(N)}}),Wge=({sites:t,helpers:e,uiHandlers:r,handlers:n})=>{const i=(t||[]).filter(o=>o.siteType==="business_center"),a=(t||[]).filter(o=>o.siteType!=="business_center"),s=o=>o.map((l,A)=>m("tr",{className:"align-middle",children:[c("td",{className:"py-2 px-2",children:m("div",{className:"d-flex align-items-center site-info",children:[c("div",{className:"site-icon me-2",children:c("div",{className:"d-flex align-items-center justify-content-center bg-primary rounded-circle text-white fw-bold small",style:{width:"30px",height:"30px",fontSize:"12px"},children:l.name.charAt(0)})}),m("div",{children:[c("div",{className:"site-name fw-medium small",children:l.name}),m("div",{className:"site-id text-muted",style:{fontSize:"10px"},children:["#",l.id]})]})]})}),c("td",{className:"py-2 px-2 d-none d-md-table-cell small",children:l.neighborhood}),c("td",{className:"py-2 px-2 d-none d-lg-table-cell small",children:l.manager}),c("td",{className:"py-2 px-2 d-none d-xl-table-cell small",children:l.phone}),l.siteType!=="business_center"&&m(kr,{children:[c("td",{className:"py-2 px-2 text-center small",children:l.blocks}),c("td",{className:"py-2 px-2 text-center small",children:l.elevators})]}),c("td",{className:"py-2 px-2 text-center small",children:l.siteType==="business_center"?parseInt(l.manualPanels)||parseInt(l.panels)||0:parseInt(l.panels)||0}),c("td",{className:"py-2 px-2 text-center small",children:l.siteType==="business_center"?m("span",{className:"text-info",children:[c("i",{className:"bi bi-briefcase me-1"}),l.businessCount||0," iyeri"]}):m("span",{className:"text-primary",children:[c("i",{className:"bi bi-house me-1"}),l.apartmentCount||0," daire"]})}),c("td",{className:"py-2 px-2 text-center small",children:l.siteType==="business_center"?m("span",{className:"text-info",children:[c("i",{className:"bi bi-people me-1"}),l.peopleCount||0," kii"]}):m("span",{className:"text-primary",children:[c("i",{className:"bi bi-people me-1"}),l.averagePeople||0," kii"]})}),c("td",{className:"py-2 px-2 text-center",children:m("span",{className:"badge bg-primary-subtle text-primary-emphasis rounded-pill small",children:[l.agreementPercentage,"%"]})}),c("td",{className:"py-2 px-2 text-end",children:m("div",{className:"d-flex gap-1 justify-content-end",children:[c("button",{onClick:()=>r.handleShowSite(l),className:"btn btn-xs btn-outline-primary",title:"Gster",style:{padding:"2px 6px",fontSize:"10px"},children:c("i",{className:"bi bi-eye",style:{fontSize:"10px"}})}),c("button",{onClick:()=>r.handleEditSite(l),className:"btn btn-xs btn-outline-secondary",title:"Dzenle",style:{padding:"2px 6px",fontSize:"10px"},children:c("i",{className:"bi bi-pencil",style:{fontSize:"10px"}})}),c("button",{onClick:()=>r.handleShowActiveAgreements(l),className:`btn btn-xs ${e.getActiveAgreementsForSite(l.id).length>0?"btn-outline-info":"btn-outline-secondary disabled"}`,title:e.getActiveAgreementsForSite(l.id).length>0?"Aktif Anlamalar":"Aktif anlama yok",disabled:e.getActiveAgreementsForSite(l.id).length===0,style:{padding:"2px 6px",fontSize:"10px"},children:c("i",{className:"bi bi-clipboard-check",style:{fontSize:"10px"}})}),c("button",{onClick:()=>n.handleArchiveSite(l.id),className:"btn btn-xs btn-outline-warning me-1",title:"Ariv",style:{padding:"2px 6px",fontSize:"10px"},children:c("i",{className:"bi bi-archive",style:{fontSize:"10px"}})}),c("button",{onClick:()=>n.handleDeleteSite(l.id),className:"btn btn-xs btn-outline-danger",title:"Kalc Sil",style:{padding:"2px 6px",fontSize:"10px"},children:c("i",{className:"bi bi-trash",style:{fontSize:"10px"}})})]})})]},l.id));return m("div",{className:"row g-4",children:[c("div",{className:"col-12",children:m("div",{className:"sites-table-container border-0 shadow-sm",children:[c("div",{className:"card-header bg-info bg-opacity-10 border-0",children:m("h6",{className:"mb-0 fw-bold text-info",children:[c("i",{className:"bi bi-briefcase me-2"})," Merkezleri (",i.length,")"]})}),c("div",{className:"card-body p-0",children:c("div",{className:"table-responsive",children:m("table",{className:"table table-hover mb-0 sites-table",children:[c("thead",{className:"sites-table-header",children:m("tr",{children:[c("th",{className:"border-0 py-2 px-2 small",children:" Merkezi"}),c("th",{className:"border-0 py-2 px-2 d-none d-md-table-cell small",children:"Mahalle"}),c("th",{className:"border-0 py-2 px-2 d-none d-lg-table-cell small",children:"Ynetici"}),c("th",{className:"border-0 py-2 px-2 d-none d-xl-table-cell small",children:"Telefon"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"Panel"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"yeri"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"nsan Says"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"Anlama %"}),c("th",{className:"border-0 py-2 px-2 text-end small",children:"lemler"})]})}),m("tbody",{children:[s(i),i.length===0&&c("tr",{children:c("td",{colSpan:"9",className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-briefcase"}),c("p",{className:"mb-3 text-muted",children:"Henz i merkezi bulunmamaktadr."})]})})})]})]})})})]})}),c("div",{className:"col-12",children:m("div",{className:"sites-table-container border-0 shadow-sm",children:[c("div",{className:"card-header bg-primary bg-opacity-10 border-0",children:m("h6",{className:"mb-0 fw-bold text-primary",children:[c("i",{className:"bi bi-building me-2"}),"Siteler (",a.length,")"]})}),c("div",{className:"card-body p-0",children:c("div",{className:"table-responsive",children:m("table",{className:"table table-hover mb-0 sites-table",children:[c("thead",{className:"sites-table-header",children:m("tr",{children:[c("th",{className:"border-0 py-2 px-2 small",children:"Site"}),c("th",{className:"border-0 py-2 px-2 d-none d-md-table-cell small",children:"Mahalle"}),c("th",{className:"border-0 py-2 px-2 d-none d-lg-table-cell small",children:"Ynetici"}),c("th",{className:"border-0 py-2 px-2 d-none d-xl-table-cell small",children:"Telefon"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"Blok"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"Asansr"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"Panel"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"Daire"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"nsan Says"}),c("th",{className:"border-0 py-2 px-2 text-center small",children:"Anlama %"}),c("th",{className:"border-0 py-2 px-2 text-end small",children:"lemler"})]})}),m("tbody",{children:[s(a),a.length===0&&c("tr",{children:c("td",{colSpan:"11",className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-building"}),c("p",{className:"mb-3 text-muted",children:"Henz site bulunmamaktadr."}),c("button",{onClick:r.handleAddSite,className:"btn btn-sites-primary",children:"Site Ekle"})]})})})]})]})})})]})})]})},qge=({showAddForm:t,currentSite:e,formData:r,uiHandlers:n,handlers:i,helpers:a})=>t?c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:s=>{s.target===s.currentTarget&&n.handleCloseAddForm()},children:c("div",{className:"modal-dialog modal-lg",onClick:s=>s.stopPropagation(),children:m("div",{className:"modal-content sites-modal-content",children:[m("div",{className:"modal-header bg-primary text-white",children:[m("h5",{className:"modal-title",children:[c("i",{className:`bi ${r.siteType==="business_center"?"bi-briefcase":"bi-building"} me-2`}),e?`${r.siteType==="business_center"?" Merkezi":"Site"} Dzenle`:`Yeni ${r.siteType==="business_center"?" Merkezi":"Site"} Ekle`]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:n.handleCloseAddForm})]}),c("div",{className:"modal-body",children:m("form",{onSubmit:s=>{s.preventDefault(),i.handleFormSubmit(s)},children:[m("div",{className:"row",children:[m("div",{className:"col-12 mb-3",children:[m("label",{className:"form-label fw-bold",children:["Tr Seimi ",c("span",{className:"text-danger",children:"*"})]}),m("div",{className:"d-flex gap-3",children:[m("div",{className:"form-check",children:[c("input",{className:"form-check-input",type:"radio",name:"siteType",id:"siteType",value:"site",checked:r.siteType==="site"||r.siteType==="",onChange:n.handleFormChange}),m("label",{className:"form-check-label fw-medium",htmlFor:"siteType",children:[c("i",{className:"bi bi-building me-1"}),"Site"]})]}),m("div",{className:"form-check",children:[c("input",{className:"form-check-input",type:"radio",name:"siteType",id:"businessCenterType",value:"business_center",checked:r.siteType==="business_center",onChange:n.handleFormChange}),m("label",{className:"form-check-label fw-medium",htmlFor:"businessCenterType",children:[c("i",{className:"bi bi-briefcase me-1"})," Merkezi"]})]})]})]}),m("div",{className:"col-md-6 mb-3",children:[m("label",{htmlFor:"name",className:"form-label fw-bold",children:[r.siteType==="business_center"?" Merkezi Ad":"Site Ad",c("span",{className:"text-danger",children:"*"})]}),c("input",{type:"text",id:"name",name:"name",value:r.name,onChange:n.handleFormChange,className:"form-control form-control-custom",placeholder:r.siteType==="business_center"?" merkezi adn girin":"Site adn girin",required:!0})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{htmlFor:"neighborhood",className:"form-label fw-bold",children:"Mahalle"}),c("input",{type:"text",id:"neighborhood",name:"neighborhood",value:r.neighborhood,onChange:n.handleFormChange,className:"form-control form-control-custom",placeholder:"Mahalle adn girin"})]}),m("div",{className:"col-md-6 mb-3",children:[m("label",{htmlFor:"manager",className:"form-label fw-bold",children:["Ynetici Ad ",c("span",{className:"text-danger",children:"*"})]}),c("input",{type:"text",id:"manager",name:"manager",value:r.manager,onChange:n.handleFormChange,className:"form-control form-control-custom",placeholder:"Ynetici adn girin",required:!0})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{htmlFor:"phone",className:"form-label fw-bold",children:"Ynetici letiim"}),c("input",{type:"text",id:"phone",name:"phone",value:r.phone,onChange:n.handleFormChange,className:"form-control form-control-custom",placeholder:"rn: (555) 123 45 67"})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{htmlFor:"blocks",className:"form-label fw-bold",children:"Blok Says"}),c("input",{type:"number",id:"blocks",name:"blocks",value:r.blocks,onChange:n.handleFormChange,className:"form-control form-control-custom",min:"0"})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{htmlFor:"elevatorsPerBlock",className:"form-label fw-bold",children:"1 Bloktaki Asansr Says"}),c("input",{type:"number",id:"elevatorsPerBlock",name:"elevatorsPerBlock",value:r.elevatorsPerBlock,onChange:n.handleFormChange,className:"form-control form-control-custom",min:"0"})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{className:"form-label fw-bold",children:"Toplam Asansr Says (Otomatik)"}),c("input",{type:"number",className:"form-control form-control-custom",value:a.calculateTotalElevators(r.blocks,r.elevatorsPerBlock),readOnly:!0}),c("div",{className:"form-text",children:"Blok Says  1 Bloktaki Asansr Says"})]}),c("div",{className:"col-md-6 mb-3",children:r.siteType==="business_center"?m(kr,{children:[m("label",{htmlFor:"manualPanels",className:"form-label fw-bold",children:["Panel Says (Manuel) ",c("span",{className:"text-danger",children:"*"})]}),c("input",{type:"number",id:"manualPanels",name:"manualPanels",value:r.manualPanels||"",onChange:n.handleFormChange,className:"form-control form-control-custom",min:"1",placeholder:"Panel saysn girin",required:!0}),c("div",{className:"form-text",children:" merkezi iin panel saysn manuel olarak girin"})]}):m(kr,{children:[c("label",{className:"form-label fw-bold",children:"Panel Says (Otomatik)"}),c("input",{type:"number",className:"form-control form-control-custom",value:a.calculatePanelsForType(r.siteType,r.blocks,r.elevatorsPerBlock,r.manualPanels),readOnly:!0}),c("div",{className:"form-text",children:"Toplam Asansr Says  2"})]})}),m("div",{className:"col-md-6 mb-3",children:[c("label",{htmlFor:"agreementPercentage",className:"form-label fw-bold",children:"Anlama Yzdesi (%)"}),c("input",{type:"number",id:"agreementPercentage",name:"agreementPercentage",value:r.agreementPercentage,onChange:n.handleFormChange,className:"form-control form-control-custom",min:"0",max:"100",placeholder:"0-100 aras"})]}),r.siteType==="site"&&m(kr,{children:[m("div",{className:"col-md-6 mb-3",children:[m("label",{htmlFor:"apartmentCount",className:"form-label fw-bold",children:["Daire Says ",c("span",{className:"text-danger",children:"*"})]}),c("input",{type:"number",id:"apartmentCount",name:"apartmentCount",value:r.apartmentCount,onChange:n.handleFormChange,className:"form-control form-control-custom",min:"1",placeholder:"Daire saysn girin",required:!0})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{className:"form-label fw-bold",children:"Ortalama nsan Says (Otomatik)"}),c("input",{type:"number",className:"form-control form-control-custom",value:a.calculateAveragePeople(r.apartmentCount),readOnly:!0}),c("div",{className:"form-text",children:"Daire Says  3"})]})]}),r.siteType==="business_center"&&m(kr,{children:[m("div",{className:"col-md-6 mb-3",children:[m("label",{htmlFor:"businessCount",className:"form-label fw-bold",children:["yeri Says ",c("span",{className:"text-danger",children:"*"})]}),c("input",{type:"number",id:"businessCount",name:"businessCount",value:r.businessCount,onChange:n.handleFormChange,className:"form-control form-control-custom",min:"1",placeholder:"yeri saysn girin",required:!0})]}),m("div",{className:"col-md-6 mb-3",children:[m("label",{htmlFor:"peopleCount",className:"form-label fw-bold",children:[" Merkezine Giren Kii Says ",c("span",{className:"text-danger",children:"*"})]}),c("input",{type:"number",id:"peopleCount",name:"peopleCount",value:r.peopleCount,onChange:n.handleFormChange,className:"form-control form-control-custom",min:"1",placeholder:"Gnlk giren kii saysn girin",required:!0})]})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{htmlFor:"bankAccountName",className:"form-label fw-bold",children:"Banka Hesap Ad"}),c("input",{type:"text",id:"bankAccountName",name:"bankAccountName",value:r.bankAccountName||"",onChange:n.handleFormChange,className:"form-control form-control-custom",placeholder:"Banka hesap adn girin"})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{htmlFor:"iban",className:"form-label fw-bold",children:"IBAN Numaras"}),c("input",{type:"text",id:"iban",name:"iban",value:r.iban||"",onChange:n.handleFormChange,className:"form-control form-control-custom",placeholder:"TR00 0000 0000 0000 0000 0000 00",maxLength:"34"})]}),m("div",{className:"col-12 mb-3",children:[c("label",{htmlFor:"notes",className:"form-label fw-bold",children:"Notlar"}),c("textarea",{id:"notes",name:"notes",value:r.notes,onChange:n.handleFormChange,className:"form-control form-control-custom",rows:"3",placeholder:"Ek notlar..."})]})]}),m("div",{className:"modal-footer bg-light",children:[m("button",{type:"button",onClick:n.handleCloseAddForm,className:"btn btn-secondary",children:[c("i",{className:"bi bi-x-lg me-1"})," ptal"]}),m("button",{type:"submit",className:"btn btn-primary",children:[c("i",{className:"bi bi-check-lg me-1"})," ",e?"Gncelle":"Kaydet"]})]})]})})]})})}):null,Xge=({showModal:t,currentSite:e,uiHandlers:r,helpers:n,handlers:i,agreements:a,companies:s,transactions:o,showPaymentSelection:l,selectedSiteForPayment:A,showActiveAgreements:u,currentSiteForAgreements:d,showAllPendingPayments:h,allPendingPayments:f,setShowAllPendingPayments:p,setAllPendingPayments:g,processedPayments:v=[],setProcessedPayments:C})=>{const I=D.useRef(null);return m(kr,{children:[c(()=>!t||!e?null:c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:1050},onClick:N=>{N.target===N.currentTarget&&r.handleCloseModal()},children:c("div",{className:"modal-dialog modal-xl modal-dialog-scrollable",onClick:N=>N.stopPropagation(),children:m("div",{className:"modal-content sites-modal-content",children:[m("div",{className:"modal-header bg-primary text-white rounded-top",children:[m("h5",{className:"modal-title d-flex align-items-center",children:[c("i",{className:"bi bi-building me-2"}),m("span",{className:"fw-bold",children:[e.name," - Detay"]})]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:r.handleCloseModal})]}),c("div",{className:"modal-body",ref:I,children:m("div",{className:"container-fluid",children:[c("div",{className:"row mb-4",children:c("div",{className:"col-12",children:m("div",{className:"detail-card",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-info-circle me-2"}),"Site Bilgileri"]})}),c("div",{className:"detail-card-body",children:m("div",{className:"row",children:[m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-building text-primary me-2"}),c("strong",{children:"Site Ad:"})]}),c("div",{className:"ps-4",children:e.name})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-map text-primary me-2"}),c("strong",{children:"Mahalle:"})]}),c("div",{className:"ps-4",children:e.neighborhood||"-"})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-person text-primary me-2"}),c("strong",{children:"Ynetici:"})]}),c("div",{className:"ps-4",children:e.manager})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-telephone text-primary me-2"}),c("strong",{children:"Telefon:"})]}),c("div",{className:"ps-4",children:e.phone})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-journal-text text-primary me-2"}),c("strong",{children:"Notlar:"})]}),c("div",{className:"ps-4",children:e.notes||"-"})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-bank text-primary me-2"}),c("strong",{children:"Banka Hesap Ad:"})]}),c("div",{className:"ps-4",children:e.bankAccountName||"-"})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-credit-card text-primary me-2"}),c("strong",{children:"IBAN Numaras:"})]}),c("div",{className:"ps-4",children:e.iban||"-"})]})]})})]})})}),c("div",{className:"row mb-4",children:c("div",{className:"col-12",children:m("div",{className:"detail-card",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-gear me-2"}),"Teknik Bilgiler"]})}),c("div",{className:"detail-card-body",children:m("div",{className:"row",children:[m("div",{className:"col-md-4 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-grid text-primary me-2"}),c("strong",{children:"Blok Says:"})]}),c("div",{className:"ps-4",children:e.blocks})]}),m("div",{className:"col-md-4 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-chevron-double-down text-primary me-2"}),c("strong",{children:"1 Bloktaki Asansr:"})]}),c("div",{className:"ps-4",children:e.elevatorsPerBlock||0})]}),m("div",{className:"col-md-4 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-calculator text-primary me-2"}),c("strong",{children:"Toplam Asansr:"})]}),m("div",{className:"ps-4",children:[e.elevators,m("small",{className:"text-muted d-block",children:["(",e.blocks||0,"  ",e.elevatorsPerBlock||0,")"]})]})]}),m("div",{className:"col-md-4 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-grid-3x3-gap text-primary me-2"}),c("strong",{children:"Panel Says:"})]}),m("div",{className:"ps-4",children:[e.siteType==="business_center"?parseInt(e.manualPanels)||parseInt(e.panels)||0:parseInt(e.panels)||0,c("small",{className:"text-muted d-block",children:e.siteType==="business_center"?"Manuel girilen panel says":`(${e.elevators||0}  2)`})]})]}),m("div",{className:"col-md-4 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-box-arrow-up-right text-primary me-2"}),c("strong",{children:"Kullanlan Panel:"})]}),c("div",{className:"ps-4",children:n.calculatePanelsSold(e.id,a)})]}),m("div",{className:"col-md-4 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-percent text-primary me-2"}),c("strong",{children:"Anlama Yzdesi:"})]}),c("div",{className:"ps-4",children:m("span",{className:"badge bg-primary-subtle text-primary-emphasis rounded-pill",children:[e.agreementPercentage,"%"]})})]})]})})]})})}),c("div",{className:"row mb-4",children:c("div",{className:"col-12",children:m("div",{className:"detail-card",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-currency-dollar me-2"}),"deme Bilgileri"]})}),m("div",{className:"detail-card-body",children:[c("div",{className:"alert alert-success mb-4",children:m("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2",children:[m("div",{className:"d-flex align-items-center",children:[c("i",{className:"bi bi-wallet2 me-2"}),c("span",{className:"fw-bold",children:"Toplam Alnan demeler:"})]}),c("span",{className:"fw-bold fs-5",children:n.formatCurrency(n.getSitePaymentHistoryDetailed(e.id,o,a,s).reduce((N,P)=>N+Math.abs(P.amount),0))})]})}),e.hasPendingPayment&&e.pendingPayments&&e.pendingPayments.length>0?m("div",{className:"card border-0 shadow-sm mb-4",children:[c("div",{className:"card-header bg-warning-subtle border-0",children:m("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2",children:[m("div",{className:"d-flex align-items-center",children:[c("i",{className:"bi bi-clock-history me-2 text-warning"}),c("span",{className:"fw-bold",children:"Bekleyen demeler"})]}),c("span",{className:"fw-bold text-warning",children:n.formatCurrency(e.pendingPayments.reduce((N,P)=>N+P.amount,0))})]})}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table table-bordered table-detail",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Firma"}),c("th",{children:"Panel Says"}),c("th",{children:"Haftalk Tutar"}),c("th",{children:"Toplam Tutar"})]})}),c("tbody",{children:n.getPendingPaymentsDetailed(e,a,s).map((N,P)=>m("tr",{children:[c("td",{children:N.companyName}),c("td",{children:N.panelCount}),c("td",{children:n.formatCurrency(N.weeklyRatePerPanel)}),c("td",{className:"fw-bold",children:n.formatCurrency(N.amount)})]},P))})]})})})]}):m("div",{className:"text-center py-3",children:[c("i",{className:"bi bi-check-circle fs-1 text-success"}),c("p",{className:"mt-2 mb-0 text-muted",children:"Bu site iin bekleyen deme bulunmamaktadr."})]}),m("div",{className:"mt-4",children:[m("h6",{className:"fw-bold mb-3",children:[c("i",{className:"bi bi-clock-history me-2"}),"deme Gemii"]}),n.getSitePaymentHistoryDetailed(e.id,o,a,s).length>0?c("div",{className:"table-responsive",children:m("table",{className:"table table-bordered table-detail",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Tarih"}),c("th",{children:"Aklama"}),c("th",{children:"Tutar"})]})}),c("tbody",{children:n.getSitePaymentHistoryDetailed(e.id,o,a,s).map((N,P)=>m("tr",{children:[c("td",{children:new Date(N.date).toLocaleDateString("tr-TR")}),c("td",{children:N.description}),c("td",{className:"fw-bold text-success",children:n.formatCurrency(Math.abs(N.amount))})]},P))})]})}):m("div",{className:"text-center py-3",children:[c("i",{className:"bi bi-receipt fs-1 text-muted"}),c("p",{className:"mt-2 mb-0 text-muted",children:"Bu site iin deme gemii bulunmamaktadr."})]})]})]})]})})}),c("div",{className:"row",children:c("div",{className:"col-12",children:m("div",{className:"detail-card",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-grid-3x3-gap me-2"}),"Panel Dalm"]})}),c("div",{className:"detail-card-body",children:c("div",{className:"d-flex flex-wrap gap-1 justify-content-center",children:Array.from({length:e.panels||0},(N,P)=>{const x=P+1,k=`panel-${x}`,S=((M,K)=>{var ae;const z=a.filter(te=>te.siteIds&&te.siteIds.includes(M)&&te.status==="active");for(const te of z)if(te.sitePanelSelections&&te.sitePanelSelections[M]){for(const[G,ue]of Object.entries(te.sitePanelSelections[M]))if(ue&&ue.includes(K))return{isUsed:!0,companyName:((ae=s.find(de=>String(de.id)===String(te.companyId)))==null?void 0:ae.name)||"Bilinmeyen Firma",startDate:te.startDate,endDate:te.endDate,agreementId:te.id,status:te.status,photoUrl:te.photoUrl}}return{isUsed:!1}})(e.id,k),_=M=>new Date(M).toLocaleDateString("tr-TR");return m("div",{className:`position-relative d-flex align-items-center justify-content-center border rounded ${S.isUsed?"bg-primary text-white":"bg-light text-muted"}`,style:{width:"60px",height:"80px",fontSize:"10px",fontWeight:"bold",flexDirection:"column",padding:"2px",cursor:S.isUsed?"pointer":"default"},title:S.isUsed?`Panel ${x} - ${S.companyName}
Tarih: ${_(S.startDate)} - ${_(S.endDate)}
Anlama ID: ${S.agreementId}`:`Panel ${x} - Bo`,onClick:()=>{if(S.isUsed){let M=`
                                      <div class="text-start">
                                        <div class="mb-3">
                                          <strong>Reklam Veren Firma:</strong> ${S.companyName}
                                        </div>
                                        <div class="mb-3">
                                          <strong>Anlama Sresi:</strong> ${_(S.startDate)} - ${_(S.endDate)}
                                        </div>
                                        <div class="mb-3">
                                          <strong>Anlama ID:</strong> ${S.agreementId}
                                        </div>
                                    `;S.photoUrl?M+=`
                                        <div class="text-center mt-3">
                                          <strong>Yayndaki Reklam Grseli:</strong>
                                          <div class="mt-2">
                                            <img src="${S.photoUrl}" style="max-width: 100%; max-height: 300px;" alt="Reklam Grseli" class="border rounded" />
                                          </div>
                                        </div>
                                      `:M+=`
                                        <div class="text-center mt-3">
                                          <strong>Yayndaki Reklam Grseli:</strong>
                                          <div class="mt-2 text-muted">
                                            <i class="bi bi-image fs-1"></i>
                                            <p class="mb-0">Grsel eklenmemi</p>
                                          </div>
                                        </div>
                                      `,M+="</div>",window.showAlert?window.showAlert("Panel Bilgisi",M,"info"):alert(`Panel ${x}
Firma: ${S.companyName}
Tarih: ${_(S.startDate)} - ${_(S.endDate)}
Anlama ID: ${S.agreementId}`)}},children:[c("div",{style:{fontSize:"12px"},children:x}),S.isUsed&&m(kr,{children:[c("div",{className:"text-truncate",style:{fontSize:"8px",maxWidth:"50px"},title:S.companyName,children:S.companyName}),m("div",{className:"text-truncate",style:{fontSize:"7px",maxWidth:"50px"},title:`${_(S.startDate)} - ${_(S.endDate)}`,children:[_(S.startDate)," - ",_(S.endDate)]}),m("div",{style:{fontSize:"6px"},children:["ID: ",S.agreementId]}),S.photoUrl&&c("div",{className:"position-absolute",style:{top:"2px",right:"2px"},children:c("i",{className:"bi bi-image text-warning",style:{fontSize:"8px"}})})]})]},x)})})})]})})})]})}),c("div",{className:"modal-footer bg-light rounded-bottom",children:m("div",{className:"d-flex flex-column flex-md-row gap-2 w-100",children:[m("button",{type:"button",className:"btn btn-secondary",onClick:r.handleCloseModal,children:[c("i",{className:"bi bi-x-lg me-1"})," Kapat"]}),m("button",{type:"button",className:"btn btn-primary",onClick:()=>n.generateSitePDF(e,I),children:[c("i",{className:"bi bi-file-earmark-pdf me-1"})," PDF Olarak ndir"]})]})})]})})}),{}),c(()=>!l||!A?null:c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:N=>{N.target===N.currentTarget&&r.handleClosePaymentSelection()},children:c("div",{className:"modal-dialog modal-xl",onClick:N=>N.stopPropagation(),children:m("div",{className:"modal-content sites-modal-content",children:[m("div",{className:"modal-header bg-success text-white",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-currency-dollar me-2"}),A.name," - deme Seimi"]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:r.handleClosePaymentSelection})]}),m("div",{className:"modal-body",children:[c("div",{className:"alert alert-info mb-4",children:m("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2",children:[m("div",{className:"d-flex align-items-center",children:[c("i",{className:"bi bi-info-circle me-2"}),c("span",{className:"fw-bold",children:"Bu site iin bekleyen demeler:"})]}),c("span",{className:"fw-bold fs-5",children:n.formatCurrency(A.pendingPayments.reduce((N,P)=>N+P.amount,0))})]})}),c("p",{className:"mb-4",children:"Aadaki anlamalardan hangisinden deme almak istediinizi sein:"}),c("div",{className:"table-responsive",children:m("table",{className:"table table-bordered table-sm",children:[c("thead",{children:m("tr",{children:[c("th",{style:{minWidth:"80px"},children:"ID"}),c("th",{style:{minWidth:"120px"},children:"Firma"}),c("th",{style:{minWidth:"80px"},children:"Panel"}),c("th",{style:{minWidth:"100px"},children:"Haftalk"}),c("th",{style:{minWidth:"100px"},children:"deme"}),c("th",{style:{minWidth:"100px"},children:"lem"})]})}),c("tbody",{children:n.getPendingPaymentsDetailed(A,a,s).map((N,P)=>{const x=v.includes(N.agreementId);return m("tr",{children:[m("td",{className:"text-center",children:["#",N.agreementId]}),c("td",{className:"text-truncate",style:{maxWidth:"120px"},title:N.companyName,children:N.companyName}),c("td",{className:"text-center",children:N.panelCount}),c("td",{className:"fw-bold text-success text-center",children:n.formatCurrency(N.weeklyAmount)}),c("td",{className:"fw-bold text-success text-center",children:n.formatCurrency(N.amount)}),c("td",{className:"text-center",children:m("button",{className:`btn btn-sm ${x?"btn-secondary":"btn-success"}`,onClick:()=>!x&&i.handleSelectPayment(N),disabled:x,style:{minWidth:"90px"},children:[c("i",{className:`bi ${x?"bi-check-circle":"bi-currency-dollar"} me-1`}),x?"dendi":"deme Yap"]})})]},`${N.agreementId}-${P}`)})})]})})]}),c("div",{className:"modal-footer bg-light",children:m("button",{type:"button",className:"btn btn-secondary",onClick:r.handleClosePaymentSelection,children:[c("i",{className:"bi bi-x-lg me-1"})," Kapat"]})})]})})}),{}),c(()=>{if(!u||!d)return null;const N=n.getActiveAgreementsForSite(d.id),P=(S,_)=>{var z;if(!S.sitePanelSelections||!S.sitePanelSelections[_])return[];const M=[];return(((z=S.siteBlockSelections)==null?void 0:z[_])||[]).forEach(ae=>{if(S.sitePanelSelections[_][ae]){const te=ae.split("-").pop();S.sitePanelSelections[_][ae].forEach(G=>{const ue=G.split("-").pop();M.push(`${te}${ue}`)})}}),M.sort()},x=S=>{const _=d.id,M=S.substring(_.length),K=M.charAt(0),ae=`panel-${M.substring(1)}`,te=`${_}-block-${K}`;for(const G of N)if(G.sitePanelSelections&&G.sitePanelSelections[_]){const ue=G.sitePanelSelections[_];if(ue[te]&&ue[te].includes(ae)){const de=s.find(T=>String(T.id)===String(G.companyId));return{isUsed:!0,companyName:(de==null?void 0:de.name)||"Bilinmeyen Firma",startDate:G.startDate,endDate:G.endDate,agreementId:G.id}}}return{isUsed:!1}},y=(()=>{const S=[],_=d.id,M=parseInt(d.blocks)||0,K=parseInt(d.elevatorsPerBlock)||0,z=2;for(let ae=0;ae<M;ae++){const te=String.fromCharCode(65+ae);for(let G=1;G<=K*z;G++){const ue=`${_}${te}${G}`;S.push(ue)}}return S})();return c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:S=>{S.target===S.currentTarget&&r.handleCloseActiveAgreements()},children:c("div",{className:"modal-dialog modal-xl",onClick:S=>S.stopPropagation(),children:m("div",{className:"modal-content sites-modal-content",children:[m("div",{className:"modal-header bg-info text-white",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-clipboard-check me-2"}),d.name," - Aktif Anlamalar"]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:r.handleCloseActiveAgreements})]}),c("div",{className:"modal-body",children:N.length>0?m(kr,{children:[m("div",{className:"alert alert-info mb-4",children:[c("i",{className:"bi bi-info-circle me-2"}),"Bu site iin ",N.length," aktif anlama bulunmaktadr."]}),m("div",{className:"detail-card mb-4",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-grid-3x3-gap me-2"}),"Panel Dalm ve Kullanm Durumu"]})}),m("div",{className:"detail-card-body",children:[c("div",{className:"panel-grid",children:y.map((S,_)=>{const M=x(S),K=M.isUsed,z=M.companyName||"",ae=S.substring(S.length-2);return m("div",{className:`panel-item ${K?"used":"available"}`,title:K?`${S}
${z}
${M.startDate?new Date(M.startDate).toLocaleDateString("tr-TR"):""} - ${M.endDate?new Date(M.endDate).toLocaleDateString("tr-TR"):""}`:`${S} - Bo`,children:[c("div",{className:"panel-number",children:ae}),K&&c("div",{className:"panel-company text-truncate",title:z,children:z}),K&&c("div",{className:"panel-lock",children:c("i",{className:"bi bi-lock-fill"})})]},S)})}),m("div",{className:"d-flex flex-wrap gap-3 mt-4",children:[m("div",{className:"d-flex align-items-center",children:[c("div",{className:"panel-item used me-2",style:{width:"30px",height:"30px"},children:c("i",{className:"bi bi-lock-fill",style:{fontSize:"10px"}})}),c("span",{className:"small",children:"Kullanmda"})]}),m("div",{className:"d-flex align-items-center",children:[c("div",{className:"panel-item available me-2",style:{width:"30px",height:"30px"}}),c("span",{className:"small",children:"Bo"})]})]})]})]}),m("div",{className:"detail-card",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-clipboard-check me-2"}),"Aktif Anlamalar Detay"]})}),c("div",{className:"detail-card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table table-bordered table-detail",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Anlama ID"}),c("th",{children:"Firma"}),c("th",{children:"Balang"}),c("th",{children:"Biti"}),c("th",{children:"Panel Says"}),c("th",{children:"Kullanlan Paneller"}),c("th",{children:"Haftalk Tutar"}),c("th",{children:"Site Pay"})]})}),c("tbody",{children:N.map(S=>{var G;const _=s.find(ue=>String(ue.id)===String(S.companyId)),M=((G=S.sitePanelCounts)==null?void 0:G[d.id])||0,K=P(S,d.id),z=parseFloat(S.weeklyRatePerPanel)||0,ae=parseFloat(d.agreementPercentage)||0,te=z*M*ae/100;return m("tr",{children:[m("td",{children:["#",S.id]}),c("td",{children:(_==null?void 0:_.name)||"Bilinmeyen Firma"}),c("td",{children:new Date(S.startDate).toLocaleDateString("tr-TR")}),c("td",{children:new Date(S.endDate).toLocaleDateString("tr-TR")}),c("td",{children:M}),c("td",{children:K.length>0?c("div",{className:"d-flex flex-wrap gap-1",children:K.map((ue,de)=>c("span",{className:"badge bg-primary-subtle text-primary-emphasis",children:ue},de))}):c("span",{className:"text-muted",children:"Panel seilmedi"})}),c("td",{className:"fw-bold text-success",children:n.formatCurrency(z)}),c("td",{className:"fw-bold text-success",children:n.formatCurrency(te)})]},S.id)})})]})})})]})]}):m("div",{className:"text-center py-5",children:[c("i",{className:"bi bi-clipboard-x fs-1 text-muted"}),c("p",{className:"mt-3 text-muted",children:"Bu site iin aktif anlama bulunmamaktadr."})]})}),c("div",{className:"modal-footer bg-light",children:m("button",{type:"button",className:"btn btn-secondary",onClick:r.handleCloseActiveAgreements,children:[c("i",{className:"bi bi-x-lg me-1"})," Kapat"]})})]})})})},{}),c(()=>h?c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:N=>{N.target===N.currentTarget&&(p(!1),g([]))},children:c("div",{className:"modal-dialog modal-xl",onClick:N=>N.stopPropagation(),children:m("div",{className:"modal-content sites-modal-content",children:[m("div",{className:"modal-header bg-warning text-white",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-clock-history me-2"}),"Tm Bekleyen demeler"]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>{p(!1),g([])}})]}),c("div",{className:"modal-body",children:f.length>0?m(kr,{children:[c("div",{className:"alert alert-warning mb-4",children:m("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2",children:[m("div",{className:"d-flex align-items-center",children:[c("i",{className:"bi bi-info-circle me-2"}),c("span",{className:"fw-bold",children:"Toplam Bekleyen deme:"})]}),c("span",{className:"fw-bold fs-5",children:n.formatCurrency(f.reduce((N,P)=>N+P.amount,0))})]})}),c("div",{className:"table-responsive",children:m("table",{className:"table table-bordered table-detail",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Site"}),c("th",{children:"Firma"}),c("th",{children:"Panel Says"}),c("th",{children:"Haftalk Tutar"}),c("th",{children:"Toplam Tutar"})]})}),c("tbody",{children:f.map((N,P)=>m("tr",{children:[c("td",{children:N.siteName}),c("td",{children:N.companyName}),c("td",{children:N.panelCount}),c("td",{children:n.formatCurrency(N.weeklyAmount)}),c("td",{className:"fw-bold text-success",children:n.formatCurrency(N.amount)})]},P))})]})})]}):m("div",{className:"text-center py-5",children:[c("i",{className:"bi bi-currency-dollar fs-1 text-muted"}),c("p",{className:"mt-3 text-muted",children:"Bekleyen deme bulunmamaktadr."})]})}),c("div",{className:"modal-footer bg-light",children:m("button",{type:"button",className:"btn btn-secondary",onClick:()=>{p(!1),g([])},children:[c("i",{className:"bi bi-x-lg me-1"})," Kapat"]})})]})})}):null,{})]})},Yge=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState([]),[l,A]=D.useState(!0),[u,d]=D.useState(!1),[h,f]=D.useState(!1),[p,g]=D.useState(null),[v,C]=D.useState({name:"",manager:"",phone:"",blocks:"",elevatorsPerBlock:"",agreementPercentage:"",notes:"",neighborhood:"",siteType:"site",manualPanels:"",apartmentCount:"",averagePeople:"",businessCount:"",peopleCount:"",bankAccountName:"",iban:""}),[I,F]=D.useState(!1),[E,R]=D.useState(null),[L,N]=D.useState([]),[P,x]=D.useState(null),[k,y]=D.useState(!1),[S,_]=D.useState(!1),[M,K]=D.useState(null),[z,ae]=D.useState(!1),[te,G]=D.useState([]),[ue,de]=D.useState([]),[T,O]=D.useState(""),[V,Q]=D.useState([]);D.useRef(null);const X=D.useRef(null),ie=D.useMemo(()=>Qx({companies:s,sites:t,agreements:i,transactions:r}),[s,t,i,r]),ee=D.useRef(!1),Z=D.useCallback(async(fe=!1)=>{if(!(ee.current&&!fe))try{A(!0),fe||(ee.current=!0);const[Oe,Re,He,pe]=await Promise.all([Yi(),lc(),Sa(),Xa()]),Le=Qx({companies:pe,sites:Oe,agreements:He,transactions:Re}),Ae=Oe.map(ve=>{const Ce=Le.calculatePendingPayments(ve,He,pe,Re);return{...ve,pendingPayments:Ce,hasPendingPayment:Ce.length>0}}).filter((ve,Ce,Ke)=>Ce===Ke.findIndex(Ve=>Ve.id===ve.id&&Ve._docId===ve._docId||Ve.id&&ve.id&&Ve.id===ve.id||Ve._docId&&ve._docId&&Ve._docId===ve._docId)),Ne=He.filter((ve,Ce,Ke)=>Ce===Ke.findIndex(Ve=>Ve.id===ve.id&&Ve._docId===ve._docId||Ve.id&&ve.id&&Ve.id===ve.id||Ve._docId&&ve._docId&&Ve._docId===ve._docId));e(Ae),n(Re),a(Ne),o(pe)}catch(Oe){console.error("Error refreshing data:",Oe),ee.current=!1}finally{A(!1)}},[]),re=D.useCallback(()=>{const fe=[];return t.forEach(Oe=>{Oe.hasPendingPayment&&Oe.pendingPayments&&Oe.pendingPayments.length>0&&ie.getPendingPaymentsDetailed(Oe,i,s).forEach(He=>{fe.push({...He,siteId:Oe.id,siteName:Oe.name,panelCount:He.panelCount,weeklyAmount:He.weeklyRatePerPanel})})}),fe},[t,i,s,ie]),ce=D.useCallback(()=>{const fe=re();G(fe),ae(!0)},[re]),Y=D.useRef(null),ge=D.useRef(v);(!Y.current||ge.current!==v)&&(ge.current=v,Y.current=$ge({sites:t,setSites:e,transactions:r,setTransactions:n,agreements:i,setAgreements:a,companies:s,setCompanies:o,formData:v,setFormData:C,selectedSiteForPayment:E,setSelectedSiteForPayment:R,pendingPayments:L,setPendingPayments:N,showPaymentSelection:I,setShowPaymentSelection:F,currentSiteForAgreements:M,setCurrentSiteForAgreements:K,currentSite:p,setCurrentSite:g,setShowAddForm:f,calculateTotalElevators:ie.calculateTotalElevators,calculatePanels:ie.calculatePanels,formatCurrency:ie.formatCurrency,refreshData:Z,processedPayments:ue,setProcessedPayments:de,helpers:ie}));const q=Y.current,W=D.useRef(null),xe=D.useRef(t);(!W.current||xe.current&&xe.current.length!==((t==null?void 0:t.length)||0)||xe.current!==t)&&(xe.current=t,W.current=O8({sites:t||[],setSites:e,transactions:r||[],setTransactions:n,agreements:i||[],setAgreements:a,companies:s||[],setCompanies:o,refreshData:Z}));const ye=W.current,Ue=D.useRef(null);Ue.current||(Ue.current=Gge({setShowModal:d,setCurrentSite:g,setShowAddForm:f,setFormData:C,setShowPaymentSelection:F,setSelectedSiteForPayment:R,setPendingPayments:N,setShowActiveAgreements:_,setCurrentSiteForAgreements:K,setShowExcelInfo:y,fileInputRef:X}));const Me=Ue.current,$e=D.useMemo(()=>M8({sites:t,setSites:e,refreshData:Z}),[t,e,Z]);return D.useEffect(()=>{ee.current||Z()},[]),D.useEffect(()=>{if(!T.trim())Q(t);else{const fe=t.filter(Oe=>Oe.name.toLowerCase().includes(T.toLowerCase())||Oe.id.toLowerCase().includes(T.toLowerCase())||Oe.manager.toLowerCase().includes(T.toLowerCase())||Oe.neighborhood.toLowerCase().includes(T.toLowerCase())||Oe.phone.includes(T));Q(fe)}},[t,T]),l?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Siteler ykleniyor..."})]})}):m("div",{className:"container-fluid",children:[c("style",{children:`
          .cursor-pointer {
            cursor: pointer;
          }
          .cursor-pointer:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.2s ease-in-out;
          }
        `}),c("div",{className:"sites-header mb-4",children:m("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3",children:[m("div",{children:[c("h2",{className:"h3 fw-bold mb-1",children:"Siteler"}),c("p",{className:"mb-0",children:"Site ynetimi ve deme ilemleri"})]}),m("div",{className:"d-flex gap-2 flex-wrap",children:[m("button",{className:"btn btn-sites-primary btn-icon d-flex align-items-center",onClick:Me.handleAddSite,children:[c("i",{className:"bi bi-plus-lg me-2"}),c("span",{children:"Site Ekle"})]}),m("div",{className:"position-relative",children:[c("button",{className:"btn btn-sites-outline btn-icon d-flex align-items-center",onClick:()=>X.current&&X.current.click(),title:"Excel ile Ykle",children:c("i",{className:"bi bi-upload"})}),c("input",{type:"file",ref:X,accept:".xlsx, .xls",onChange:fe=>q.handleExcelImport(fe,x),style:{display:"none"}})]}),c("button",{className:"btn btn-sites-outline btn-icon d-flex align-items-center",onClick:()=>$e.exportSitesToExcel(t),title:"Excel kts Al",children:c("i",{className:"bi bi-download"})}),c("button",{className:"btn btn-sites-outline d-flex align-items-center",onClick:()=>Me.setShowExcelInfo(!k),title:"Excel Bilgilendirme",children:c("i",{className:"bi bi-info-circle"})}),m("button",{className:"btn btn-sites-outline",onClick:q.handleDeleteAllSites,title:"Tm Siteleri Sil",children:[c("i",{className:"bi bi-trash me-1"}),c("span",{className:"d-none d-md-inline",children:"Tmn Sil"})]})]})]})}),c("div",{className:"row mb-4",children:c("div",{className:"col-12",children:c("div",{className:"card border-0 shadow-sm",children:c("div",{className:"card-body p-3",children:m("div",{className:"row align-items-center",children:[c("div",{className:"col-md-8",children:m("div",{className:"input-group search-bar",children:[c("span",{className:"input-group-text bg-light border-0",children:c("i",{className:"bi bi-search text-muted"})}),c("input",{type:"text",className:"form-control border-0 bg-light",placeholder:"Site ad, ID, ynetici, mahalle veya telefon ile ara...",value:T,onChange:fe=>O(fe.target.value)}),T&&c("button",{className:"btn btn-outline-secondary",onClick:()=>O(""),title:"Temizle",children:c("i",{className:"bi bi-x"})})]})}),c("div",{className:"col-md-4 text-md-end mt-2 mt-md-0",children:m("span",{className:"text-muted small",children:[V.length," / ",t.length," site"]})})]})})})})}),c("div",{className:"row g-3 mb-4",children:(()=>{const fe=T.trim()?V:t,Oe=ie.calculateSummaryStats(fe,r),He=new Set(fe.map(pe=>pe.neighborhood).filter(pe=>pe&&pe.trim()!=="")).size;return m(kr,{children:[c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Toplam Mahalle"}),c("h3",{className:"mb-0 fw-bold",children:He})]}),c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-geo-alt text-primary fs-4"})})]})})})}),c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Siteler"}),c("h3",{className:"mb-0 fw-bold",children:Oe.regularSites})]}),c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-building text-primary fs-4"})})]})})})}),c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:" Merkezleri"}),c("h3",{className:"mb-0 fw-bold",children:Oe.businessCenters})]}),c("div",{className:"bg-secondary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-briefcase text-secondary fs-4"})})]})})})}),c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Toplam Asansr"}),c("h3",{className:"mb-0 fw-bold",children:Oe.totalElevators})]}),c("div",{className:"bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-chevron-double-down text-success fs-4"})})]})})})}),c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Toplam Panel"}),c("h3",{className:"mb-0 fw-bold",children:Oe.totalPanels})]}),c("div",{className:"bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-grid text-info fs-4"})})]})})})}),c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Toplam Daire"}),c("h3",{className:"mb-0 fw-bold",children:Oe.totalApartments})]}),c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-house text-primary fs-4"})})]})})})}),c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Site Kii Says"}),c("h3",{className:"mb-0 fw-bold",children:Oe.totalSitePeople})]}),c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-house text-primary fs-4"})})]})})})}),c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:" Merkezi Kii Says"}),c("h3",{className:"mb-0 fw-bold",children:Oe.totalBusinessCenterPeople})]}),c("div",{className:"bg-secondary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-briefcase text-secondary fs-4"})})]})})})}),c("div",{className:"col-md-2 col-sm-6",children:c("div",{className:"sites-stats-card border-0 shadow-sm h-100 cursor-pointer",onClick:ce,style:{cursor:"pointer"},children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"denecek Tutar"}),c("h3",{className:"mb-0 fw-bold",children:ie.formatCurrency(Oe.totalPendingPayments)})]}),c("div",{className:"bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-currency-dollar text-warning fs-4"})})]})})})})]})})()}),k&&m("div",{className:"alert alert-info alert-dismissible fade show mb-4",role:"alert",children:[c("i",{className:"bi bi-info-circle me-2"}),c("strong",{children:"Excel ablonu:"})," Siteleri toplu olarak yklemek iin Excel dosyanzda aadaki stunlar kullann:",m("ul",{className:"mb-1 mt-2",children:[m("li",{children:[c("strong",{children:"A1:"})," Site Ad"]}),m("li",{children:[c("strong",{children:"B1:"})," Mahalle"]}),m("li",{children:[c("strong",{children:"C1:"})," Ynetici Ad"]}),m("li",{children:[c("strong",{children:"D1:"})," Ynetici letiim"]}),m("li",{children:[c("strong",{children:"E1:"})," Site Tr (Site/ Merkezi)"]}),m("li",{children:[c("strong",{children:"F1:"})," Blok Says"]}),m("li",{children:[c("strong",{children:"G1:"})," 1 Blok iin Asansr Says"]}),m("li",{children:[c("strong",{children:"H1:"})," Anlama Yzdesi"]}),m("li",{children:[c("strong",{children:"I1:"})," Daire Says (Site iin)"]}),m("li",{children:[c("strong",{children:"J1:"})," Ortalama nsan Says (Site iin - otomatik)"]}),m("li",{children:[c("strong",{children:"K1:"})," yeri Says ( Merkezi iin)"]}),m("li",{children:[c("strong",{children:"L1:"}),"  Merkezine Giren Kii Says ( Merkezi iin)"]}),m("li",{children:[c("strong",{children:"M1:"})," Not"]})]}),c("small",{children:c("a",{href:"/site-template-new.csv",target:"_blank",rel:"noopener noreferrer",className:"alert-link",children:"rnek ablonu indirmek iin tklayn"})}),c("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>Me.setShowExcelInfo(!1)})]}),c(Wge,{sites:V,helpers:ie,uiHandlers:Me,handlers:{...q,...ye}}),c(qge,{showAddForm:h,currentSite:p,formData:v,uiHandlers:Me,handlers:q,helpers:ie}),c(Xge,{showModal:u,currentSite:p,uiHandlers:Me,helpers:ie,handlers:q,agreements:i,companies:s,transactions:r,showPaymentSelection:I,selectedSiteForPayment:E,showActiveAgreements:S,currentSiteForAgreements:M,showAllPendingPayments:z,allPendingPayments:te,setShowAllPendingPayments:ae,setAllPendingPayments:G,processedPayments:ue,setProcessedPayments:de})]})},Jge=()=>c(Yge,{}),Zge=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState([]),[l,A]=D.useState(!0),[u,d]=D.useState(!1),[h,f]=D.useState(!1),[p,g]=D.useState(null),[v,C]=D.useState({name:"",contact:"",phone:"",email:"",address:"",taxOffice:"",taxNumber:"",notes:"",status:"active"}),[I,F]=D.useState(!1),[E,R]=D.useState(!1),[L,N]=D.useState({panelPrice:300,panelCount:1,totalAmount:300}),P=D.useRef(null),x=D.useRef(null),k=D.useRef(!1),y=D.useCallback(async()=>{try{const[fe,Oe]=await Promise.all([Sa(),Xa()]),Re=new Date;Re.setHours(0,0,0,0);let He=[...Oe],pe=!1;for(const Le of fe){const lt=new Date(Le.endDate);if(lt.setHours(0,0,0,0),Le.status==="active"&&lt<Re)try{const Ae={...Le,status:"inactive"};if(await Xm(Le.id,Ae)&&(console.log(`Anlama otomatik olarak pasif yapld: ${Le.companyId} (ID: ${Le.id})`),fe.filter(Ce=>String(Ce.companyId)===String(Le.companyId)&&Ce.status==="active"&&Ce.id!==Le.id).length===0)){const Ce=He.findIndex(Ke=>String(Ke.id)===String(Le.companyId));if(Ce!==-1&&He[Ce].status==="active"){He[Ce]={...He[Ce],status:"inactive"};const Ke=await qm(He[Ce].id,He[Ce]);Ke&&(He[Ce]=Ke,pe=!0,console.log(`Firma otomatik olarak pasif yapld: ${Ke.name} (ID: ${Ke.id})`))}}}catch(Ae){console.error("Error updating agreement status:",Ae)}}pe&&e(He)}catch(fe){console.error("Error checking expired agreements:",fe)}},[]);D.useEffect(()=>{if(k.current)return;(async()=>{try{k.current=!0,A(!0);const He=(await Xa()).filter(pe=>pe.status!=="archived");e(He)}catch(Re){console.error("Error fetching companies:",Re),k.current=!1}finally{A(!1)}})(),y();const Oe=setInterval(()=>{y()},5*60*1e3);return()=>clearInterval(Oe)},[]);const S=async fe=>{g(fe),d(!0);try{const[Oe,Re,He]=await Promise.all([Sa(),lc(),Yi()]);n(Oe),a(Re),o(He)}catch(Oe){console.error("Error fetching company details:",Oe)}},_=()=>{d(!1),g(null),n([]),a([]),o([])},M=()=>{C({name:"",contact:"",phone:"",email:"",address:"",taxOffice:"",taxNumber:"",notes:"",status:"active"}),g(null),f(!0)},K=fe=>{C({name:fe.name||"",contact:fe.contact||"",phone:fe.phone||"",email:fe.email||"",address:fe.address||"",taxOffice:fe.taxOffice||"",taxNumber:fe.taxNumber||"",notes:fe.notes||"",status:fe.status||"active"}),g(fe),f(!0)},z=()=>{f(!1),g(null)},ae=fe=>{g(fe),N({panelPrice:300,panelCount:1,totalAmount:300}),R(!0)},te=fe=>{const{name:Oe,value:Re}=fe.target,He={...L,[Oe]:parseFloat(Re)||0};(Oe==="panelPrice"||Oe==="panelCount")&&(He.totalAmount=He.panelPrice*He.panelCount),N(He)},G=async fe=>{if(fe.preventDefault(),!p||L.totalAmount<=0){await window.showAlert("Hata","Geerli bir tutar giriniz.","warning");return}try{const Oe={type:"income",amount:L.totalAmount,date:new Date().toISOString().split("T")[0],source:"Kredi Sat",description:`${p.name} firmasndan ${L.panelCount} adet panel kredisi sat`,category:"Kredi Sat"};if(!await hl(Oe))throw new Error("Transaction creation failed");const He={name:p.name,contact:p.contact,phone:p.phone,email:p.email,notes:p.notes,status:p.status,credit:(p.credit||0)+L.panelCount,creditHistory:[...p.creditHistory||[],{purchaseDate:new Date().toISOString().split("T")[0],panelCount:L.panelCount,panelPrice:L.panelPrice,totalAmount:L.totalAmount}]},pe=await qm(p.id,He);if(!pe)throw new Error("Company update failed");e(Le=>Le.some(Ae=>Ae.id===pe.id&&Ae._docId===pe._docId||Ae.id&&pe.id&&Ae.id===pe.id||Ae._docId&&pe._docId&&Ae._docId===pe._docId)?Le.map(Ae=>Ae.id===pe.id||Ae._docId===pe._docId||Ae.id&&pe.id&&Ae.id===pe.id||Ae._docId&&pe._docId&&Ae._docId===pe._docId?pe:Ae):Le),R(!1),g(null),await Un({user:"Admin",action:`Firma kredisi satn alnd: ${p.name} (${L.panelCount} panel, ${L.totalAmount} )`}),await window.showAlert("Baarl","Kredi baaryla satn alnd.","success")}catch(Oe){console.error("Error processing credit purchase:",Oe),await window.showAlert("Hata","Kredi satn alm srasnda bir hata olutu.","error")}},ue=async fe=>{var Re;if(await window.showConfirm("Firma Arivleme","Bu firmay arivlemek istediinize emin misiniz?","warning"))try{await lk(fe)?(e(t.filter(pe=>pe.id!==fe)),await Un({user:"Admin",action:`Firma arivlendi: ${((Re=t.find(pe=>pe.id===fe))==null?void 0:Re.name)||"Bilinmeyen Firma"}`}),await window.showAlert("Baarl","Firma baaryla arivlendi.","success")):await window.showAlert("Hata","Firma arivlenirken bir hata olutu.","error")}catch(He){console.error("Error archiving company:",He),await window.showAlert("Hata","Firma arivlenirken bir hata olutu.","error")}},de=async fe=>{var Re;if(await window.showConfirm("Firma Silme","Bu firmay kalc olarak silmek istediinize emin misiniz? Bu ilem geri alnamaz!","error"))try{await aq(fe)?(e(t.filter(pe=>pe.id!==fe)),await Un({user:"Admin",action:`Firma silindi: ${((Re=t.find(pe=>pe.id===fe))==null?void 0:Re.name)||"Bilinmeyen Firma"}`}),await window.showAlert("Baarl","Firma baaryla silindi.","success")):await window.showAlert("Hata","Firma silinirken bir hata olutu.","error")}catch(He){console.error("Error deleting company:",He),await window.showAlert("Hata","Firma silinirken bir hata olutu.","error")}},T=async()=>{if(t.length===0){await window.showAlert("Bilgi","Silinecek firma bulunmamaktadr.","info");return}if(await window.showConfirm("Tm Firmalar Sil",`Tm ${t.length} firmay arivlemek istediinize emin misiniz? Bu ilem geri alnamaz.`,"warning"))try{let Oe=0,Re=0;const He=t.map(async pe=>{try{return await lk(pe.id)?(Oe++,await Un({user:"Admin",action:`Firma arivlendi: ${pe.name}`}),{success:!0,companyId:pe.id}):(Re++,{success:!1,companyId:pe.id})}catch(Le){return console.error("Error archiving company:",pe.id,Le),Re++,{success:!1,companyId:pe.id,error:Le.message}}});await Promise.all(He),e([]),await window.showAlert("lem Tamamland",`${Oe} firma baaryla arivlendi. ${Re} firma arivlenirken hata olutu.`,"info")}catch(Oe){console.error("Error deleting all companies:",Oe),await window.showAlert("Hata","Firmalar arivlenirken bir hata olutu: "+Oe.message,"error")}},O=fe=>{const{name:Oe,value:Re}=fe.target;C({...v,[Oe]:Re})},V=async fe=>{if(fe.preventDefault(),!v.name){await window.showAlert("Eksik Bilgi","Ltfen firma adn giriniz.","warning");return}try{if(p){const Oe=await qm(p.id,v);Oe&&(e(t.map(Re=>Re.id===p.id?Oe:Re)),f(!1),g(null),await Un({user:"Admin",action:`Firma gncellendi: ${v.name}`}),await window.showAlert("Baarl","Firma baaryla gncellendi.","success"))}else{const Oe=await ok(v);Oe&&(e([...t,Oe]),f(!1),await Un({user:"Admin",action:`Yeni firma eklendi: ${v.name}`}),await window.showAlert("Baarl","Yeni firma baaryla eklendi. Firma kullancs otomatik olarak oluturuldu.","success"))}}catch(Oe){console.error("Error saving company:",Oe),await window.showAlert("Hata","Firma kaydedilirken bir hata olutu.","error")}},Q=async fe=>{const Oe=fe.target.files[0];if(!Oe)return;const Re=new FileReader;Re.onload=async He=>{try{const pe=He.target.result,Le=Gv(pe,{type:"binary"}),lt=Le.SheetNames[0],Ae=Le.Sheets[lt],Ne=uA.sheet_to_json(Ae,{header:1}),ve=[];for(let Ce=1;Ce<Ne.length;Ce++){const Ke=Ne[Ce];if(Ke.length>=3){const Ve={name:Ke[0]||"",contact:Ke[1]||"",phone:Ke[2]||"",email:"",notes:"",status:"inactive"};ve.push(Ve)}}await X(ve)}catch(pe){console.error("Error reading Excel file:",pe),await window.showAlert("Hata","Excel dosyas okunurken bir hata olutu.","error")}},Re.readAsBinaryString(Oe),x.current&&(x.current.value="")},X=async fe=>{if(!fe||fe.length===0){await window.showAlert("Uyar","e aktarlacak firma bulunamad.","warning");return}try{let Oe=0,Re=0;for(const He of fe)try{if(!He.name){Re++;continue}const pe=await ok(He);pe?(e(Le=>[...Le,pe]),Oe++,await Un({user:"Admin",action:`Firma Excel ile ie aktarld: ${He.name}`})):Re++}catch(pe){console.error("Error importing company:",pe),Re++}await window.showAlert("e Aktarma Tamamland",`${Oe} firma baaryla ie aktarld. ${Re} firma ie aktarlamad.`,"info")}catch(Oe){console.error("Error importing companies from Excel:",Oe),await window.showAlert("Hata","Firmalar ie aktarlrken bir hata olutu.","error")}},ie=()=>{const fe=t.map(He=>({"Firma Ad":He.name,"Yetkili Ad":He.contact,"Telefon Numaras":He.phone})),Oe=uA.json_to_sheet(fe),Re=uA.book_new();uA.book_append_sheet(Re,Oe,"Firmalar"),L8(Re,"firmalar.xlsx")},ee=fe=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(fe),Z=async()=>{if(!(!P.current||!p))try{const fe=P.current.cloneNode(!0);fe.querySelectorAll("button, .btn").forEach(He=>He.style.display="none");const Re=window.open("","_blank");Re.document.write(`
        <html>
          <head>
            <title>${p.name} - Detay</title>
            <style>
              body { font-family: Arial, sans-serif; }
              .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
              .header { text-align: center; margin-bottom: 30px; }
              .section { margin-bottom: 30px; }
              .section-title { border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 15px; }
              .info-row { display: flex; margin-bottom: 10px; }
              .info-label { font-weight: bold; width: 200px; }
              .info-value { flex: 1; }
              table { width: 100%; border-collapse: collapse; margin: 15px 0; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f2f2f2; }
              .text-center { text-align: center; }
              .text-success { color: #28a745; }
              .text-muted { color: #6c757d; }
            </style>
          </head>
          <body>
            <div class="container">
              ${fe.innerHTML}
            </div>
          </body>
        </html>
      `),Re.document.close(),Re.onload=async()=>{const He=await Jw(Re.document.body,{scale:2,useCORS:!0}),pe=He.toDataURL("image/png"),Le=new Xt("p","mm","a4"),lt=210,Ae=297,Ne=He.height*lt/He.width;let ve=Ne,Ce=0;for(Le.addImage(pe,"PNG",0,Ce,lt,Ne),ve-=Ae;ve>=0;)Ce=ve-Ne,Le.addPage(),Le.addImage(pe,"PNG",0,Ce,lt,Ne),ve-=Ae;Le.save(`${p.name}_detay.pdf`),Re.close(),await window.showAlert("Baarl","PDF dosyas baaryla oluturuldu ve indirildi.","success")}}catch(fe){console.error("Error generating PDF:",fe),await window.showAlert("Hata","PDF oluturma srasnda bir hata olutu.","error")}},re=()=>!p||!r.length?[]:r.filter(fe=>String(fe.companyId)===String(p.id)),ce=()=>!p||!i.length?[]:i.filter(fe=>fe.type==="income"&&fe.source.includes("Anlama demesi")&&fe.source.includes(p.name));if(l)return c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Firmalar ykleniyor..."})]})});const Y=re(),ge=ce(),q=t.filter(fe=>fe.status==="active").length,W=t.reduce((fe,Oe)=>fe+(Oe.credit||0),0),xe=[...new Set(r.map(fe=>fe.companyId))].length,ye=r.filter(fe=>fe.paymentReceived||fe.creditPaymentReceived),Ue=r.filter(fe=>!fe.paymentReceived&&!fe.creditPaymentReceived),Me=ye.reduce((fe,Oe)=>fe+(Oe.totalAmount||0),0),$e=Ue.reduce((fe,Oe)=>fe+(Oe.totalAmount||0),0);return m("div",{className:"container-fluid",children:[c("div",{className:"companies-header mb-4",children:m("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3",children:[m("div",{children:[c("h2",{className:"h3 fw-bold mb-1",children:"Firmalar"}),c("p",{className:"mb-0",children:"Firma ynetimi ve kredi ilemleri"})]}),m("div",{className:"d-flex gap-2 flex-wrap",children:[m("button",{onClick:M,className:"btn btn-companies-primary btn-icon d-flex align-items-center",children:[c("i",{className:"bi bi-plus-lg me-2"}),c("span",{children:"Firma Ekle"})]}),m("div",{className:"position-relative",children:[c("button",{className:"btn btn-companies-outline btn-icon d-flex align-items-center",onClick:()=>x.current&&x.current.click(),title:"Excel ile Ykle",children:c("i",{className:"bi bi-upload"})}),c("input",{type:"file",ref:x,accept:".xlsx, .xls",onChange:Q,style:{display:"none"}})]}),c("button",{onClick:ie,className:"btn btn-companies-outline btn-icon d-flex align-items-center",title:"Excel kts Al",children:c("i",{className:"bi bi-download"})}),c("button",{className:"btn btn-companies-outline d-flex align-items-center",onClick:()=>F(!I),title:"Excel Bilgilendirme",children:c("i",{className:"bi bi-info-circle"})})]})]})}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"companies-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Toplam Firma"}),c("h3",{className:"mb-0 fw-bold",children:t.length})]}),c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-building text-primary fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"companies-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Aktif Firma"}),c("h3",{className:"mb-0 fw-bold",children:q})]}),c("div",{className:"bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-check-circle text-success fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"companies-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Toplam Kredi"}),m("h3",{className:"mb-0 fw-bold",children:[W," Panel"]})]}),c("div",{className:"bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-credit-card text-info fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"companies-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Anlamal Firma"}),c("h3",{className:"mb-0 fw-bold",children:xe})]}),c("div",{className:"bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-handshake text-warning fs-4"})})]})})})})]}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"companies-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"denmi Anlama"}),c("h3",{className:"mb-0 fw-bold",children:ye.length}),c("p",{className:"mb-0 small text-success",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(Me)})]}),c("div",{className:"bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-check-circle text-success fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"companies-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"denmemi Anlama"}),c("h3",{className:"mb-0 fw-bold",children:Ue.length}),c("p",{className:"mb-0 small text-warning",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format($e)})]}),c("div",{className:"bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-clock text-warning fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"companies-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"deme Oran"}),m("h3",{className:"mb-0 fw-bold",children:[r.length>0?Math.round(ye.length/r.length*100):0,"%"]})]}),c("div",{className:"bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-percent text-info fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"companies-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Bekleyen deme"}),c("h3",{className:"mb-0 fw-bold",children:new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format($e)})]}),c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-arrow-up-circle text-primary fs-4"})})]})})})})]}),I&&m("div",{className:"alert alert-info alert-dismissible fade show mb-4",role:"alert",children:[c("i",{className:"bi bi-info-circle me-2"}),c("strong",{children:"Excel ablonu:"})," Firmalar toplu olarak yklemek iin Excel dosyanzda aadaki stunlar kullann:",m("ul",{className:"mb-1 mt-2",children:[m("li",{children:[c("strong",{children:"A1:"})," Firma Ad"]}),m("li",{children:[c("strong",{children:"B1:"})," Yetkili Ad"]}),m("li",{children:[c("strong",{children:"C1:"})," Telefon Numaras"]})]}),m("small",{children:["e aktarlan firmalar otomatik olarak pasif durumda kaydedilir.",c("a",{href:"/company-template.csv",target:"_blank",rel:"noopener noreferrer",className:"alert-link ms-1",children:"rnek ablonu indirmek iin tklayn"})]}),c("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>F(!1)})]}),c("div",{className:"companies-table-container border-0 shadow-sm",children:c("div",{className:"card-body p-0",children:c("div",{className:"table-responsive",children:m("table",{className:"table table-hover mb-0 companies-table",children:[c("thead",{className:"companies-table-header",children:m("tr",{children:[c("th",{className:"border-0 py-3 px-4",children:"Firma"}),c("th",{className:"border-0 py-3 px-4 d-none d-md-table-cell",children:"Yetkili"}),c("th",{className:"border-0 py-3 px-4 d-none d-lg-table-cell",children:"letiim"}),c("th",{className:"border-0 py-3 px-4 d-none d-xl-table-cell",children:"Notlar"}),c("th",{className:"border-0 py-3 px-4",children:"Durum"}),c("th",{className:"border-0 py-3 px-4 text-end",children:"lemler"})]})}),m("tbody",{children:[t.map(fe=>m("tr",{className:"align-middle",children:[c("td",{className:"py-3 px-4",children:m("div",{className:"d-flex align-items-center company-info",children:[c("div",{className:"company-icon me-3",children:c("div",{className:"d-flex align-items-center justify-content-center bg-primary rounded-circle text-white fw-bold",style:{width:"40px",height:"40px"},children:fe.name.charAt(0)})}),m("div",{children:[c("div",{className:"company-name fw-medium",children:fe.name}),m("div",{className:"company-id text-muted small",children:["#",fe.id]})]})]})}),c("td",{className:"py-3 px-4 d-none d-md-table-cell",children:fe.contact}),m("td",{className:"py-3 px-4 d-none d-lg-table-cell",children:[fe.phone&&m("div",{className:"mb-1",children:["Tel: ",fe.phone]}),fe.email&&m("div",{children:["Email: ",fe.email]})]}),c("td",{className:"py-3 px-4 d-none d-xl-table-cell",children:fe.notes}),c("td",{className:"py-3 px-4",children:c("span",{className:`badge ${fe.status==="active"?"bg-success":"bg-danger"} rounded-pill`,children:fe.status==="active"?"Aktif":"Pasif"})}),c("td",{className:"py-3 px-4 text-end",children:m("div",{className:"d-flex gap-2 justify-content-end",children:[c("button",{onClick:()=>S(fe),className:"btn btn-sm btn-outline-primary",title:"Gster",children:c("i",{className:"bi bi-eye"})}),c("button",{onClick:()=>K(fe),className:"btn btn-sm btn-outline-secondary",title:"Dzenle",children:c("i",{className:"bi bi-pencil"})}),c("button",{onClick:()=>ae(fe),className:"btn btn-sm btn-outline-success",title:"Kredi Al",children:c("i",{className:"bi bi-credit-card"})}),c("button",{onClick:()=>ue(fe.id),className:"btn btn-sm btn-outline-warning",title:"Arivle",children:c("i",{className:"bi bi-archive"})}),c("button",{onClick:()=>de(fe.id),className:"btn btn-sm btn-outline-danger",title:"Kalc Sil",children:c("i",{className:"bi bi-trash"})})]})})]},fe.id)),t.length===0&&c("tr",{children:c("td",{colSpan:"6",className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-building"}),c("p",{className:"mb-3",children:"Henz firma bulunmamaktadr."}),c("button",{onClick:M,className:"btn btn-companies-primary",children:"Firma Ekle"})]})})})]})]})})})}),t.length>0&&c("div",{className:"d-flex justify-content-end mt-3",children:m("button",{onClick:T,className:"btn btn-outline-danger",title:"Tm Firmalar Sil",children:[c("i",{className:"bi bi-trash me-1"}),"Tm Firmalar Sil"]})}),u&&p&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:fe=>{fe.target===fe.currentTarget&&_()},children:c("div",{className:"modal-dialog modal-xl modal-dialog-scrollable",onClick:fe=>fe.stopPropagation(),children:m("div",{className:"modal-content companies-modal-content",children:[m("div",{className:"modal-header bg-primary text-white rounded-top",children:[m("h5",{className:"modal-title d-flex align-items-center",children:[c("i",{className:"bi bi-building me-2"}),m("span",{className:"fw-bold",children:[p.name," - Detay"]})]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:_})]}),c("div",{className:"modal-body",ref:P,children:m("div",{className:"container-fluid",children:[c("div",{className:"row mb-4",children:c("div",{className:"col-12",children:m("div",{className:"detail-card",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-info-circle me-2"}),"Firma Bilgileri"]})}),c("div",{className:"detail-card-body",children:m("div",{className:"row",children:[m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-building text-primary me-2"}),c("strong",{children:"Firma Ad:"})]}),c("div",{className:"ps-4",children:p.name})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-person text-primary me-2"}),c("strong",{children:"Yetkili:"})]}),c("div",{className:"ps-4",children:p.contact||"-"})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-telephone text-primary me-2"}),c("strong",{children:"Telefon:"})]}),c("div",{className:"ps-4",children:p.phone||"-"})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-envelope text-primary me-2"}),c("strong",{children:"Email:"})]}),c("div",{className:"ps-4",children:p.email||"-"})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-credit-card text-primary me-2"}),c("strong",{children:"Kredi:"})]}),c("div",{className:"ps-4",children:m("span",{className:"fw-bold text-success",children:[p.credit||0," Panel"]})})]}),m("div",{className:"col-md-6 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-info-circle text-primary me-2"}),c("strong",{children:"Durum:"})]}),c("div",{className:"ps-4",children:c("span",{className:`badge ${p.status==="active"?"bg-success":"bg-danger"} rounded-pill`,children:p.status==="active"?"Aktif":"Pasif"})})]}),m("div",{className:"col-12 mb-3",children:[m("div",{className:"d-flex align-items-center mb-2",children:[c("i",{className:"bi bi-journal-text text-primary me-2"}),c("strong",{children:"Notlar:"})]}),c("div",{className:"ps-4",children:p.notes||"-"})]})]})})]})})}),c("div",{className:"row mb-4",children:c("div",{className:"col-12",children:m("div",{className:"detail-card",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-handshake me-2"}),"Anlamalar (",Y.length,")"]})}),c("div",{className:"detail-card-body",children:Y.length>0?c("div",{className:"table-responsive",children:m("table",{className:"table table-bordered table-detail",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Anlama ID"}),c("th",{children:"Site"}),c("th",{children:"Balang"}),c("th",{children:"Biti"}),c("th",{children:"Panel Says"}),c("th",{children:"Haftalk Tutar"}),c("th",{children:"Durum"})]})}),c("tbody",{children:Y.map(fe=>{const Oe=[];fe.sitePanelCounts&&Object.keys(fe.sitePanelCounts).forEach(pe=>{const Le=s.find(lt=>String(lt.id)===String(pe));Le&&Oe.push(Le.name)});const Re=fe.sitePanelCounts?Object.values(fe.sitePanelCounts).reduce((pe,Le)=>pe+Le,0):0,He=parseFloat(fe.weeklyRatePerPanel)||0;return m("tr",{children:[m("td",{children:["#",fe.id]}),c("td",{children:Oe.length>0?c("div",{className:"d-flex flex-wrap gap-1",children:Oe.map((pe,Le)=>c("span",{className:"badge bg-primary-subtle text-primary-emphasis",children:pe},Le))}):c("span",{className:"text-muted",children:"Site seilmedi"})}),c("td",{children:new Date(fe.startDate).toLocaleDateString("tr-TR")}),c("td",{children:new Date(fe.endDate).toLocaleDateString("tr-TR")}),c("td",{className:"text-center fw-bold",children:Re}),c("td",{className:"fw-bold text-success text-center",children:ee(He)}),c("td",{children:c("span",{className:`badge ${fe.status==="active"?"bg-success":"bg-danger"} rounded-pill`,children:fe.status==="active"?"Aktif":"Pasif"})})]},fe.id)})})]})}):m("div",{className:"text-center py-3",children:[c("i",{className:"bi bi-handshake fs-1 text-muted"}),c("p",{className:"mt-2 mb-0 text-muted",children:"Bu firma iin anlama bulunmamaktadr."})]})})]})})}),c("div",{className:"row",children:c("div",{className:"col-12",children:m("div",{className:"detail-card",children:[c("div",{className:"detail-card-header bg-light",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-currency-dollar me-2"}),"demeler (",ge.length,")"]})}),c("div",{className:"detail-card-body",children:ge.length>0?c("div",{className:"table-responsive",children:m("table",{className:"table table-bordered table-detail",children:[c("thead",{children:m("tr",{children:[c("th",{children:"deme ID"}),c("th",{children:"Tarih"}),c("th",{children:"Aklama"}),c("th",{children:"Tutar"})]})}),c("tbody",{children:ge.map(fe=>m("tr",{children:[m("td",{children:["#",fe.id]}),c("td",{children:new Date(fe.date).toLocaleDateString("tr-TR")}),c("td",{children:fe.description}),c("td",{className:"fw-bold text-success",children:ee(fe.amount)})]},fe.id))})]})}):m("div",{className:"text-center py-3",children:[c("i",{className:"bi bi-currency-dollar fs-1 text-muted"}),c("p",{className:"mt-2 mb-0 text-muted",children:"Bu firma iin deme kayd bulunmamaktadr."})]})})]})})})]})}),c("div",{className:"modal-footer bg-light rounded-bottom",children:m("div",{className:"d-flex flex-column flex-md-row gap-2 w-100",children:[m("button",{type:"button",className:"btn btn-secondary",onClick:_,children:[c("i",{className:"bi bi-x-lg me-1"})," Kapat"]}),m("button",{type:"button",className:"btn btn-primary",onClick:Z,children:[c("i",{className:"bi bi-file-earmark-pdf me-1"})," PDF Olarak ndir"]})]})})]})})}),h&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:fe=>{fe.target===fe.currentTarget&&z()},children:c("div",{className:"modal-dialog modal-lg",onClick:fe=>fe.stopPropagation(),children:m("div",{className:"modal-content companies-modal-content",children:[m("div",{className:"modal-header bg-primary text-white",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-building me-2"}),p?"Firma Dzenle":"Yeni Firma Ekle"]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:z})]}),c("div",{className:"modal-body",children:m("form",{onSubmit:V,children:[m("div",{className:"mb-3",children:[m("label",{className:"form-label fw-bold",children:["Firma Ad ",c("span",{className:"text-danger",children:"*"})]}),c("input",{type:"text",className:"form-control form-control-custom",name:"name",value:v.name,onChange:O,required:!0})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Yetkili Ad"}),c("input",{type:"text",className:"form-control form-control-custom",name:"contact",value:v.contact,onChange:O})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Telefon"}),c("input",{type:"text",className:"form-control form-control-custom",name:"phone",value:v.phone,onChange:O})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Email"}),c("input",{type:"email",className:"form-control form-control-custom",name:"email",value:v.email,onChange:O})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Ak Adres"}),c("textarea",{className:"form-control form-control-custom",name:"address",value:v.address,onChange:O,rows:"2",placeholder:"Firma ak adresi (szlemede kullanlr)"})]}),m("div",{className:"row",children:[m("div",{className:"col-md-6 mb-3",children:[c("label",{className:"form-label fw-bold",children:"Vergi Dairesi"}),c("input",{type:"text",className:"form-control form-control-custom",name:"taxOffice",value:v.taxOffice,onChange:O,placeholder:"rn: Merkez Vergi Dairesi"})]}),m("div",{className:"col-md-6 mb-3",children:[c("label",{className:"form-label fw-bold",children:"Vergi No"}),c("input",{type:"text",className:"form-control form-control-custom",name:"taxNumber",value:v.taxNumber,onChange:O,placeholder:"Vergi numaras"})]})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Notlar"}),c("textarea",{className:"form-control form-control-custom",name:"notes",value:v.notes,onChange:O,rows:"3"})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Durum"}),m("select",{className:"form-select form-control-custom",name:"status",value:v.status,onChange:O,children:[c("option",{value:"active",children:"Aktif"}),c("option",{value:"inactive",children:"Pasif"})]})]})]})}),m("div",{className:"modal-footer bg-light",children:[m("button",{type:"button",className:"btn btn-secondary",onClick:z,children:[c("i",{className:"bi bi-x-lg me-1"})," ptal"]}),m("button",{type:"submit",className:"btn btn-primary",onClick:V,children:[c("i",{className:"bi bi-check-lg me-1"})," ",p?"Gncelle":"Kaydet"]})]})]})})}),E&&p&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:fe=>{fe.target===fe.currentTarget&&(R(!1),g(null))},children:c("div",{className:"modal-dialog modal-md",onClick:fe=>fe.stopPropagation(),children:m("div",{className:"modal-content companies-modal-content",children:[m("div",{className:"modal-header bg-success text-white",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-credit-card me-2"}),"Kredi Satn Al"]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>{R(!1),g(null)}})]}),c("div",{className:"modal-body",children:m("form",{onSubmit:G,children:[m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Firma"}),c("input",{type:"text",className:"form-control form-control-custom",value:p.name,disabled:!0})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Panel Fiyat ()"}),c("input",{type:"number",className:"form-control form-control-custom",name:"panelPrice",value:L.panelPrice,onChange:te,min:"0",step:"0.01",required:!0})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Panel Says"}),c("input",{type:"number",className:"form-control form-control-custom",name:"panelCount",value:L.panelCount,onChange:te,min:"1",required:!0})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label fw-bold",children:"Toplam Tutar ()"}),c("input",{type:"number",className:"form-control form-control-custom",value:L.totalAmount,disabled:!0})]})]})}),m("div",{className:"modal-footer bg-light",children:[m("button",{type:"button",className:"btn btn-secondary",onClick:()=>{R(!1),g(null)},children:[c("i",{className:"bi bi-x-lg me-1"})," ptal"]}),m("button",{type:"submit",className:"btn btn-success",onClick:G,children:[c("i",{className:"bi bi-credit-card me-1"})," Satn Al"]})]})]})})})]})},e1e=({agreements:t,setAgreements:e,sites:r,setSites:n,companies:i,setCompanies:a,formData:s,setFormData:o,selectedSites:l,setSelectedSites:A,sitePanelCounts:u,setSitePanelCounts:d,selectedWeeks:h,setSelectedWeeks:f,siteBlockSelections:p,setSiteBlockSelections:g,sitePanelSelections:v,setSitePanelSelections:C,getCompanyName:I,getCompany:F,getCompanyCreditInfo:E,formatCurrency:R,dateRangesOverlap:L,getCurrentDateRange:N,isPanelAvailable:P,updateSitePanelCount:x,createTransaction:k,createAgreement:y,updateAgreement:S,updateSite:_,updateCompany:M,createUser:K,updateUser:z,getUsers:ae,createLog:te,setShowModal:G,setCurrentAgreement:ue,archiveAgreement:de,getAgreements:T})=>({showAlertModal:(q,W,xe="info")=>{console.log("Alert:",q,W,xe)},closeAlertModal:()=>{},checkExpiredAgreements:async()=>{const q=new Date;q.setHours(0,0,0,0);const W=[...t];for(const xe of W){const ye=new Date(xe.endDate);if(ye.setHours(0,0,0,0),xe.status==="active"&&ye<q)try{const Ue={...xe,status:"completed",completionDate:new Date().toISOString().split("T")[0]},Me=await S(xe.id,Ue);if(Me&&(e(t.map(fe=>fe.id===xe.id?Me:fe)),console.log(`Anlama tamamland: ${I(xe.companyId)} (ID: ${xe.id})`),t.filter(fe=>String(fe.companyId)===String(xe.companyId)&&fe.status==="active"&&fe.id!==xe.id).length===0)){const fe=i.find(Oe=>String(Oe.id)===String(xe.companyId));if(fe&&fe.status==="active"){const Oe={...fe,status:"inactive"},Re=await M(fe.id,Oe);Re&&(a(i.map(He=>He.id===fe.id?Re:He)),console.log(`Firma otomatik olarak pasif yapld: ${fe.name} (ID: ${fe.id})`))}}}catch(Ue){console.error("Error updating agreement status:",Ue)}}},handleShowAgreement:q=>{ue(q),G(!0)},handleArchiveAgreement:async q=>{const W=t.find(ye=>ye.id===q);if(!W){typeof window.showAlert=="function"?await window.showAlert("Hata","Anlama bulunamad.","error"):(console.error("Hata: Anlama bulunamad."),alert("Hata: Anlama bulunamad."));return}let xe=!0;if(typeof window.showConfirm=="function"?xe=await window.showConfirm("Anlamay Arivle",`${I(W.companyId)} firmasna ait ${W.id} numaral anlamay arivlemek istediinize emin misiniz?`,"warning"):xe=window.confirm(`${I(W.companyId)} firmasna ait ${W.id} numaral anlamay arivlemek istediinize emin misiniz?`),xe)try{if(await de(q)){e(t.filter(Ue=>Ue.id!==q));try{await te({user:"Admin",action:`Anlama arivlendi: ${I(W.companyId)} (${W.id})`})}catch(Ue){console.error("Error creating log:",Ue)}window.dispatchEvent(new CustomEvent("agreementChanged")),typeof window.showAlert=="function"?await window.showAlert("Baarl","Anlama baaryla arivlendi.","success"):(console.log("Baarl: Anlama baaryla arivlendi."),alert("Baarl: Anlama baaryla arivlendi."))}else throw new Error("Failed to archive agreement")}catch(ye){console.error("Error archiving agreement:",ye),typeof window.showAlert=="function"?await window.showAlert("Hata","Anlama arivlenirken bir hata olutu: "+(ye.message||"Bilinmeyen hata"),"error"):(console.error("Hata: Anlama arivlenirken bir hata olutu:",ye.message||"Bilinmeyen hata"),alert("Hata: Anlama arivlenirken bir hata olutu: "+(ye.message||"Bilinmeyen hata")))}},handleDeleteAgreement:async q=>{const W=t.find(ye=>ye.id===q);if(!W){typeof window.showAlert=="function"?await window.showAlert("Hata","Anlama bulunamad.","error"):(console.error("Hata: Anlama bulunamad."),alert("Hata: Anlama bulunamad."));return}let xe=!0;if(typeof window.showConfirm=="function"?xe=await window.showConfirm("Anlamay Sil",`${I(W.companyId)} firmasna ait ${W.id} numaral anlamay silmek istediinize emin misiniz? Bu ilem geri alnamaz!`,"error"):xe=window.confirm(`${I(W.companyId)} firmasna ait ${W.id} numaral anlamay silmek istediinize emin misiniz? Bu ilem geri alnamaz!`),xe)try{if(await WD(q)){e(t.filter(Ue=>Ue.id!==q));try{await te({user:"Admin",action:`Anlama silindi: ${I(W.companyId)} (${W.id})`})}catch(Ue){console.error("Error creating log:",Ue)}window.dispatchEvent(new CustomEvent("agreementChanged")),typeof window.showAlert=="function"?await window.showAlert("Baarl","Anlama baaryla silindi.","success"):(console.log("Baarl: Anlama baaryla silindi."),alert("Baarl: Anlama baaryla silindi."))}else throw new Error("Failed to delete agreement")}catch(ye){console.error("Error deleting agreement:",ye),typeof window.showAlert=="function"?await window.showAlert("Hata","Anlama silinirken bir hata olutu.","error"):(console.error("Hata: Anlama silinirken bir hata olutu."),alert("Hata: Anlama silinirken bir hata olutu."))}},handleRenewAgreement:async q=>{console.log("Renew agreement:",q)},handlePaymentAgreement:async q=>{var xe;if(q.status!=="active"&&q.status!=="completed"){await window.showAlert("Hata","Sadece aktif veya tamamlanm anlamalardan deme alnabilir.","error");return}if(q.creditPaymentReceived){await window.showAlert("Hata","Bu anlama iin zaten kredi ile deme alnmtr. Nakit deme alnamaz.","error");return}if(await window.showConfirm("deme Al",`${I(q.companyId)} firmasndan ${R(q.totalAmount)} tutarnda deme almak istediinize emin misiniz?`,"warning"))try{const ye={date:new Date().toISOString().split("T")[0],type:"income",source:`Anlama demesi - ${I(q.companyId)}`,description:`${I(q.companyId)} anlamasndan ${R(q.totalAmount)} tutarnda deme alnd`,amount:q.totalAmount};if(typeof k!="function")throw new Error("createTransaction is not defined or is not a function");if(await k(ye)){const Me=[];for(const Oe of q.siteIds){const Re=r.find(He=>He.id===Oe);if(Re){const pe=(((xe=q.sitePanelCounts)==null?void 0:xe[Oe])||0)*q.weeklyRatePerPanel*q.totalWeeks*(parseFloat(Re.agreementPercentage)/100);pe>0&&Me.push({siteId:Re.id,siteName:Re.name,amount:pe,companyName:I(q.companyId),agreementId:q.id})}}const $e=[...r];for(const Oe of Me){const Re=$e.findIndex(He=>He.id===Oe.siteId);if(Re!==-1){const He=$e[Re],pe={agreementId:Oe.agreementId,companyName:Oe.companyName,amount:Oe.amount},Le=[...He.pendingPayments||[],pe];$e[Re]={...He,pendingPayments:Le,hasPendingPayment:!0};try{await _(He.id,$e[Re])}catch(lt){console.error("Error updating site with pending payment:",lt)}}}n($e);const fe={...q,paymentReceived:!0,paymentDate:new Date().toISOString().split("T")[0]};try{await S(q.id,fe),e(t.map(Oe=>Oe.id===q.id?fe:Oe))}catch(Oe){console.error("Error updating agreement payment status:",Oe)}try{await te({user:"Admin",action:`Anlama demesi alnd: ${I(q.companyId)} (${R(q.totalAmount)})`})}catch(Oe){console.error("Error creating log:",Oe)}await window.showAlert("Baarl",`${I(q.companyId)} firmasndan ${R(q.totalAmount)} tutarnda deme alnd. Sitelere alacaklar datld.`,"success")}else await window.showAlert("Hata","deme ilemi srasnda bir hata olutu. Ltfen tekrar deneyin.","error")}catch(ye){console.error("Error processing agreement payment:",ye),await window.showAlert("Hata","deme ilemi srasnda bir hata olutu: "+(ye.message||"Bilinmeyen hata"),"error")}},handleCreditPayment:async q=>{var fe;if(q.status!=="active"&&q.status!=="completed"){await window.showAlert("Hata","Sadece aktif veya tamamlanm anlamalardan deme alnabilir.","error");return}const W=q.creditPaymentReceived,xe=i.find(Oe=>Oe.id===q.companyId);if(!xe){await window.showAlert("Hata","Firma bilgisi bulunamad.","error");return}if(!W){const Oe=Object.values(q.sitePanelCounts||{}).reduce((Re,He)=>Re+He,0);if(xe.credit<Oe){await window.showAlert("Hata","Firmann yeterli kredisi bulunmamaktadr.","error");return}}const ye=xe.creditHistory&&xe.creditHistory.length>0?xe.creditHistory[xe.creditHistory.length-1]:null;if(!ye){await window.showAlert("Hata","Firmann kredi gemii bulunamad.","error");return}const Ue=Object.values(q.sitePanelCounts||{}).reduce((Oe,Re)=>Oe+Re,0),Me=Ue*ye.panelPrice*q.totalWeeks;if(await window.showConfirm("Kredi ile deme",`${I(q.companyId)} firmasndan ${R(Me)} tutarnda kredi ile deme almak istediinize emin misiniz? ${W?"Bu anlama zaten kredi ile oluturuldu.":`Firmann mevcut kredisi: ${xe.credit} panel`}`,"warning"))try{if(!W){const pe={...xe,credit:xe.credit-Ue};try{await M(xe.id,pe),a(i.map(Le=>Le.id===xe.id?pe:Le))}catch(Le){throw console.error("Error updating company credit:",Le),new Error("Firma kredisi gncellenirken hata olutu")}}console.log(`Kredi ile deme alnd: ${I(q.companyId)} (${R(Me)})${W?" (nceden denmi)":""}`);const Oe=[];for(const pe of q.siteIds){const Le=r.find(lt=>lt.id===pe);if(Le){const Ae=(((fe=q.sitePanelCounts)==null?void 0:fe[pe])||0)*ye.panelPrice*q.totalWeeks*(parseFloat(Le.agreementPercentage)/100);Ae>0&&Oe.push({siteId:Le.id,siteName:Le.name,amount:Ae,companyName:I(q.companyId),agreementId:q.id})}}const Re=[...r];for(const pe of Oe){const Le=Re.findIndex(lt=>lt.id===pe.siteId);if(Le!==-1){const lt=Re[Le],Ae={agreementId:pe.agreementId,companyName:pe.companyName,amount:pe.amount},Ne=[...lt.pendingPayments||[],Ae];Re[Le]={...lt,pendingPayments:Ne,hasPendingPayment:!0};try{await _(lt.id,Re[Le])}catch(ve){console.error("Error updating site with pending payment:",ve)}}}n(Re);const He={...q,creditPaymentReceived:!0,creditPaymentDate:new Date().toISOString().split("T")[0]};try{await S(q.id,He),e(t.map(pe=>pe.id===q.id?He:pe))}catch(pe){console.error("Error updating agreement credit payment status:",pe)}try{await te({user:"Admin",action:`Kredi ile anlama demesi alnd: ${I(q.companyId)} (${R(Me)})${W?" (nceden denmi)":""}`})}catch(pe){console.error("Error creating log:",pe)}await window.showAlert("Baarl",`${I(q.companyId)} firmasndan ${R(Me)} tutarnda kredi ile deme alnd. Sitelere alacaklar datld.${W?" Kredi zaten nceden kullanlmt.":` Firmann kalan kredisi: ${xe.credit-Ue} panel`}`,"success")}catch(Oe){console.error("Error processing credit payment:",Oe),await window.showAlert("Hata","Kredi deme ilemi srasnda bir hata olutu: "+(Oe.message||"Bilinmeyen hata"),"error")}},handleTerminateAgreement:async q=>{if(q.status==="terminated"){await window.showAlert("Hata","Bu anlama zaten erken sonlandrlm.","error");return}if(await window.showConfirm("Anlamay Erken Sonlandr",`${I(q.companyId)} firmasna ait ${q.id} numaral anlamay erken sonlandrmak istediinize emin misiniz? Anlama iptal edildii iin deme alnmayacaktr.`,"warning"))try{const xe={...q,status:"terminated",terminationDate:new Date().toISOString().split("T")[0]},ye=await S(q.id,xe);if(ye){e(t.map(Ue=>Ue.id===q.id?ye:Ue));try{await te({user:"Admin",action:`Anlama erken sonlandrld: ${I(q.companyId)} (${q.id})`})}catch(Ue){console.error("Error creating log:",Ue)}await window.showAlert("Baarl","Anlama baaryla erken sonlandrld. deme alnmayacaktr.","success")}else throw new Error("Failed to terminate agreement")}catch(xe){console.error("Error terminating agreement:",xe),await window.showAlert("Hata","Anlama sonlandrlrken bir hata olutu: "+(xe.message||"Bilinmeyen hata"),"error")}},handleFormSubmit:async(q,W,xe,ye,Ue,Me,$e,fe,Oe,Re,He,pe,Le,lt,Ae,Ne)=>{console.log("Form submission started"),q.preventDefault(),console.log("Form data:",pe),console.log("Selected sites:",Le),console.log("Site panel selections:",lt),console.log("Site panel counts:",Ae);const ve=pe.dateRanges||[];if(ve.length===0||ve.some(Ke=>!Ke.startDate||!Ke.endDate)){console.log("Please fill in at least one valid date range");return}if(!pe.companyId){console.log("Please select a company");return}let Ce=!1;console.log("Checking panel selections for sites");for(let Ke=0;Ke<ve.length;Ke++){const Ve=`range-${Ke}`,ot=lt[Ve]&&lt[Ve].sites||[];for(const pt of ot){const Bt=lt[pt];if(console.log("Site selections for site",pt,":",Bt),Bt)for(const Be in Bt){console.log("Block",Be,"has panels:",Bt[Be]);const ze=Bt[Be];if(Array.isArray(ze)){if(ze.length>0){Ce=!0;break}}else if(typeof ze=="object"&&ze[Ve]&&Array.isArray(ze[Ve])&&ze[Ve].length>0){Ce=!0;break}if(Ce)break}if(Ce)break}if(Ce)break}if(Ce)console.log("Panel selections found, proceeding with form submission");else{console.log("Please select at least one panel");return}try{console.log("Calculating agreement details");const Ke=Ne.calculateTotalWeeksFromRanges(ve),Ve=Object.values(Ae||{}).reduce((Et,dt)=>Et+(parseInt(dt)||0),0),pt=ve[0].startDate,Bt=ve[ve.length-1].endDate;let Be=parseFloat(pe.weeklyRatePerPanel)||0,ze=0;if(Be>0&&Ve>0&&Ke>0)ze=Ke*Ve*Be;else if(pe.totalAmount){const Et=parseFloat(pe.totalAmount)||0;Et>0&&Ve>0&&Ke>0&&(Be=Et/(Ve*Ke),ze=Et)}if(!Be||!ze){console.log("Weekly rate or total amount is invalid");return}const st=new Set;ve.forEach((Et,dt)=>{const jt=`range-${dt}`;(lt[jt]&&lt[jt].sites||[]).forEach(qt=>st.add(qt))});const St={...pe,startDate:pt,endDate:Bt,dateRanges:ve,siteIds:Array.from(st),sitePanelCounts:Ae,siteBlockSelections:p,sitePanelSelections:lt,totalWeeks:Ke,totalAmount:ze,weeklyRatePerPanel:Be,status:"active"};W!=null&&W.isOrder&&(St.isOrder=!1),console.log("Agreement data to be sent:",St);let Ot=null;if(W){const Et=await S(W.id,St);Et&&(ye(xe.map(dt=>dt.id===W.id?Et:dt)),Ue(!1),Ot=Et,await te({user:"Admin",action:`Anlama gncellendi: ${Ne.getCompanyName(pe.companyId)}`}),console.log("Agreement updated successfully"))}else{console.log("Creating new agreement with data:",St);const Et=await y(St);if(console.log("Created agreement response:",Et),Et){if(ye(dt=>dt.some(sr=>sr.id===Et.id||sr._docId===Et.id||sr.id===Et._docId||sr.id===Et.id&&sr._docId===Et._docId)?(console.warn("Agreement already exists in state, skipping duplicate:",Et.id),dt):[...dt,Et]),Ue(!1),Ot=Et,Me({companyId:"",startDate:"",endDate:"",dateRanges:[{startDate:"",endDate:""}],weeklyRatePerPanel:"",totalAmount:"",notes:""}),$e([]),fe({}),Oe([]),Re({}),He({}),await te({user:"Admin",action:`Yeni anlama eklendi: ${Ne.getCompanyName(pe.companyId)}`}),console.log("Agreement created successfully"),T)try{const dt=await T();ye(dt),console.log("Agreements reloaded from server:",dt.length)}catch(dt){console.error("Error reloading agreements:",dt)}typeof window.showAlert=="function"&&await window.showAlert("Baarl","Anlama baaryla oluturuldu!","success")}else console.error("Failed to create agreement - createAgreement returned null or undefined"),typeof window.showAlert=="function"&&await window.showAlert("Hata","Anlama oluturulurken bir hata olutu. Ltfen tekrar deneyin.","error")}if(Ot)try{const Et=Ne.getCompany(Ot.companyId);if(Et){const jt=(await ae()).find(sr=>(sr.role==="company"||sr.role==="company_user")&&String(sr.companyId)===String(Et.id));if(jt&&jt.status!=="active"){const sr={...jt,status:"active"};await z(jt.id,sr)&&(console.log(`Firma kullancs otomatik olarak aktif yapld: ${Et.name}`),await te({user:"System",action:`Firma kullancs otomatik olarak aktif yapld: ${Et.name}`}))}if(Et.status!=="active"){const sr={...Et,status:"active"},qt=await M(Et.id,sr);qt&&qt.success!==!1&&(a(Ur=>{const en=Ur.filter(Mt=>String(Mt.id)!==String(Et.id)&&String(Mt._docId)!==String(Et.id)&&(Mt._docId?String(Mt._docId)!==String(Et._docId):!0)),Qt=qt.data||qt;return en.some(Mt=>String(Mt.id)===String(Qt.id)||Mt._docId&&Qt._docId&&String(Mt._docId)===String(Qt._docId))?en:[...en,Qt]}),console.log(`Firma otomatik olarak aktif yapld: ${Et.name}`),await te({user:"System",action:`Firma otomatik olarak aktif yapld: ${Et.name}`}))}}}catch(Et){console.error("Error creating/updating company user:",Et)}}catch(Ke){console.error("Error saving agreement:",Ke),typeof window.showAlert=="function"?window.showAlert("Hata","Anlama kaydedilirken bir hata olutu: "+(Ke.message||"Bilinmeyen hata"),"error"):alert("Anlama kaydedilirken bir hata olutu: "+(Ke.message||"Bilinmeyen hata"))}}}),t1e=({setShowModal:t,setCurrentAgreement:e,setShowAddForm:r,setFormData:n,setSelectedSites:i,setSitePanelCounts:a,setSelectedWeeks:s,setSiteBlockSelections:o,setSitePanelSelections:l,showAlertModal:A,updateSitePanelCount:u,companies:d,sites:h,sitePanelCounts:f,siteBlockSelections:p,helpers:g,formData:v})=>({handleAddAgreement:()=>{n({companyId:"",startDate:"",endDate:"",dateRanges:[{startDate:"",endDate:""}],weeklyRatePerPanel:"",totalAmount:"",notes:""}),i([]),a({}),s([]),o({}),l({}),e(null),r(!0)},handleEditAgreement:ee=>{let Z=ee.dateRanges||[];Z.length===0&&ee.startDate&&ee.endDate&&(Z=[{startDate:ee.startDate,endDate:ee.endDate}]),Z.length===0&&(Z=[{startDate:"",endDate:""}]),n({companyId:ee.companyId||"",startDate:ee.startDate||"",endDate:ee.endDate||"",dateRanges:Z,weeklyRatePerPanel:ee.weeklyRatePerPanel||"",totalAmount:ee.totalAmount||"",notes:ee.notes||""}),i(ee.siteIds||[]),a(ee.sitePanelCounts||{}),o(ee.siteBlockSelections||{}),l(ee.sitePanelSelections||{}),e(ee),r(!0)},handleCloseModal:()=>{t(!1),e(null)},handleCloseAddForm:()=>{r(!1),e(null),i([]),a({}),s([]),o({}),l({})},handleFormChange:ee=>{const{name:Z,value:re}=ee.target;n(ce=>{const Y={...ce,[Z]:re};if(Z==="totalAmount"){const ge=parseFloat(re),q=Object.values(f||{}).reduce((xe,ye)=>xe+(parseInt(ye)||0),0),W=g.calculateTotalWeeksFromRanges(Y.dateRanges||[]);if(ge>0&&q>0&&W>0){const xe=ge/(q*W);Y.weeklyRatePerPanel=xe.toFixed(2)}}return Y})},handleSiteSelection:(ee,Z,re)=>{if(Z.includes(ee)){const ce=Z.filter(W=>W!==ee);i(ce);const Y={...f};delete Y[ee],a(Y);const ge={...p};delete ge[ee],o(ge);const q={...re};delete q[ee],l(q)}else i([...Z,ee]),a(ce=>({...ce,[ee]:0})),o(ce=>({...ce,[ee]:[]})),l(ce=>({...ce,[ee]:{}}))},handleSiteSelectionForRange:(ee,Z,re,ce=null)=>{const Y=`range-${ee}`,ge=re&&re[Y]&&re[Y].sites||[];if(!ge.includes(Z)){let W=ce;if(!W&&v&&v.dateRanges&&v.dateRanges[ee]&&(W=[v.dateRanges[ee]]),W&&W[0]&&W[0].startDate&&W[0].endDate&&g&&g.isSiteFullyBooked&&g.isSiteFullyBooked(Z,W[0].startDate,W[0].endDate,W)){A&&A("Site Dolu","Bu hafta iin bu sitede tm paneller dolu. Ltfen baka bir site sein veya farkl bir hafta sein.","warning");return}}let q;ge.includes(Z)?q=ge.filter(W=>W!==Z):q=[...ge,Z],l(W=>({...W,[Y]:{...W[Y]||{},sites:q}}))},getSelectedSitesForRange:(ee,Z)=>{if(!Z||typeof Z!="object")return[];const re=`range-${ee}`;return Z[re]&&Z[re].sites?Array.isArray(Z[re].sites)?Z[re].sites:[]:[]},handleSelectAllSitesForRange:(ee,Z,re,ce=null)=>{if(!Z||!Array.isArray(Z)){console.warn("handleSelectAllSitesForRange: sites is not an array",Z);return}const Y=`range-${ee}`,ge=re&&re[Y]&&re[Y].sites||[];let q=ce;!q&&v&&v.dateRanges&&v.dateRanges[ee]&&(q=[v.dateRanges[ee]]);const W=Z.map(Ue=>Ue&&Ue.id).filter(Ue=>Ue?ge.includes(Ue)?!0:q&&q[0]&&q[0].startDate&&q[0].endDate&&g&&g.isSiteFullyBooked?!g.isSiteFullyBooked(Ue,q[0].startDate,q[0].endDate,q):!0:!1),xe=W.length>0&&W.every(Ue=>ge.includes(Ue));l(Ue=>({...Ue,[Y]:{...Ue[Y]||{},sites:xe?[]:W}}));const ye=Z.filter(Ue=>Ue&&Ue.id&&!W.includes(Ue.id)&&!ge.includes(Ue.id));ye.length>0&&A&&A("Bilgi",`${ye.length} site tm panelleri dolu olduu iin seilemedi.`,"info")},handleSelectNeighborhoodForRange:(ee,Z,re,ce)=>{const Y=`range-${ee}`,ge=ce&&ce[Y]&&ce[Y].sites||[],q=(re||[]).map(ye=>ye&&ye.id).filter(ye=>ye!=null),W=q.length>0&&q.every(ye=>ge.includes(ye));let xe;if(W)xe=ge.filter(ye=>!q.includes(ye));else{const ye=q.filter(Ue=>!ge.includes(Ue));xe=[...ge,...ye]}l(ye=>({...ye,[Y]:{...ye[Y]||{},sites:xe}}))},handleBlockSelection:(ee,Z,re,ce)=>{const Y=re[ee]||[];let ge;if(Y.includes(Z)){ge=Y.filter(W=>W!==Z);const q={...ce};q[ee]&&(delete q[ee][Z],l(q))}else ge=[...Y,Z],l(q=>{const W={...q,[ee]:{...q[ee],[Z]:[]}};return setTimeout(()=>u(ee,W,a),0),W});o(q=>({...q,[ee]:ge})),Y.includes(Z)&&setTimeout(()=>u(ee,ce,a),0)},handleBlockSelectionForRange:(ee,Z,re,ce,Y)=>{const ge=`range-${ee}`,q=ce&&ce[ge]&&ce[ge][Z]||[];let W;q.includes(re)?(W=q.filter(xe=>xe!==re),l(xe=>{const ye={...xe};return ye[Z]&&ye[Z][re]&&ye[Z][re][ge]&&delete ye[Z][re][ge],ye})):(W=[...q,re],l(xe=>{var Ue;const ye={...xe,[Z]:{...xe[Z]||{},[re]:{...((Ue=xe[Z])==null?void 0:Ue[re])||{},[ge]:[]}}};return setTimeout(()=>u(Z,ye,a),0),ye})),o(xe=>({...xe,[ge]:{...xe[ge]||{},[Z]:W}})),q.includes(re)&&setTimeout(()=>u(Z,Y,a),0)},getSelectedBlocksForRange:(ee,Z,re)=>{if(!re||typeof re!="object")return[];const ce=`range-${ee}`;return re[ce]&&re[ce][Z]?Array.isArray(re[ce][Z])?re[ce][Z]:[]:[]},handleSelectAllBlocksForRange:(ee,Z,re,ce,Y)=>{const ge=`range-${ee}`,q=re.siteType==="business_center"?["A"]:g.generateBlockLabels(re.blocks)||[],W=ce&&ce[ge]&&ce[ge][Z]||[],xe=q.map(Me=>`${Z}-block-${Me}`),ye=xe.length>0&&xe.every(Me=>W.includes(Me)),Ue=ye?[]:xe;o(Me=>({...Me,[ge]:{...Me[ge]||{},[Z]:Ue}})),l(ye?Me=>{const $e={...Me};return $e[Z]&&xe.forEach(fe=>{$e[Z][fe]&&$e[Z][fe][ge]&&delete $e[Z][fe][ge]}),$e}:Me=>{const $e={...Me};return xe.forEach(fe=>{$e[Z]||($e[Z]={}),$e[Z][fe]||($e[Z][fe]={}),$e[Z][fe][ge]||($e[Z][fe][ge]=[])}),$e})},handleSelectHalfForAllInRange:(ee,Z,re,ce,Y,ge)=>{const q=`range-${ee}`,W=ce&&ce[q]&&ce[q][Z]||[];if(W.length===0){A&&A("Bilgi","Ltfen nce en az bir blok sein.","info");return}let xe=0;W.forEach(ye=>{ye.split("-")[2];const Ue=re.siteType==="business_center"?parseInt(re.manualPanels)||parseInt(re.panels)||0:(parseInt(re.elevatorsPerBlock)||0)*2;if(Ue===0)return;const Me=Y[Z]&&Y[Z][ye]&&Y[Z][ye][q]||[],$e=[],fe=[];for(let Ne=1;Ne<=Ue;Ne++){const ve=`panel-${Ne}`,Ce=g&&g.isPanelAvailable?g.isPanelAvailable(Z,ye,ve,ge[0].startDate,ge[0].endDate,ge):!0;Ce&&!Me.includes(ve)?$e.push({panelKey:ve,panelNumber:Ne}):Ce||fe.push({panelKey:ve,panelNumber:Ne})}if($e.length===0)return;const Oe=$e.filter(Ne=>Ne.panelNumber%2===1),Re=$e.filter(Ne=>Ne.panelNumber%2===0),He=fe.filter(Ne=>Ne.panelNumber%2===1),pe=Ue>0?Math.floor(Ue/2):0,Le=Me.length,lt=Math.max(0,pe-Le);if(lt===0)return;let Ae=[];if(Oe.length>=lt)Ae=Oe.slice(0,lt).map(Ne=>Ne.panelKey);else if(He.length>0){if(Re.length>0){const Ne=Math.min(lt,Re.length);Ae=Re.slice(0,Ne).map(ve=>ve.panelKey)}else if(Oe.length>0){const Ne=Math.min(lt,Oe.length);Ae=Oe.slice(0,Ne).map(ve=>ve.panelKey)}}else if(Oe.length>0){Ae=Oe.map(ve=>ve.panelKey);const Ne=lt-Ae.length;if(Ne>0&&Re.length>0){const ve=Math.min(Ne,Re.length);Ae=[...Ae,...Re.slice(0,ve).map(Ce=>Ce.panelKey)]}}else if(Re.length>0){const Ne=Math.min(lt,Re.length);Ae=Re.slice(0,Ne).map(ve=>ve.panelKey)}if(Ae.length>0){const Ne=[...Me,...Ae];l(ve=>{var Ke;const Ce={...ve,[Z]:{...ve[Z]||{},[ye]:{...((Ke=ve[Z])==null?void 0:Ke[ye])||{},[q]:Ne}}};return setTimeout(()=>u(Z,Ce,a),0),Ce}),xe+=Ae.length}}),xe>0&&A&&A("Baarl",`${xe} panel otomatik olarak seildi.`,"success")},handleSelectAllBlocksForAllSitesInRange:(ee,Z,re,ce,Y)=>{if(!Z||Z.length===0){A&&A("Bilgi","Ltfen nce en az bir site sein.","info");return}const ge=`range-${ee}`;let q=0;Z.forEach(W=>{const xe=re.find(fe=>fe.id===W);if(!xe)return;const ye=xe.siteType==="business_center"?["A"]:g.generateBlockLabels(xe.blocks)||[],Ue=ce&&ce[ge]&&ce[ge][W]||[],Me=ye.map(fe=>`${W}-block-${fe}`);if(!(Me.length>0&&Me.every(fe=>Ue.includes(fe)))){const fe=Me;o(Oe=>({...Oe,[ge]:{...Oe[ge]||{},[W]:fe}})),l(Oe=>{const Re={...Oe};return Me.forEach(He=>{Re[W]||(Re[W]={}),Re[W][He]||(Re[W][He]={}),Re[W][He][ge]||(Re[W][He][ge]=[])}),Re}),q+=fe.length}}),q>0&&A&&A("Baarl",`${q} blok otomatik olarak seildi.`,"success")},handleSelectHalfForAllSitesInRange:(ee,Z,re,ce,Y,ge)=>{if(!Z||Z.length===0){A&&A("Bilgi","Ltfen nce en az bir site sein.","info");return}const q=`range-${ee}`;let W=0;Z.forEach(xe=>{const ye=re.find(Me=>Me.id===xe);if(!ye)return;const Ue=ce&&ce[q]&&ce[q][xe]||[];Ue.length!==0&&Ue.forEach(Me=>{var Ce,Ke;const $e=Y[xe]&&Y[xe][Me]&&Y[xe][Me][q]||[],fe=ye.siteType==="business_center"?parseInt(ye.manualPanels)||parseInt(ye.panels)||0:(parseInt(ye.elevatorsPerBlock)||0)*2;if(fe===0)return;const Oe=[],Re=[];for(let Ve=1;Ve<=fe;Ve++){const ot=`panel-${Ve}`,pt=g.isPanelAvailable(xe,Me,ot,(Ce=ge[0])==null?void 0:Ce.startDate,(Ke=ge[0])==null?void 0:Ke.endDate,ge);$e.includes(ot)||(pt?Oe.push({panelKey:ot,panelNumber:Ve}):Re.push({panelKey:ot,panelNumber:Ve}))}if(Oe.length===0)return;const He=Oe.filter(Ve=>Ve.panelNumber%2===1),pe=Oe.filter(Ve=>Ve.panelNumber%2===0),Le=Re.filter(Ve=>Ve.panelNumber%2===1),lt=fe>0?Math.floor(fe/2):0,Ae=$e.length,Ne=Math.max(0,lt-Ae);if(Ne===0)return;let ve=[];if(He.length>=Ne)ve=He.slice(0,Ne).map(Ve=>Ve.panelKey);else if(Le.length>0){if(pe.length>0){const Ve=Math.min(Ne,pe.length);ve=pe.slice(0,Ve).map(ot=>ot.panelKey)}else if(He.length>0){const Ve=Math.min(Ne,He.length);ve=He.slice(0,Ve).map(ot=>ot.panelKey)}}else if(He.length>0){ve=He.map(ot=>ot.panelKey);const Ve=Ne-ve.length;if(Ve>0&&pe.length>0){const ot=Math.min(Ve,pe.length);ve=[...ve,...pe.slice(0,ot).map(pt=>pt.panelKey)]}}else if(pe.length>0){const Ve=Math.min(Ne,pe.length);ve=pe.slice(0,Ve).map(ot=>ot.panelKey)}if(ve.length>0){const Ve=[...$e,...ve];l(ot=>{var Bt;const pt={...ot,[xe]:{...ot[xe]||{},[Me]:{...((Bt=ot[xe])==null?void 0:Bt[Me])||{},[q]:Ve}}};return setTimeout(()=>u(xe,pt,a),0),pt}),W+=ve.length}})}),W>0&&A&&A("Baarl",`${W} panel otomatik olarak seildi.`,"success")},handlePanelSelection:(ee,Z,re,ce)=>{const Y=ce[ee]&&ce[ee][Z]||[];let ge;Y.includes(re)?ge=Y.filter(q=>q!==re):ge=[...Y,re],l(q=>{const W={...q,[ee]:{...q[ee],[Z]:ge}};return u(ee,W,a),W})},handlePanelSelectionForDateRange:(ee,Z,re,ce,Y)=>{const ge=`range-${ce}`,q=Y[ee]&&Y[ee][Z]&&Y[ee][Z][ge]||[];let W;q.includes(re)?W=q.filter(xe=>xe!==re):W=[...q,re],l(xe=>{var Ue;const ye={...xe,[ee]:{...xe[ee],[Z]:{...(Ue=xe[ee])==null?void 0:Ue[Z],[ge]:W}}};return u(ee,ye,a),ye})},handleWeekSelection:(ee,Z,re)=>{let ce;Z.includes(ee)?ce=Z.filter(Y=>Y!==ee):ce=[...Z,ee],re(ce)},handleSelectHalf:(ee,Z,re,ce)=>{if(!h.find(pe=>pe.id===ee))return;const ge=re[ee]&&re[ee][Z]||[],q=[],W=[];for(let pe=1;pe<=ce;pe++){const Le=`panel-${pe}`,lt=g&&g.isPanelAvailable?g.isPanelAvailable(ee,Z,Le,v.startDate,v.endDate,v.dateRanges):!0;lt&&!ge.includes(Le)?q.push({panelKey:Le,panelNumber:pe}):lt||W.push({panelKey:Le,panelNumber:pe})}if(q.length===0){A&&A("Bilgi","Seilebilecek msait panel bulunmamaktadr.","info");return}const xe=q.filter(pe=>pe.panelNumber%2===1),ye=q.filter(pe=>pe.panelNumber%2===0),Me=W.filter(pe=>pe.panelNumber%2===1).length>0,$e=ce>0?Math.floor(ce/2):0,fe=ge.length,Oe=Math.max(0,$e-fe);if(Oe===0){A&&A("Bilgi","Zaten yeterli sayda panel seilmi.","info");return}let Re=[];if(Me&&ye.length>0){const pe=Math.min(Oe,ye.length);Re=ye.slice(0,pe).map(Le=>Le.panelKey)}else if(xe.length>0){const pe=Math.min(Oe,xe.length);if(Re=xe.slice(0,pe).map(Le=>Le.panelKey),Re.length<Oe&&ye.length>0){const Le=Oe-Re.length,lt=Math.min(Le,ye.length);Re=[...Re,...ye.slice(0,lt).map(Ae=>Ae.panelKey)]}}else if(ye.length>0){const pe=Math.min(Oe,ye.length);Re=ye.slice(0,pe).map(Le=>Le.panelKey)}if(Re.length===0){A&&A("Bilgi","Seilebilecek msait panel bulunmamaktadr.","info");return}const He=[...ge,...Re];l(pe=>{const Le={...pe,[ee]:{...pe[ee],[Z]:He}};return u(ee,Le,a),Le})},handleSelectHalfForDateRange:(ee,Z,re,ce,Y,ge)=>{if(!h.find(Ae=>Ae.id===ee))return;const W=`range-${re}`,xe=ce[ee]&&ce[ee][Z]&&ce[ee][Z][W]||[],ye=[],Ue=[];for(let Ae=1;Ae<=Y;Ae++){const Ne=`panel-${Ae}`,ve=g&&g.isPanelAvailable?g.isPanelAvailable(ee,Z,Ne,ge[0].startDate,ge[0].endDate,ge):!0;ve&&!xe.includes(Ne)?ye.push({panelKey:Ne,panelNumber:Ae}):ve||Ue.push({panelKey:Ne,panelNumber:Ae})}if(ye.length===0){A&&A("Bilgi","Seilebilecek msait panel bulunmamaktadr.","info");return}const Me=ye.filter(Ae=>Ae.panelNumber%2===1),$e=ye.filter(Ae=>Ae.panelNumber%2===0),Oe=Ue.filter(Ae=>Ae.panelNumber%2===1).length>0,Re=Y>0?Math.floor(Y/2):0,He=xe.length,pe=Math.max(0,Re-He);if(pe===0){A&&A("Bilgi","Zaten yeterli sayda panel seilmi.","info");return}let Le=[];if(Oe&&$e.length>0){const Ae=Math.min(pe,$e.length);Le=$e.slice(0,Ae).map(Ne=>Ne.panelKey)}else if(Me.length>0){const Ae=Math.min(pe,Me.length);if(Le=Me.slice(0,Ae).map(Ne=>Ne.panelKey),Le.length<pe&&$e.length>0){const Ne=pe-Le.length,ve=Math.min(Ne,$e.length);Le=[...Le,...$e.slice(0,ve).map(Ce=>Ce.panelKey)]}}else if($e.length>0){const Ae=Math.min(pe,$e.length);Le=$e.slice(0,Ae).map(Ne=>Ne.panelKey)}if(Le.length===0){A&&A("Bilgi","Seilebilecek msait panel bulunmamaktadr.","info");return}const lt=[...xe,...Le];l(Ae=>{var ve;const Ne={...Ae,[ee]:{...Ae[ee],[Z]:{...(ve=Ae[ee])==null?void 0:ve[Z],[W]:lt}}};return u(ee,Ne,a),Ne})},handleSelectHalfForAll:(ee,Z,re,ce)=>{if(!ee||ee.length===0){A&&A("Bilgi","Ltfen nce en az bir site sein.","info");return}let Y=0,ge=0;ee.forEach(q=>{const W=Z.find(Ue=>Ue.id===q);if(!W)return;const xe=re[q]||[],ye=W.siteType==="business_center"?[`${q}-block-A`]:xe.filter(Ue=>Ue&&Ue.startsWith(`${q}-block-`));if(ye.length===0){A&&A("Bilgi",`${W.name} iin ltfen en az bir blok sein.`,"info");return}ye.forEach(Ue=>{Ue.split("-")[2];const Me=W.siteType==="business_center"?parseInt(W.panels)||parseInt(W.manualPanels)||0:(parseInt(W.elevatorsPerBlock)||0)*2;if(Me===0)return;const $e=ce[q]&&ce[q][Ue]||[],fe=[],Oe=[];for(let Ce=1;Ce<=Me;Ce++){const Ke=`panel-${Ce}`,Ve=g&&g.isPanelAvailable?g.isPanelAvailable(q,Ue,Ke,v.startDate,v.endDate,v.dateRanges):!0;Ve&&!$e.includes(Ke)?fe.push({panelKey:Ke,panelNumber:Ce}):Ve||Oe.push({panelKey:Ke,panelNumber:Ce})}if(fe.length===0){ge++;return}const Re=fe.filter(Ce=>Ce.panelNumber%2===1),He=fe.filter(Ce=>Ce.panelNumber%2===0),Le=Oe.filter(Ce=>Ce.panelNumber%2===1).length>0,lt=Me>0?Math.floor(Me/2):0,Ae=$e.length,Ne=Math.max(0,lt-Ae);if(Ne===0){ge++;return}let ve=[];if(Le&&He.length>0){const Ce=Math.min(Ne,He.length);ve=He.slice(0,Ce).map(Ke=>Ke.panelKey)}else if(Re.length>0){const Ce=Math.min(Ne,Re.length);if(ve=Re.slice(0,Ce).map(Ke=>Ke.panelKey),ve.length<Ne&&He.length>0){const Ke=Ne-ve.length,Ve=Math.min(Ke,He.length);ve=[...ve,...He.slice(0,Ve).map(ot=>ot.panelKey)]}}else if(He.length>0){const Ce=Math.min(Ne,He.length);ve=He.slice(0,Ce).map(Ke=>Ke.panelKey)}if(ve.length>0){const Ce=[...$e,...ve];l(Ke=>{const Ve={...Ke,[q]:{...Ke[q],[Ue]:Ce}};return u(q,Ve,a),Ve}),Y+=ve.length}ge++})}),Y>0?A&&A("Baarl",`${Y} panel otomatik olarak seildi.`,"success"):ge>0&&A&&A("Bilgi","Seilebilecek msait panel bulunamad veya zaten yeterli sayda panel seilmi.","info")},handleSelectAllBlocks:(ee,Z,re,ce)=>{if(!ee||ee.length===0){A&&A("Bilgi","Ltfen nce en az bir site sein.","info");return}let Y=0;const ge={...re},q={...ce};ee.forEach(W=>{const xe=Z.find(Me=>Me.id===W);if(!xe)return;const ye=g.generateBlockLabels(xe.blocks),Ue=re[W]||[];if(xe.siteType==="business_center"){const Me=`${W}-block-A`;Ue.includes(Me)||(ge[W]||(ge[W]=[]),ge[W].push(Me),Y++,q[W]||(q[W]={}),q[W][Me]=[])}else ye.forEach(Me=>{const $e=`${W}-block-${Me}`;Ue.includes($e)||(ge[W]||(ge[W]=[]),ge[W].push($e),Y++,q[W]||(q[W]={}),q[W][$e]=[])})}),o(ge),l(q),ee.forEach(W=>{setTimeout(()=>{u(W,q,a)},0)}),Y>0?A&&A("Baarl",`${Y} blok otomatik olarak seildi.`,"success"):A&&A("Bilgi","Tm bloklar zaten seilmi.","info")},handleAddDateRange:()=>{n(ee=>({...ee,dateRanges:[...ee.dateRanges||[],{startDate:"",endDate:""}]}))},handleRemoveDateRange:ee=>{n(Z=>{const re=[...Z.dateRanges||[]];return re.length>1?(re.splice(ee,1),{...Z,dateRanges:re}):Z})},handleDateRangeChange:(ee,Z,re)=>{n(ce=>{const Y=[...ce.dateRanges||[]];return Y[ee]&&(Y[ee]={...Y[ee],[Z]:re}),{...ce,dateRanges:Y}})}}),r1e=({companies:t=[],sites:e=[],agreements:r=[],sitePanelSelections:n={},selectedWeeks:i=[],formData:a={}})=>{const s=x=>{const k=t.find(y=>String(y.id)===String(x));return k?k.name:"Bilinmeyen Firma"},o=x=>t.find(y=>String(y.id)===String(x)),l=x=>{const k=o(x);if(!k||!k.creditHistory||k.creditHistory.length===0)return null;const y=k.creditHistory[k.creditHistory.length-1];return{credit:k.credit,panelPrice:y.panelPrice,totalAmount:y.totalAmount}},A=x=>{const k=e.find(y=>String(y.id)===String(x));return k?k.name:""},u=x=>`${new Intl.NumberFormat("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(x)} TL`,d=(x,k,y,S)=>x<=S&&y<=k,h=x=>{const k=[];for(let y=0;y<x;y++)k.push(String.fromCharCode(65+y));return k},f=()=>{const x=p().filter(k=>i.includes(k.id));return x.length===0?{startDate:a.startDate,endDate:a.endDate}:{startDate:x[0].start,endDate:x[x.length-1].end}},p=()=>{if(!a.startDate||!a.endDate)return[];const x=new Date(a.startDate),k=new Date(a.endDate),y=[],S=Math.abs(k-x),_=Math.ceil(S/(1e3*60*60*24)),M=Math.ceil(_/7);for(let K=0;K<M;K++){const z=new Date(x);z.setDate(x.getDate()+K*7);const ae=new Date(z);ae.setDate(z.getDate()+6),ae>k&&ae.setTime(k.getTime()),y.push({id:K+1,label:`${z.toLocaleDateString("tr-TR")} - ${ae.toLocaleDateString("tr-TR")}`,start:z.toISOString().split("T")[0],end:ae.toISOString().split("T")[0]})}return y},g=(x,k,y)=>{const S=k[x]||{};let _=0;return Object.values(S).forEach(M=>{Array.isArray(M)?_+=M.length:typeof M=="object"&&Object.values(M).forEach(K=>{Array.isArray(K)&&(_+=K.length)})}),y&&y(M=>({...M,[x]:_})),_},v=(x,k)=>{if(!x||!k)return 0;const y=new Date(x),S=new Date(k),_=Math.abs(S-y),M=Math.ceil(_/(1e3*60*60*24));return Math.ceil(M/7)},C=x=>{if(!x||x.length===0)return 0;let k=0;return x.forEach(y=>{y.startDate&&y.endDate&&(k+=v(y.startDate,y.endDate))}),k},I=(x,k,y=null)=>{let S=0;y&&y.length>0?S=C(y):a.startDate&&a.endDate&&(S=v(a.startDate,a.endDate));const _=Object.values(x||{}).reduce((K,z)=>K+(parseInt(z)||0),0),M=parseFloat(k)||0;return S*_*M},F=(x,k,y,S,_,M=null)=>{let K=[];if(M&&M.length>0)K=M.filter(te=>te.startDate&&te.endDate);else if(S&&_)K=[{startDate:S,endDate:_}];else return!0;if(K.length===0)return!0;const z=r.filter(te=>te.siteIds&&te.siteIds.includes(x)&&(te.status==="active"||te.status==="completed")),ae=te=>te.dateRanges&&te.dateRanges.length>0?te.dateRanges.filter(G=>G.startDate&&G.endDate):te.startDate&&te.endDate?[{startDate:te.startDate,endDate:te.endDate}]:[];for(const te of K){const G=new Date(te.startDate),ue=new Date(te.endDate);for(const de of z){const T=ae(de);for(const O of T){const V=new Date(O.startDate),Q=new Date(O.endDate);if(d(G,ue,V,Q)){let X=!1;if(de.dateRanges&&Array.isArray(de.dateRanges)&&de.dateRanges.length>0){const ie=de.dateRanges.findIndex(ee=>ee.startDate===O.startDate&&ee.endDate===O.endDate);if(ie>=0){const ee=`range-${ie}`;de.siteBlockSelections&&de.siteBlockSelections[ee]&&de.siteBlockSelections[ee][x]&&Array.isArray(de.siteBlockSelections[ee][x])&&de.siteBlockSelections[ee][x].includes(k)&&de.sitePanelSelections&&de.sitePanelSelections[x]&&de.sitePanelSelections[x][k]&&typeof de.sitePanelSelections[x][k]=="object"&&de.sitePanelSelections[x][k][ee]&&Array.isArray(de.sitePanelSelections[x][k][ee])&&de.sitePanelSelections[x][k][ee].includes(y)&&(X=!0)}}else if(de.siteBlockSelections&&de.siteBlockSelections[x]&&(Array.isArray(de.siteBlockSelections[x])?de.siteBlockSelections[x]:[]).includes(k)&&de.sitePanelSelections&&de.sitePanelSelections[x]&&de.sitePanelSelections[x][k]){const ee=de.sitePanelSelections[x][k];Array.isArray(ee)&&ee.includes(y)&&(X=!0)}if(X)return!1}}}}return!0},E=(x,k,y,S=null)=>{const _=e.find(K=>String(K.id)===String(x));if(!_)return!1;let M=[];if(S&&S.length>0)M=S.filter(K=>K.startDate&&K.endDate);else if(k&&y)M=[{startDate:k,endDate:y}];else return!1;if(M.length===0)return!1;for(const K of M){const z=h(_.blocks||0);for(const ae of z){const te=`${x}-block-${ae}`,G=_.panels||0;for(let ue=1;ue<=G;ue++){const de=`panel-${ue}`;if(F(x,te,de,K.startDate,K.endDate,[K]))return!1}}}return!0},R=(x,k,y,S,_)=>{if(!S||!_)return null;const M=r.filter(te=>te.siteIds&&Array.isArray(te.siteIds)&&te.siteIds.includes(x)&&(te.status==="active"||te.status==="completed")),K=new Date(S),z=new Date(_),ae=te=>te.dateRanges&&te.dateRanges.length>0?te.dateRanges.filter(G=>G.startDate&&G.endDate):te.startDate&&te.endDate?[{startDate:te.startDate,endDate:te.endDate}]:[];for(const te of M){const G=ae(te);for(const ue of G){const de=new Date(ue.startDate),T=new Date(ue.endDate);if(d(K,z,de,T)){if(te.dateRanges&&Array.isArray(te.dateRanges)&&te.dateRanges.length>0){const O=te.dateRanges.findIndex(V=>V.startDate===ue.startDate&&V.endDate===ue.endDate);if(O>=0){const V=`range-${O}`;if(te.siteBlockSelections&&te.siteBlockSelections[V]&&te.siteBlockSelections[V][x]&&Array.isArray(te.siteBlockSelections[V][x])&&te.siteBlockSelections[V][x].includes(k)&&te.sitePanelSelections&&te.sitePanelSelections[x]&&te.sitePanelSelections[x][k]&&typeof te.sitePanelSelections[x][k]=="object"&&te.sitePanelSelections[x][k][V]&&Array.isArray(te.sitePanelSelections[x][k][V])&&te.sitePanelSelections[x][k][V].includes(y))return{agreementId:te.id,companyName:s(te.companyId),startDate:ue.startDate,endDate:ue.endDate}}}else if(te.siteBlockSelections&&te.siteBlockSelections[x]&&(Array.isArray(te.siteBlockSelections[x])?te.siteBlockSelections[x]:[]).includes(k)&&te.sitePanelSelections&&te.sitePanelSelections[x]&&te.sitePanelSelections[x][k]){const V=te.sitePanelSelections[x][k];if(Array.isArray(V)&&V.includes(y))return{agreementId:te.id,companyName:s(te.companyId),startDate:te.startDate,endDate:te.endDate}}}}}return null},L=x=>x?new Date(x).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}):"";return{getCompanyName:s,getSiteName:A,getCompany:o,getCompanyCreditInfo:l,formatCurrency:u,dateRangesOverlap:d,generateBlockLabels:h,getCurrentDateRange:f,generateWeekOptions:p,updateSitePanelCount:g,calculateTotalWeeks:v,calculateTotalWeeksFromRanges:C,calculateTotalAmount:I,isPanelAvailable:F,isSiteFullyBooked:E,getPanelUsageInfo:R,generateAgreementPDF:x=>{try{const k=new Xt("p","mm","a4"),y=k.internal.pageSize.getWidth(),S=k.internal.pageSize.getHeight(),_=15,M=6;let K=_;const z={primary:[0,123,255],primaryLight:[230,240,255],success:[40,167,69],successLight:[230,245,235],warning:[255,193,7],warningLight:[255,248,220],danger:[220,53,69],dangerLight:[248,215,218],info:[23,162,184],infoLight:[209,236,241],dark:[33,37,41],light:[248,249,250],border:[222,226,230]},ae=ee=>ee?String(ee).replace(//g,"i").replace(//g,"I").replace(//g,"g").replace(//g,"G").replace(//g,"u").replace(//g,"U").replace(//g,"s").replace(//g,"S").replace(//g,"o").replace(//g,"O").replace(//g,"c").replace(//g,"C"):"",te=(ee=20)=>K+ee>S-_?(k.addPage(),K=_,!0):!1,G=(ee,Z,re,ce,Y=12,ge="normal",q="left",W=[0,0,0])=>{k.setFontSize(Y),k.setFont("helvetica",ge),k.setTextColor(W[0],W[1],W[2]);const xe=ae(ee),ye=k.splitTextToSize(xe,ce);return k.text(ye,Z,re,{align:q}),k.setTextColor(0,0,0),ye.length*(Y*.4)},ue=(ee,Z,re,ce,Y,ge=null,q=2)=>{Y&&k.setFillColor(Y[0],Y[1],Y[2]),ge&&(k.setDrawColor(ge[0],ge[1],ge[2]),k.setLineWidth(.5)),q>0?k.roundedRect(ee,Z,re,ce,q,q,Y?ge?"FD":"F":"D"):k.rect(ee,Z,re,ce,Y?ge?"FD":"F":"D")},de=(ee,Z,re=z.primary,ce=[255,255,255])=>{te(12);const Y=10;ue(_,Z-5,y-_*2,Y,re,null,3),k.setFontSize(12),k.setFont("helvetica","bold"),k.setTextColor(ce[0],ce[1],ce[2]);const ge=ae(ee);return k.text(ge,y/2,Z+2,{align:"center"}),k.setTextColor(0,0,0),Z+Y+2};k.setFillColor(z.primary[0],z.primary[1],z.primary[2]),k.rect(0,0,y,35,"F"),k.setTextColor(255,255,255),k.setFontSize(24),k.setFont("helvetica","bold"),k.text("ANLASMA METNI",y/2,22,{align:"center"}),k.setFontSize(10),k.setFont("helvetica","normal"),k.text(`Anlasma No: ${x.id}`,y/2,30,{align:"center"}),K=45,k.setTextColor(0,0,0);const T=o(x.companyId),O=s(x.companyId);K=de("TARAFLAR",K,z.primary,[255,255,255]),K+=5,ue(_,K,y-_*2,30,null,z.primary,2),K+=8,k.setFontSize(11),k.setFont("helvetica","bold"),G("1. FIRMA BILGILERI",_+5,K,y-_*2-10,11,"bold","left"),K+=M+3,k.setFontSize(10),k.setFont("helvetica","normal"),G(`Firma Adi: ${O}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M,T&&(T.contact&&(G(`Iletisim: ${T.contact}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M),T.phone&&(G(`Telefon: ${T.phone}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M),T.email&&(G(`E-posta: ${T.email}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M)),K+=5,K=de("ANLASMA DETAYLARI",K,z.info,[255,255,255]),K+=5,ue(_,K,y-_*2,35,null,z.info,2),K+=8,k.setFontSize(10),k.setFont("helvetica","normal"),G(`Anlasma No: ${x.id}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M,G(`Baslangic Tarihi: ${L(x.startDate)}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M,G(`Bitis Tarihi: ${L(x.endDate)}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M;const V=v(x.startDate,x.endDate);if(G(`Sure: ${V} hafta`,_+5,K,y-_*2-10,10,"normal","left"),K+=M,G(`Haftalik Panel Ucreti: ${u(x.weeklyRatePerPanel)}`,_+5,K,y-_*2-10,10,"normal","left"),K+=5,K=de("SITELER VE PANELLER",K,z.success,[255,255,255]),K+=5,x.siteIds&&x.siteIds.length>0){const ee=x.siteIds;let Z=1;ee.forEach(re=>{var q,W,xe;const ce=e.find(ye=>String(ye.id)===String(re)),Y=ce?ce.name:`Site ${re}`,ge=((q=x.sitePanelCounts)==null?void 0:q[re])||0;if(ge>0){if(te(30),ue(_,K,y-_*2,30,null,z.border,2),K+=5,k.setFontSize(12),k.setFont("helvetica","bold"),G(`${Z}. ${Y}`,_+5,K,y-_*2-10,12,"bold","left"),K+=M+2,k.setFontSize(10),k.setFont("helvetica","normal"),G(`Panel Sayisi: ${ge} panel`,_+5,K,y-_*2-10,10,"normal","left"),K+=M+3,(W=x.siteBlockSelections)!=null&&W[re]&&((xe=x.sitePanelSelections)!=null&&xe[re])){const ye=x.siteBlockSelections[re],Ue={};ye.forEach(Me=>{const $e=Me.split("-")[2];(x.sitePanelSelections[re][Me]||[]).forEach(Oe=>{const Re=Oe.match(/panel-(\d+)/),He=Re?Re[1]:Oe;Ue[$e]||(Ue[$e]=[]),Ue[$e].push(He)})}),k.setFontSize(10),k.setFont("helvetica","normal"),Object.keys(Ue).sort().forEach(Me=>{const $e=Ue[Me].sort((fe,Oe)=>parseInt(fe)-parseInt(Oe));G(`Blok ${Me}: Panel ${$e.join(", ")}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M}),K+=2}K+=3,Z++}})}else G("Secili site bulunmamaktadir.",y/2,K,y-_*2-10,10,"normal","center"),K+=M;K+=5,te(40),K=de("MALI OZET",K,z.warning,[33,37,41]),K+=5,ue(_,K,y-_*2,35,null,z.warning,2),K+=8,k.setFontSize(10),k.setFont("helvetica","normal");const Q=Object.values(x.sitePanelCounts||{}).reduce((ee,Z)=>ee+Z,0);if(G(`Toplam Panel Sayisi: ${Q} panel`,_+5,K,y-_*2-10,10,"normal","left"),K+=M,G(`Toplam Hafta: ${V} hafta`,_+5,K,y-_*2-10,10,"normal","left"),K+=M,G(`Haftalik Ucret: ${u(x.weeklyRatePerPanel)}`,_+5,K,y-_*2-10,10,"normal","left"),K+=M+3,ue(_+5,K,y-_*2-10,10,z.primary,z.primary,2),K+=7,k.setFont("helvetica","bold"),k.setFontSize(13),k.setTextColor(255,255,255),G(`TOPLAM TUTAR: ${u(x.totalAmount)}`,y/2,K,y-_*2-20,13,"bold","center",[255,255,255]),K+=5,x.notes&&x.notes.trim()){te(30),K=de("NOTLAR",K,z.dark,[255,255,255]),K+=5,ue(_,K,y-_*2,25,null,z.border,2),K+=8,k.setFontSize(10),k.setFont("helvetica","normal");const ee=G(x.notes,_+5,K,y-_*2-10,10,"normal","left");K+=ee+5}const X=k.getNumberOfPages();for(let ee=1;ee<=X;ee++){k.setPage(ee),k.setDrawColor(z.border[0],z.border[1],z.border[2]),k.setLineWidth(.5),k.line(_,S-15,y-_,S-15),k.setFontSize(8),k.setFont("helvetica","normal"),k.setTextColor(128,128,128);const Z=`Sayfa ${ee} / ${X} - Olusturulma Tarihi: ${new Date().toLocaleDateString("tr-TR")}`;k.text(ae(Z),y/2,S-10,{align:"center"})}const ie=`anlasma_${x.id}_${ae(O).replace(/\s+/g,"_")}.pdf`;return k.save(ie),!0}catch(k){return console.error("Error generating agreement PDF:",k),!1}},generateContractPDF:x=>{try{const k=new Xt("p","mm","a4"),y=k.internal.pageSize.getWidth(),S=k.internal.pageSize.getHeight(),_=15;let M=_;const K=Z=>Z?String(Z).replace(//g,"i").replace(//g,"I").replace(//g,"g").replace(//g,"G").replace(//g,"u").replace(//g,"U").replace(//g,"s").replace(//g,"S").replace(//g,"o").replace(//g,"O").replace(//g,"c").replace(//g,"C"):"",z=(Z,re,ce,Y,ge=11,q="normal")=>{k.setFontSize(ge),k.setFont("helvetica",q);const W=K(Z),xe=k.splitTextToSize(W,Y);return k.text(xe,re,ce),ce+xe.length*(ge*.45)},ae=(Z=20)=>{M+Z>S-_&&(k.addPage(),M=_)},te=o(x.companyId),G=s(x.companyId),ue=Object.values(x.sitePanelCounts||{}).reduce((Z,re)=>Z+(parseInt(re)||0),0),de=v(x.startDate,x.endDate);k.setFontSize(14),k.setFont("helvetica","bold"),k.text(K("ASANSOR ICI REKLAM PANELI YAYIN SOZLESMESI"),y/2,M,{align:"center"}),M+=10,k.setFontSize(12),k.setFont("helvetica","bold"),M=z("Madde 1  Taraflar",_,M,y-2*_,12,"bold"),M+=2,k.setFont("helvetica","normal"),M=z("Isbu sozlesme;",_,M,y-2*_),M+=2,M=z("Reklam Hizmeti Veren:",_,M,y-2*_,11,"bold"),M=z("Firma Unvani: DAT DIJITAL",_+4,M,y-2*_),M=z("Adres: CARSI MAHALLESI BOSNA HERSEK BULVARI ELAZIG IS MERKEZI NO:11 KAT:5 DAIRE:20 MERKEZ/ELAZIG",_+4,M,y-2*_),M=z("Vergi Dairesi / No:",_+4,M,y-2*_),M=z("Telefon: 0540 365 23 23",_+4,M,y-2*_),M+=2,M=z("Reklam Veren:",_,M,y-2*_,11,"bold"),M=z(`Firma Unvani: ${G||""}`,_+4,M,y-2*_),M=z(`Adres: ${(te==null?void 0:te.address)||""}`,_+4,M,y-2*_);const T=te!=null&&te.taxOffice&&(te!=null&&te.taxNumber)?`${te.taxOffice} / ${te.taxNumber}`:(te==null?void 0:te.taxOffice)||(te==null?void 0:te.taxNumber)||(te==null?void 0:te.taxInfo)||"";M=z(`Vergi Dairesi / No: ${T}`,_+4,M,y-2*_),M=z(`Telefon: ${(te==null?void 0:te.phone)||""}`,_+4,M,y-2*_),M+=4,M=z("Arasinda asagidaki sartlarla akdedilmistir.",_,M,y-2*_),M+=4,ae(40),M=z("Madde 2  Szlemenin Konusu",_,M,y-2*_,12,"bold"),M+=2,M=z("Bu szlemenin konusu; HZMET SALAYICI'ya ait ve/veya kullanm hakk kendisinde bulunan apartman ve site asansrleri ierisine yerletirilen reklam panolarnda, REKLAM VEREN'e ait reklam grsellerinin belirtilen sre boyunca aslmas, muhafaza edilmesi ve yaynda tutulmasna ilikin artlarn belirlenmesidir.",_,M,y-2*_),M+=4,ae(40),M=z("Madde 3  Reklam Alanlar ve Panel Says",_,M,y-2*_,12,"bold"),M+=2,M=z("Reklam yayn yaplacak site ve paneller ibu szlemenin ayrlmaz paras olan EK-1 Liste'de belirtilmitir.",_,M,y-2*_),M+=3,M=z(`Toplam Panel Sayisi: ${ue} adet`,_,M,y-2*_),M=z(`1 Panel 1 Haftalik Birim Ucreti: ${u(x.weeklyRatePerPanel)} + KDV`,_,M,y-2*_),M+=4,k.setFont("helvetica","bold"),M=z("Anlasma Tutari:",_,M,y-2*_,11,"bold"),k.setFont("helvetica","normal"),M=z(`${u(x.totalAmount)}`,_+4,M,y-2*_),M+=3,k.setFont("helvetica","bold"),M=z("KDV Orani:",_,M,y-2*_,11,"bold"),k.setFont("helvetica","normal"),M=z("",_+4,M,y-2*_),M+=3,k.setFont("helvetica","bold"),M=z("KDV Tutari:",_,M,y-2*_,11,"bold"),k.setFont("helvetica","normal"),M=z("",_+4,M,y-2*_),M+=3,k.setFont("helvetica","bold"),M=z("Toplam Tutar:",_,M,y-2*_,11,"bold"),k.setFont("helvetica","normal"),M=z("",_+4,M,y-2*_),M+=4,ae(40),M=z("Madde 4  Szleme Sresi",_,M,y-2*_,12,"bold"),M+=2;let O=x.dateRanges||[];if(O.length===0&&x.startDate&&x.endDate&&(O=[{startDate:x.startDate,endDate:x.endDate}]),O.length>0)M=z("Szleme aada belirtilen tarih aralklarnda geerlidir:",_,M,y-2*_),M+=3,O.forEach((Z,re)=>{if(Z.startDate&&Z.endDate){const ce=L(Z.startDate),Y=L(Z.endDate);M=z(`* ${ce}  ${Y}`,_+4,M,y-2*_-4),M+=2}}),M+=2,M=z("Belirtilen sreler dnda reklam yayn yaplmaz. Sre bitiminde szleme kendiliinden sona erer.",_,M,y-2*_);else{const Z=L(x.startDate),re=L(x.endDate);M=z(`Szleme ${Z}  ${re} tarihleri arasnda geerlidir. Belirtilen sreler dnda reklam yayn yaplmaz. Sre bitiminde szleme kendiliinden sona erer.`,_,M,y-2*_)}M+=4,[{title:"Madde 5  deme artlar",body:"REKLAM VEREN, toplam szleme bedelini reklam yaynnn balayaca haftadan nceki CUMA gn saat 17:00'ye kadar HZMET SALAYICI'nn bildirecei banka hesabna veya nakit / ek / kredi kart ile eksiksiz demekle ykmldr. deme yaplmad srece reklam asm yaplmaz, yayn sresi balamaz ve gecikmeden HZMET SALAYICI sorumlu tutulamaz. deme gn geirilirse HZMET SALAYICI'nn szlemeyi tek tarafl ve tazminatsz fesih hakk doar."},{title:"Madde 6  Reklam Asm ve Muhafaza",body:"HZMET SALAYICI; reklam asmn Pazar gn gerekletirmeyi, reklam grsellerini szleme sresi boyunca panolarda muhafaza etmeyi ve kast veya ar ihmal dnda doabilecek zararlar haricinde yayn srdrmeyi taahht eder. Apartman ynetimi, nc ahslar, vandalizm, doal afet, yangn, su baskn, sabotaj ve benzeri mcbir sebeplerden kaynaklanan sklme, zarar ve kayplardan HZMET SALAYICI sorumlu deildir."},{title:"Madde 7  Reklam erii Sorumluluu",body:"Reklam ieriinin mevzuata, genel ahlaka ve ilgili reklam ynetmeliklerine uygunluundan tamamen REKLAM VEREN sorumludur. Doabilecek her trl idari para cezas, dava, tazminat ve yaptrmdan REKLAM VEREN sorumludur; HZMET SALAYICI'ya rcu edilemez."},{title:"Madde 8  Grsel Teslimi",body:"Reklam basklar en ge Perembe gn saat 17:00'ye kadar HZMET SALAYICI'ya teslim edilmek zorundadr. Ge teslimden doacak gecikmeler yayn sresinden dlmez, cret iadesi yaplmaz."},{title:"Madde 9  Fesih",body:"Taraflar, szleme sresi iinde tek tarafl, gerekesiz ve cret iadesi talep ederek fesih haklarna sahip deildir. Mcbir sebep halleri bu hkmn istisnasdr."},{title:"Madde 10  Gizlilik",body:"Taraflar, bu szleme kapsamnda rendikleri ticari srlar ve mali bilgileri nc kiilerle paylaamaz."},{title:"Madde 11  Devir Yasa",body:"REKLAM VEREN, bu szlemeden doan hak ve ykmllklerini HZMET SALAYICI'nn yazl izni olmadan nc kiilere devredemez."},{title:"Madde 12  Tebligat",body:"Taraflarn ibu szlemede belirtilen adresleri yasal tebligat adresleridir. Adres deiiklikleri yazl bildirilmedike eski adrese yaplan tebligatlar geerli saylr."},{title:"Madde 13  Yetkili Mahkeme",body:"bu szlemeden doacak uyumazlklarda ELAZI MERKEZ Mahkemeleri ve cra Daireleri yetkilidir."}].forEach(Z=>{ae(40),M=z(Z.title,_,M,y-2*_,12,"bold"),M+=2,M=z(Z.body,_,M,y-2*_),M+=4}),ae(30);const Q=new Date().toLocaleDateString("tr-TR");M=z("Madde 14  Yrrlk",_,M,y-2*_,12,"bold"),M+=2,M=z(`14 (ondrt) maddeden ibaret ibu szleme ${Q} tarihinde 2 (iki) nsha olarak imzalanm olup yrrle girmitir.`,_,M,y-2*_),M+=10,ae(40);const X=y/2;if(k.setFont("helvetica","bold"),k.setFontSize(11),k.text(K("HIZMET SAGLAYICI"),_+10,M),k.text(K("REKLAM VEREN"),X+10,M),M+=8,k.setFont("helvetica","normal"),k.text(K("DAT DIJITAL"),_+10,M),k.text(K(G||""),X+10,M),M+=20,k.addPage(),M=_,k.setFont("helvetica","bold"),k.setFontSize(13),k.text("EK-1: REKLAM ALANLARI VE PANEL LSTES",y/2,M,{align:"center"}),M+=8,x.siteIds&&x.siteIds.length>0){const Z=x.siteIds;let re=1;Z.forEach(ce=>{var W,xe,ye;const Y=e.find(Ue=>String(Ue.id)===String(ce)),ge=Y?Y.name:`Site ${ce}`,q=((W=x.sitePanelCounts)==null?void 0:W[ce])||0;if(q>0){if(ae(30),M=z(`${re}. ${ge}`,_,M,y-2*_,12,"bold"),M+=2,M=z(`Toplam Panel: ${q}`,_+4,M,y-2*_),(xe=x.siteBlockSelections)!=null&&xe[ce]&&((ye=x.sitePanelSelections)!=null&&ye[ce])){const Ue=x.siteBlockSelections[ce],Me={};Ue.forEach($e=>{const fe=$e.split("-")[2];(x.sitePanelSelections[ce][$e]||[]).forEach(Re=>{const He=Re.match(/panel-(\d+)/),pe=He?He[1]:Re;Me[fe]||(Me[fe]=[]),Me[fe].push(pe)})}),Object.keys(Me).sort().forEach($e=>{const fe=Me[$e].sort((Oe,Re)=>parseInt(Oe)-parseInt(Re));M=z(`Blok ${$e}: Panel ${fe.join(", ")}`,_+4,M,y-2*_)})}M+=4,re++}})}else M=z("Secili site bulunmamaktadir.",_,M,y-2*_);const ie=(G||"").replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""),ee=`sozlesme_${x.id}_${ie}.pdf`;return k.save(ee),!0}catch(k){return console.error("Error generating contract PDF:",k),!1}}}},n1e=({agreements:t,handlers:e,uiHandlers:r,helpers:n,handleUploadPhoto:i,activeTab:a})=>{const s=A=>A?new Date(A).toLocaleDateString("tr-TR"):"",o=A=>{switch(A){case"active":return"bg-success";case"completed":return"bg-info";case"terminated":return"bg-warning";case"archived":return"bg-secondary";default:return"bg-secondary"}},l=A=>{switch(A){case"active":return"Aktif";case"completed":return"Tamamland";case"terminated":return"Erken Sonlandrld";case"archived":return"Arivlendi";default:return"Bilinmiyor"}};return m("div",{className:"table-responsive-agreement",children:[m("table",{className:"table table-hover mb-0 agreement-table",children:[c("thead",{className:"agreement-table-header",children:m("tr",{children:[c("th",{className:"border-0 py-3 px-4",children:"Firma"}),c("th",{className:"border-0 py-3 px-4",children:"Tarih Aral"}),c("th",{className:"border-0 py-3 px-4 d-none d-md-table-cell",children:"Panel Says"}),c("th",{className:"border-0 py-3 px-4",children:"Toplam Tutar"}),c("th",{className:"border-0 py-3 px-4 d-none d-lg-table-cell",children:"Durum"}),c("th",{className:"border-0 py-3 px-4 text-end",children:"lemler"})]})}),c("tbody",{children:(t||[]).map(A=>{var u;return m("tr",{className:"align-middle",children:[c("td",{className:"py-3 px-4",children:m("div",{className:"d-flex align-items-center company-info",children:[c("div",{className:"company-icon me-3",children:c("i",{className:"bi bi-building text-primary"})}),m("div",{children:[c("div",{className:"company-name",children:n.getCompanyName(A.companyId)}),m("div",{className:"company-id text-muted small",children:["#",A.id]})]})]})}),m("td",{className:"py-3 px-4",children:[m("div",{className:"fw-medium",children:[s(A.startDate)," - ",s(A.endDate)]}),m("div",{className:"small text-muted d-md-none",children:[A.totalWeeks," hafta"]}),m("div",{className:"small text-muted d-md-none",children:[Object.values(A.sitePanelCounts||{}).reduce((d,h)=>d+h,0)," panel"]})]}),m("td",{className:"py-3 px-4 d-none d-md-table-cell",children:[m("div",{className:"fw-medium",children:[Object.values(A.sitePanelCounts||{}).reduce((d,h)=>d+h,0)," panel"]}),m("div",{className:"small text-muted",children:[((u=A.siteIds)==null?void 0:u.length)||0," site"]})]}),m("td",{className:"py-3 px-4",children:[c("div",{className:"amount",children:n.formatCurrency(A.totalAmount)}),m("div",{className:"small text-muted d-lg-none",children:[n.formatCurrency(A.weeklyRatePerPanel),"/hafta"]}),m("div",{className:"small text-muted d-none d-lg-table-cell",children:[n.formatCurrency(A.weeklyRatePerPanel),"/hafta"]})]}),c("td",{className:"py-3 px-4 d-none d-lg-table-cell",children:c("span",{className:`badge ${o(A.status)} rounded-pill`,children:l(A.status)})}),c("td",{className:"py-3 px-4 text-end",children:m("div",{className:"d-inline-flex gap-1 flex-wrap justify-content-end",children:[c("button",{className:"btn btn-sm btn-outline-primary",title:"Grntle",onClick:()=>e.handleShowAgreement(A),children:c("i",{className:"bi bi-eye"})}),c("button",{className:"btn btn-sm btn-outline-secondary",title:"Anlama zeti (PDF)",onClick:()=>{n.generateAgreementPDF&&n.generateAgreementPDF(A)&&window.showAlert&&window.showAlert("Baarl","Anlama zeti PDF olarak indirildi.","success")},children:c("i",{className:"bi bi-file-earmark-text"})}),c("button",{className:"btn btn-sm btn-outline-danger",title:"Szleme PDF",onClick:()=>{if(n.generateContractPDF){const d=n.generateContractPDF(A);d&&window.sendAnalyticsEvent&&window.sendAnalyticsEvent("contract_pdf_generated",{agreementId:A.id}),d&&window.showAlert&&window.showAlert("Baarl","Szleme PDF'i baaryla oluturuldu ve indirildi.","success")}},children:c("i",{className:"bi bi-file-earmark-pdf"})}),a==="active"||a==="orders"?m(kr,{children:[c("button",{className:"btn btn-sm btn-outline-secondary",title:"Dzenle",onClick:()=>r.handleEditAgreement(A),children:c("i",{className:"bi bi-pencil"})}),c("button",{className:"btn btn-sm btn-outline-success",title:"Nakit deme Al",onClick:()=>e.handlePaymentAgreement(A),disabled:A.paymentReceived||A.creditPaymentReceived||A.status==="terminated",children:c("i",{className:"bi bi-cash"})}),c("button",{className:"btn btn-sm btn-outline-primary",title:"Kredi ile deme",onClick:()=>e.handleCreditPayment(A),disabled:A.paymentReceived||A.creditPaymentReceived||A.status==="terminated",children:c("i",{className:"bi bi-credit-card"})}),c("button",{className:"btn btn-sm btn-outline-warning",title:"Erken Sonlandr",onClick:()=>e.handleTerminateAgreement(A),disabled:A.status!=="active",children:c("i",{className:"bi bi-x-circle"})}),c("button",{className:"btn btn-sm btn-outline-danger",title:"Arivle",onClick:()=>e.handleArchiveAgreement(A.id),children:c("i",{className:"bi bi-archive"})}),c("button",{className:"btn btn-sm btn-outline-danger",title:"Kalc Sil",onClick:()=>e.handleDeleteAgreement(A.id),children:c("i",{className:"bi bi-trash"})})]}):c(kr,{children:c("button",{className:"btn btn-sm btn-outline-danger",title:"Arivle",onClick:()=>e.handleArchiveAgreement(A.id),children:c("i",{className:"bi bi-archive"})})})]})})]},A.id)})})]}),t.length===0&&m("div",{className:"text-center py-5",children:[c("div",{className:"mb-3",children:c("div",{className:"bg-light bg-opacity-50 rounded-circle d-flex align-items-center justify-content-center mx-auto",style:{width:"60px",height:"60px"},children:c("i",{className:`bi ${a==="active"?"bi-check-circle":a==="orders"?"bi-cart":"bi-clock-history"} text-muted fs-1`})})}),c("h6",{className:"text-muted mb-0",children:a==="active"?"Henz aktif anlama bulunmamaktadr":a==="orders"?"Henz sipari bulunmamaktadr":"Henz sresi bitmi veya sonlandrlm anlama bulunmamaktadr"}),a==="active"&&c("p",{className:"text-muted small mt-2",children:'Yeni anlama oluturmak iin "Yeni Anlama" butonuna tklayn'}),a==="orders"&&c("p",{className:"text-muted small mt-2",children:"Firmalar sipari oluturduunda burada grnecektir"})]})]})},i1e=({showModal:t,currentAgreement:e,uiHandlers:r,helpers:n,handleUploadPhoto:i})=>{if(!t||!e)return null;const a=l=>l?new Date(l).toLocaleDateString("tr-TR"):"",s=l=>{switch(l){case"active":return"bg-success";case"completed":return"bg-info";case"terminated":return"bg-warning";case"archived":return"bg-secondary";default:return"bg-secondary"}},o=l=>{switch(l){case"active":return"Aktif";case"completed":return"Tamamland";case"terminated":return"Erken Sonlandrld";case"archived":return"Arivlendi";default:return"Bilinmiyor"}};return c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:1050},children:c("div",{className:"modal-dialog modal-lg",children:m("div",{className:"modal-content agreement-modal-content",children:[m("div",{className:"modal-header bg-primary text-white rounded-top",children:[m("h5",{className:"modal-title d-flex align-items-center",children:[c("i",{className:"bi bi-file-earmark-text me-2"}),c("span",{className:"fw-bold",children:"Anlama Detaylar"})]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:r.handleCloseModal})]}),c("div",{className:"modal-body p-0",children:m("div",{className:"row g-0",children:[c("div",{className:"col-md-6 border-end",children:m("div",{className:"p-4",children:[m("div",{className:"card border-0 shadow-sm mb-4",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[c("i",{className:"bi bi-info-circle me-2"}),c("span",{className:"fw-semibold",children:"Temel Bilgiler"})]})}),m("div",{className:"card-body",children:[m("div",{className:"row mb-3",children:[m("div",{className:"col-5",children:[c("small",{className:"text-muted",children:"Firma"}),c("div",{className:"fw-medium",children:n.getCompanyName(e.companyId)})]}),m("div",{className:"col-4",children:[c("small",{className:"text-muted",children:"Durum"}),c("div",{children:c("span",{className:`badge ${s(e.status)} rounded-pill`,children:o(e.status)})})]}),m("div",{className:"col-3 text-end",children:[c("small",{className:"text-muted",children:"ID"}),m("div",{className:"fw-medium",children:["#",e.id]})]})]}),m("div",{className:"row mb-3",children:[m("div",{className:"col-6",children:[c("small",{className:"text-muted",children:"Balang Tarihi"}),c("div",{className:"fw-medium",children:a(e.startDate)})]}),m("div",{className:"col-6",children:[c("small",{className:"text-muted",children:"Biti Tarihi"}),c("div",{className:"fw-medium",children:a(e.endDate)})]})]}),m("div",{className:"row mb-3",children:[m("div",{className:"col-6",children:[c("small",{className:"text-muted",children:"Toplam Hafta"}),c("div",{className:"fw-medium",children:e.totalWeeks})]}),m("div",{className:"col-6",children:[c("small",{className:"text-muted",children:"Haftalk cret"}),c("div",{className:"fw-medium",children:n.formatCurrency(e.weeklyRatePerPanel)})]})]}),m("div",{className:"row mb-3",children:[m("div",{className:"col-6",children:[c("small",{className:"text-muted",children:"Toplam Tutar"}),c("div",{className:"fw-medium text-primary",children:n.formatCurrency(e.totalAmount)})]}),m("div",{className:"col-6",children:[c("small",{className:"text-muted",children:"deme Alnd"}),c("div",{className:"fw-medium",children:e.paymentReceived?m("span",{className:"text-success",children:[c("i",{className:"bi bi-check-circle-fill me-1"}),"Evet"]}):m("span",{className:"text-danger",children:[c("i",{className:"bi bi-x-circle-fill me-1"}),"Hayr"]})})]})]}),e.notes&&m("div",{className:"mb-0",children:[c("small",{className:"text-muted",children:"Notlar"}),c("div",{className:"fw-medium",children:e.notes})]})]})]}),m("div",{className:"card border-0 shadow-sm",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[c("i",{className:"bi bi-wallet2 me-2"}),c("span",{className:"fw-semibold",children:"deme Bilgileri"})]})}),m("div",{className:"card-body",children:[m("div",{className:"row mb-3",children:[m("div",{className:"col-6",children:[c("small",{className:"text-muted",children:"deme Tr"}),c("div",{className:"fw-medium",children:e.creditPaymentReceived?"Kredi ile deme":"Nakit deme"})]}),m("div",{className:"col-6",children:[c("small",{className:"text-muted",children:"deme Tarihi"}),c("div",{className:"fw-medium",children:e.paymentReceived||e.creditPaymentReceived?a(e.paymentDate||e.creditPaymentDate):"deme Alnmad"})]})]}),e.creditPaymentReceived&&m("div",{className:"alert alert-info mb-0",children:[c("i",{className:"bi bi-info-circle me-2"}),"Bu anlama kredi ile oluturuldu. deme firma kredisi zerinden yapld."]})]})]})]})}),c("div",{className:"col-md-6",children:m("div",{className:"p-4",children:[m("div",{className:"card border-0 shadow-sm mb-4",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[c("i",{className:"bi bi-building me-2"}),c("span",{className:"fw-semibold",children:"Siteler ve Paneller"})]})}),c("div",{className:"card-body",children:e.siteIds&&e.siteIds.map((l,A)=>{var h,f,p;const u=n.getSiteName(l),d=((h=e.sitePanelCounts)==null?void 0:h[l])||0;return m("div",{className:`mb-3 ${A<e.siteIds.length-1?"pb-3 border-bottom":""}`,children:[m("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[c("div",{className:"fw-medium",children:u}),m("span",{className:"badge bg-primary rounded-pill",children:[d," panel"]})]}),((f=e.siteBlockSelections)==null?void 0:f[l])&&m("div",{className:"small text-muted",children:[m("div",{className:"mb-1",children:[c("i",{className:"bi bi-grid me-1"}),"Bloklar: ",e.siteBlockSelections[l].join(", ")]}),((p=e.sitePanelSelections)==null?void 0:p[l])&&m("div",{children:[c("i",{className:"bi bi-layout-wtf me-1"}),"Paneller: ",Object.values(e.sitePanelSelections[l]).flat().join(", ")]})]})]},l)})})]}),m("div",{className:"card border-0 shadow-sm",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[c("i",{className:"bi bi-image me-2"}),c("span",{className:"fw-semibold",children:"Fotoraf"})]})}),m("div",{className:"card-body text-center",children:[e.photoUrl?m(kr,{children:[c("img",{src:e.photoUrl,alt:"Anlama Fotoraf",className:"img-fluid rounded mb-3",style:{maxHeight:"200px"}}),m("div",{className:"small text-muted mb-3",children:["Yklendi: ",a(e.photoUploadedAt)]})]}):m("div",{className:"py-4",children:[c("i",{className:"bi bi-image text-muted fs-1 mb-3 d-block"}),c("p",{className:"text-muted mb-0",children:"Fotoraf yklenmemi"})]}),m("button",{className:"btn btn-agreement-outline btn-sm",onClick:()=>i(e),children:[c("i",{className:"bi bi-cloud-upload me-1"}),e.photoUrl?"Fotoraf Deitir":"Fotoraf Ykle"]})]})]})]})})]})}),c("div",{className:"modal-footer bg-light",children:c("button",{type:"button",className:"btn btn-agreement-outline",onClick:r.handleCloseModal,children:"Kapat"})})]})})})},a1e=({showPhotoModal:t,currentAgreement:e,setShowPhotoModal:r,helpers:n,photoData:i,setPhotoData:a,handlePhotoSave:s,handlePhotoChange:o})=>t?c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:1050},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content agreement-modal-content",children:[m("div",{className:"modal-header bg-primary text-white rounded-top",children:[m("h5",{className:"modal-title d-flex align-items-center",children:[c("i",{className:"bi bi-image me-2"}),c("span",{className:"fw-bold",children:"Fotoraf Ykle"})]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>r(!1)})]}),m("div",{className:"modal-body p-4",children:[m("div",{className:"text-center mb-4",children:[c("div",{className:"bg-light rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"80px",height:"80px"},children:c("i",{className:"bi bi-cloud-upload text-primary fs-1"})}),c("h6",{className:"fw-semibold",children:n.getCompanyName(e==null?void 0:e.companyId)}),m("p",{className:"text-muted small mb-0",children:["Anlama #",e==null?void 0:e.id]})]}),m("div",{className:"mb-4",children:[c("label",{className:"form-label fw-medium mb-2",children:"Fotoraf Se"}),c("input",{type:"file",className:"form-control agreement-form-control",accept:"image/*",onChange:o}),c("div",{className:"form-text",children:"Maksimum dosya boyutu: 5MB"})]}),i.previewUrl&&m("div",{className:"mb-4",children:[c("label",{className:"form-label fw-medium mb-2",children:"nizleme"}),c("div",{className:"border rounded p-2",children:c("img",{src:i.previewUrl,alt:"Preview",className:"img-fluid rounded",style:{maxHeight:"200px"}})})]})]}),c("div",{className:"modal-footer bg-light rounded-bottom p-4",children:m("div",{className:"d-flex justify-content-end w-100 gap-2",children:[m("button",{type:"button",className:"btn btn-agreement-outline px-4 py-2",onClick:()=>r(!1),children:[c("i",{className:"bi bi-x-lg me-1"}),"ptal"]}),m("button",{type:"button",className:"btn btn-agreement-primary px-4 py-2",onClick:s,disabled:!i.previewUrl,children:[c("i",{className:"bi bi-save me-1"}),"Kaydet"]})]})})]})})}):null,s1e=({formData:t,sitePanelCounts:e,helpers:r})=>m("div",{className:"card border-0 shadow-sm",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[c("i",{className:"bi bi-calculator me-2"}),c("span",{className:"fw-semibold",children:"zet"})]})}),c("div",{className:"card-body",children:m("div",{className:"row g-3",children:[c("div",{className:"col-md-6",children:m("div",{className:"border rounded-3 p-3 h-100",children:[c("p",{className:"mb-1 text-muted small",children:"Toplam Hafta"}),c("p",{className:"text-primary fw-bold fs-4 mb-0",children:r.calculateTotalWeeksFromRanges?r.calculateTotalWeeksFromRanges(t.dateRanges||[]):r.calculateTotalWeeks(t.startDate,t.endDate)})]})}),c("div",{className:"col-md-6",children:m("div",{className:"border rounded-3 p-3 h-100",children:[c("p",{className:"mb-1 text-muted small",children:"Toplam Panel"}),c("p",{className:"text-primary fw-bold fs-4 mb-0",children:Object.values(e).reduce((n,i)=>n+i,0)})]})}),c("div",{className:"col-md-6",children:m("div",{className:"border rounded-3 p-3 h-100",children:[c("p",{className:"mb-1 text-muted small",children:"Haftalk cret"}),c("p",{className:"text-primary fw-bold fs-4 mb-0",children:r.formatCurrency(t.weeklyRatePerPanel)})]})}),c("div",{className:"col-md-6",children:m("div",{className:"border rounded-3 p-3 h-100 bg-primary bg-opacity-10 border-primary",children:[c("p",{className:"mb-1 text-muted small",children:"Toplam Tutar"}),(()=>{const n=parseFloat(t.totalAmount),i=n>0?n:r.calculateTotalAmount(e,t.weeklyRatePerPanel,t.dateRanges);return c("p",{className:"text-primary fw-bold fs-3 mb-0",children:r.formatCurrency(i||0)})})()]})})]})})]}),o1e=(t,e,r)=>`${t}${e}${r}`,l1e=({showAddForm:t,currentAgreement:e,uiHandlers:r,handlers:n,helpers:i,formData:a,setFormData:s,sites:o,selectedSites:l,sitePanelCounts:A,siteBlockSelections:u,sitePanelSelections:d,companies:h,agreements:f,setShowAddForm:p,setAgreements:g,setSelectedSites:v,setSitePanelCounts:C,setSelectedWeeks:I,setSiteBlockSelections:F,setSitePanelSelections:E})=>{if(!t)return null;const R=a.dateRanges||[{startDate:"",endDate:""}],L=(o||[]).filter(k=>k.siteType!=="business_center"),N=(o||[]).filter(k=>k.siteType==="business_center"),P=(L||[]).reduce((k,y)=>{const S=y.neighborhood||"Dier";return k[S]||(k[S]=[]),k[S].push(y),k},{}),x=Object.keys(P||{}).sort();return c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:1050},children:c("div",{className:"modal-dialog modal-xl",children:m("div",{className:"modal-content agreement-modal-content",children:[m("div",{className:"modal-header bg-primary text-white rounded-top",children:[m("h5",{className:"modal-title d-flex align-items-center",children:[c("i",{className:"bi bi-file-earmark-text me-2"}),c("span",{className:"fw-bold",children:e?"Anlama Dzenle":"Yeni Anlama"})]}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:r.handleCloseAddForm})]}),c("div",{className:"modal-body p-0",style:{maxHeight:"80vh",overflowY:"auto"},children:m("form",{onSubmit:k=>n.handleFormSubmit(k,e,f,g,p,s,v,C,I,F,E,a,l,d,A,i),children:[m("div",{className:"p-4",children:[m("div",{className:"card border-0 shadow-sm mb-4",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[c("span",{className:"badge bg-primary me-2",children:"1"}),c("i",{className:"bi bi-building me-2"}),c("span",{className:"fw-semibold",children:"Firma Seimi"})]})}),c("div",{className:"card-body",children:m("div",{className:"mb-0",children:[m("label",{htmlFor:"companyId",className:"form-label fw-medium mb-2",children:["Firma ",c("span",{className:"text-danger",children:"*"})]}),m("select",{id:"companyId",name:"companyId",value:a.companyId,onChange:r.handleFormChange,className:"form-select agreement-form-control py-2",required:!0,children:[c("option",{value:"",children:"Firma sein"}),(h||[]).map(k=>c("option",{value:k.id,children:k.name},k.id))]})]})})]}),m("div",{className:"card border-0 shadow-sm mb-4",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[c("span",{className:"badge bg-primary me-2",children:"2"}),c("i",{className:"bi bi-calendar-range me-2"}),c("span",{className:"fw-semibold",children:"Tarih Aralklar"})]}),m("button",{type:"button",className:"btn btn-sm btn-success",onClick:r.handleAddDateRange,title:"Yeni tarih aral ekle",children:[c("i",{className:"bi bi-plus-circle me-1"}),"Tarih Aral Ekle"]})]})}),m("div",{className:"card-body",children:[c("small",{className:"text-muted d-block mb-3",children:"Birden fazla tarih aral ekleyebilirsiniz. Her tarih aral iin ayr site/blok/panel seimi yaplacaktr."}),R.map((k,y)=>c("div",{className:"card border mb-3",children:m("div",{className:"card-body p-3",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[m("span",{className:"badge bg-primary",children:["Aralk ",y+1]}),R.length>1&&c("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>r.handleRemoveDateRange(y),title:"Bu tarih araln kaldr",children:c("i",{className:"bi bi-trash"})})]}),m("div",{className:"row g-2",children:[m("div",{className:"col-md-6",children:[c("label",{className:"form-label small mb-1",children:"Balang Tarihi"}),c("input",{type:"date",value:k.startDate||"",onChange:S=>r.handleDateRangeChange(y,"startDate",S.target.value),className:"form-control form-control-sm",required:!0})]}),m("div",{className:"col-md-6",children:[c("label",{className:"form-label small mb-1",children:"Biti Tarihi"}),c("input",{type:"date",value:k.endDate||"",onChange:S=>r.handleDateRangeChange(y,"endDate",S.target.value),className:"form-control form-control-sm",required:!0})]})]})]})},y))]})]}),R.map((k,y)=>{const S=k.startDate&&k.endDate;return m("div",{className:"card border-0 shadow-sm mb-4",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[m("span",{className:"badge bg-primary me-2",children:["3.",y+1]}),c("i",{className:"bi bi-grid me-2"}),m("span",{className:"fw-semibold",children:["Site/Blok/Panel Seimi - Aralk ",y+1]}),S&&m("small",{className:"text-muted ms-2",children:["(",new Date(k.startDate).toLocaleDateString("tr-TR")," - ",new Date(k.endDate).toLocaleDateString("tr-TR"),")"]})]})}),c("div",{className:"card-body",children:S?m(kr,{children:[m("div",{className:"mb-4",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[c("label",{className:"form-label fw-medium mb-0",children:"Site Seimi"}),c("div",{className:"d-flex gap-2",children:m("button",{type:"button",className:"btn btn-sm btn-success",onClick:()=>r.handleSelectAllSitesForRange(y,o,d,[k]),title:"Tm siteleri se",children:[c("i",{className:"bi bi-check-all me-1"}),"Tmn Se"]})})]}),c("div",{className:"accordion",id:`sites-accordion-${y}`,children:(x||[]).map((_,M)=>{const K=(P[_]||[]).filter(ue=>ue!=null),z=r.getSelectedSitesForRange&&r.getSelectedSitesForRange(y,d)||[],ae=K.length>0&&K.every(ue=>ue&&ue.id&&z.includes(ue.id)),te=K.filter(ue=>ue&&ue.id&&z.includes(ue.id)).length,G=`neighborhood-${y}-${M}`;return m("div",{className:"accordion-item",children:[c("h2",{className:"accordion-header",id:`heading-${G}`,children:c("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#${G}`,"aria-expanded":"false","aria-controls":G,children:m("div",{className:"d-flex justify-content-between align-items-center w-100 me-3",children:[m("span",{className:"fw-semibold text-primary",children:[c("i",{className:"bi bi-geo-alt-fill me-2"}),_]}),m("div",{className:"d-flex align-items-center gap-2",children:[m("span",{className:"badge bg-primary",children:[te," / ",K.length]}),c("button",{type:"button",className:`btn btn-sm ${ae?"btn-outline-danger":"btn-outline-primary"}`,onClick:ue=>{ue.stopPropagation(),r.handleSelectNeighborhoodForRange(y,_,K,d)},title:ae?"Mahalledeki tm siteleri kaldr":"Mahalledeki tm siteleri se",children:c("i",{className:`bi ${ae?"bi-x-square":"bi-check-square"}`})})]})]})})}),c("div",{id:G,className:"accordion-collapse collapse","aria-labelledby":`heading-${G}`,"data-bs-parent":`#sites-accordion-${y}`,children:c("div",{className:"accordion-body",children:c("div",{className:"row g-3",children:(K||[]).map(ue=>{const de=z.includes(ue.id),T=i&&i.isSiteFullyBooked&&S?i.isSiteFullyBooked(ue.id,k.startDate,k.endDate,[k]):!1;return c("div",{className:"col-md-6 col-sm-12",children:m("div",{className:`form-check-card h-100 ${de?"border-primary":T?"border-warning bg-warning bg-opacity-10":""}`,children:[c("input",{type:"checkbox",id:`site-${ue.id}-range-${y}`,checked:de,onChange:()=>r.handleSiteSelectionForRange(y,ue.id,d,[k]),className:"form-check-input",disabled:T&&!de}),m("label",{htmlFor:`site-${ue.id}-range-${y}`,className:`form-check-label h-100 d-flex align-items-center p-3 ${T&&!de?"text-muted":""}`,children:[c("div",{className:"me-3",children:c("div",{className:`${T&&!de?"bg-warning":"bg-primary"} bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center`,style:{width:"40px",height:"40px"},children:c("i",{className:`bi bi-building ${T&&!de?"text-warning":"text-primary"}`})})}),m("div",{className:"flex-grow-1",children:[c("span",{className:"fw-medium",children:ue.name}),m("div",{className:"small text-muted mt-1",children:[c("i",{className:"bi bi-grid me-1"}),ue.blocks," Blok, ",ue.panels," Panel",T&&m("span",{className:"badge bg-warning text-dark ms-2",children:[c("i",{className:"bi bi-exclamation-triangle me-1"}),"Tm Paneller Dolu"]})]})]})]})]})},ue.id)})})})})]},_)})}),N.length>0&&c("div",{className:"mt-4 pt-4 border-top",children:c("div",{className:"accordion",id:`business-centers-accordion-${y}`,children:m("div",{className:"accordion-item",children:[c("h2",{className:"accordion-header",id:`heading-business-centers-${y}`,children:c("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#business-centers-${y}`,"aria-expanded":"false","aria-controls":`business-centers-${y}`,children:m("div",{className:"d-flex justify-content-between align-items-center w-100 me-3",children:[m("span",{className:"fw-semibold text-warning",children:[c("i",{className:"bi bi-briefcase-fill me-2"})," Merkezleri"]}),c("span",{className:"badge bg-warning text-dark",children:N.length})]})})}),c("div",{id:`business-centers-${y}`,className:"accordion-collapse collapse","aria-labelledby":`heading-business-centers-${y}`,"data-bs-parent":`#business-centers-accordion-${y}`,children:c("div",{className:"accordion-body",children:c("div",{className:"row g-3",children:(N||[]).map(_=>{const K=(r.getSelectedSitesForRange&&r.getSelectedSitesForRange(y,d)||[]).includes(_.id),z=i&&i.isSiteFullyBooked&&S?i.isSiteFullyBooked(_.id,k.startDate,k.endDate,[k]):!1;return c("div",{className:"col-md-6 col-sm-12",children:m("div",{className:`form-check-card h-100 border-warning ${K?"border-primary":z?"bg-warning bg-opacity-10":""}`,children:[c("input",{type:"checkbox",id:`site-${_.id}-range-${y}`,checked:K,onChange:()=>r.handleSiteSelectionForRange(y,_.id,d,[k]),className:"form-check-input",disabled:z&&!K}),m("label",{htmlFor:`site-${_.id}-range-${y}`,className:`form-check-label h-100 d-flex align-items-center p-3 ${z&&!K?"text-muted":""}`,children:[c("div",{className:"me-3",children:c("div",{className:"bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:c("i",{className:"bi bi-briefcase text-warning"})})}),m("div",{className:"flex-grow-1",children:[c("span",{className:"fw-medium",children:_.name}),z&&m("span",{className:"badge bg-warning text-dark ms-2",children:[c("i",{className:"bi bi-exclamation-triangle me-1"}),"Tm Paneller Dolu"]}),m("div",{className:"small text-muted mt-1",children:[c("i",{className:"bi bi-grid me-1"}),parseInt(_.manualPanels)||parseInt(_.panels)||0," Panel"]})]})]})]})},_.id)})})})})]})})})]}),(()=>{const _=r.getSelectedSitesForRange&&r.getSelectedSitesForRange(y,d)||[];if(!_||_.length===0)return m("div",{className:"alert alert-info mb-0",children:[c("i",{className:"bi bi-info-circle me-2"}),"Bu tarih aral iin site sein."]});let M=0,K=0;return(_||[]).forEach(z=>{const ae=(o||[]).find(ue=>ue.id===z);if(!ae)return;const te=r.getSelectedBlocksForRange&&r.getSelectedBlocksForRange(y,z,u)||[],G=ae.siteType==="business_center"?["A"]:i.generateBlockLabels(ae.blocks)||[];M+=te.length,K+=G.length}),m("div",{children:[m("div",{className:"mb-3 d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[m("label",{className:"form-label fw-medium mb-0",children:["Blok ve Panel Seimi",m("span",{className:"badge bg-primary ms-2",children:[M," / ",K," Blok Seili"]})]}),m("div",{className:"d-flex gap-2",children:[m("button",{type:"button",className:"btn btn-sm btn-success",onClick:()=>r.handleSelectAllBlocksForAllSitesInRange(y,_,o,u,d),title:"Seili tm sitelerin tm bloklarn se",children:[c("i",{className:"bi bi-check-square me-1"}),"Tm Bloklar Se"]}),m("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>r.handleSelectHalfForAllSitesInRange(y,_,o,u,d,[k]),title:"Seili tm sitelerin tm bloklarnn panellerinin yarsn se",children:[c("i",{className:"bi bi-check2-all me-1"}),"Tmnn Yarsn Se"]})]})]}),c("div",{className:"accordion",id:`blocks-accordion-${y}`,children:(_||[]).map(z=>{const ae=(o||[]).find(de=>de.id===z);if(!ae)return null;const te=ae.siteType==="business_center"?["A"]:i.generateBlockLabels(ae.blocks)||[],G=r.getSelectedBlocksForRange&&r.getSelectedBlocksForRange(y,z,u)||[],ue=`site-blocks-${y}-${z}`;return m("div",{className:"accordion-item",children:[c("h2",{className:"accordion-header",id:`heading-${ue}`,children:c("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#${ue}`,"aria-expanded":"false","aria-controls":ue,children:m("div",{className:"d-flex justify-content-between align-items-center w-100 me-3",children:[m("span",{className:"fw-semibold text-primary",children:[c("i",{className:"bi bi-geo-alt me-2"}),ae.name]}),m("span",{className:"badge bg-primary",children:[G.length," / ",te.length]})]})})}),c("div",{id:ue,className:"accordion-collapse collapse","aria-labelledby":`heading-${ue}`,"data-bs-parent":`#blocks-accordion-${y}`,children:c("div",{className:"accordion-body",children:m("div",{className:"mb-4",children:[c("label",{className:"form-label fw-medium mb-2",children:ae.siteType==="business_center"?" Merkezi":"Bloklar"}),c("div",{className:"row g-2 mb-3",children:ae.siteType==="business_center"?(()=>{const de=`${z}-block-A`,T=G.includes(de);return c("div",{className:"col-md-3 col-sm-4 col-6",children:c("div",{className:`card h-100 border-2 ${T?"border-primary bg-primary bg-opacity-10":"border-light"}`,children:c("div",{className:"card-body p-2",children:m("div",{className:"form-check text-center",children:[c("input",{type:"checkbox",id:`${z}-block-A-range-${y}`,checked:T,onChange:()=>r.handleBlockSelectionForRange(y,z,de,u,d),className:"form-check-input"}),c("label",{htmlFor:`${z}-block-A-range-${y}`,className:"form-check-label fw-bold",children:" Merkezi"})]})})})})})():(te||[]).map(de=>{const T=`${z}-block-${de}`,O=G.includes(T);return c("div",{className:"col-md-3 col-sm-4 col-6",children:c("div",{className:`card h-100 border-2 ${O?"border-primary bg-primary bg-opacity-10":"border-light"}`,children:c("div",{className:"card-body p-2",children:m("div",{className:"form-check text-center",children:[c("input",{type:"checkbox",id:`${T}-range-${y}`,checked:O,onChange:()=>r.handleBlockSelectionForRange(y,z,T,u,d),className:"form-check-input"}),m("label",{htmlFor:`${T}-range-${y}`,className:"form-check-label fw-bold",children:["Blok ",de]})]})})})},T)})}),(()=>{const de=`range-${y}`,T=ae.siteType==="business_center"?G.includes(`${z}-block-A`)?[`${z}-block-A`]:[]:G.filter(O=>O&&O.startsWith(`${z}-block-`));return T.length===0?null:c("div",{className:"accordion mt-3",id:`accordion-${y}-${z}`,children:T.map((O,V)=>{const Q=O.split("-")[2],X=d[z]&&d[z][O]&&d[z][O][de]||[],ie=`panel-accordion-${y}-${z}-${O}`,ee=ae.siteType==="business_center"?parseInt(ae.manualPanels)||parseInt(ae.panels)||0:(parseInt(ae.elevatorsPerBlock)||0)*2;return m("div",{className:"accordion-item",children:[c("h2",{className:"accordion-header",id:`heading-${ie}`,children:c("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#${ie}`,"aria-expanded":"false","aria-controls":ie,children:m("div",{className:"d-flex justify-content-between align-items-center w-100 me-3",children:[m("span",{className:"fw-semibold text-primary",children:[c("i",{className:"bi bi-grid-3x3-gap me-2"}),ae.siteType==="business_center"?" Merkezi Panelleri":`Blok ${Q} Panelleri`]}),m("span",{className:"badge bg-primary ms-2",children:[X.length," / ",ee]})]})})}),c("div",{id:ie,className:"accordion-collapse collapse","aria-labelledby":`heading-${ie}`,"data-bs-parent":`#accordion-${y}-${z}`,children:m("div",{className:"accordion-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-3 p-2 bg-light rounded",children:[c("span",{className:"small text-muted",children:"Panel seimi iin aadaki panelleri tklayn"}),m("button",{type:"button",className:"btn btn-primary btn-sm fw-bold",onClick:()=>{r.handleSelectHalfForDateRange(z,O,y,d,ee,[k])},title:"Panellerin yarsn otomatik se (tek saylar nce, sonra ift saylar)",style:{minWidth:"120px"},children:[c("i",{className:"bi bi-check2-square me-1"}),"Yarsn Se"]})]}),c("div",{className:"row g-2",children:Array.from({length:ee},(Z,re)=>{const ce=re+1,Y=`panel-${ce}`,ge=X.includes(Y),q=o1e(z,Q,ce),W=i.isPanelAvailable(z,O,Y,k.startDate,k.endDate,[k]),xe=W?null:i.getPanelUsageInfo(z,O,Y,k.startDate,k.endDate);return c("div",{className:"col-4 col-sm-3 col-md-2",children:c("div",{className:`card panel-card h-100 border-2 ${W?ge?"border-primary bg-primary bg-opacity-10":"border-light":"border-warning bg-warning bg-opacity-10"}`,style:{cursor:W?"pointer":"not-allowed",transition:"all 0.2s",position:"relative"},onClick:()=>{W&&r.handlePanelSelectionForDateRange(z,O,Y,y,d)},children:m("div",{className:"card-body p-2 d-flex flex-column align-items-center",children:[c("div",{className:"form-check mb-1",children:c("input",{type:"checkbox",id:`${z}-${O}-${Y}-${y}`,checked:ge,onChange:()=>{W&&r.handlePanelSelectionForDateRange(z,O,Y,y,d)},className:"form-check-input",onClick:ye=>ye.stopPropagation(),disabled:!W})}),m("div",{className:"text-center",children:[c("div",{className:"fw-bold text-truncate",style:{fontSize:"10px",maxWidth:"80px"},children:q}),m("div",{className:"small text-muted mt-1",style:{fontSize:"9px"},children:["Panel ",ce]}),!W&&xe&&m("div",{className:"small text-muted mt-1",style:{fontSize:"8px"},children:[c("i",{className:"bi bi-lock-fill me-1"}),xe.companyName]})]})]})})},Y)})})]})})]},O)})})})()]})})})]},z)})})]},`blocks-range-${y}`)})()]}):m("div",{className:"alert alert-warning mb-0",children:[c("i",{className:"bi bi-exclamation-triangle me-2"}),"Ltfen nce bu tarih aral iin balang ve biti tarihlerini girin."]})})]},y)}),m("div",{className:"card border-0 shadow-sm mb-4",children:[c("div",{className:"card-header bg-light border-0 rounded-top",children:m("h6",{className:"mb-0 d-flex align-items-center text-primary",children:[c("span",{className:"badge bg-primary me-2",children:"4"}),c("i",{className:"bi bi-cash-stack me-2"}),c("span",{className:"fw-semibold",children:"Mali Veriler"})]})}),m("div",{className:"card-body",children:[m("div",{className:"mb-4",children:[m("label",{htmlFor:"weeklyRatePerPanel",className:"form-label fw-medium mb-2",children:["Haftalk Panel creti ",c("span",{className:"text-danger",children:"*"})]}),m("div",{className:"input-group",children:[c("span",{className:"input-group-text bg-light border-end-0",children:""}),c("input",{type:"number",id:"weeklyRatePerPanel",name:"weeklyRatePerPanel",value:a.weeklyRatePerPanel,onChange:r.handleFormChange,className:"form-control agreement-form-control border-start-0 py-2",required:!0,min:"0",step:"0.01",placeholder:"0.00"})]}),c("small",{className:"text-muted",children:"1 panelin 1 haftalk creti. Alternatif olarak aaya toplam tutar yazabilirsiniz."})]}),m("div",{className:"mb-4",children:[c("label",{htmlFor:"totalAmount",className:"form-label fw-medium mb-2",children:"Toplam Anlama Bedeli (stee Bal)"}),m("div",{className:"input-group",children:[c("span",{className:"input-group-text bg-light border-end-0",children:""}),c("input",{type:"number",id:"totalAmount",name:"totalAmount",value:a.totalAmount||"",onChange:r.handleFormChange,className:"form-control agreement-form-control border-start-0 py-2",min:"0",step:"0.01",placeholder:"0.00"})]}),c("small",{className:"text-muted",children:"Mteriyle anlalan toplam tutar buraya yazarsanz, seilen panel says ve hafta sresine gre haftalk panel creti otomatik hesaplanr."})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"notes",className:"form-label fw-medium mb-2",children:"Notlar"}),c("textarea",{id:"notes",name:"notes",value:a.notes,onChange:r.handleFormChange,className:"form-control agreement-form-control py-2",rows:"3",placeholder:"Ek notlar..."})]})]})]}),c(s1e,{formData:a,sitePanelCounts:A,helpers:i})]}),c("div",{className:"modal-footer bg-light rounded-bottom p-4",children:m("div",{className:"d-flex justify-content-end w-100",children:[m("button",{type:"button",className:"btn btn-agreement-outline px-4 py-2 me-3",onClick:r.handleCloseAddForm,children:[c("i",{className:"bi bi-x-lg me-1"}),"ptal"]}),m("button",{type:"submit",className:"btn btn-agreement-primary px-4 py-2",disabled:!a.companyId||!a.weeklyRatePerPanel||!a.dateRanges||a.dateRanges.length===0||a.dateRanges.some(k=>!k.startDate||!k.endDate),children:[c("i",{className:"bi bi-save me-1"}),e?"Gncelle":"Kaydet"]})]})})]})})]})})})},c1e=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState(!0),l=re=>{if(!Array.isArray(re))return console.warn("removeDuplicateAgreements: agreementsList is not an array",re),[];const ce=new Set,Y=[];for(const ge of re){if(!ge)continue;let q=null;if(ge._docId?q=`docId:${String(ge._docId)}`:ge.id&&(q=`id:${String(ge.id)}`),!q){console.warn("Agreement has no _docId or id:",ge);continue}if(ce.has(q)){console.log("Duplicate agreement found:",q);continue}ce.add(q),Y.push(ge)}return Y},A=re=>{const ce=l(Array.isArray(re)?re:[]);e(ce)},[u,d]=D.useState(!1),[h,f]=D.useState(!1),[p,g]=D.useState(null),[v,C]=D.useState([]),[I,F]=D.useState({}),[E,R]=D.useState([]),[L,N]=D.useState({}),[P,x]=D.useState({}),[k,y]=D.useState(!1),[S,_]=D.useState({file:null,previewUrl:null}),[M,K]=D.useState("active"),[z,ae]=D.useState({companyId:"",startDate:"",endDate:"",dateRanges:[{startDate:"",endDate:""}],weeklyRatePerPanel:"",totalAmount:"",notes:""});D.useState({show:!1,title:"",message:"",type:"info"}),D.useEffect(()=>{typeof hl!="function"&&console.error("createTransaction is not a function or is undefined"),typeof Xm!="function"&&console.error("updateAgreement is not a function or is undefined"),typeof SA!="function"&&console.error("updateSite is not a function or is undefined"),typeof Un!="function"&&console.error("createLog is not a function or is undefined"),typeof window.showAlert!="function"&&console.warn("window.showAlert is not available, custom alerts may not work"),typeof window.showConfirm!="function"&&console.warn("window.showConfirm is not available, custom confirms may not work")},[]);const te=D.useMemo(()=>r1e({companies:i,sites:r,agreements:t,sitePanelSelections:P,selectedWeeks:E,formData:z}),[i,r,t,P,E,z]),G=D.useRef(!1),ue=async()=>{if(t.length===0){await window.showAlert("Bilgi","Silinecek anlama bulunmamaktadr.","info");return}if(await window.showConfirm("Tm Anlamalar Sil",`Tm ${t.length} anlamay arivlemek istediinize emin misiniz? Bu ilem geri alnamaz.`,"warning"))try{let ce=0,Y=0;const ge=(t||[]).map(async xe=>{try{const ye=xe._docId||xe.id;if(!ye)return Y++,console.error("Agreement has no ID or _docId:",xe),{success:!1,agreementId:null,error:"Agreement has no ID"};const Ue=await ck(ye);return Ue&&Ue.success?(ce++,await Un({user:"Admin",action:`Anlama arivlendi: ${te.getCompanyName(xe.companyId)} (${ye})`}),{success:!0,agreementId:ye}):(Y++,console.error("Failed to archive agreement:",ye,Ue),{success:!1,agreementId:ye,error:(Ue==null?void 0:Ue.error)||"Unknown error"})}catch(ye){return console.error("Error archiving agreement:",xe.id||xe._docId,ye),Y++,{success:!1,agreementId:xe._docId||xe.id,error:ye.message}}});await Promise.all(ge);const q=await Sa(),W=l(q);A(W),await window.showAlert("lem Tamamland",`${ce} anlama baaryla arivlendi. ${Y} anlama arivlenirken hata olutu.`,"info")}catch(ce){console.error("Error deleting all agreements:",ce),await window.showAlert("Hata","Anlamalar arivlenirken bir hata olutu: "+ce.message,"error")}},de=e1e({agreements:t,setAgreements:A,sites:r,setSites:n,companies:i,setCompanies:a,formData:z,setFormData:ae,selectedSites:v,setSelectedSites:C,sitePanelCounts:I,setSitePanelCounts:F,selectedWeeks:E,setSelectedWeeks:R,siteBlockSelections:L,setSiteBlockSelections:N,sitePanelSelections:P,setSitePanelSelections:x,getCompanyName:te.getCompanyName,getCompany:te.getCompany,getCompanyCreditInfo:te.getCompanyCreditInfo,formatCurrency:te.formatCurrency,dateRangesOverlap:te.dateRangesOverlap,getCurrentDateRange:te.getCurrentDateRange,isPanelAvailable:te.isPanelAvailable,updateSitePanelCount:te.updateSitePanelCount,createTransaction:hl,createAgreement:GD,updateAgreement:Xm,updateSite:SA,updateCompany:qm,createUser:qD,updateUser:XD,getUsers:B1,createLog:Un,setShowModal:d,setCurrentAgreement:g,archiveAgreement:ck,getAgreements:Sa}),T=t1e({setShowModal:d,setCurrentAgreement:g,setShowAddForm:f,setFormData:ae,setSelectedSites:C,setSitePanelCounts:F,setSelectedWeeks:R,setSiteBlockSelections:N,setSitePanelSelections:x,showAlertModal:de.showAlertModal,updateSitePanelCount:te.updateSitePanelCount,companies:i,sites:r,sitePanelCounts:I,siteBlockSelections:L,helpers:te,formData:z});D.useEffect(()=>{if(G.current)return;(async()=>{try{G.current=!0,o(!0),console.log("Starting to fetch data...");const[Y,ge,q]=await Promise.all([Sa(),Yi(),Xa()]);console.log("Fetched agreements data:",Y),console.log("Agreements count:",(Y==null?void 0:Y.length)||0),console.log("Agreements data type:",Array.isArray(Y)?"array":typeof Y),Y&&Y.length>0&&console.log("First agreement sample:",Y[0]);const W=ge.map(fe=>({...fe,pendingPayments:fe.pendingPayments||[],hasPendingPayment:fe.pendingPayments&&fe.pendingPayments.length>0||!1})),xe=l(Y||[]);console.log("Unique agreements after filtering:",xe.length);const ye=W.filter((fe,Oe,Re)=>Oe===Re.findIndex(He=>He.id===fe.id&&He._docId===fe._docId||He.id&&fe.id&&He.id===fe.id||He._docId&&fe._docId&&He._docId===fe._docId)),Ue=new Set,Me=new Set,$e=q.filter(fe=>{if(!fe)return!1;if(fe._docId){const Oe=String(fe._docId);return Me.has(Oe)?!1:(Me.add(Oe),!0)}if(fe.id){const Oe=String(fe.id);return Ue.has(Oe)?!1:(Ue.add(Oe),!0)}return!1});console.log("Setting agreements:",xe.length),A(xe),n(ye),a($e),console.log("Data fetch completed. Agreements state will be updated.")}catch(Y){console.error("Error fetching data:",Y),G.current=!1}finally{o(!1)}})();const ce=setInterval(()=>{de&&typeof de.checkExpiredAgreements=="function"&&de.checkExpiredAgreements()},5*60*1e3);return()=>{clearInterval(ce)}},[]),D.useEffect(()=>{if(v.length===0)return;const re=setTimeout(()=>{v.forEach(ce=>{te&&typeof te.updateSitePanelCount=="function"&&te.updateSitePanelCount(ce,P,F)})},100);return()=>clearTimeout(re)},[P,v]);const O=re=>{g(re),_({file:null,previewUrl:re.photoUrl||null}),y(!0)},V=re=>{const ce=re.target.files[0];if(ce){if(!ce.type.startsWith("image/")){window.showAlert("Hata","Ltfen sadece resim dosyas sein.","error");return}if(ce.size>5*1024*1024){window.showAlert("Hata","Dosya boyutu 5MB'dan byk olamaz.","error");return}const Y=URL.createObjectURL(ce);_({file:ce,previewUrl:Y})}},Q=re=>new Promise((ce,Y)=>{const ge=new FileReader;ge.readAsDataURL(re),ge.onload=()=>ce(ge.result),ge.onerror=q=>Y(q)}),X=async()=>{if(!p||!S.file&&!S.previewUrl){window.showAlert("Hata","Ltfen bir resim sein.","error");return}try{let re=S.previewUrl;S.file&&(re=await Q(S.file));const ce={...p,photoUrl:re,photoUploadedAt:new Date().toISOString()},Y=await Xm(p.id,ce);if(Y)A(t.map(ge=>ge.id===p.id?Y:ge)),p.id===(p==null?void 0:p.id)&&g(Y),y(!1),window.showAlert("Baarl","Fotoraf baaryla kaydedildi.","success");else throw new Error("Failed to save agreement")}catch(re){console.error("Error saving photo:",re),window.showAlert("Hata","Fotoraf kaydedilirken bir hata olutu.","error")}},ie=()=>{const re=new Date;return re.setHours(0,0,0,0),M==="orders"?t.filter(ge=>ge&&(ge.isOrder===!0||ge.status==="pending")).sort((ge,q)=>{const W=(typeof ge.id=="string",ge.id),xe=(typeof q.id=="string",q.id);return typeof W=="string"&&typeof xe=="string"?xe.localeCompare(W):xe-W}):t.filter(ge=>{if(!ge)return!1;const q=ge.status||"active";if(q==="archived"||!ge.endDate)return!1;const W=new Date(ge.endDate);if(W.setHours(0,0,0,0),isNaN(W.getTime()))return!1;const xe=W<re,ye=!xe;return M==="active"?ye:xe||q==="expired"||q==="terminated"||q==="completed"}).filter((ge,q,W)=>q===W.findIndex(xe=>xe.id&&ge.id&&String(xe.id)===String(ge.id)||xe._docId&&ge._docId&&String(xe._docId)===String(ge._docId)||xe.id&&ge.id&&xe.id===ge.id||xe._docId&&ge._docId&&xe._docId===ge._docId)).sort((ge,q)=>{const W=(typeof ge.id=="string",ge.id),xe=(typeof q.id=="string",q.id);return typeof W=="string"&&typeof xe=="string"?xe.localeCompare(W):xe-W})},ee=()=>{const re=ie(),ce=re.reduce((ye,Ue)=>ye+(Ue.totalAmount||0),0),Y=re.length>0?Math.round(re.reduce((ye,Ue)=>ye+(Ue.totalWeeks||0),0)/re.length):0,ge=re.filter(ye=>ye.paymentReceived||ye.creditPaymentReceived),q=re.filter(ye=>!ye.paymentReceived&&!ye.creditPaymentReceived),W=ge.reduce((ye,Ue)=>ye+(Ue.totalAmount||0),0),xe=q.reduce((ye,Ue)=>ye+(Ue.totalAmount||0),0);return{count:re.length,totalAmount:ce,averageWeeks:Y,paidAmount:W,unpaidAmount:xe,paidAgreements:ge.length,unpaidAgreements:q.length}};if(s)return c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Anlamalar ykleniyor..."})]})});const Z=ee();return m("div",{className:"container-fluid",children:[c("div",{className:"page-header mb-4",children:m("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3",children:[m("div",{children:[c("h2",{className:"h3 fw-bold mb-1",children:"Anlamalar"}),c("p",{className:"mb-0",children:"Firma anlamalarn ynetin ve takip edin"})]}),c("div",{className:"d-flex gap-2 flex-wrap",children:m("button",{onClick:T.handleAddAgreement,className:"btn btn-page-primary btn-icon d-flex align-items-center",children:[c("i",{className:"bi bi-plus-lg me-2"}),c("span",{children:"Yeni Anlama"})]})})]})}),c("div",{className:"mb-4",children:m("ul",{className:"nav nav-tabs",id:"agreementTabs",role:"tablist",children:[c("li",{className:"nav-item",role:"presentation",children:m("button",{className:`nav-link ${M==="active"?"active":""}`,onClick:()=>K("active"),type:"button",role:"tab",children:[c("i",{className:"bi bi-check-circle me-2"}),"Aktif Anlamalar",c("span",{className:"badge bg-success ms-2",children:Z.count})]})}),c("li",{className:"nav-item",role:"presentation",children:m("button",{className:`nav-link ${M==="expired"?"active":""}`,onClick:()=>K("expired"),type:"button",role:"tab",children:[c("i",{className:"bi bi-clock-history me-2"}),"Sresi Bitmi / Sonlandrlm Anlamalar",c("span",{className:"badge bg-secondary ms-2",children:Z.count})]})}),c("li",{className:"nav-item",role:"presentation",children:m("button",{className:`nav-link ${M==="orders"?"active":""}`,onClick:()=>K("orders"),type:"button",role:"tab",children:[c("i",{className:"bi bi-cart me-2"}),"Sipariler",c("span",{className:"badge bg-info ms-2",children:t.filter(re=>re.isOrder===!0||re.status==="pending").length})]})})]})}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:M==="active"?"Aktif Anlama":"Sresi Bitmi / Sonlandrlm Anlama"}),c("h3",{className:"mb-0 fw-bold",children:Z.count})]}),c("div",{className:`${M==="active"?"bg-success":"bg-secondary"} bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center`,style:{width:"48px",height:"48px"},children:c("i",{className:`bi ${M==="active"?"bi-check-circle text-success":"bi-clock-history text-secondary"} fs-4`})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Toplam Gelir"}),c("h3",{className:"mb-0 fw-bold text-primary",children:te.formatCurrency(Z.totalAmount)})]}),c("div",{className:"bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-currency-dollar text-info fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Ortalama Sre"}),m("h3",{className:"mb-0 fw-bold",children:[Z.averageWeeks," hafta"]})]}),c("div",{className:"bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-calendar-week text-warning fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Toplam Anlama"}),c("h3",{className:"mb-0 fw-bold",children:l(t).length})]}),c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-file-earmark-text text-primary fs-4"})})]})})})})]}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"denmi Anlama"}),c("h3",{className:"mb-0 fw-bold",children:Z.paidAgreements}),c("p",{className:"mb-0 small text-success",children:te.formatCurrency(Z.paidAmount)})]}),c("div",{className:"bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-check-circle text-success fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"denmemi Anlama"}),c("h3",{className:"mb-0 fw-bold",children:Z.unpaidAgreements}),c("p",{className:"mb-0 small text-warning",children:te.formatCurrency(Z.unpaidAmount)})]}),c("div",{className:"bg-warning bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-clock text-warning fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"deme Oran"}),m("h3",{className:"mb-0 fw-bold",children:[Z.count>0?Math.round(Z.paidAgreements/Z.count*100):0,"%"]})]}),c("div",{className:"bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-percent text-info fs-4"})})]})})})}),c("div",{className:"col-md-3 col-sm-6",children:c("div",{className:"page-stats-card border-0 shadow-sm h-100",children:c("div",{className:"card-body",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[c("h6",{className:"text-muted mb-1",children:"Bekleyen deme"}),c("h3",{className:"mb-0 fw-bold",children:te.formatCurrency(Z.unpaidAmount)})]}),c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-arrow-up-circle text-primary fs-4"})})]})})})})]}),M==="active"&&ie().length>0&&c("div",{className:"d-flex justify-content-end mb-3",children:m("button",{onClick:ue,className:"btn btn-outline-danger btn-sm d-flex align-items-center",title:"Tm Aktif Anlamalar Sil",children:[c("i",{className:"bi bi-trash me-1"}),c("span",{children:"Tm Aktif Anlamalar Sil"})]})}),c("div",{className:"card border-0 shadow-sm",children:c("div",{className:"card-body p-0",children:c(n1e,{agreements:ie(),handlers:de,uiHandlers:T,helpers:te,handleUploadPhoto:O,activeTab:M})})}),c(i1e,{showModal:u,currentAgreement:p,uiHandlers:T,helpers:te,handleUploadPhoto:O}),c(a1e,{showPhotoModal:k,currentAgreement:p,setShowPhotoModal:y,helpers:te,photoData:S,setPhotoData:_,handlePhotoSave:X,handlePhotoChange:V}),c(l1e,{showAddForm:h,currentAgreement:p,uiHandlers:T,handlers:de,helpers:te,formData:z,setFormData:ae,sites:r,selectedSites:v,sitePanelCounts:I,siteBlockSelections:L,sitePanelSelections:P,companies:i,agreements:t,setShowAddForm:f,setAgreements:e,setSelectedSites:C,setSitePanelCounts:F,setSelectedWeeks:R,setSiteBlockSelections:N,setSitePanelSelections:x})]})},A1e=()=>c(c1e,{}),u1e=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState([]),[l,A]=D.useState([]),[u,d]=D.useState(!0),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[v,C]=D.useState(null),[I,F]=D.useState("all"),[E,R]=D.useState({dateFrom:"",dateTo:"",type:"all"}),[L,N]=D.useState({date:"",type:"income",source:"",description:"",amount:"",partnerId:""}),[P,x]=D.useState(!1),[k,y]=D.useState({dateFrom:"",dateTo:""}),[S,_]=D.useState(!1),[M,K]=D.useState({dateFrom:"",dateTo:""}),[z,ae]=D.useState([]),[te,G]=D.useState(!1),ue=D.useRef();D.useEffect(()=>{(async()=>{try{const[Le,lt,Ae,Ne,ve]=await Promise.all([lc(),ph(),Sa(),Yi(),Xa()]);e(Le),n(lt),a(Ae),o(Ne),A(ve)}catch(Le){console.error("Error fetching data:",Le)}finally{d(!1)}})()},[]);const de=t.reduce((pe,Le)=>pe+Le.amount,0),T=()=>{N({date:"",type:"income",source:"",description:"",amount:"",partnerId:""}),C(null),f(!0)},O=()=>{N({date:"",type:"expense",source:"",description:"",amount:"",partnerId:""}),C(null),g(!0)},V=pe=>{N({date:pe.date||"",type:pe.type||"income",source:pe.source||"",description:pe.description||"",amount:Math.abs(pe.amount)||"",partnerId:pe.partnerId||""}),C(pe),pe.type==="income"?f(!0):g(!0)},Q=()=>{f(!1),g(!1),C(null),N({date:"",type:"income",source:"",description:"",amount:"",partnerId:""})},X=pe=>{const{name:Le,value:lt}=pe.target;R({...E,[Le]:lt})},ie=pe=>{const{name:Le,value:lt}=pe.target;N({...L,[Le]:lt})},ee=async pe=>{if(pe.preventDefault(),!L.date||!L.source||!L.amount){await window.showAlert("Eksik Bilgi","Ltfen zorunlu alanlar doldurunuz.","warning");return}try{let Le=0;L.type==="income"?Le=Math.abs(parseFloat(L.amount)):L.partnerId?Le=0:Le=-Math.abs(parseFloat(L.amount));const lt={...L,amount:L.partnerId&&L.type==="expense"?0:Le,originalAmount:L.partnerId&&L.type==="expense"?Math.abs(parseFloat(L.amount)):null};if(v){const Ae=await sq(v.id,lt);Ae&&(e(t.map(Ne=>Ne.id===v.id?Ae:Ne)),Q(),await window.showAlert("Baarl","lem baaryla gncellendi.","success"))}else{const Ae=await hl(lt);if(Ae){if(e([...t,Ae]),L.partnerId&&r.find(ve=>ve.id.toString()===L.partnerId)){let ve=0;L.type,ve=Math.abs(parseFloat(L.amount));const Ce=r.map(Ke=>Ke.id.toString()===L.partnerId?{...Ke,balance:(Ke.balance||0)+ve}:Ke);n(Ce)}Q(),await window.showAlert("Baarl","Yeni ilem baaryla eklendi.","success")}}}catch(Le){console.error("Error saving transaction:",Le),await window.showAlert("Hata","lem kaydedilirken bir hata olutu.","error")}},re=(()=>t.filter(Le=>!(I!=="all"&&Le.type!==I||E.dateFrom&&Le.date<E.dateFrom||E.dateTo&&Le.date>E.dateTo)).sort((Le,lt)=>{const Ae=new Date(lt.date)-new Date(Le.date);return Ae!==0?Ae:lt.id-Le.id}))(),Y=(()=>{const pe=t.filter(Ne=>Ne.type==="income"),Le=t.filter(Ne=>Ne.type==="expense"),lt=pe.reduce((Ne,ve)=>Ne+ve.amount,0),Ae=Le.reduce((Ne,ve)=>Ne+Math.abs(ve.amount),0);return{income:{count:pe.length,total:lt},expense:{count:Le.length,total:Ae},all:{count:t.length,total:de}}})(),ge=pe=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(pe),q=pe=>{const{name:Le,value:lt}=pe.target;K({...M,[Le]:lt})},W=()=>{var ve;if(!M.dateFrom||!M.dateTo){(ve=window.showAlert)==null||ve.call(window,"Eksik Bilgi","Ltfen balang ve biti tarihlerini seiniz.","warning");return}const pe=new Date(M.dateFrom),Le=new Date(M.dateTo),lt=i.filter(Ce=>{if(Ce.status==="archived")return!1;if(Ce.dateRanges&&Ce.dateRanges.length>0)return Ce.dateRanges.some(Ke=>{const Ve=new Date(Ke.startDate),ot=new Date(Ke.endDate);return Ve<=Le&&ot>=pe});{const Ke=new Date(Ce.startDate),Ve=new Date(Ce.endDate);return Ke<=Le&&Ve>=pe}}),Ae={};lt.forEach(Ce=>{let Ke=0;if(Ce.dateRanges&&Ce.dateRanges.length>0)Ce.dateRanges.forEach(ot=>{const pt=new Date(ot.startDate),Bt=new Date(ot.endDate);if(pt<=Le&&Bt>=pe){const Be=pt>pe?pt:pe,ze=Bt<Le?Bt:Le,st=Math.ceil((ze-Be)/(1e3*60*60*24));Ke+=Math.ceil(st/7)}});else{const ot=new Date(Ce.startDate),pt=new Date(Ce.endDate);if(ot<=Le&&pt>=pe){const Bt=ot>pe?ot:pe,Be=pt<Le?pt:Le,ze=Math.ceil((Be-Bt)/(1e3*60*60*24));Ke=Math.ceil(ze/7)}}if(Ke===0)return;const Ve=parseFloat(Ce.weeklyRatePerPanel)||0;Ce.siteIds&&Ce.siteIds.length>0&&Ce.siteIds.forEach(ot=>{var st;const pt=s.find(St=>String(St.id)===String(ot));if(!pt)return;const Bt=(st=Ce.sitePanelCounts)!=null&&st[ot]?parseInt(Ce.sitePanelCounts[ot]):0;if(Bt===0)return;const Be=parseFloat(pt.agreementPercentage)||0,ze=Bt*Ve*Ke*(Be/100);ze>0&&(Ae[ot]||(Ae[ot]={siteId:pt.id,siteName:pt.name,totalAmount:0,payments:[]}),Ae[ot].totalAmount+=ze,Ae[ot].payments.push({agreementId:Ce.id,companyId:Ce.companyId,panelCount:Bt,weeksInRange:Ke,weeklyRatePerPanel:Ve,agreementPercentage:Be,amount:ze}))})});const Ne=Object.values(Ae).sort((Ce,Ke)=>Ce.siteName.localeCompare(Ke.siteName,"tr"));ae(Ne)},xe=async pe=>{var Le,lt,Ae,Ne,ve;try{if(!await((Le=window.showConfirm)==null?void 0:Le.call(window,"deme Onay",`${pe.siteName} iin ${ge(pe.totalAmount)} tutarnda deme yapmak istediinize emin misiniz?`,"warning")))return;const Ke=t.reduce((Bt,Be)=>Bt+Be.amount,0);if(Ke<pe.totalAmount){await((lt=window.showAlert)==null?void 0:lt.call(window,"Yetersiz Bakiye",`Kasada yeterli bakiye bulunmamaktadr. Gerekli tutar: ${ge(pe.totalAmount)}, Kasa bakiyesi: ${ge(Ke)}`,"warning"));return}const Ve=s.find(Bt=>String(Bt.id)===String(pe.siteId));if(!Ve){await((Ae=window.showAlert)==null?void 0:Ae.call(window,"Hata","Site bulunamad.","error"));return}const ot={date:new Date().toISOString().split("T")[0],type:"expense",source:`Site demesi - ${pe.siteName}`,description:`${pe.siteName} iin hesaplanan site demesi (${pe.payments.length} anlama)`,amount:-Math.abs(pe.totalAmount),siteId:pe.siteId},pt=await hl(ot);if(pt){e([...t,pt]);const Bt={...Ve};if(Bt.pendingPayments&&Bt.pendingPayments.length>0){const Be=Bt.pendingPayments.filter(ze=>!pe.payments.some(st=>String(st.agreementId)===String(ze.agreementId)&&Math.abs(st.amount-ze.amount)<.01));Bt.pendingPayments=Be,Bt.hasPendingPayment=Be.length>0}else Bt.pendingPayments=[],Bt.hasPendingPayment=!1;await SA(pe.siteId,Bt),o(s.map(Be=>Be.id===pe.siteId?Bt:Be)),ae(z.map(Be=>Be.siteId===pe.siteId?{...Be,paid:!0,paidAt:new Date().toISOString()}:Be)),await Un({user:"Admin",action:`Site demesi yapld: ${pe.siteName} (${ge(pe.totalAmount)})`}),await((Ne=window.showAlert)==null?void 0:Ne.call(window,"Baarl",`${pe.siteName} iin ${ge(pe.totalAmount)} tutarnda deme baaryla yapld.`,"success"))}else throw new Error("Transaction creation failed")}catch(Ce){console.error("Error processing site payment:",Ce),await((ve=window.showAlert)==null?void 0:ve.call(window,"Hata","deme ilemi srasnda bir hata olutu: "+(Ce.message||"Bilinmeyen hata"),"error"))}},ye=pe=>{const{name:Le,value:lt}=pe.target;y({...k,[Le]:lt})},Ue=()=>{const pe=t.filter(pt=>!(k.dateFrom&&pt.date<k.dateFrom||k.dateTo&&pt.date>k.dateTo)),Le=pe.filter(pt=>pt.type==="expense"&&pt.source.includes("Ortak demesi")),lt=pe.filter(pt=>pt.type==="expense"&&pt.source.includes("Site demesi")),Ae=pe.filter(pt=>pt.type==="income"&&pt.source.includes("Anlama demesi")),Ne=Le.reduce((pt,Bt)=>pt+Math.abs(Bt.amount),0),ve=lt.reduce((pt,Bt)=>pt+Math.abs(Bt.amount),0),Ce=Ae.reduce((pt,Bt)=>pt+Bt.amount,0),Ke=[...Le].sort((pt,Bt)=>Math.abs(Bt.amount)-Math.abs(pt.amount)),Ve=[...lt].sort((pt,Bt)=>Math.abs(Bt.amount)-Math.abs(pt.amount)),ot=[...Ae].sort((pt,Bt)=>Bt.amount-pt.amount);return{paymentsToPartners:Ke,paymentsToSites:Ve,paymentsFromCompanies:ot,totals:{paymentsToPartners:Ne,paymentsToSites:ve,paymentsFromCompanies:Ce,totalExpenses:Ne+ve,totalIncome:Ce,net:Ce-(Ne+ve)}}},Me=async()=>{if(ue.current)try{const pe=await Jw(ue.current,{scale:2,useCORS:!0}),Le=pe.toDataURL("image/png"),lt=new Xt("p","mm","a4"),Ae=210,Ne=297,ve=pe.height*Ae/pe.width;let Ce=ve,Ke=0;for(lt.addImage(Le,"PNG",0,Ke,Ae,ve),Ce-=Ne;Ce>=0;)Ke=Ce-ve,lt.addPage(),lt.addImage(Le,"PNG",0,Ke,Ae,ve),Ce-=Ne;lt.save(`kasa_raporu_${k.dateFrom||"baslangic"}_${k.dateTo||"bitis"}.pdf`),await window.showAlert("Baarl","PDF raporu baaryla oluturuldu ve indirildi.","success")}catch(pe){console.error("Error generating PDF:",pe),await window.showAlert("Hata","PDF oluturma srasnda bir hata olutu.","error")}},$e=()=>{G(!0)},fe=async()=>{try{G(!1),console.log("Starting cash reset process..."),console.log("Total transactions to delete:",t.length);const pe=5,Le=[];for(let Ne=0;Ne<t.length;Ne+=pe)Le.push(t.slice(Ne,Ne+pe));let lt=0,Ae=0;for(let Ne=0;Ne<Le.length;Ne++){const ve=Le[Ne];console.log(`Processing batch ${Ne+1}/${Le.length} with ${ve.length} transactions`);try{const Ce=ve.map(Ve=>Ak(Ve.id).catch(ot=>(console.error(`Error deleting transaction ${Ve.id}:`,ot),{error:!0,id:Ve.id})));(await Promise.all(Ce)).forEach(Ve=>{Ve&&Ve.error?Ae++:lt++}),Ne<Le.length-1&&await new Promise(Ve=>setTimeout(Ve,500))}catch(Ce){console.error(`Error processing batch ${Ne+1}:`,Ce),Ae+=ve.length}}console.log(`Reset completed: ${lt} successful, ${Ae} errors`);try{console.log("Resetting all partner balances...");const Ne=await ph();for(const ve of Ne)if(ve.balance&&ve.balance!==0){const Ce={...ve,balance:0};await gh(ve.id,Ce),console.log(`Partner ${ve.name} balance reset to 0`)}console.log("All partner balances reset successfully")}catch(Ne){console.error("Error resetting partner balances:",Ne)}try{console.log("Resetting all agreements financial data...");const Ne=await Sa();let ve=0;for(const Ce of Ne)if(Ce.paymentReceived||Ce.creditPaymentReceived||Ce.totalAmount){const Ve={...Ce,paymentReceived:!1,creditPaymentReceived:!1,totalAmount:0,paidAmount:0};await Xm(Ce.id,Ve),ve++,console.log(`Agreement ${Ce.id} financial data reset`)}console.log(`All agreements financial data reset successfully (${ve} agreements)`)}catch(Ne){console.error("Error resetting agreements financial data:",Ne)}try{console.log("Resetting all sites pending payments...");const Ne=await Yi();let ve=0;for(const Ce of Ne)if(Ce.pendingPayments&&Ce.pendingPayments.length>0){const Ke={...Ce,pendingPayments:[],hasPendingPayment:!1};await SA(Ce.id,Ke),ve++,console.log(`Site ${Ce.name} pending payments reset`)}console.log(`All sites pending payments reset successfully (${ve} sites)`)}catch(Ne){console.error("Error resetting sites pending payments:",Ne)}try{console.log("Resetting all companies credit data...");const Ne=await Xa();let ve=0;for(const Ce of Ne)if(Ce.credit||Ce.creditHistory&&Ce.creditHistory.length>0){const Ke={...Ce,credit:0,creditHistory:[]};await qm(Ce.id,Ke),ve++,console.log(`Company ${Ce.name} credit data reset`)}console.log(`All companies credit data reset successfully (${ve} companies)`)}catch(Ne){console.error("Error resetting companies credit data:",Ne)}e([]);try{const[Ne,ve,Ce,Ke,Ve]=await Promise.all([lc(),ph(),Sa(),Yi(),Xa()]);e(Ne),n(ve),a(Ce),o(Ke),A(Ve)}catch(Ne){console.error("Error reloading data:",Ne)}Ae===0?await window.showAlert("Baarl",`Tm mali veriler baaryla sfrland. ${lt} ilem silindi, tm ortak bakiyeleri, anlama mali bilgileri, site demeleri ve firma kredi bilgileri sfrland.`,"success"):await window.showAlert("Ksmen Baarl",`${lt} ilem silindi, ${Ae} ilem silinemedi. Tm mali veriler sfrland. Sayfay yenileyin.`,"warning")}catch(pe){console.error("Error resetting cash data:",pe),await window.showAlert("Hata","Kasa verileri sfrlanrken bir hata olutu. Ltfen sayfay yenileyin ve tekrar deneyin.","error")}},Oe=()=>{G(!1)},Re=async pe=>{var Le,lt,Ae;try{console.log("Cancelling transaction:",pe);const Ne=((Le=pe.source)==null?void 0:Le.includes("Ortak demesi"))||((lt=pe.source)==null?void 0:lt.includes("Ortak Alaca"));let ve=null;if(Ne){const Ce=(Ae=pe.source)==null?void 0:Ae.match(/Ortak (?:demesi|Alaca) - (.+)/);Ce&&(ve=Ce[1])}if(await Ak(pe.id),Ne&&ve)try{const Ke=(await ph()).find(Ve=>Ve.name===ve);if(Ke){const Ve=Math.abs(pe.amount),ot={...Ke,balance:(Ke.balance||0)-Ve};await gh(Ke.id,ot),console.log(`Partner ${ve} balance updated: ${Ve} subtracted`)}}catch(Ce){console.error("Error updating partner balance:",Ce)}e(Ce=>Ce.filter(Ke=>Ke.id!==pe.id)),await window.showAlert("Baarl","lem iptal edildi ve kasa bakiyesi gncellendi.","success"),console.log("Transaction cancelled successfully")}catch(Ne){console.error("Error cancelling transaction:",Ne),await window.showAlert("Hata","lem iptal edilirken bir hata olutu.","error")}};if(u)return c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"spinner-border text-primary",role:"status"}),c("p",{className:"mt-3 text-muted",children:"lemler ykleniyor..."})]})});const He=P?Ue():null;return m("div",{className:"container-fluid py-4",children:[c("div",{className:"page-header mb-4",children:m("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3",children:[m("div",{children:[c("h2",{className:"h3 fw-bold mb-1",children:"Kasa"}),c("p",{className:"mb-0",children:"Gelir ve gider ilemleri"})]}),m("div",{className:"d-flex gap-2 flex-wrap",children:[m("button",{onClick:()=>{x(!1),_(!S)},className:`btn ${S?"btn-page-outline":"btn-page-primary"} d-flex align-items-center`,children:[c("i",{className:"bi bi-calculator me-2"}),S?"Site demeleri Kapat":"Site demeleri Hesapla"]}),m("button",{onClick:()=>{_(!1),x(!P)},className:`btn ${P?"btn-page-outline":"btn-page-primary"} d-flex align-items-center`,children:[c("i",{className:`bi ${P?"bi-currency-dollar":"bi-file-earmark-bar-graph"} me-2`}),P?"lemleri Gster":"Rapor"]}),m("button",{onClick:T,className:"btn btn-page-primary d-flex align-items-center",children:[c("i",{className:"bi bi-plus-circle me-2"}),"Gelir Ekle"]}),m("button",{onClick:O,className:"btn btn-page-outline d-flex align-items-center",children:[c("i",{className:"bi bi-dash-circle me-2"}),"Gider Ekle"]})]})]})}),!P&&c("div",{className:"mb-4",children:m("ul",{className:"nav nav-tabs",id:"cashierTabs",role:"tablist",children:[c("li",{className:"nav-item",role:"presentation",children:m("button",{className:`nav-link ${I==="all"?"active":""}`,onClick:()=>F("all"),type:"button",role:"tab",children:[c("i",{className:"bi bi-list-ul me-2"}),"Tm lemler",c("span",{className:"badge bg-primary ms-2",children:Y.all.count})]})}),c("li",{className:"nav-item",role:"presentation",children:m("button",{className:`nav-link ${I==="income"?"active":""}`,onClick:()=>F("income"),type:"button",role:"tab",children:[c("i",{className:"bi bi-arrow-down-circle me-2"}),"Gelirler",c("span",{className:"badge bg-success ms-2",children:Y.income.count})]})}),c("li",{className:"nav-item",role:"presentation",children:m("button",{className:`nav-link ${I==="expense"?"active":""}`,onClick:()=>F("expense"),type:"button",role:"tab",children:[c("i",{className:"bi bi-arrow-up-circle me-2"}),"Giderler",c("span",{className:"badge bg-danger ms-2",children:Y.expense.count})]})})]})}),S&&c("div",{className:"card border-0 shadow-sm mb-4",style:{borderRadius:"16px",overflow:"hidden"},children:m("div",{className:"card-body",children:[c("h3",{className:"fw-bold text-dark mb-4",children:"Site demeleri Hesaplama"}),m("div",{className:"row mb-4 g-3",children:[m("div",{className:"col-md-5",children:[c("label",{htmlFor:"sitePaymentDateFrom",className:"form-label fw-medium",children:"Balang Tarihi"}),c("input",{type:"date",id:"sitePaymentDateFrom",name:"dateFrom",value:M.dateFrom,onChange:q,className:"form-control form-control-custom rounded-pill px-3"})]}),m("div",{className:"col-md-5",children:[c("label",{htmlFor:"sitePaymentDateTo",className:"form-label fw-medium",children:"Biti Tarihi"}),c("input",{type:"date",id:"sitePaymentDateTo",name:"dateTo",value:M.dateTo,onChange:q,className:"form-control form-control-custom rounded-pill px-3"})]}),c("div",{className:"col-md-2 d-flex align-items-end",children:m("button",{onClick:W,className:"btn btn-primary w-100 rounded-pill",children:[c("i",{className:"bi bi-calculator me-2"}),"Hesapla"]})})]}),z.length>0&&m("div",{className:"mt-4",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[c("h5",{className:"fw-bold mb-0",children:"Hesaplanan demeler"}),m("div",{className:"text-end",children:[c("p",{className:"mb-0 text-muted small",children:"Toplam denecek Tutar"}),c("h4",{className:"mb-0 fw-bold text-primary",children:ge(z.reduce((pe,Le)=>pe+Le.totalAmount,0))})]})]}),c("div",{className:"table-responsive",children:m("table",{className:"table table-hover",children:[c("thead",{className:"table-light",children:m("tr",{children:[c("th",{children:"Site Ad"}),c("th",{className:"text-end",children:"Toplam Tutar"}),c("th",{children:"Detaylar"}),c("th",{className:"text-center",children:"lem"})]})}),c("tbody",{children:z.map(pe=>m("tr",{className:pe.paid?"table-success":"",children:[c("td",{className:"fw-medium",children:pe.siteName}),c("td",{className:"text-end fw-bold text-primary",children:ge(pe.totalAmount)}),c("td",{children:m("button",{className:"btn btn-sm btn-outline-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":`#sitePaymentDetails-${pe.siteId}`,children:[c("i",{className:"bi bi-chevron-down me-1"}),"Detaylar (",pe.payments.length,")"]})}),c("td",{className:"text-center",children:pe.paid?m("span",{className:"badge bg-success",children:[c("i",{className:"bi bi-check-circle me-1"}),"dendi"]}):m("button",{className:"btn btn-sm btn-success",onClick:()=>xe(pe),title:"deme Yap",children:[c("i",{className:"bi bi-currency-dollar me-1"}),"deme Yap"]})})]},pe.siteId))})]})}),z.map(pe=>c("div",{className:"collapse mb-3",id:`sitePaymentDetails-${pe.siteId}`,children:m("div",{className:"card card-body bg-light",children:[m("h6",{className:"fw-bold mb-3",children:[pe.siteName," - deme Detaylar"]}),c("div",{className:"table-responsive",children:m("table",{className:"table table-sm",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Anlama"}),c("th",{className:"text-end",children:"Panel"}),c("th",{className:"text-end",children:"Hafta"}),c("th",{className:"text-end",children:"Haftalk Oran"}),c("th",{className:"text-end",children:"Anlama %"}),c("th",{className:"text-end",children:"Tutar"})]})}),c("tbody",{children:pe.payments.map((Le,lt)=>{const Ae=i.find(ve=>String(ve.id)===String(Le.agreementId)),Ne=Ae?l.find(ve=>String(ve.id)===String(Ae.companyId)):null;return m("tr",{children:[c("td",{children:Ne?Ne.name:`Anlama #${Le.agreementId}`}),c("td",{className:"text-end",children:Le.panelCount}),c("td",{className:"text-end",children:Le.weeksInRange}),c("td",{className:"text-end",children:ge(Le.weeklyRatePerPanel)}),m("td",{className:"text-end",children:[Le.agreementPercentage,"%"]}),c("td",{className:"text-end fw-bold",children:ge(Le.amount)})]},lt)})})]})})]})},`details-${pe.siteId}`))]}),z.length===0&&M.dateFrom&&M.dateTo&&m("div",{className:"alert alert-info mt-4",children:[c("i",{className:"bi bi-info-circle me-2"}),"Seili tarih aralnda deme gerektiren anlama bulunamad."]})]})}),P?c("div",{className:"card border-0 shadow-sm mb-4",style:{borderRadius:"16px",overflow:"hidden"},children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[c("h3",{className:"fw-bold text-dark mb-0",children:"Aylk Rapor"}),m("button",{onClick:Me,className:"btn btn-primary rounded-pill px-4 py-2 d-flex align-items-center",children:[c("i",{className:"bi bi-file-earmark-pdf me-2"}),"PDF Olarak ndir"]})]}),m("div",{className:"row mb-4 g-3",children:[m("div",{className:"col-md-5",children:[c("label",{htmlFor:"reportDateFrom",className:"form-label fw-medium",children:"Balang Tarihi"}),c("input",{type:"date",id:"reportDateFrom",name:"dateFrom",value:k.dateFrom,onChange:ye,className:"form-control form-control-custom rounded-pill px-3"})]}),m("div",{className:"col-md-5",children:[c("label",{htmlFor:"reportDateTo",className:"form-label fw-medium",children:"Biti Tarihi"}),c("input",{type:"date",id:"reportDateTo",name:"dateTo",value:k.dateTo,onChange:ye,className:"form-control form-control-custom rounded-pill px-3"})]})]}),m("div",{ref:ue,children:[m("div",{className:"mb-4 text-center",children:[c("h2",{className:"fw-bold",children:"Kasa Raporu"}),m("p",{className:"text-muted",children:[k.dateFrom?`Balang: ${k.dateFrom}`:"Balang: Tm Tarihler"," -",k.dateTo?` Biti: ${k.dateTo}`:" Biti: Tm Tarihler"]})]}),He&&m("div",{className:"row mb-4 g-3",children:[c("div",{className:"col-md-4",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"16px",overflow:"hidden"},children:c("div",{className:"card-body",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"rounded-circle bg-success bg-opacity-10 d-flex align-items-center justify-content-center me-3",style:{width:"56px",height:"56px"},children:c("i",{className:"bi bi-arrow-down-circle text-success fs-4"})}),m("div",{children:[c("p",{className:"mb-1 text-muted small",children:"Toplam Gelir"}),c("h4",{className:"mb-0 fw-bold text-dark",children:ge(He.totals.totalIncome)})]})]})})})}),c("div",{className:"col-md-4",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"16px",overflow:"hidden"},children:c("div",{className:"card-body",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"rounded-circle bg-danger bg-opacity-10 d-flex align-items-center justify-content-center me-3",style:{width:"56px",height:"56px"},children:c("i",{className:"bi bi-arrow-up-circle text-danger fs-4"})}),m("div",{children:[c("p",{className:"mb-1 text-muted small",children:"Toplam Gider"}),c("h4",{className:"mb-0 fw-bold text-dark",children:ge(He.totals.totalExpenses)})]})]})})})}),c("div",{className:"col-md-4",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"16px",overflow:"hidden"},children:c("div",{className:"card-body",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:`rounded-circle ${He.totals.net>=0?"bg-success":"bg-danger"} bg-opacity-10 d-flex align-items-center justify-content-center me-3`,style:{width:"56px",height:"56px"},children:c("i",{className:`bi bi-wallet2 ${He.totals.net>=0?"text-success":"text-danger"} fs-4`})}),m("div",{children:[c("p",{className:"mb-1 text-muted small",children:"Net"}),c("h4",{className:`mb-0 fw-bold ${He.totals.net>=0?"text-success":"text-danger"}`,children:ge(He.totals.net)})]})]})})})})]}),He&&m("div",{className:"row g-4",children:[c("div",{className:"col-12",children:m("div",{className:"card border-0 shadow-sm",style:{borderRadius:"16px",overflow:"hidden"},children:[c("div",{className:"card-header bg-primary bg-opacity-10 border-0 py-3",children:c("h5",{className:"mb-0 fw-bold text-primary",children:"Firmalardan Alnan demeler"})}),m("div",{className:"card-body",children:[c("div",{className:"d-flex justify-content-between align-items-center mb-3",children:m("h6",{className:"fw-medium",children:["Toplam: ",ge(He.totals.paymentsFromCompanies)]})}),c("div",{className:"table-responsive",children:m("table",{className:"table table-borderless align-middle",children:[c("thead",{children:m("tr",{className:"border-bottom",children:[c("th",{className:"text-muted small fw-medium",children:"Tarih"}),c("th",{className:"text-muted small fw-medium",children:"Firma"}),c("th",{className:"text-muted small fw-medium",children:"Aklama"}),c("th",{className:"text-muted small fw-medium text-end",children:"Tutar"})]})}),m("tbody",{children:[He.paymentsFromCompanies.map((pe,Le)=>m("tr",{className:"border-bottom",children:[c("td",{className:"small",children:pe.date}),c("td",{className:"fw-medium",children:pe.source.replace("Anlama demesi - ","")}),c("td",{className:"text-muted small",children:pe.description}),c("td",{className:"text-end fw-medium text-success",children:ge(pe.amount)})]},Le)),He.paymentsFromCompanies.length===0&&c("tr",{children:c("td",{colSpan:"4",className:"text-center py-4",children:m("div",{className:"d-flex flex-column align-items-center",children:[c("i",{className:"bi bi-wallet2 text-muted mb-2",style:{fontSize:"2rem"}}),c("p",{className:"mb-0 text-muted",children:"Kayt bulunamad"})]})})})]})]})})]})]})}),c("div",{className:"col-12",children:m("div",{className:"card border-0 shadow-sm",style:{borderRadius:"16px",overflow:"hidden"},children:[c("div",{className:"card-header bg-warning bg-opacity-10 border-0 py-3",children:c("h5",{className:"mb-0 fw-bold text-warning",children:"Sitelere Yaplan demeler"})}),m("div",{className:"card-body",children:[c("div",{className:"d-flex justify-content-between align-items-center mb-3",children:m("h6",{className:"fw-medium",children:["Toplam: ",ge(He.totals.paymentsToSites)]})}),c("div",{className:"table-responsive",children:m("table",{className:"table table-borderless align-middle",children:[c("thead",{children:m("tr",{className:"border-bottom",children:[c("th",{className:"text-muted small fw-medium",children:"Tarih"}),c("th",{className:"text-muted small fw-medium",children:"Site"}),c("th",{className:"text-muted small fw-medium",children:"Aklama"}),c("th",{className:"text-muted small fw-medium text-end",children:"Tutar"})]})}),m("tbody",{children:[He.paymentsToSites.map((pe,Le)=>m("tr",{className:"border-bottom",children:[c("td",{className:"small",children:pe.date}),c("td",{className:"fw-medium",children:pe.source.replace("Site demesi - ","")}),c("td",{className:"text-muted small",children:pe.description}),c("td",{className:"text-end fw-medium text-danger",children:ge(Math.abs(pe.amount))})]},Le)),He.paymentsToSites.length===0&&c("tr",{children:c("td",{colSpan:"4",className:"text-center py-4",children:m("div",{className:"d-flex flex-column align-items-center",children:[c("i",{className:"bi bi-wallet2 text-muted mb-2",style:{fontSize:"2rem"}}),c("p",{className:"mb-0 text-muted",children:"Kayt bulunamad"})]})})})]})]})})]})]})}),c("div",{className:"col-12",children:m("div",{className:"card border-0 shadow-sm",style:{borderRadius:"16px",overflow:"hidden"},children:[c("div",{className:"card-header bg-info bg-opacity-10 border-0 py-3",children:c("h5",{className:"mb-0 fw-bold text-info",children:"Ortaklara Yaplan demeler"})}),m("div",{className:"card-body",children:[c("div",{className:"d-flex justify-content-between align-items-center mb-3",children:m("h6",{className:"fw-medium",children:["Toplam: ",ge(He.totals.paymentsToPartners)]})}),c("div",{className:"table-responsive",children:m("table",{className:"table table-borderless align-middle",children:[c("thead",{children:m("tr",{className:"border-bottom",children:[c("th",{className:"text-muted small fw-medium",children:"Tarih"}),c("th",{className:"text-muted small fw-medium",children:"Ortak"}),c("th",{className:"text-muted small fw-medium",children:"Aklama"}),c("th",{className:"text-muted small fw-medium text-end",children:"Tutar"})]})}),m("tbody",{children:[He.paymentsToPartners.map((pe,Le)=>m("tr",{className:"border-bottom",children:[c("td",{className:"small",children:pe.date}),c("td",{className:"fw-medium",children:pe.source.replace("Ortak demesi - ","")}),c("td",{className:"text-muted small",children:pe.description}),c("td",{className:"text-end fw-medium text-danger",children:ge(Math.abs(pe.amount))})]},Le)),He.paymentsToPartners.length===0&&c("tr",{children:c("td",{colSpan:"4",className:"text-center py-4",children:m("div",{className:"d-flex flex-column align-items-center",children:[c("i",{className:"bi bi-wallet2 text-muted mb-2",style:{fontSize:"2rem"}}),c("p",{className:"mb-0 text-muted",children:"Kayt bulunamad"})]})})})]})]})})]})]})})]})]})]})}):m(kr,{children:[m("div",{className:"row mb-4 g-3",children:[c("div",{className:"col-md-4",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"16px",overflow:"hidden"},children:c("div",{className:"card-body",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center me-3",style:{width:"56px",height:"56px"},children:c("i",{className:"bi bi-wallet2 text-primary fs-4"})}),m("div",{children:[c("p",{className:"mb-1 text-muted small",children:"Toplam Bakiye"}),c("h4",{className:"mb-0 fw-bold text-dark cash-animation",children:ge(de)})]})]})})})}),c("div",{className:"col-md-4",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"16px",overflow:"hidden"},children:c("div",{className:"card-body",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"rounded-circle bg-success bg-opacity-10 d-flex align-items-center justify-content-center me-3",style:{width:"56px",height:"56px"},children:c("i",{className:"bi bi-arrow-down-circle text-success fs-4"})}),m("div",{children:[c("p",{className:"mb-1 text-muted small",children:"Toplam Gelir"}),c("h4",{className:"mb-0 fw-bold text-success",children:ge(Y.income.total)})]})]})})})}),c("div",{className:"col-md-4",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"16px",overflow:"hidden"},children:c("div",{className:"card-body",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"rounded-circle bg-danger bg-opacity-10 d-flex align-items-center justify-content-center me-3",style:{width:"56px",height:"56px"},children:c("i",{className:"bi bi-arrow-up-circle text-danger fs-4"})}),m("div",{children:[c("p",{className:"mb-1 text-muted small",children:"Toplam Gider"}),c("h4",{className:"mb-0 fw-bold text-danger",children:ge(Y.expense.total)})]})]})})})})]}),c("div",{className:"card border-0 shadow-sm mb-4",style:{borderRadius:"16px",overflow:"hidden"},children:c("div",{className:"card-body",children:m("div",{className:"row g-3",children:[m("div",{className:"col-md-6",children:[c("label",{htmlFor:"dateFrom",className:"form-label fw-medium",children:"Balang Tarihi"}),c("input",{type:"date",id:"dateFrom",name:"dateFrom",value:E.dateFrom,onChange:X,className:"form-control form-control-custom rounded-pill px-3"})]}),m("div",{className:"col-md-6",children:[c("label",{htmlFor:"dateTo",className:"form-label fw-medium",children:"Biti Tarihi"}),c("input",{type:"date",id:"dateTo",name:"dateTo",value:E.dateTo,onChange:X,className:"form-control form-control-custom rounded-pill px-3"})]})]})})}),m("div",{className:"card border-0 shadow-sm mb-4",style:{borderRadius:"16px",overflow:"hidden"},children:[c("div",{className:"card-header bg-light border-0 py-3",children:m("h5",{className:"mb-0 fw-bold",children:[I==="all"&&m(kr,{children:[c("i",{className:"bi bi-list-ul me-2"}),"Tm lemler (",re.length,")"]}),I==="income"&&m(kr,{children:[c("i",{className:"bi bi-arrow-down-circle me-2 text-success"}),"Gelirler (",re.length,")"]}),I==="expense"&&m(kr,{children:[c("i",{className:"bi bi-arrow-up-circle me-2 text-danger"}),"Giderler (",re.length,")"]})]})}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table table-borderless align-middle",children:[c("thead",{children:m("tr",{className:"border-bottom",children:[c("th",{className:"text-muted small fw-medium",children:"Tarih"}),I==="all"&&c("th",{className:"text-muted small fw-medium",children:"Tr"}),c("th",{className:"text-muted small fw-medium",children:"Kaynak"}),c("th",{className:"text-muted small fw-medium",children:"Aklama"}),c("th",{className:"text-muted small fw-medium",children:"Tutar"}),c("th",{className:"text-muted small fw-medium text-end",children:"lemler"})]})}),m("tbody",{children:[re.map(pe=>m("tr",{className:"border-bottom",children:[c("td",{className:"small",children:pe.date}),I==="all"&&c("td",{children:c("span",{className:`badge ${pe.type==="income"?"bg-success bg-opacity-10 text-success":"bg-danger bg-opacity-10 text-danger"} rounded-pill px-2 py-1`,children:pe.type==="income"?"Gelir":"Gider"})}),c("td",{className:"fw-medium",children:pe.source}),c("td",{className:"text-muted small",children:pe.description}),c("td",{children:m("span",{className:`fw-medium ${pe.type==="income"?"text-success":"text-danger"}`,children:[pe.type==="income"?"+":"",ge(pe.amount)]})}),c("td",{className:"text-end",children:m("div",{className:"d-flex gap-1 justify-content-end",children:[c("button",{onClick:()=>V(pe),className:"btn btn-sm btn-outline-primary rounded-pill py-1 px-2",title:"Dzenle",children:c("i",{className:"bi bi-pencil"})}),pe.type==="expense"&&c("button",{onClick:()=>Re(pe),className:"btn btn-sm btn-outline-danger rounded-pill py-1 px-2",title:"Vazge",children:c("i",{className:"bi bi-x-circle"})})]})})]},pe.id)),re.length===0&&c("tr",{children:c("td",{colSpan:I==="all"?"6":"5",className:"text-center py-5",children:m("div",{className:"d-flex flex-column align-items-center",children:[c("i",{className:`bi ${I==="income"?"bi-arrow-down-circle":I==="expense"?"bi-arrow-up-circle":"bi-currency-dollar"} text-muted mb-2`,style:{fontSize:"2rem"}}),m("p",{className:"mb-0 text-muted",children:[I==="income"&&"Henz gelir ilemi bulunmamaktadr.",I==="expense"&&"Henz gider ilemi bulunmamaktadr.",I==="all"&&"Henz ilem bulunmamaktadr."]})]})})})]})]})})})]}),c("div",{className:"d-flex justify-content-center",children:m("button",{onClick:$e,className:"btn btn-outline-danger rounded-pill px-5 py-3 d-flex align-items-center",children:[c("i",{className:"bi bi-trash me-2"}),"Tm Mali Verileri Sfrla"]})})]}),h&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[c("h5",{className:"modal-title",children:v?"Gelir Dzenle":"Yeni Gelir Ekle"}),c("button",{type:"button",className:"btn-close",onClick:Q})]}),c("div",{className:"modal-body",children:m("form",{onSubmit:ee,children:[c("input",{type:"hidden",name:"type",value:"income"}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"date",className:"form-label",children:"Tarih *"}),c("input",{type:"date",id:"date",name:"date",value:L.date,onChange:ie,className:"form-control form-control-custom",required:!0})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"source",className:"form-label",children:"Kaynak *"}),c("input",{type:"text",id:"source",name:"source",value:L.source,onChange:ie,className:"form-control form-control-custom",placeholder:"Gelir kaynan girin",required:!0})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"partnerId",className:"form-label",children:"Ortak (Opsiyonel)"}),m("select",{id:"partnerId",name:"partnerId",value:L.partnerId,onChange:ie,className:"form-select form-control-custom",children:[c("option",{value:"",children:"Ortak sein (opsiyonel)"}),r.map(pe=>m("option",{value:pe.id,children:[pe.name," (Bakiye: ",ge(pe.balance||0),")"]},pe.id))]}),c("div",{className:"form-text",children:m("small",{className:"text-muted",children:[c("i",{className:"bi bi-info-circle me-1"}),"Ortak seilirse, bu gelir kasaya girer ve ortak alacakl olur."]})})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"amount",className:"form-label",children:"Tutar () *"}),c("input",{type:"number",id:"amount",name:"amount",value:L.amount,onChange:ie,className:"form-control form-control-custom",min:"0",step:"0.01",placeholder:"Tutar girin",required:!0})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"description",className:"form-label",children:"Aklama"}),c("textarea",{id:"description",name:"description",value:L.description,onChange:ie,className:"form-control form-control-custom",rows:"3",placeholder:"Aklama girin"})]}),m("div",{className:"d-flex justify-content-end gap-2",children:[c("button",{type:"button",onClick:Q,className:"btn btn-secondary",children:"ptal"}),c("button",{type:"submit",className:"btn btn-danger",children:v?"Gncelle":"Ekle"})]})]})})]})})}),p&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[c("h5",{className:"modal-title",children:v?"Gider Dzenle":"Yeni Gider Ekle"}),c("button",{type:"button",className:"btn-close",onClick:Q})]}),c("div",{className:"modal-body",children:m("form",{onSubmit:ee,children:[c("input",{type:"hidden",name:"type",value:"expense"}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"date",className:"form-label",children:"Tarih *"}),c("input",{type:"date",id:"date",name:"date",value:L.date,onChange:ie,className:"form-control form-control-custom",required:!0})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"source",className:"form-label",children:"Kaynak *"}),c("input",{type:"text",id:"source",name:"source",value:L.source,onChange:ie,className:"form-control form-control-custom",placeholder:"Gider kaynan girin",required:!0})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"partnerId",className:"form-label",children:"Ortak (Opsiyonel)"}),m("select",{id:"partnerId",name:"partnerId",value:L.partnerId,onChange:ie,className:"form-select form-control-custom",children:[c("option",{value:"",children:"Ortak sein (opsiyonel)"}),r.map(pe=>m("option",{value:pe.id,children:[pe.name," (Bakiye: ",ge(pe.balance||0),")"]},pe.id))]}),c("div",{className:"form-text",children:m("small",{className:"text-muted",children:[c("i",{className:"bi bi-info-circle me-1"}),"Ortak seilirse, ortak kendi cebinden der ve alacakl olur. Kasadan para dmez."]})})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"amount",className:"form-label",children:"Tutar () *"}),c("input",{type:"number",id:"amount",name:"amount",value:L.amount,onChange:ie,className:"form-control form-control-custom",min:"0",step:"0.01",placeholder:"Tutar girin",required:!0})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"description",className:"form-label",children:"Aklama"}),c("textarea",{id:"description",name:"description",value:L.description,onChange:ie,className:"form-control form-control-custom",rows:"3",placeholder:"Aklama girin"})]}),m("div",{className:"d-flex justify-content-end gap-2",children:[c("button",{type:"button",onClick:Q,className:"btn btn-secondary",children:"ptal"}),c("button",{type:"submit",className:"btn btn-danger",children:v?"Gncelle":"Ekle"})]})]})})]})})}),te&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[c("h5",{className:"modal-title",children:"Tm Mali Verileri Sfrla"}),c("button",{type:"button",className:"btn-close",onClick:Oe})]}),m("div",{className:"modal-body",children:[c("p",{className:"fw-bold text-danger",children:"Tm mali verileri sfrlamak istediinizden emin misiniz?"}),c("p",{className:"mb-2",children:"Bu ilem unlar silecek/sfrlayacak:"}),m("ul",{className:"text-start",children:[c("li",{children:"Tm kasa ilemleri (transactions)"}),c("li",{children:"Tm ortak bakiyeleri"}),c("li",{children:"Tm anlama mali bilgileri (demeler, tutarlar)"}),c("li",{children:"Tm site bekleyen demeleri"}),c("li",{children:"Tm firma kredi bilgileri"})]}),c("p",{className:"text-danger fw-bold",children:"Bu ilem geri alnamaz!"})]}),m("div",{className:"modal-footer",children:[c("button",{type:"button",className:"btn btn-secondary",onClick:Oe,children:"ptal"}),c("button",{type:"button",className:"btn btn-danger",onClick:fe,children:"Sfrla"})]})]})})})]})},d1e=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState(!0),[s,o]=D.useState(!1),[l,A]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[v,C]=D.useState(!1),[I,F]=D.useState(null),[E,R]=D.useState(null),[L,N]=D.useState({name:"",sharePercentage:"",balance:0}),[P,x]=D.useState(""),[k,y]=D.useState(""),[S,_]=D.useState(null),[M,K]=D.useState(!1),[z,ae]=D.useState({}),[te,G]=D.useState(""),[ue,de]=D.useState(""),[T,O]=D.useState(""),[V,Q]=D.useState("");D.useEffect(()=>{(async()=>{try{const[Ne,ve]=await Promise.all([ph(),lc()]);e(Ne),n(ve)}catch(Ne){console.error("Error fetching data:",Ne)}finally{a(!1)}})()},[]);const X=()=>{N({name:"",sharePercentage:"",balance:0}),R(null),o(!0)},ie=Ae=>{N({name:Ae.name||"",sharePercentage:Ae.sharePercentage||"",balance:Ae.balance||0}),R(Ae),o(!0)},ee=async Ae=>{var ve;if(await window.showConfirm("Ortak Silme","Bu orta silmek istediinize emin misiniz?","warning"))try{await lq(Ae)?(e(t.filter(Ke=>Ke.id!==Ae)),await Un({user:"Admin",action:`Ortak silindi: ${((ve=t.find(Ke=>Ke.id===Ae))==null?void 0:ve.name)||"Bilinmeyen Ortak"}`})):await window.showAlert("Hata","Ortak silinirken bir hata olutu.","error")}catch(Ce){console.error("Error deleting partner:",Ce),await window.showAlert("Hata","Ortak silinirken bir hata olutu.","error")}},Z=()=>{o(!1),A(!1),d(!1),f(!1),g(!1),C(!1),F(null),R(null),_(null),x(""),y(""),G(""),de(""),O(""),Q(""),K(!1),ae({})},re=()=>{d(!1),F(null)},ce=()=>{const Ae={};t.forEach(Ne=>{Ae[Ne.id]="receive"}),ae(Ae),A(!0)},Y=Ae=>{F(Ae),d(!0)},ge=Ae=>{F(Ae),G(""),de(""),f(!0)},q=Ae=>{F(Ae),O(""),Q(""),g(!0)},W=Ae=>{F(Ae),C(!0)},xe=async()=>{if(!I||!te){await window.showAlert("Eksik Bilgi","Ltfen ekim miktarn girin.","warning");return}const Ae=parseFloat(te);if(isNaN(Ae)||Ae<=0){await window.showAlert("Geersiz Miktar","Geerli bir miktar girin.","warning");return}const Ne=$e(I);if(Ae>Ne){await window.showAlert("Yetersiz Bakiye",`Bu ortak iin yeterli bakiye bulunmamaktadr. Mevcut net bakiye: ${Le(Math.abs(Ne))} (${Ne>=0?"Alacakl":"Borlu"})`,"warning");return}try{const ve={date:new Date().toISOString().split("T")[0],type:"expense",source:`Ortak Para ekimi - ${I.name}`,description:`${I.name} tarafndan alacak ekimi${ue?` - ${ue}`:""}`,amount:-Ae};await hl(ve);const Ce=t.map(Ve=>Ve.id===I.id?{...Ve,balance:(Ve.balance||0)-Ae}:Ve);e(Ce);const Ke=Ce.find(Ve=>Ve.id===I.id);Ke&&await gh(Ke.id,Ke),await Un({user:"Admin",action:`${I.name} tarafndan ${Le(Ae)} alacak ekildi`}),f(!1),F(null),G(""),de(""),await window.showAlert("ekim Baarl",`${I.name} tarafndan ${Le(Ae)} baaryla ekildi.`,"success")}catch(ve){console.error("Error processing withdrawal:",ve),await window.showAlert("Hata","Para ekimi srasnda bir hata olutu.","error")}},ye=async()=>{if(!I||!T){await window.showAlert("Eksik Bilgi","Ltfen avans miktarn girin.","warning");return}const Ae=parseFloat(T);if(isNaN(Ae)||Ae<=0){await window.showAlert("Geersiz Miktar","Geerli bir miktar girin.","warning");return}try{const Ne={date:new Date().toISOString().split("T")[0],type:"expense",source:`Ortak Avans demesi - ${I.name}`,description:`${I.name} tarafndan alnan avans demesi${V?` - ${V}`:""}`,amount:-Ae};await hl(Ne);const ve=t.map(Ke=>Ke.id===I.id?{...Ke,balance:(Ke.balance||0)-Ae}:Ke);e(ve);const Ce=ve.find(Ke=>Ke.id===I.id);Ce&&await gh(Ce.id,Ce),await Un({user:"Admin",action:`${I.name} tarafndan ${Le(Ae)} avans alnd`}),g(!1),F(null),O(""),Q(""),await window.showAlert("Avans Baarl",`${I.name} tarafndan ${Le(Ae)} avans baaryla alnd.`,"success")}catch(Ne){console.error("Error processing advance payment:",Ne),await window.showAlert("Hata","Avans demesi srasnda bir hata olutu.","error")}},Ue=()=>I?r.filter(ve=>{var Ce;return!!(ve.partnerId===I.id.toString()||(Ce=ve.source)!=null&&Ce.includes(I.name))}).map((ve,Ce)=>({...ve,uniqueKey:`${ve.id}-${Ce}`})).sort((ve,Ce)=>{const Ke=new Date(Ce.date)-new Date(ve.date);return Ke!==0?Ke:Ce.id-ve.id}):[],Me=()=>{const Ae=Ue();let Ne=0,ve=0;return Ae.forEach(Ce=>{var Ke;if(Ce.partnerId===I.id.toString()){if(Ce.type==="income")Ne+=Math.abs(Ce.amount);else if(Ce.type==="expense"&&Ce.amount===0){const Ve=Ce.originalAmount||0;Ne+=Ve}}else(Ke=Ce.source)!=null&&Ke.includes(I.name)&&(Ce.source.includes("Ortak Alaca")?Ne+=Math.abs(Ce.originalAmount||Ce.amount):(Ce.source.includes("Ortak Avans demesi")||Ce.source.includes("Ortak Para ekimi"))&&(ve+=Math.abs(Ce.amount)))}),{totalCredit:Ne,totalDebit:ve,balance:Ne-ve}},$e=Ae=>{console.log("Calculating partner balance from transactions:",Ae.name);let Ne=0,ve=0;r.filter(Ve=>{var ot;return!!(Ve.partnerId===Ae.id.toString()||(ot=Ve.source)!=null&&ot.includes(Ae.name))}).forEach(Ve=>{var ot;if(Ve.partnerId===Ae.id.toString()){if(Ve.type==="income")Ne+=Math.abs(Ve.amount);else if(Ve.type==="expense"&&Ve.amount===0){const pt=Ve.originalAmount||0;Ne+=pt}}else(ot=Ve.source)!=null&&ot.includes(Ae.name)&&(Ve.source.includes("Ortak Alaca")?Ne+=Math.abs(Ve.originalAmount||Ve.amount):(Ve.source.includes("Ortak Avans demesi")||Ve.source.includes("Ortak Para ekimi"))&&(ve+=Math.abs(Ve.amount)))});const Ke=Ne-ve;return console.log(`Partner ${Ae.name} balance calculation: Credit=${Ne}, Debit=${ve}, Balance=${Ke}`),Ke},fe=Ae=>{const{name:Ne,value:ve}=Ae.target;N({...L,[Ne]:ve})},Oe=async Ae=>{if(Ae.preventDefault(),!L.name||!L.sharePercentage){await window.showAlert("Eksik Bilgi","Ltfen zorunlu alanlar doldurunuz.","warning");return}try{if(E){const Ne=await gh(E.id,L);Ne&&(e(t.map(ve=>ve.id===E.id?Ne:ve)),o(!1),R(null),await Un({user:"Admin",action:`Ortak gncellendi: ${L.name}`}),await window.showAlert("Baarl","Ortak baaryla gncellendi.","success"))}else{const Ne=await oq(L);Ne&&(e([...t,Ne]),o(!1),await Un({user:"Admin",action:`Yeni ortak eklendi: ${L.name}`}),await window.showAlert("Baarl","Yeni ortak baaryla eklendi.","success"))}}catch(Ne){console.error("Error saving partner:",Ne),await window.showAlert("Hata","Ortak kaydedilirken bir hata olutu.","error")}},Re=()=>I?r.filter(Ae=>Ae.type==="expense"&&Ae.source===`Ortak demesi - ${I.name}`||Ae.type==="expense"&&Ae.source===`Ortak Avans demesi - ${I.name}`||Ae.type==="expense"&&Ae.source===`Ortak Para ekimi - ${I.name}`||Ae.partnerId===I.id.toString()).sort((Ae,Ne)=>{const ve=new Date(Ne.date)-new Date(Ae.date);return ve!==0?ve:Ne.id-Ae.id}):[],He=()=>{const Ae=Re();if(Ae.length===0)return{totalPayments:0,totalAmount:0,averageAmount:0,firstPayment:null,lastPayment:null};const Ne=Ae.reduce((Ke,Ve)=>Ke+Math.abs(Ve.amount),0),ve=Ne/Ae.length,Ce=[...Ae].sort((Ke,Ve)=>new Date(Ke.date)-new Date(Ve.date));return{totalPayments:Ae.length,totalAmount:Ne,averageAmount:ve,firstPayment:Ce[0],lastPayment:Ce[Ce.length-1]}};t.reduce((Ae,Ne)=>Ae+Ne.amountOwed,0);const pe=r.reduce((Ae,Ne)=>Ae+Ne.amount,0),Le=Ae=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(Ae),lt=async()=>{if(M)return;if(!P){await window.showAlert("Eksik Bilgi","Ltfen datm miktarn girin.","warning");return}const Ae=parseFloat(P);if(isNaN(Ae)||Ae<=0){await window.showAlert("Geersiz Miktar","Geerli bir miktar girin.","warning");return}if(Ae>pe){await window.showAlert("Yetersiz Bakiye",`Kasada yeterli para bulunmamaktadr. Kasadaki tutar: ${Le(pe)}, Datm miktar: ${Le(Ae)}`,"warning");return}K(!0),A(!1);try{const Ne=t.map(Ce=>{const Ke=parseFloat(Ce.sharePercentage)||0,Ve=Ae*Ke/100,ot=z[Ce.id]||"receive";return{...Ce,balance:(Ce.balance||0)+Ve}});e(Ne);let ve=0;for(const Ce of Ne)try{console.log("Updating partner in database:",Ce.name,Ce);const Ke=await gh(Ce.id,Ce);console.log("Partner updated successfully:",Ke),ve++}catch(Ke){throw console.error("Error updating partner:",Ce.name,Ke),Ke}for(const Ce of Ne){const Ke=parseFloat(Ce.sharePercentage)||0,Ve=Ae*Ke/100,ot=z[Ce.id]||"receive";if(Ve>0)if(ot==="keep_inside"){const pt={date:new Date().toISOString().split("T")[0],type:"expense",source:`Ortak Alaca - ${Ce.name}`,description:`${Ce.name} iin ortaklk pay (${Ke}%) - erde Brakld`,amount:0,originalAmount:Ve};try{await hl(pt)}catch(Be){console.error("Error creating record transaction:",Be)}const Bt={date:new Date().toISOString().split("T")[0],type:"partner_credit",category:"Ortak Alacakl",description:`${Ce.name} iin ortaklk pay (${Ke}%) - erde Brakld`,amount:Ve,partnerId:Ce.id,partnerName:Ce.name,status:"pending"};try{await bq(Bt),console.log("Accounting record created for partner:",Ce.name)}catch(Be){console.error("Error creating accounting record:",Be)}}else{const pt={date:new Date().toISOString().split("T")[0],type:"expense",source:`Ortak demesi - ${Ce.name}`,description:`${Ce.name} iin ortaklk pay (${Ke}%) - dendi`,amount:-Ve};try{await hl(pt)}catch(Bt){console.error("Error creating expense transaction:",Bt)}}}await Un({user:"Admin",action:`Ortak demeleri datld: ${Le(Ae)}`}),_("distribution"),setTimeout(()=>{_(null)},3e3),await window.showAlert("Datm Baarl",`demeler baaryla datld. ${ve} ortak gncellendi.`,"success"),x(""),y("")}catch(Ne){console.error("Error distributing payments:",Ne),await window.showAlert("Hata","deme datm srasnda bir hata olutu.","error")}finally{K(!1)}};return i?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Ortaklar ykleniyor..."})]})}):m("div",{className:"container-fluid",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[c("h2",{className:"h3 fw-bold",children:"Ortak Paylar"}),m("button",{onClick:ce,className:"btn btn-primary-gradient btn-icon",children:[c("i",{className:"bi bi-currency-dollar me-1"}),"deme Yap"]})]}),c("div",{className:"row",children:c("div",{className:"col-12 mb-4",children:c("div",{className:"card custom-card shadow-sm",children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[c("h5",{className:"card-title mb-0",children:"Ortaklar"}),m("button",{onClick:X,className:"btn btn-primary btn-sm btn-icon",children:[c("i",{className:"bi bi-plus-lg"}),"Ortak Ekle"]})]}),c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Ortak Ad"}),c("th",{children:"Pay (%)"}),c("th",{children:"Bakiye"}),c("th",{children:"lemler"})]})}),m("tbody",{children:[t.map(Ae=>m("tr",{children:[c("td",{className:"fw-medium",children:Ae.name}),m("td",{children:[Ae.sharePercentage,"%"]}),c("td",{children:(()=>{const Ne=$e(Ae);return m("span",{className:`fw-bold ${Ne>=0?"text-success":"text-danger"}`,children:[Le(Math.abs(Ne)),c("small",{className:"d-block text-muted",children:Ne>=0?"Alacakl":"Borlu"})]})})()}),c("td",{children:m("div",{className:"d-flex gap-2",children:[c("button",{onClick:()=>Y(Ae),className:"btn btn-sm btn-outline-info",title:"deme Gemii",children:c("i",{className:"bi bi-eye"})}),$e(Ae)>0&&c("button",{onClick:()=>ge(Ae),className:"btn btn-sm btn-outline-success",title:"Para ek",children:c("i",{className:"bi bi-cash-coin"})}),c("button",{onClick:()=>q(Ae),className:"btn btn-sm btn-outline-warning",title:"Avans Al",children:c("i",{className:"bi bi-arrow-up-circle"})}),c("button",{onClick:()=>W(Ae),className:"btn btn-sm btn-outline-primary",title:"Muhasebe Kaytlar",children:c("i",{className:"bi bi-journal-text"})}),c("button",{onClick:()=>ie(Ae),className:"btn btn-sm btn-outline-secondary",title:"Dzenle",children:c("i",{className:"bi bi-pencil"})}),c("button",{onClick:()=>ee(Ae.id),className:"btn btn-sm btn-outline-danger",title:"Sil",children:c("i",{className:"bi bi-trash"})})]})})]},Ae.id)),t.length===0&&c("tr",{children:c("td",{colSpan:"4",className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-people"}),c("p",{className:"mb-3",children:"Henz ortak bulunmamaktadr."}),c("button",{onClick:X,className:"btn btn-primary-gradient",children:"Ortak Ekle"})]})})})]})]})})]})})})}),s&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[c("h5",{className:"modal-title",children:E?"Ortak Dzenle":"Yeni Ortak Ekle"}),c("button",{type:"button",className:"btn-close",onClick:Z})]}),c("div",{className:"modal-body",children:m("form",{onSubmit:Oe,children:[m("div",{className:"mb-3",children:[c("label",{htmlFor:"name",className:"form-label",children:"Ortak Ad *"}),c("input",{type:"text",id:"name",name:"name",value:L.name,onChange:fe,className:"form-control form-control-custom",placeholder:"Ortak adn girin"})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"sharePercentage",className:"form-label",children:"Pay (%) *"}),c("input",{type:"number",id:"sharePercentage",name:"sharePercentage",value:L.sharePercentage,onChange:fe,className:"form-control form-control-custom",min:"0",max:"100",placeholder:"0-100 aras"})]}),m("div",{className:"d-flex justify-content-end gap-2",children:[c("button",{type:"button",onClick:()=>{Z()},className:"btn btn-secondary",children:"ptal"}),c("button",{type:"submit",className:"btn btn-primary-gradient",onClick:()=>{setTimeout(()=>{Z()},100)},children:E?"Gncelle":"Ekle"})]})]})})]})})}),l&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[c("h5",{className:"modal-title",children:"deme Datm"}),c("button",{type:"button",className:"btn-close",onClick:Z})]}),m("div",{className:"modal-body",children:[m("div",{className:"alert alert-info",children:[c("i",{className:"bi bi-info-circle me-2"}),"Kasa Bakiyesi: ",c("strong",{children:Le(pe)})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label",children:"Datm Miktar ()"}),c("input",{type:"number",className:"form-control form-control-custom",value:P,onChange:Ae=>x(Ae.target.value),min:"0",step:"0.01",placeholder:"Datlacak miktar girin"})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label",children:"Notlar"}),c("textarea",{className:"form-control form-control-custom",value:k,onChange:Ae=>y(Ae.target.value),rows:"3",placeholder:"deme ile ilgili notlar..."})]}),t.length>0&&m("div",{className:"mb-3",children:[c("h6",{children:"Datm zeti:"}),c("ul",{className:"list-group",children:t.map(Ae=>{const Ne=parseFloat(Ae.sharePercentage)||0,ve=P?parseFloat(P)*Ne/100:0,Ce=z[Ae.id]||"receive";return m("li",{className:"list-group-item",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[m("span",{className:"fw-medium",children:[Ae.name," (",Ne,"%)"]}),c("span",{className:"fw-bold",children:Le(ve)})]}),m("div",{className:"d-flex gap-2",children:[m("div",{className:"form-check form-check-inline",children:[c("input",{className:"form-check-input",type:"radio",name:`paymentChoice_${Ae.id}`,id:`receive_${Ae.id}`,value:"receive",checked:Ce==="receive",onChange:Ke=>ae({...z,[Ae.id]:Ke.target.value})}),m("label",{className:"form-check-label",htmlFor:`receive_${Ae.id}`,children:[c("i",{className:"bi bi-arrow-down-circle text-success me-1"}),"demeyi Al"]})]}),m("div",{className:"form-check form-check-inline",children:[c("input",{className:"form-check-input",type:"radio",name:`paymentChoice_${Ae.id}`,id:`keep_inside_${Ae.id}`,value:"keep_inside",checked:Ce==="keep_inside",onChange:Ke=>ae({...z,[Ae.id]:Ke.target.value})}),m("label",{className:"form-check-label",htmlFor:`keep_inside_${Ae.id}`,children:[c("i",{className:"bi bi-bank text-primary me-1"}),"erde Brak"]})]})]})]},Ae.id)})})]}),m("div",{className:"d-flex justify-content-end gap-2",children:[c("button",{type:"button",onClick:()=>{Z()},className:"btn btn-secondary",disabled:M,children:"ptal"}),c("button",{type:"button",className:"btn btn-success",onClick:()=>{lt(),Z()},disabled:M,children:M?m(kr,{children:[c("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),"Datlyor..."]}):m(kr,{children:[c("i",{className:"bi bi-currency-dollar me-1"}),"demeyi Dat"]})})]})]})]})})}),S&&m("div",{className:"toast show position-fixed bottom-0 end-0 m-3",style:{zIndex:1050},children:[m("div",{className:"toast-header bg-success text-white",children:[c("i",{className:"bi bi-check-circle me-2"}),c("strong",{className:"me-auto",children:"deme Baarl"}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>_(null)})]}),c("div",{className:"toast-body",children:S==="distribution"?"demeler baaryla datld ve kasa sfrland.":"Ortak demesi baaryla gerekletirildi."})]}),u&&I&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog modal-xl",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-person-circle me-2"}),I.name," - deme Gemii"]}),c("button",{type:"button",className:"btn-close",onClick:re})]}),c("div",{className:"modal-body",children:(()=>{const Ae=He(),Ne=Re();return m(kr,{children:[m("div",{className:"row mb-4 g-3",children:[c("div",{className:"col-md-3",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"12px",overflow:"hidden"},children:m("div",{className:"card-body text-center",children:[c("div",{className:"rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center mx-auto mb-2",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-currency-dollar text-primary fs-5"})}),c("h6",{className:"text-muted mb-1",children:"Toplam deme"}),c("h4",{className:"mb-0 fw-bold text-primary",children:Le(Ae.totalAmount)})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"12px",overflow:"hidden"},children:m("div",{className:"card-body text-center",children:[c("div",{className:"rounded-circle bg-success bg-opacity-10 d-flex align-items-center justify-content-center mx-auto mb-2",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-list-check text-success fs-5"})}),c("h6",{className:"text-muted mb-1",children:"deme Says"}),c("h4",{className:"mb-0 fw-bold text-success",children:Ae.totalPayments})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"12px",overflow:"hidden"},children:m("div",{className:"card-body text-center",children:[c("div",{className:"rounded-circle bg-info bg-opacity-10 d-flex align-items-center justify-content-center mx-auto mb-2",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-graph-up text-info fs-5"})}),c("h6",{className:"text-muted mb-1",children:"Ortalama deme"}),c("h4",{className:"mb-0 fw-bold text-info",children:Le(Ae.averageAmount)})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"12px",overflow:"hidden"},children:m("div",{className:"card-body text-center",children:[c("div",{className:"rounded-circle bg-warning bg-opacity-10 d-flex align-items-center justify-content-center mx-auto mb-2",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-percent text-warning fs-5"})}),c("h6",{className:"text-muted mb-1",children:"Pay Oran"}),m("h4",{className:"mb-0 fw-bold text-warning",children:[I.sharePercentage,"%"]})]})})})]}),Ae.firstPayment&&Ae.lastPayment&&c("div",{className:"alert alert-light border mb-4",children:m("div",{className:"row",children:[c("div",{className:"col-md-6",children:m("div",{className:"d-flex align-items-center",children:[c("i",{className:"bi bi-calendar-event text-primary me-2"}),m("div",{children:[c("small",{className:"text-muted",children:"lk deme"}),c("div",{className:"fw-medium",children:Ae.firstPayment.date})]})]})}),c("div",{className:"col-md-6",children:m("div",{className:"d-flex align-items-center",children:[c("i",{className:"bi bi-calendar-check text-success me-2"}),m("div",{children:[c("small",{className:"text-muted",children:"Son deme"}),c("div",{className:"fw-medium",children:Ae.lastPayment.date})]})]})})]})}),Ne.length>0?m("div",{className:"card border-0 shadow-sm",style:{borderRadius:"12px",overflow:"hidden"},children:[c("div",{className:"card-header bg-light border-0 py-3",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-clock-history me-2"}),"deme Detaylar (",Ne.length," deme)"]})}),c("div",{className:"card-body p-0",children:c("div",{className:"table-responsive",children:m("table",{className:"table table-hover mb-0",children:[c("thead",{className:"table-light",children:m("tr",{children:[m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-calendar me-1"}),"Tarih"]}),m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-currency-dollar me-1"}),"Tutar"]}),m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-chat-text me-1"}),"Aklama"]}),m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-hash me-1"}),"lem ID"]})]})}),c("tbody",{children:Ne.map((ve,Ce)=>m("tr",{className:"border-bottom",children:[c("td",{className:"py-3 px-4",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"32px",height:"32px"},children:c("i",{className:"bi bi-calendar3 text-primary",style:{fontSize:"12px"}})}),m("div",{children:[c("div",{className:"fw-medium",children:ve.date}),c("small",{className:"text-muted",children:new Date(ve.date).toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),c("td",{className:"py-3 px-4",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"32px",height:"32px"},children:c("i",{className:"bi bi-arrow-down-circle text-success",style:{fontSize:"12px"}})}),m("div",{children:[c("div",{className:"fw-bold text-success fs-6",children:Le(Math.abs(ve.amount))}),c("small",{className:"text-muted",children:"Ortaklk Pay"})]})]})}),c("td",{className:"py-3 px-4",children:c("div",{className:"text-muted small",children:ve.description||"Ortaklk pay demesi"})}),c("td",{className:"py-3 px-4",children:m("span",{className:"badge bg-light text-dark border",children:["#",ve.id]})})]},ve.id||Ce))})]})})})]}):m("div",{className:"text-center py-5",children:[c("div",{className:"bg-light bg-opacity-50 rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"80px",height:"80px"},children:c("i",{className:"bi bi-clock-history text-muted",style:{fontSize:"2rem"}})}),c("h6",{className:"text-muted mb-2",children:"deme Gemii Bulunamad"}),c("p",{className:"text-muted mb-0",children:"Bu ortak iin henz deme yaplmamtr."})]})]})})()}),c("div",{className:"modal-footer",children:m("button",{type:"button",className:"btn btn-secondary",onClick:re,children:[c("i",{className:"bi bi-x-circle me-1"}),"Kapat"]})})]})})}),h&&I&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-cash-coin me-2"}),I.name," - Para ekme"]}),c("button",{type:"button",className:"btn-close",onClick:Z})]}),m("div",{className:"modal-body",children:[c("div",{className:"alert alert-info",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[c("span",{children:"Mevcut Net Bakiye:"}),(()=>{const Ae=$e(I);return m("span",{className:`fw-bold fs-5 ${Ae>=0?"text-success":"text-danger"}`,children:[Le(Math.abs(Ae)),c("small",{className:"d-block text-muted",children:Ae>=0?"Alacakl":"Borlu"})]})})()]})}),m("div",{className:"mb-3",children:[c("label",{className:"form-label",children:"ekim Miktar ()"}),c("input",{type:"number",className:"form-control form-control-custom",value:te,onChange:Ae=>G(Ae.target.value),min:"0",max:I.balance||0,step:"0.01",placeholder:"ekilecek miktar girin"})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label",children:"Notlar"}),c("textarea",{className:"form-control form-control-custom",value:ue,onChange:Ae=>de(Ae.target.value),rows:"3",placeholder:"Para ekimi ile ilgili notlar..."})]}),m("div",{className:"d-flex justify-content-end gap-2",children:[c("button",{type:"button",onClick:Z,className:"btn btn-secondary",children:"ptal"}),m("button",{type:"button",className:"btn btn-success",onClick:xe,children:[c("i",{className:"bi bi-cash-coin me-1"}),"Para ek"]})]})]})]})})}),p&&I&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-arrow-up-circle me-2"}),I.name," - Avans demesi"]}),c("button",{type:"button",className:"btn-close",onClick:Z})]}),m("div",{className:"modal-body",children:[m("div",{className:"alert alert-warning",children:[m("div",{className:"d-flex justify-content-between align-items-center",children:[c("span",{children:"Mevcut Net Bakiye:"}),(()=>{const Ae=$e(I);return m("span",{className:`fw-bold fs-5 ${Ae>=0?"text-success":"text-danger"}`,children:[Le(Math.abs(Ae)),c("small",{className:"d-block text-muted",children:Ae>=0?"Alacakl":"Borlu"})]})})()]}),m("small",{className:"text-muted mt-2 d-block",children:[c("i",{className:"bi bi-info-circle me-1"}),"Avans alndnda bakiye azalr ve ortak borlu duruma geer."]})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label",children:"Avans Miktar ()"}),c("input",{type:"number",className:"form-control form-control-custom",value:T,onChange:Ae=>O(Ae.target.value),min:"0",step:"0.01",placeholder:"Alnacak avans miktarn girin"})]}),m("div",{className:"mb-3",children:[c("label",{className:"form-label",children:"Notlar"}),c("textarea",{className:"form-control form-control-custom",value:V,onChange:Ae=>Q(Ae.target.value),rows:"3",placeholder:"Avans ile ilgili notlar..."})]}),m("div",{className:"d-flex justify-content-end gap-2",children:[c("button",{type:"button",onClick:Z,className:"btn btn-secondary",children:"ptal"}),m("button",{type:"button",className:"btn btn-warning",onClick:ye,children:[c("i",{className:"bi bi-arrow-up-circle me-1"}),"Avans Al"]})]})]})]})})}),v&&I&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog modal-xl",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[m("h5",{className:"modal-title",children:[c("i",{className:"bi bi-journal-text me-2"}),I.name," - Muhasebe Kaytlar"]}),c("button",{type:"button",className:"btn-close",onClick:Z})]}),c("div",{className:"modal-body",children:(()=>{const Ae=Me(),Ne=Ue();return m(kr,{children:[m("div",{className:"row mb-4 g-3",children:[c("div",{className:"col-md-3",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"12px"},children:m("div",{className:"card-body text-center",children:[c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-arrow-down-circle text-primary",style:{fontSize:"1.5rem"}})}),c("h6",{className:"card-title text-muted mb-2",children:"Ortak Alacakl"}),c("h4",{className:"text-primary fw-bold mb-0",children:Le(Ae.totalCredit)}),c("small",{className:"text-muted",children:"Kasa Borlu"})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"12px"},children:m("div",{className:"card-body text-center",children:[c("div",{className:"bg-success bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-arrow-up-circle text-success",style:{fontSize:"1.5rem"}})}),c("h6",{className:"card-title text-muted mb-2",children:"Ortak Borlu"}),c("h4",{className:"text-success fw-bold mb-0",children:Le(Ae.totalDebit)}),c("small",{className:"text-muted",children:"Kasa Alacakl"})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"12px"},children:m("div",{className:"card-body text-center",children:[c("div",{className:`bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3 ${Ae.balance>=0?"bg-success":"bg-danger"}`,style:{width:"48px",height:"48px"},children:c("i",{className:`bi bi-calculator ${Ae.balance>=0?"text-success":"text-danger"}`,style:{fontSize:"1.5rem"}})}),c("h6",{className:"card-title text-muted mb-2",children:"Net Bakiye"}),c("h4",{className:`fw-bold mb-0 ${Ae.balance>=0?"text-success":"text-danger"}`,children:Le(Math.abs(Ae.balance))}),c("small",{className:"text-muted",children:Ae.balance>=0?"Ortak Alacakl":"Ortak Borlu"})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"12px"},children:m("div",{className:"card-body text-center",children:[c("div",{className:"bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"48px",height:"48px"},children:c("i",{className:"bi bi-list-ul text-info",style:{fontSize:"1.5rem"}})}),c("h6",{className:"card-title text-muted mb-2",children:"Toplam lem"}),c("h4",{className:"text-info fw-bold mb-0",children:Ne.length}),c("small",{className:"text-muted",children:"Kayt Says"})]})})})]}),Ne.length>0?m("div",{className:"card border-0 shadow-sm",style:{borderRadius:"12px",overflow:"hidden"},children:[c("div",{className:"card-header bg-light border-0 py-3",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-journal-text me-2"}),"Muhasebe Kaytlar (",Ne.length," kayt)"]})}),c("div",{className:"card-body p-0",children:c("div",{className:"table-responsive",children:m("table",{className:"table table-hover mb-0",children:[c("thead",{className:"table-light",children:m("tr",{children:[m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-calendar me-1"}),"Tarih"]}),m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-journal-text me-1"}),"Aklama"]}),m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-arrow-down-circle me-1"}),"Ortak Alacakl"]}),m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-arrow-up-circle me-1"}),"Ortak Borlu"]}),m("th",{className:"border-0 py-3 px-4",children:[c("i",{className:"bi bi-calculator me-1"}),"Bakiye"]})]})}),c("tbody",{children:Ne.map((ve,Ce)=>{var pt;let Ke=0,Ve=0,ot=ve.description||ve.source;return ve.partnerId===I.id.toString()?ve.type==="income"?Ke=Math.abs(ve.amount):ve.type==="expense"&&ve.amount===0&&(Ke=ve.originalAmount||0):(pt=ve.source)!=null&&pt.includes(I.name)&&(ve.source.includes("Ortak Alaca")?Ke=Math.abs(ve.originalAmount||ve.amount):(ve.source.includes("Ortak Avans demesi")||ve.source.includes("Ortak Para ekimi"))&&(Ve=Math.abs(ve.amount))),m("tr",{className:"border-bottom",children:[c("td",{className:"py-3 px-4",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"32px",height:"32px"},children:c("i",{className:"bi bi-calendar3 text-primary",style:{fontSize:"12px"}})}),m("div",{children:[c("div",{className:"fw-medium",children:ve.date}),c("small",{className:"text-muted",children:new Date(ve.date).toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})}),c("td",{className:"py-3 px-4",children:c("div",{className:"text-muted small",children:ot})}),c("td",{className:"py-3 px-4",children:Ke>0&&c("div",{className:"fw-bold text-primary",children:Le(Ke)})}),c("td",{className:"py-3 px-4",children:Ve>0&&c("div",{className:"fw-bold text-success",children:Le(Ve)})}),c("td",{className:"py-3 px-4",children:(()=>{const Bt=Ke-Ve,Be=Bt>=0;return m("div",{className:`fw-bold ${Be?"text-success":"text-danger"}`,children:[Le(Math.abs(Bt)),c("small",{className:"d-block text-muted",children:Be?"Alacakl":"Borlu"})]})})()})]},ve.uniqueKey||`${ve.id}-${Ce}`)})})]})})})]}):m("div",{className:"text-center py-5",children:[c("div",{className:"bg-light bg-opacity-50 rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3",style:{width:"80px",height:"80px"},children:c("i",{className:"bi bi-journal-text text-muted",style:{fontSize:"2rem"}})}),c("h6",{className:"text-muted mb-2",children:"Muhasebe Kayd Bulunamad"}),c("p",{className:"text-muted mb-0",children:"Bu ortak iin henz muhasebe kayd bulunmamaktadr."})]})]})})()}),c("div",{className:"modal-footer",children:m("button",{type:"button",className:"btn btn-secondary",onClick:Z,children:[c("i",{className:"bi bi-x-circle me-1"}),"Kapat"]})})]})})})]})},h1e=()=>{const[t,e]=D.useState("sites"),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState([]),[l,A]=D.useState(!0);D.useEffect(()=>{(async()=>{try{const[R,L,N]=await Promise.all([cq(),Aq(),uq()]);n(R),a(L),o(N)}catch(R){console.error("Error fetching archived data:",R)}finally{A(!1)}})()},[]);const u=async E=>{try{await dq(E)?n(r.filter(L=>L.id!==E)):console.error("Failed to restore site")}catch(R){console.error("Error restoring site:",R)}},d=async E=>{try{await hq(E)?a(i.filter(L=>L.id!==E)):console.error("Failed to restore company")}catch(R){console.error("Error restoring company:",R)}},h=async E=>{try{await fq(E)?o(s.filter(L=>L.id!==E)):console.error("Failed to restore agreement")}catch(R){console.error("Error restoring agreement:",R)}},f=async E=>{if(await window.showConfirm("Kalc Silme","Bu eyi kalc olarak silmek istediinize emin misiniz?","error"))try{await uk(E)?n(r.filter(N=>N.id!==E)):await window.showAlert("Hata","e silinirken bir hata olutu.","error")}catch(L){console.error("Error deleting site:",L),await window.showAlert("Hata","e silinirken bir hata olutu.","error")}},p=async E=>{if(await window.showConfirm("Kalc Silme","Bu eyi kalc olarak silmek istediinize emin misiniz?","error"))try{await dk(E)?a(i.filter(N=>N.id!==E)):await window.showAlert("Hata","e silinirken bir hata olutu.","error")}catch(L){console.error("Error deleting company:",L),await window.showAlert("Hata","e silinirken bir hata olutu.","error")}},g=async E=>{if(await window.showConfirm("Kalc Silme","Bu eyi kalc olarak silmek istediinize emin misiniz?","error"))try{await hk(E)?o(s.filter(N=>N.id!==E)):await window.showAlert("Hata","e silinirken bir hata olutu.","error")}catch(L){console.error("Error deleting agreement:",L),await window.showAlert("Hata","e silinirken bir hata olutu.","error")}},v=async()=>{if(await window.showConfirm("Tm Siteleri Kalc Sil",`Tm ${r.length} siteyi kalc olarak silmek istediinize emin misiniz? Bu ilem geri alnamaz!`,"error"))try{let R=0,L=0;for(const N of r)try{await uk(N.id)?R++:L++}catch(P){console.error("Error deleting site:",P),L++}n([]),await window.showAlert("lem Tamamland",`${R} site baaryla silindi. ${L} site silinirken hata olutu.`,"info")}catch(R){console.error("Error deleting all sites:",R),await window.showAlert("Hata","Siteler silinirken bir hata olutu.","error")}},C=async()=>{if(await window.showConfirm("Tm Firmalar Kalc Sil",`Tm ${i.length} firmay kalc olarak silmek istediinize emin misiniz? Bu ilem geri alnamaz!`,"error"))try{let R=0,L=0;for(const N of i)try{await dk(N.id)?R++:L++}catch(P){console.error("Error deleting company:",P),L++}a([]),await window.showAlert("lem Tamamland",`${R} firma baaryla silindi. ${L} firma silinirken hata olutu.`,"info")}catch(R){console.error("Error deleting all companies:",R),await window.showAlert("Hata","Firmalar silinirken bir hata olutu.","error")}},I=async()=>{if(await window.showConfirm("Tm Anlamalar Kalc Sil",`Tm ${s.length} anlamay kalc olarak silmek istediinize emin misiniz? Bu ilem geri alnamaz!`,"error"))try{let R=0,L=0;for(const N of s)try{await hk(N.id)?R++:L++}catch(P){console.error("Error deleting agreement:",P),L++}o([]),await window.showAlert("lem Tamamland",`${R} anlama baaryla silindi. ${L} anlama silinirken hata olutu.`,"info")}catch(R){console.error("Error deleting all agreements:",R),await window.showAlert("Hata","Anlamalar silinirken bir hata olutu.","error")}},F=E=>new Date(E).toLocaleDateString("tr-TR");return l?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Ariv ykleniyor..."})]})}):m("div",{className:"container-fluid",children:[c("div",{className:"mb-4",children:c("h2",{className:"h3 fw-bold",children:"Ariv"})}),m("ul",{className:"nav nav-tabs mb-4",children:[c("li",{className:"nav-item",children:c("button",{className:`nav-link ${t==="sites"?"active":""}`,onClick:()=>e("sites"),children:"Siteler"})}),c("li",{className:"nav-item",children:c("button",{className:`nav-link ${t==="companies"?"active":""}`,onClick:()=>e("companies"),children:"Firmalar"})}),c("li",{className:"nav-item",children:c("button",{className:`nav-link ${t==="agreements"?"active":""}`,onClick:()=>e("agreements"),children:"Anlamalar"})})]}),t==="sites"&&m("div",{className:"card custom-card shadow-sm",children:[m("div",{className:"card-header bg-primary-subtle d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-building me-2"}),"Siteler"]}),r.length>0&&m("button",{onClick:v,className:"btn btn-sm btn-danger",title:"Tm Siteleri Sil",children:[c("i",{className:"bi bi-trash me-1"}),"Tmn Sil"]})]}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Ad"}),c("th",{children:"Mahalle"}),c("th",{children:"Tr"}),c("th",{children:"Not"}),c("th",{children:"Ariv Tarihi"}),c("th",{children:"lemler"})]})}),m("tbody",{children:[r.map(E=>m("tr",{children:[c("td",{className:"fw-medium",children:E.name}),c("td",{children:E.neighborhood||"-"}),c("td",{children:"Site"}),c("td",{children:E.notes||"-"}),c("td",{children:F(E.archivedAt)}),c("td",{children:m("div",{className:"d-flex gap-2",children:[c("button",{onClick:()=>u(E.id),className:"btn btn-sm btn-outline-success",title:"Geri Al",children:c("i",{className:"bi bi-arrow-counterclockwise"})}),c("button",{onClick:()=>f(E.id),className:"btn btn-sm btn-outline-danger",title:"Sil",children:c("i",{className:"bi bi-trash"})})]})})]},E.id)),r.length===0&&c("tr",{children:c("td",{colSpan:"6",className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-archive"}),c("p",{className:"mb-0",children:"Arivde site bulunmamaktadr."})]})})})]})]})})})]}),t==="companies"&&m("div",{className:"card custom-card shadow-sm",children:[m("div",{className:"card-header bg-success-subtle d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-building-add me-2"}),"Firmalar"]}),i.length>0&&m("button",{onClick:C,className:"btn btn-sm btn-danger",title:"Tm Firmalar Sil",children:[c("i",{className:"bi bi-trash me-1"}),"Tmn Sil"]})]}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Ad"}),c("th",{children:"Tr"}),c("th",{children:"Not"}),c("th",{children:"Ariv Tarihi"}),c("th",{children:"lemler"})]})}),m("tbody",{children:[i.map(E=>m("tr",{children:[c("td",{className:"fw-medium",children:E.name}),c("td",{children:"Firma"}),c("td",{children:E.notes||"-"}),c("td",{children:F(E.archivedAt)}),c("td",{children:m("div",{className:"d-flex gap-2",children:[c("button",{onClick:()=>d(E.id),className:"btn btn-sm btn-outline-success",title:"Geri Al",children:c("i",{className:"bi bi-arrow-counterclockwise"})}),c("button",{onClick:()=>p(E.id),className:"btn btn-sm btn-outline-danger",title:"Sil",children:c("i",{className:"bi bi-trash"})})]})})]},E.id)),i.length===0&&c("tr",{children:c("td",{colSpan:"5",className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-archive"}),c("p",{className:"mb-0",children:"Arivde firma bulunmamaktadr."})]})})})]})]})})})]}),t==="agreements"&&m("div",{className:"card custom-card shadow-sm",children:[m("div",{className:"card-header bg-info-subtle d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-handshake me-2"}),"Anlamalar"]}),s.length>0&&m("button",{onClick:I,className:"btn btn-sm btn-danger",title:"Tm Anlamalar Sil",children:[c("i",{className:"bi bi-trash me-1"}),"Tmn Sil"]})]}),c("div",{className:"card-body",children:c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Ad"}),c("th",{children:"Tr"}),c("th",{children:"Not"}),c("th",{children:"Ariv Tarihi"}),c("th",{children:"lemler"})]})}),m("tbody",{children:[s.map(E=>m("tr",{children:[c("td",{className:"fw-medium",children:E.company}),c("td",{children:"Anlama"}),c("td",{children:E.notes||"-"}),c("td",{children:F(E.archivedAt)}),c("td",{children:m("div",{className:"d-flex gap-2",children:[c("button",{onClick:()=>h(E.id),className:"btn btn-sm btn-outline-success",title:"Geri Al",children:c("i",{className:"bi bi-arrow-counterclockwise"})}),c("button",{onClick:()=>g(E.id),className:"btn btn-sm btn-outline-danger",title:"Sil",children:c("i",{className:"bi bi-trash"})})]})})]},E.id)),s.length===0&&c("tr",{children:c("td",{colSpan:"5",className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-archive"}),c("p",{className:"mb-0",children:"Arivde anlama bulunmamaktadr."})]})})})]})]})})})]})]})},f1e=()=>{const[t,e]=D.useState("users"),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState(!0),[l,A]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState(null),[p,g]=D.useState({name:"",password:"",confirmPassword:"",role:"personnel"}),[v,C]=D.useState({currentPassword:"",newPassword:"",confirmNewPassword:""}),[I,F]=D.useState(!1),[E,R]=D.useState({}),[L,N]=D.useState("all"),[P,x]=D.useState(!1),[k,y]=D.useState([]),[S,_]=D.useState("all"),[M,K]=D.useState("all");D.useEffect(()=>{const q=async()=>{try{const xe=await B1();n(xe)}catch(xe){console.error("Error fetching users:",xe)}finally{o(!1)}},W=async()=>{try{const xe=await Yi();y(xe)}catch(xe){console.error("Error fetching sites:",xe)}};localStorage.setItem("firebaseEnabled","false"),x(!1),q(),W()},[]);const z=async()=>{A(!0);try{const W=(await pq()).sort((xe,ye)=>new Date(ye.timestamp)-new Date(xe.timestamp));a(W)}catch(q){console.error("Error fetching logs:",q)}finally{A(!1)}};D.useEffect(()=>{t==="logs"&&z()},[t]);const ae=r.filter(q=>L==="all"?!0:q.role===L),te=()=>!r||r.length===0?[]:[...new Set(r.map(W=>W.role).filter(Boolean))],G=()=>{g({name:"",password:"",confirmPassword:"",role:"personnel"}),f(null),d(!0)},ue=q=>{g({name:q.name||"",password:"",confirmPassword:"",role:q.role||"personnel"}),f(q),d(!0)},de=()=>{d(!1),f(null)},T=async()=>{if(await window.showConfirm("Tm Kullanclar Sil","Admin hari tm kullanclar siteden ve Firebase Auth'dan silmek istediinize emin misiniz? Bu ilem geri alnamaz!","error"))try{const W=r.filter($e=>$e.role!=="admin"&&$e.role!=="administrator"&&$e.email!=="admin@apartmecra.com");if(W.length===0){await window.showAlert("Bilgi","Silinecek kullanc bulunmamaktadr.","info");return}let xe=0,ye=0;const Ue=5;for(let $e=0;$e<W.length;$e+=Ue){const Oe=W.slice($e,$e+Ue).map(async Re=>{try{if(await fk(Re.id),Re.email)try{(await fetch("https://us-central1-apartmecra-elz.cloudfunctions.net/deleteUserByEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:Re.email})})).ok||console.warn(`Failed to delete user from Auth: ${Re.email}`)}catch(He){console.warn(`Error deleting user from Auth: ${Re.email}`,He)}return xe++,{success:!0,userId:Re.id}}catch(He){return console.error(`Error deleting user ${Re.id}:`,He),ye++,{success:!1,userId:Re.id,error:He.message}}});await Promise.all(Oe),$e+Ue<W.length&&await new Promise(Re=>setTimeout(Re,500))}const Me=await B1();n(Me),ye===0?await window.showAlert("Baarl",`${xe} kullanc baaryla silindi.`,"success"):await window.showAlert("Ksmen Baarl",`${xe} kullanc silindi, ${ye} kullanc silinemedi.`,"warning")}catch(W){console.error("Error deleting all users:",W),await window.showAlert("Hata","Kullanclar silinirken bir hata olutu: "+W.message,"error")}},O=async()=>{if(await window.showConfirm("Kullanclar Yeniden Olutur","Tm site ve firmalar iin kullanclar yeniden oluturmak istediinize emin misiniz? Mevcut kullanclar varsa gncellenecektir.","warning"))try{const[W,xe]=await Promise.all([Yi(),Xa()]),ye=W.filter(Ae=>Ae.status!=="archived"),Ue=xe.filter(Ae=>Ae.status!=="archived");let Me=0,$e=0,fe=0,Oe=0;const{createSiteUser:Re,createCompanyUser:He}=await xh(()=>import("./firebaseDb-cdf0b9a6.js").then(Ae=>Ae.Q),[]);for(const Ae of ye)try{await Re(Ae.id,Ae,!0),Me++}catch(Ne){console.error(`Error creating user for site ${Ae.id}:`,Ne),$e++}for(const Ae of Ue)try{await He(Ae.id,Ae,!0),fe++}catch(Ne){console.error(`Error creating user for company ${Ae.id}:`,Ne),Oe++}const pe=await B1();n(pe);const Le=Me+fe,lt=$e+Oe;lt===0?await window.showAlert("Baarl",`${Le} kullanc baaryla oluturuldu/gncellendi. (${Me} site, ${fe} firma)`,"success"):await window.showAlert("Ksmen Baarl",`${Le} kullanc oluturuldu, ${lt} kullanc oluturulamad. (${Me} site, ${fe} firma baarl)`,"warning")}catch(W){console.error("Error recreating users:",W),await window.showAlert("Hata","Kullanclar oluturulurken bir hata olutu: "+W.message,"error")}},V=async q=>{if(await window.showConfirm("Kullanc Silme","Bu kullancy silmek istediinize emin misiniz?","warning"))try{await fk(q)?n(r.filter(ye=>ye.id!==q)):await window.showAlert("Hata","Kullanc silinirken bir hata olutu.","error")}catch(xe){console.error("Error deleting user:",xe),await window.showAlert("Hata","Kullanc silinirken bir hata olutu.","error")}},Q=q=>{R(W=>({...W,[q]:!W[q]}))},X=q=>{switch(q){case"personnel":return"Personel";case"company":return"Firma Kullancs";case"site_user":return"Site Kullancs";case"observer":case"gzlemci":return"Gzlemci";case"administrator":case"admin":return"Ynetici";default:return"Kullanc"}},ie=()=>{const q=k.filter(ve=>!(S!=="all"&&ve.id!==S||M!=="all"&&ve.siteType!==M)),W=[];if(q.forEach(ve=>{(ve.siteType==="business_center"?["A"]:Array.from({length:parseInt(ve.blocks)||0},(Ke,Ve)=>String.fromCharCode(65+Ve))).forEach(Ke=>{const Ve=ve.siteType==="business_center"?parseInt(ve.panels)||0:(parseInt(ve.elevatorsPerBlock)||0)*2;for(let ot=1;ot<=Ve;ot++){const pt=`${ve.id}${Ke}${ot}`;W.push({panelId:pt,siteName:ve.name})}})}),W.length===0){window.showAlert("Bilgi","Yazdrlacak etiket bulunamad.","info");return}const xe=297,ye=120,Ue=20,Me=2,$e=5,fe=5,Oe=5,Re=3,He=xe-2*fe,pe=Ue+Re,Le=Math.floor(He/pe),lt=Me*Le,Ae=new Xt({orientation:"portrait",unit:"mm",format:"a4"});let Ne=0;for(;Ne<W.length;){Ne>0&&Ne%lt===0&&Ae.addPage();const ve=Ne%lt,Ce=Math.floor(ve/Me),Ke=ve%Me,Ve=$e+Ke*(ye+Oe),ot=fe+Ce*pe,pt=W[Ne];Ae.setFillColor(0,0,0),Ae.setDrawColor(0,0,0),Ae.setLineWidth(.1),Ae.rect(Ve,ot,ye,Ue,"F"),Ae.setFontSize(12),Ae.setFont("helvetica","bold"),Ae.setTextColor(255,255,255),Ae.text("PANEL",Ve+3,ot+6),Ae.setFontSize(16),Ae.setFont("helvetica","bold"),Ae.setTextColor(255,255,255),Ae.text(pt.panelId,Ve+3,ot+14);const Bt=Ve+50,Be=ot+2;Ae.setDrawColor(220,53,69),Ae.setLineWidth(1),Ae.line(Bt,Be,Bt,Be+16);const ze=Bt+18;Ae.line(ze,Be+2,ze,Be+14),Ae.line(Bt,Be,ze,Be),Ae.line(Bt,Be+16,ze,Be+16),Ae.setFontSize(14),Ae.setFont("helvetica","bold"),Ae.setTextColor(220,53,69),Ae.text("mecra",Bt+20,Be+11),Ae.setFontSize(7),Ae.setFont("helvetica","bold"),Ae.setTextColor(220,53,69);const st=Ve+ye-35;Ae.text("Bu Alanda",st,ot+6),Ae.setFontSize(6),Ae.setFont("helvetica","bold"),Ae.setTextColor(220,53,69),Ae.text("Reklam vermek icin",st,ot+11),Ne++}Ae.save(`panel-etiketleri-${new Date().toISOString().split("T")[0]}.pdf`),window.showAlert("Baarl",`${W.length} etiket PDF olarak indirildi.`,"success")},ee=q=>{const{name:W,value:xe}=q.target;g({...p,[W]:xe})},Z=q=>{const{name:W,value:xe}=q.target;C({...v,[W]:xe})},re=async q=>{if(q.preventDefault(),!p.name||!p.role){await window.showAlert("Eksik Bilgi","Ltfen zorunlu alanlar doldurunuz.","warning");return}if(!h&&(!p.password||p.password!==p.confirmPassword)){await window.showAlert("ifre Hatas","ifreler elemiyor.","warning");return}try{if(h){const W={...p,username:h.username||p.name.toLowerCase().replace(/\s+/g,""),status:h.status||"active"},xe=await XD(h.id,W);xe&&(n(r.map(ye=>ye.id===h.id?xe:ye)),d(!1),f(null),await window.showAlert("Baarl","Kullanc baaryla gncellendi.","success"))}else{const W={name:p.name,username:p.name.toLowerCase().replace(/\s+/g,""),password:p.password,role:p.role,status:"active"},xe=await qD(W);xe&&(n([...r,xe]),d(!1),await window.showAlert("Baarl",`Yeni ${X(p.role)} kullancs baaryla eklendi.`,"success"))}}catch(W){console.error("Error saving user:",W),await window.showAlert("Hata","Kullanc kaydedilirken bir hata olutu.","error")}},ce=async q=>{if(q.preventDefault(),!v.currentPassword||!v.newPassword||!v.confirmNewPassword){await window.showAlert("Eksik Bilgi","Ltfen tm alanlar doldurunuz.","warning");return}if(v.newPassword!==v.confirmNewPassword){await window.showAlert("ifre Hatas","Yeni ifreler elemiyor.","warning");return}console.log("Password updated:",v),C({currentPassword:"",newPassword:"",confirmNewPassword:""}),await window.showAlert("Baarl","ifre baaryla gncellendi.","success")},Y=async()=>{await window.showAlert("Bilgi","Firebase balantlar devre d braklmtr. Sistem sadece lokal modda almaktadr.","info")},ge=async()=>{const q=await window.showPrompt("Admin ifresi Gerekli","Sistem sfrlamak iin admin ifrenizi girin:","password");if(!q)return;try{if((await(await fetch("http://localhost:3001/api/users?username=admin&password="+encodeURIComponent(q))).json()).length===0){await window.showAlert("Hata","Admin ifresi hatal!","error");return}}catch{await window.showAlert("Hata","ifre dorulama srasnda bir hata olutu!","error");return}if(await window.showConfirm("Sistem Sfrlama","TM VERLER SLNECEK! Bu ilem geri alnamaz. Devam etmek istediinize emin misiniz?","error","Evet, Sistemi Sfrla","ptal"))try{const xe=await fetch("http://localhost:3001/reset",{method:"POST",headers:{"Content-Type":"application/json"}});if(xe.ok)await window.showAlert("Baarl","Sistem baaryla sfrland.","success"),window.location.reload();else{const ye=await xe.json().catch(()=>({error:"Unknown error"}));throw new Error(ye.error||"Reset endpoint returned an error")}}catch(xe){console.error("Error resetting system:",xe),await window.showAlert("Hata",`Sistem sfrlama srasnda bir hata olutu: ${xe.message}`,"error")}};return s?c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Ayarlar ykleniyor..."})]})}):m("div",{className:"container-fluid",children:[c("div",{className:"mb-4",children:c("h2",{className:"h3 fw-bold",children:"Ayarlar"})}),m("ul",{className:"nav nav-tabs mb-4",children:[c("li",{className:"nav-item",children:m("button",{className:`nav-link ${t==="users"?"active":""}`,onClick:()=>e("users"),children:[c("i",{className:"bi bi-people me-1"}),"Kullanclar"]})}),c("li",{className:"nav-item",children:m("button",{className:`nav-link ${t==="security"?"active":""}`,onClick:()=>e("security"),children:[c("i",{className:"bi bi-shield-lock me-1"}),"Gvenlik"]})}),c("li",{className:"nav-item",children:m("button",{className:`nav-link ${t==="logs"?"active":""}`,onClick:()=>e("logs"),children:[c("i",{className:"bi bi-journal-text me-1"}),"Log Kaytlar"]})}),c("li",{className:"nav-item",children:m("button",{className:`nav-link ${t==="labels"?"active":""}`,onClick:()=>e("labels"),children:[c("i",{className:"bi bi-printer me-1"}),"Etiket Bas"]})}),c("li",{className:"nav-item",children:m("button",{className:`nav-link ${t==="archive"?"active":""}`,onClick:()=>e("archive"),children:[c("i",{className:"bi bi-archive me-1"}),"Ariv"]})})]}),t==="users"&&c("div",{className:"card custom-card shadow-sm",children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[c("h5",{className:"card-title mb-0",children:"Kullanc Ynetimi"}),m("div",{className:"d-flex gap-2 align-items-center",children:[m("div",{className:"d-flex align-items-center gap-2",children:[m("label",{htmlFor:"roleFilter",className:"form-label mb-0 small",children:[c("i",{className:"bi bi-funnel me-1"}),"Rol Filtresi:"]}),m("select",{id:"roleFilter",className:"form-select form-select-sm",style:{width:"auto"},value:L,onChange:q=>N(q.target.value),children:[c("option",{value:"all",children:"Tm Roller"},"all"),te().map((q,W)=>c("option",{value:q,children:X(q)},`role-${q}-${W}`))]})]}),m("button",{onClick:G,className:"btn btn-primary btn-sm btn-icon",children:[c("i",{className:"bi bi-plus-lg"}),"Kullanc Ekle"]})]})]}),m("div",{className:"d-flex gap-2 mb-4 p-3 bg-light rounded",children:[m("button",{onClick:T,className:"btn btn-danger btn-sm",title:"Admin hari tm kullanclar sil",children:[c("i",{className:"bi bi-trash me-1"}),"Tm Kullanclar Sil"]}),m("button",{onClick:O,className:"btn btn-success btn-sm",title:"Tm site ve firmalar iin kullanc olutur",children:[c("i",{className:"bi bi-arrow-clockwise me-1"}),"Yeniden Olutur"]})]}),r.length>0&&c("div",{className:"mb-3",children:m("small",{className:"text-muted",children:[c("i",{className:"bi bi-info-circle me-1"}),L==="all"?`Toplam ${r.length} kullanc gsteriliyor.`:`${X(L)} rolnde ${ae.length} kullanc gsteriliyor.`]})}),c("div",{className:"table-responsive",children:m("table",{className:"table custom-table",children:[c("thead",{children:m("tr",{children:[c("th",{children:"Ad"}),c("th",{children:"Rol"}),c("th",{children:"Durum"}),c("th",{children:"lemler"})]})}),m("tbody",{children:[ae.map(q=>m("tr",{children:[c("td",{className:"fw-medium",children:q.name||q.username}),c("td",{children:c("span",{className:`badge ${q.role==="administrator"||q.role==="admin"?"bg-danger-subtle text-danger-emphasis":"bg-info-subtle text-info-emphasis"}`,children:X(q.role)})}),c("td",{children:c("span",{className:`badge ${q.status==="active"?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"}`,children:q.status==="active"?"Aktif":"Pasif"})}),m("td",{children:[m("div",{className:"d-flex gap-2",children:[c("button",{onClick:()=>Q(q.id),className:"btn btn-sm btn-outline-info",title:"Gster",children:c("i",{className:"bi bi-eye"})}),c("button",{onClick:()=>ue(q),className:"btn btn-sm btn-outline-secondary",title:"Dzenle",children:c("i",{className:"bi bi-pencil"})}),c("button",{onClick:()=>V(q.id),className:"btn btn-sm btn-outline-danger",title:"Sil",children:c("i",{className:"bi bi-trash"})})]}),E[q.id]&&c("div",{className:"mt-2 p-2 bg-light rounded",children:m("small",{children:[c("strong",{children:"Kullanc Ad:"})," ",q.username||q.name||"Bilinmiyor",c("br",{}),c("strong",{children:"ifre:"})," ",q.password||"Bilinmiyor"]})})]})]},q.id)),ae.length===0&&c("tr",{children:c("td",{colSpan:"4",className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-people"}),c("p",{className:"mb-3",children:r.length===0?"Henz kullanc bulunmamaktadr.":"Seilen role gre kullanc bulunmamaktadr."}),r.length===0&&c("button",{onClick:G,className:"btn btn-primary-gradient",children:"Kullanc Ekle"})]})})})]})]})})]})}),t==="security"&&c("div",{className:"card custom-card shadow-sm",children:m("div",{className:"card-body",children:[c("h5",{className:"card-title mb-4",children:"Gvenlik Ayarlar"}),m("form",{onSubmit:ce,children:[m("div",{className:"mb-3",children:[c("label",{htmlFor:"currentPassword",className:"form-label",children:"Mevcut ifre"}),c("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:Z,className:"form-control form-control-custom",placeholder:"Mevcut ifrenizi girin"})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"newPassword",className:"form-label",children:"Yeni ifre"}),c("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:Z,className:"form-control form-control-custom",placeholder:"Yeni ifrenizi girin"})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"confirmNewPassword",className:"form-label",children:"Yeni ifre (Tekrar)"}),c("input",{type:"password",id:"confirmNewPassword",name:"confirmNewPassword",value:v.confirmNewPassword,onChange:Z,className:"form-control form-control-custom",placeholder:"Yeni ifrenizi tekrar girin"})]}),c("div",{className:"d-flex justify-content-end",children:m("button",{type:"submit",className:"btn btn-primary-gradient",children:[c("i",{className:"bi bi-shield-check me-1"}),"ifreyi Gncelle"]})})]}),m("div",{className:"mt-5 pt-4 border-top",children:[c("h5",{className:"card-title mb-3",children:"Firebase Ayarlar"}),m("div",{className:"d-flex align-items-center justify-content-between p-3 bg-light rounded",children:[m("div",{children:[m("h6",{className:"mb-1",children:[c("i",{className:"bi bi-cloud-slash text-muted me-2"}),"Firebase Balants"]}),c("p",{className:"mb-0 text-muted small",children:"Firebase devre d - Veriler sadece lokal olarak saklanyor (db.json)"})]}),m("button",{onClick:Y,className:"btn btn-secondary",disabled:!0,children:[c("i",{className:"bi bi-lock me-1"}),"Devre D (Lokal Mod)"]})]}),c("p",{className:"text-muted mt-2",children:m("small",{children:[c("strong",{children:"Lokal Mod Aktif:"})," Tm veriler sadece lokal olarak saklanr (db.json), internet balants gerektirmez. Firebase balantlar tamamen devre d braklmtr."]})})]}),m("div",{className:"mt-4 pt-4 border-top",children:[c("h5",{className:"card-title mb-3",children:"Sistem Ynetimi"}),m("button",{onClick:ge,className:"btn btn-danger",children:[c("i",{className:"bi bi-exclamation-triangle me-1"}),"Sistemi Sfrla"]}),c("p",{className:"text-muted mt-2",children:c("small",{children:"Tm verileri siler ve sistemi ilk kurulum haline getirir. Bu ilem geri alnamaz!"})})]})]})}),t==="logs"&&c("div",{className:"card custom-card shadow-sm",children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[c("h5",{className:"card-title mb-0",children:"Sistem Log Kaytlar"}),m("button",{className:"btn btn-outline-primary btn-sm",onClick:z,disabled:l,children:[c("i",{className:`bi bi-arrow-clockwise me-1 ${l?"spinner-border spinner-border-sm":""}`}),"Yenile"]})]}),l?m("div",{className:"text-center py-4",children:[c("div",{className:"spinner-border text-primary",role:"status",children:c("span",{className:"visually-hidden",children:"Ykleniyor..."})}),c("p",{className:"mt-2 text-muted",children:"Log kaytlar ykleniyor..."})]}):i.length===0?m("div",{className:"text-center py-4",children:[c("i",{className:"bi bi-journal-x display-4 text-muted"}),c("p",{className:"mt-2 text-muted",children:"Henz log kayd bulunmuyor."})]}):c("div",{className:"table-responsive",children:m("table",{className:"table table-hover",children:[c("thead",{className:"table-light",children:m("tr",{children:[c("th",{style:{width:"15%"},children:"Tarih & Saat"}),c("th",{style:{width:"20%"},children:"Kullanc"}),c("th",{style:{width:"65%"},children:"lem"})]})}),c("tbody",{children:i.map(q=>m("tr",{children:[c("td",{children:m("div",{className:"d-flex flex-column",children:[c("span",{className:"fw-medium",children:(()=>{try{let W;if(q.timestamp&&typeof q.timestamp.toDate=="function")W=q.timestamp.toDate();else if(q.timestamp&&q.timestamp.seconds)W=new Date(q.timestamp.seconds*1e3);else if(q.timestamp)W=new Date(q.timestamp);else return"Tarih yok";return W.toLocaleDateString("tr-TR")}catch{return"Geersiz tarih"}})()}),c("small",{className:"text-muted",children:(()=>{try{let W;if(q.timestamp&&typeof q.timestamp.toDate=="function")W=q.timestamp.toDate();else if(q.timestamp&&q.timestamp.seconds)W=new Date(q.timestamp.seconds*1e3);else if(q.timestamp)W=new Date(q.timestamp);else return"Saat yok";return W.toLocaleTimeString("tr-TR")}catch{return"Geersiz saat"}})()})]})}),c("td",{children:c("span",{className:"badge bg-primary",children:q.user})}),c("td",{children:c("span",{className:"text-dark",children:q.action})})]},q.id))})]})}),i.length>0&&c("div",{className:"mt-3",children:m("small",{className:"text-muted",children:[c("i",{className:"bi bi-info-circle me-1"}),"Toplam ",i.length," log kayd gsteriliyor. En yeni kaytlar stte listelenmektedir."]})})]})}),t==="archive"&&c("div",{className:"card custom-card shadow-sm",children:c("div",{className:"card-body",children:c(h1e,{})})}),u&&c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:c("div",{className:"modal-dialog",children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[c("h5",{className:"modal-title",children:h?"Kullanc Dzenle":"Yeni Kullanc Ekle"}),c("button",{type:"button",className:"btn-close",onClick:de})]}),c("div",{className:"modal-body",children:m("form",{onSubmit:re,children:[m("div",{className:"mb-3",children:[c("label",{htmlFor:"name",className:"form-label",children:"Ad Soyad *"}),c("input",{type:"text",id:"name",name:"name",value:p.name,onChange:ee,className:"form-control form-control-custom",placeholder:"Ad soyad girin"})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"role",className:"form-label",children:"Rol *"}),c("select",{id:"role",name:"role",value:p.role,onChange:ee,className:"form-select form-control-custom",children:c("option",{value:"personnel",children:"Personel"},"personnel")}),c("div",{className:"form-text text-muted",children:m("small",{children:[c("strong",{children:"Personel:"})," Panel ynetimi ve grsel ykleme yetkisi.",c("br",{}),c("em",{children:"Not: Firma ve Site kullanclar otomatik olarak eklenir. Gzlemci ve ynetici hesaplar teknik kuruluma zeldir."})]})})]}),!h&&m(kr,{children:[m("div",{className:"mb-3",children:[c("label",{htmlFor:"password",className:"form-label",children:"ifre *"}),c("input",{type:"password",id:"password",name:"password",value:p.password,onChange:ee,className:"form-control form-control-custom",placeholder:"ifre girin"})]}),m("div",{className:"mb-3",children:[c("label",{htmlFor:"confirmPassword",className:"form-label",children:"ifre (Tekrar) *"}),c("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:p.confirmPassword,onChange:ee,className:"form-control form-control-custom",placeholder:"ifreyi tekrar girin"})]})]}),m("div",{className:"d-flex justify-content-end gap-2",children:[c("button",{type:"button",onClick:()=>{de()},className:"btn btn-secondary",children:"ptal"}),c("button",{type:"submit",className:"btn btn-primary-gradient",onClick:()=>{setTimeout(()=>{de()},100)},children:h?"Gncelle":"Ekle"})]})]})})]})})}),t==="labels"&&c("div",{className:"card custom-card shadow-sm",children:m("div",{className:"card-body",children:[m("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[m("h5",{className:"card-title mb-0",children:[c("i",{className:"bi bi-printer me-2"}),"Panel Etiketleri"]}),m("button",{className:"btn btn-primary",onClick:ie,children:[c("i",{className:"bi bi-download me-1"}),"PDF ndir"]})]}),m("div",{className:"row mb-4",children:[m("div",{className:"col-md-4",children:[c("label",{className:"form-label fw-bold",children:"Site Seimi"}),m("select",{className:"form-select",value:S,onChange:q=>_(q.target.value),children:[c("option",{value:"all",children:"Tm Siteler"},"all"),k.map(q=>m("option",{value:q.id,children:[q.name," (",q.siteType==="business_center"?" Merkezi":"Site",")"]},q.id))]})]}),m("div",{className:"col-md-4",children:[c("label",{className:"form-label fw-bold",children:"Tr Seimi"}),m("select",{className:"form-select",value:M,onChange:q=>K(q.target.value),children:[c("option",{value:"all",children:"Tm Trler"},"all"),c("option",{value:"site",children:"Sadece Siteler"},"site"),c("option",{value:"business_center",children:"Sadece  Merkezleri"},"business_center")]})]})]}),c("div",{className:"labels-container",children:k.filter(q=>!(S!=="all"&&q.id!==S||M!=="all"&&q.siteType!==M)).map(q=>{const W=q.siteType==="business_center"?["A"]:Array.from({length:parseInt(q.blocks)||0},(xe,ye)=>String.fromCharCode(65+ye));return m("div",{className:"mb-4",children:[m("h6",{className:"text-primary mb-3",children:[c("i",{className:`bi ${q.siteType==="business_center"?"bi-briefcase":"bi-building"} me-2`}),q.name," (",q.siteType==="business_center"?" Merkezi":"Site",")"]}),W.map(xe=>{const ye=q.siteType==="business_center"?parseInt(q.panels)||0:(parseInt(q.elevatorsPerBlock)||0)*2;return m("div",{className:"mb-3",children:[c("h6",{className:"text-muted mb-2",children:q.siteType==="business_center"?" Merkezi":`Blok ${xe}`}),c("div",{className:"row g-2",children:Array.from({length:ye},(Ue,Me)=>{const $e=Me+1,fe=`${q.id}${xe}${$e}`;return c("div",{className:"col-3 col-md-2 col-lg-1",children:c("div",{className:"label-sticker",children:m("div",{className:"label-content",children:[c("div",{className:"label-title",children:"Panel"}),c("div",{className:"label-id",children:fe}),c("div",{className:"label-site",children:q.name})]})})},fe)})})]},`${q.id}-${xe}`)})]},q.id)})})]})}),I&&m("div",{className:"toast show position-fixed bottom-0 end-0 m-3",style:{zIndex:1050},children:[m("div",{className:"toast-header bg-success text-white",children:[c("i",{className:"bi bi-check-circle me-2"}),c("strong",{className:"me-auto",children:"Baarl"}),c("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>F(!1)})]}),c("div",{className:"toast-body",children:"lem baaryla tamamland."})]})]})},m1e=()=>{const[t,e]=D.useState([]),[r,n]=D.useState([]),[i,a]=D.useState([]),[s,o]=D.useState([]),[l,A]=D.useState(!0),[u,d]=D.useState(""),[h,f]=D.useState(""),[p,g]=D.useState(!1);D.useEffect(()=>{(async()=>{try{const[_,M,K,z]=await Promise.all([Yi(),Sa(),Xa(),Dw().catch(te=>(console.warn("Error fetching panel images (non-critical):",te),[]))]),ae=_.filter((te,G,ue)=>G===ue.findIndex(de=>de.id===te.id&&de._docId===te._docId||de.id&&te.id&&de.id===te.id||de._docId&&te._docId&&de._docId===te._docId));e(ae),n(M),a(K),o(Array.isArray(z)?z:(z==null?void 0:z.data)||[])}catch(_){console.error("Error fetching data:",_)}finally{A(!1)}})()},[]);const v=S=>{const _=i.find(M=>String(M.id)===String(S));return _?_.name:"Unknown"},C=S=>{const _=[];for(let M=0;M<S;M++)_.push(String.fromCharCode(65+M));return _},I=(S,_,M,K)=>S<=K&&M<=_,F=S=>{let _=r.filter(M=>M.siteIds&&Array.isArray(M.siteIds)&&M.siteIds.includes(S));if(p&&u&&h){const M=new Date(u),K=new Date(h);_=_.filter(z=>{const ae=new Date(z.startDate),te=new Date(z.endDate);return I(M,K,ae,te)})}else _=_.filter(M=>M.status==="active");return _},E=(S,_,M,K)=>!s||!Array.isArray(s)||s.length===0?null:s.find(z=>String(z.agreementId)===String(S)&&String(z.siteId)===String(_)&&String(z.blockId)===String(M)&&String(z.panelId)===String(K)),R=(S,_,M)=>{var te;const K=F(S),z=`${S}-block-${_}`;for(const G of K)if(G.sitePanelSelections&&G.sitePanelSelections[S]){const ue=G.sitePanelSelections[S];if(ue[z]){if(G.dateRanges&&Array.isArray(G.dateRanges)&&G.dateRanges.length>0)for(let de=0;de<G.dateRanges.length;de++){const T=`range-${de}`,O=((te=ue[z])==null?void 0:te[T])||[];if(Array.isArray(O)&&O.includes(M)){let V=E(G.id,S,z,M);return V||(V=s.find(Q=>String(Q.siteId)===String(S)&&String(Q.blockId)===String(z)&&String(Q.panelId)===String(M))),{isUsed:!0,companyName:v(G.companyId),startDate:G.startDate,endDate:G.endDate,agreementId:G.id,status:G.status,photoUrl:G.photoUrl,panelImage:V}}}else if(Array.isArray(ue[z])&&ue[z].includes(M)){let de=E(G.id,S,z,M);return de||(de=s.find(T=>String(T.siteId)===String(S)&&String(T.blockId)===String(z)&&String(T.panelId)===String(M))),{isUsed:!0,companyName:v(G.companyId),startDate:G.startDate,endDate:G.endDate,agreementId:G.id,status:G.status,photoUrl:G.photoUrl,panelImage:de}}}}const ae=s.find(G=>String(G.siteId)===String(S)&&String(G.blockId)===String(z)&&String(G.panelId)===String(M));if(ae){const G=r.find(ue=>String(ue.id)===String(ae.agreementId));return{isUsed:!1,companyName:G?v(G.companyId):"Bilinmeyen",startDate:(G==null?void 0:G.startDate)||"",endDate:(G==null?void 0:G.endDate)||"",agreementId:ae.agreementId,status:(G==null?void 0:G.status)||"unknown",photoUrl:(G==null?void 0:G.photoUrl)||null,panelImage:ae}}return{isUsed:!1}},L=S=>new Date(S).toLocaleDateString("tr-TR"),N=()=>{const S=t.length,_=t.reduce((z,ae)=>z+(parseInt(ae.blocks)||0),0),M=t.reduce((z,ae)=>z+(parseInt(ae.panels)||0),0);let K=0;return t.forEach(z=>{const ae=z.siteType==="business_center",te=ae?1:parseInt(z.blocks)||0,G=ae?0:parseInt(z.elevatorsPerBlock)||0,ue=ae?parseInt(z.manualPanels)||parseInt(z.panels)||0:G*2,de=ae?["A"]:C(te);for(let T=0;T<te;T++){const O=de[T];for(let V=0;V<ue;V++){const Q=`panel-${V+1}`;R(z.id,O,Q).isUsed&&K++}}}),{totalSites:S,totalBlocks:_,totalPanels:M,usedPanels:K}};if(l)return c("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:m("div",{className:"text-center",children:[c("div",{className:"loading-spinner mx-auto"}),c("p",{className:"mt-3 text-muted",children:"Loading current status..."})]})});const P=N(),x=()=>{u&&h?g(!0):alert("Ltfen balang ve biti tarihlerini seiniz.")},k=()=>{d(""),f(""),g(!1)},y=async()=>{if(!p||!u||!h){alert("PDF kts alabilmek iin nce tarih aral seiniz.");return}try{const S=document.createElement("div");S.innerHTML=`
        <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 9999; text-align: center;">
          <div style="margin-bottom: 15px;">PDF oluturuluyor...</div>
          <div style="width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #007bff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
        </div>
        <style>
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        </style>
      `,document.body.appendChild(S);const _=new Xt({orientation:"portrait",unit:"mm",format:"a4"}),M=_.internal.pageSize.getWidth(),K=_.internal.pageSize.getHeight(),z=15,ae=M-2*z;let te=z;_.setFillColor(0,123,255),_.rect(0,0,M,25,"F"),_.setTextColor(255,255,255),_.setFontSize(18),_.setFont("helvetica","bold"),_.text("PANEL DURUMU RAPORU",M/2,15,{align:"center"}),_.setFontSize(12),_.setFont("helvetica","normal"),_.text(`${u} - ${h}`,M/2,22,{align:"center"}),te=35,_.setTextColor(0,0,0),_.setFontSize(12),_.setFont("helvetica","bold"),_.text("ZET STATSTKLER",z,te),te+=8;const G=[["Toplam Site",P.totalSites.toString()],["Toplam Blok",P.totalBlocks.toString()],["Toplam Panel",P.totalPanels.toString()],["Kullanlan Panel",P.usedPanels.toString()],["Doluluk Oran",`%${(P.usedPanels/P.totalPanels*100).toFixed(1)}`]];_.setFontSize(10),_.setFont("helvetica","normal");const ue=ae/2;for(let Q=0;Q<G.length;Q++){const X=z+(Q%2===0?0:ue),ie=te+Math.floor(Q/2)*6;_.setFont("helvetica","bold"),_.text(G[Q][0]+":",X,ie),_.setFont("helvetica","normal"),_.text(G[Q][1],X+40,ie)}te+=Math.ceil(G.length/2)*6+10,_.setFontSize(10),_.setFont("helvetica","bold"),_.text("PANEL DURUMU:",z,te),te+=6;const de=[{color:[0,123,255],text:"Aktif",icon:""},...p?[{color:[255,193,7],text:"Pasif",icon:""}]:[],{color:[248,249,250],text:"Bo",icon:""}];let T=z;_.setFontSize(9),de.forEach((Q,X)=>{_.setFillColor(...Q.color),_.rect(T,te-3,6,4,"F"),_.setDrawColor(0,0,0),_.rect(T,te-3,6,4),_.setFont("helvetica","normal"),_.setTextColor(0,0,0),_.text(`${Q.icon} ${Q.text}`,T+8,te),T+=35}),te+=12;for(const Q of t){const X=Q.siteType==="business_center",ie=X?1:parseInt(Q.blocks)||0,ee=X?0:parseInt(Q.elevatorsPerBlock)||0,Z=X?parseInt(Q.manualPanels)||parseInt(Q.panels)||0:ee*2,re=X?["A"]:C(ie);if(te>K-60&&(_.addPage(),te=z),_.setFillColor(240,240,240),_.rect(z,te-2,ae,8,"F"),_.setFontSize(12),_.setFont("helvetica","bold"),_.setTextColor(0,0,0),_.text(Q.name.toUpperCase(),z+2,te+3),_.setFontSize(8),_.setFont("helvetica","normal"),_.text(`${ie} Blok  ${ee} Asansr/Blok  ${Q.panels} Panel`,z+2,te+7),te+=12,ie===0){_.setFontSize(9),_.text("Blok bilgisi tanmlanmam",z+5,te),te+=8;continue}const ce=Math.min(4,ie),Y=Math.ceil(ie/ce);for(let ge=0;ge<Y;ge++){const q=ge*ce,W=Math.min(q+ce,ie);te>K-40&&(_.addPage(),te=z);for(let xe=q;xe<W;xe++){const ye=`block-${xe}`,Ue=re[xe],Me=z+(xe-q)*(ae/ce),$e=ae/ce-5;_.setFontSize(9),_.setFont("helvetica","bold"),_.text(`${Ue} BLOK`,Me,te);const fe=Math.min(6,Z),Oe=Math.ceil(Z/fe),Re=Math.min(8,$e/fe-1);let He=te+3;for(let pe=0;pe<Oe;pe++){const Le=pe*fe,lt=Math.min(Le+fe,Z);for(let Ae=Le;Ae<lt;Ae++){const Ne=`panel-${Ae}`,ve=Ae+1,Ce=R(Q.id,ye,Ne),Ke=Me+(Ae-Le)*(Re+1);Ce.isUsed?p&&Ce.status!=="active"?_.setFillColor(255,193,7):_.setFillColor(0,123,255):_.setFillColor(248,249,250),_.rect(Ke,He,Re,Re,"F"),_.setDrawColor(0,0,0),_.rect(Ke,He,Re,Re),_.setFontSize(6),_.setFont("helvetica","bold"),_.setTextColor(Ce.isUsed?255:0,Ce.isUsed?255:0,Ce.isUsed?255:0),_.text(ve.toString(),Ke+Re/2,He+Re/2+1,{align:"center"}),_.setTextColor(0,0,0)}He+=Re+1}}te+=Math.ceil(Z/Math.min(6,Z))*9+8}te+=5}const O=_.getNumberOfPages();for(let Q=1;Q<=O;Q++){_.setPage(Q),_.setFontSize(8),_.setFont("helvetica","normal"),_.setTextColor(128,128,128);const X=`Sayfa ${Q}/${O}  Oluturulma: ${new Date().toLocaleDateString("tr-TR")} ${new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`;_.text(X,M/2,K-5,{align:"center"})}document.body.removeChild(S);const V=`guncel-durum-${u}-${h}.pdf`;_.save(V),window.showAlert?await window.showAlert("Baarl","PDF raporu baaryla oluturuldu ve indirildi.","success"):alert("PDF raporu baaryla oluturuldu!")}catch(S){console.error("PDF oluturma hatas:",S);const _=document.querySelector('[style*="position: fixed"]');_&&_.remove(),window.showAlert?await window.showAlert("Hata",`PDF olutururken bir hata olutu: ${S.message}`,"error"):alert("PDF olutururken bir hata olutu.")}};return c(kr,{children:m("div",{className:"container-fluid py-4",children:[c("div",{className:"page-header mb-4",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[c("h2",{className:"h3 fw-bold mb-0",children:"Gncel Durum"}),c("div",{className:"d-flex gap-2",children:p&&u&&h&&m("button",{onClick:y,className:"btn btn-page-primary btn-icon d-flex align-items-center",children:[c("i",{className:"bi bi-file-earmark-pdf me-1"}),"PDF kts"]})})]})}),m("div",{className:"card custom-card shadow-sm mb-4",children:[c("div",{className:"card-header bg-info-subtle",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-funnel me-2"}),"Tarih Filtresi"]})}),c("div",{className:"card-body",children:m("div",{className:"row g-3 align-items-end",children:[m("div",{className:"col-md-3",children:[c("label",{htmlFor:"startDate",className:"form-label fw-bold",children:"Balang Tarihi"}),c("input",{type:"date",id:"startDate",className:"form-control",value:u,onChange:S=>d(S.target.value)})]}),m("div",{className:"col-md-3",children:[c("label",{htmlFor:"endDate",className:"form-label fw-bold",children:"Biti Tarihi"}),c("input",{type:"date",id:"endDate",className:"form-control",value:h,onChange:S=>f(S.target.value),min:u})]}),m("div",{className:"col-md-3",children:[m("button",{onClick:x,className:"btn btn-primary me-2",disabled:!u||!h,children:[c("i",{className:"bi bi-search me-1"}),"Filtrele"]}),m("button",{onClick:k,className:"btn btn-outline-secondary me-2",children:[c("i",{className:"bi bi-arrow-clockwise me-1"}),"Sfrla"]}),p&&u&&h&&m("button",{onClick:y,className:"btn btn-danger",children:[c("i",{className:"bi bi-file-earmark-pdf me-1"}),"PDF"]})]}),m("div",{className:"col-md-3",children:[p&&c("div",{className:"alert alert-info mb-0 py-2",children:m("small",{children:[c("i",{className:"bi bi-info-circle me-1"}),c("strong",{children:"Filtre Aktif:"})," ",u," - ",h]})}),!p&&c("div",{className:"alert alert-success mb-0 py-2",children:m("small",{children:[c("i",{className:"bi bi-check-circle me-1"}),c("strong",{children:"Canl Durum:"})," Sadece aktif anlamalar grntleniyor"]})})]})]})})]}),m("div",{className:"row g-3 mb-4",children:[c("div",{className:"col-md-3",children:c("div",{className:"card custom-card bg-primary text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-building fs-1 mb-2"}),c("h5",{className:"card-title",children:"Toplam Site"}),c("h2",{className:"card-text",children:P.totalSites})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card custom-card bg-success text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-grid-3x3-gap fs-1 mb-2"}),c("h5",{className:"card-title",children:"Toplam Blok"}),c("h2",{className:"card-text",children:P.totalBlocks})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card custom-card bg-info text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-grid fs-1 mb-2"}),c("h5",{className:"card-title",children:"Toplam Panel"}),c("h2",{className:"card-text",children:P.totalPanels})]})})}),c("div",{className:"col-md-3",children:c("div",{className:"card custom-card bg-warning text-white",children:m("div",{className:"card-body text-center",children:[c("i",{className:"bi bi-check-circle fs-1 mb-2"}),c("h5",{className:"card-title",children:"Kullanlan Panel"}),c("h2",{className:"card-text",children:P.usedPanels})]})})})]}),m("div",{className:"card custom-card shadow-sm mb-4",children:[c("div",{className:"card-header bg-secondary-subtle",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-palette me-2"}),"Panel Durum Aklamas"]})}),c("div",{className:"card-body py-2",children:m("div",{className:"row g-3 align-items-center",children:[c("div",{className:"col-auto",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"bg-primary text-white border rounded me-2",style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:"1"}),c("small",{children:"Aktif Anlama"})]})}),p&&c("div",{className:"col-auto",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"bg-warning text-dark border rounded me-2",style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:"2"}),c("small",{children:"Pasif Anlama (Tarih Aralnda)"})]})}),c("div",{className:"col-auto",children:m("div",{className:"d-flex align-items-center",children:[c("div",{className:"bg-light text-muted border rounded me-2",style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:"3"}),c("small",{children:"Bo Panel"})]})})]})})]}),m("div",{className:"card custom-card shadow-sm mb-4",children:[c("div",{className:"card-header bg-primary-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-building me-2"}),"Siteler"]})}),c("div",{className:"card-body",children:m("div",{className:"row g-4",children:[(t||[]).filter(S=>S.siteType!=="business_center").map(S=>{const _=parseInt(S.blocks)||0,M=parseInt(S.elevatorsPerBlock)||0,K=M*2,z=C(_);return c("div",{className:"col-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-primary-subtle",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-building me-2"}),S.name,S.neighborhood&&m("small",{className:"text-muted ms-2",children:["(",S.neighborhood,")"]})]}),m("div",{className:"small text-muted",children:[m("span",{className:"badge bg-secondary me-2",children:[_," Blok"]}),m("span",{className:"badge bg-secondary me-2",children:[M," Asansr/Blok"]}),m("span",{className:"badge bg-secondary",children:[S.panels||K*_," Panel"]})]})]})}),c("div",{className:"card-body",children:_===0?m("div",{className:"text-center py-4 text-muted",children:[c("i",{className:"bi bi-exclamation-triangle fs-1"}),c("p",{className:"mt-2 mb-0",children:"Bu site iin blok bilgisi tanmlanmam"})]}):c("div",{className:"row g-3",children:(z||[]).map((ae,te)=>{const G=`block-${te}`;return c("div",{className:"col-md-6 col-lg-4 col-xl-3",children:m("div",{className:"card border-success h-100",children:[c("div",{className:"card-header bg-success-subtle text-center",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-grid-3x3-gap me-1"}),ae," Blok"]})}),m("div",{className:"card-body p-2",children:[c("div",{className:"d-flex flex-wrap gap-1 justify-content-center",children:Array.from({length:K},(ue,de)=>{const T=`panel-${de+1}`,O=de+1,V=R(S.id,ae,T);return m("div",{className:`panel-${S.id}-${G}-${T} position-relative d-flex align-items-center justify-content-center border rounded ${V.isUsed?p&&V.status!=="active"?"bg-warning text-dark":"bg-primary text-white":"bg-light text-muted"}`,style:{width:V.panelImage?"90px":"60px",height:V.panelImage?"120px":"80px",fontSize:"10px",fontWeight:"bold",flexDirection:"column",padding:"2px",cursor:V.isUsed?"pointer":"default",backgroundImage:V.panelImage?`url(${V.panelImage.url})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:V.panelImage?"120px":"80px"},title:V.isUsed?`Panel ${O} - ${V.companyName}${p?` (${V.startDate} - ${V.endDate})`:` (Biti: ${V.endDate})`}${V.status?` [${V.status==="active"?"Aktif":"Pasif"}]`:""}`:`Panel ${O} - Bo`,"data-panel-id":`${S.id}-${G}-${T}`,"data-site-id":S.id,"data-block-id":G,"data-panel":T,onClick:()=>{if(V.isUsed){let Q=`
                                              <div class="text-start">
                                                <div class="mb-3">
                                                  <strong>Reklam Veren Firma:</strong> ${V.companyName}
                                                </div>
                                                <div class="mb-3">
                                                  <strong>Anlama Sresi:</strong> ${L(V.startDate)} - ${L(V.endDate)}
                                                </div>
                                                <div class="mb-3">
                                                  <strong>Anlama ID:</strong> ${V.agreementId}
                                                </div>
                                            `;V.photoUrl?Q+=`
                                                <div class="text-center mt-3">
                                                  <strong>Yayndaki Reklam Grseli:</strong>
                                                  <div class="mt-2">
                                                    <img src="${V.photoUrl}" style="max-width: 100%; max-height: 300px;" alt="Reklam Grseli" class="border rounded" />
                                                  </div>
                                                </div>
                                              `:Q+=`
                                                <div class="text-center mt-3">
                                                  <strong>Yayndaki Reklam Grseli:</strong>
                                                  <div class="mt-2 text-muted">
                                                    <i class="bi bi-image fs-1"></i>
                                                    <p class="mb-0">Grsel eklenmemi</p>
                                                  </div>
                                                </div>
                                              `,V.panelImage&&(Q+=`
                                                <div class="text-center mt-3">
                                                  <strong>Personel Yklenen Fotoraf:</strong>
                                                  <div class="mt-2">
                                                    <img src="${V.panelImage.url}" style="max-width: 100%; max-height: 300px;" alt="Panel Fotoraf" class="border rounded" />
                                                  </div>
                                                </div>
                                              `),Q+="</div>",window.showAlert("Panel Bilgisi",Q,"info")}},children:[!V.panelImage&&m(kr,{children:[c("div",{style:{fontSize:"12px"},children:O}),V.isUsed&&m(kr,{children:[c("div",{style:{fontSize:"8px",lineHeight:"1",textAlign:"center",wordBreak:"break-word",overflow:"hidden",maxHeight:"24px"},className:"mt-1",children:V.companyName.length>12?V.companyName.substring(0,12)+"...":V.companyName}),c("div",{style:{fontSize:"7px",lineHeight:"1",textAlign:"center"},className:"mt-1",children:p?`${V.startDate}`:V.endDate}),p&&c("div",{style:{fontSize:"6px",lineHeight:"1",textAlign:"center"},children:V.endDate})]})]}),V.isUsed&&c("div",{className:"position-absolute top-0 end-0",style:{fontSize:"8px"},children:V.panelImage?c("i",{className:"bi bi-camera-fill text-success"}):c("i",{className:"bi bi-lock-fill"})}),V.panelImage&&m("div",{className:"position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white text-center",style:{fontSize:"6px",padding:"2px"},children:["Panel ",O]})]},T)})}),m("div",{className:"text-center mt-2 small text-muted",children:[K," Panel"]})]})]})},G)})})})]})},S.id)}),t.filter(S=>S.siteType!=="business_center").length===0&&c("div",{className:"col-12",children:c("div",{className:"text-center py-5",children:m("div",{className:"empty-state",children:[c("i",{className:"bi bi-building"}),c("p",{className:"mb-3",children:"Henz site bulunmamaktadr."})]})})})]})})]}),t.filter(S=>S.siteType==="business_center").length>0&&m("div",{className:"card custom-card shadow-sm mb-4",children:[c("div",{className:"card-header bg-info-subtle",children:m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-briefcase me-2"})," Merkezleri"]})}),c("div",{className:"card-body",children:c("div",{className:"row g-4",children:(t||[]).filter(S=>S.siteType==="business_center").map(S=>{const _=parseInt(S.manualPanels)||parseInt(S.panels)||0,M=["A"];return c("div",{className:"col-12",children:m("div",{className:"card custom-card shadow-sm",children:[c("div",{className:"card-header bg-info-subtle",children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-briefcase me-2"}),S.name,S.neighborhood&&m("small",{className:"text-muted ms-2",children:["(",S.neighborhood,")"]})]}),m("div",{className:"small text-muted",children:[c("span",{className:"badge bg-info me-2",children:" Merkezi"}),m("span",{className:"badge bg-secondary",children:[_," Panel"]})]})]})}),c("div",{className:"card-body",children:_===0?m("div",{className:"text-center py-4 text-muted",children:[c("i",{className:"bi bi-exclamation-triangle fs-1"}),c("p",{className:"mt-2 mb-0",children:"Bu i merkezi iin panel bilgisi tanmlanmam"})]}):c("div",{className:"row g-3",children:M.map((K,z)=>{const ae=`block-${z}`;return c("div",{className:"col-md-6 col-lg-4 col-xl-3",children:m("div",{className:"card border-info h-100",children:[c("div",{className:"card-header bg-info-subtle text-center",children:m("h6",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-briefcase me-1"}),K," Blok"]})}),m("div",{className:"card-body p-2",children:[c("div",{className:"d-flex flex-wrap gap-1 justify-content-center",children:Array.from({length:_},(te,G)=>{const ue=`panel-${G+1}`,de=G+1,T=R(S.id,K,ue);return m("div",{className:`panel-${S.id}-${ae}-${ue} position-relative d-flex align-items-center justify-content-center border rounded ${T.isUsed?p&&T.status!=="active"?"bg-warning text-dark":"bg-primary text-white":"bg-light text-muted"}`,style:{width:T.panelImage?"90px":"60px",height:T.panelImage?"120px":"80px",fontSize:"10px",fontWeight:"bold",flexDirection:"column",padding:"2px",cursor:T.isUsed?"pointer":"default",backgroundImage:T.panelImage?`url(${T.panelImage.url})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:T.panelImage?"120px":"80px"},title:T.isUsed?`Panel ${de} - ${T.companyName}${p?` (${T.startDate} - ${T.endDate})`:` (Biti: ${T.endDate})`}${T.status?` [${T.status==="active"?"Aktif":"Pasif"}]`:""}${T.panelImage?" (Fotoraf var)":""}`:`Panel ${de} - Bo`,onClick:()=>{if(T.isUsed&&window.showAlert){let O=`<div class="text-start">
                                                    <div class="mb-3"><strong>Reklam Veren Firma:</strong> ${T.companyName}</div>
                                                    <div class="mb-3"><strong>Anlama Sresi:</strong> ${L(T.startDate)} - ${L(T.endDate)}</div>
                                                    <div class="mb-3"><strong>Anlama ID:</strong> ${T.agreementId}</div>
                                                  `;T.panelImage&&(O+=`
                                                      <div class="text-center mt-3">
                                                        <strong>Personel Yklenen Fotoraf:</strong>
                                                        <div class="mt-2">
                                                          <img src="${T.panelImage.url}" style="max-width: 100%; max-height: 300px;" alt="Panel Fotoraf" class="border rounded" />
                                                        </div>
                                                      </div>
                                                    `),O+="</div>",window.showAlert(`Panel ${de} - ${S.name}`,O,"info")}},children:[!T.panelImage&&c("div",{children:de}),T.isUsed&&c("div",{className:"position-absolute top-0 end-0",style:{fontSize:"8px"},children:T.panelImage?c("i",{className:"bi bi-camera-fill text-success"}):c("i",{className:"bi bi-lock-fill"})}),T.panelImage&&m("div",{className:"position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white text-center",style:{fontSize:"6px",padding:"2px"},children:["Panel ",de]})]},ue)})}),m("div",{className:"text-center mt-2 small text-muted",children:[_," Panel"]})]})]})},ae)})})})]})},S.id)})})})]})]})})},l2={lat:38.6748,lng:39.2233},p1e={width:"100%",height:"100vh"},g1e={zoomControl:!0,streetViewControl:!1,mapTypeControl:!0,fullscreenControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},v1e=()=>{const[t,e]=D.useState([]),[r,n]=D.useState(!0),[i,a]=D.useState(null),[s,o]=D.useState(l2),[l,A]=D.useState(12),u=D.useRef(null),d=DA(),h=cc(),f="AIzaSyAO5-L4SrMA1e5q3ugtjYCI1gVI7KZoD6g";D.useEffect(()=>{(async()=>{try{n(!0);const E=(await Yi()).filter(R=>R.locationLat&&R.locationLng&&!isNaN(parseFloat(R.locationLat))&&!isNaN(parseFloat(R.locationLng)));e(E)}catch(F){console.error("Error loading sites:",F)}finally{n(!1)}})()},[]);const p=D.useCallback(I=>{if(u.current=I,t.length>0&&window.google&&window.google.maps){const F=new window.google.maps.LatLngBounds;t.forEach(R=>{F.extend({lat:parseFloat(R.locationLat),lng:parseFloat(R.locationLng)})}),I.fitBounds(F);const E=window.google.maps.event.addListener(I,"bounds_changed",()=>{I.getZoom()>15&&I.setZoom(15),window.google.maps.event.removeListener(E)})}},[t]),g=I=>{a(I)},v=()=>{a(null)},C=I=>{const F=`https://www.google.com/maps/dir/?api=1&destination=${I.locationLat},${I.locationLng}`;window.open(F,"_blank")};return r?c("div",{className:"container-fluid d-flex align-items-center justify-content-center",style:{height:"100vh"},children:m("div",{className:"text-center",children:[c("div",{className:"spinner-border text-primary",role:"status",children:c("span",{className:"visually-hidden",children:"Ykleniyor..."})}),c("p",{className:"mt-3",children:"Harita ykleniyor..."})]})}):m("div",{className:"container-fluid p-0",style:{position:"relative",height:"100vh"},children:[c("div",{className:"bg-white shadow-sm p-3",style:{position:"absolute",top:0,left:0,right:0,zIndex:1e3},children:m("div",{className:"d-flex justify-content-between align-items-center",children:[m("div",{children:[m("h5",{className:"mb-0 fw-bold",children:[c("i",{className:"bi bi-map me-2"}),"Elaz - Site Haritas"]}),m("small",{className:"text-muted",children:[t.length," site haritada gsteriliyor"]})]}),m("div",{className:"d-flex gap-2",children:[m("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{if(u.current&&t.length>0&&window.google&&window.google.maps){const I=new window.google.maps.LatLngBounds;t.forEach(F=>{I.extend({lat:parseFloat(F.locationLat),lng:parseFloat(F.locationLng)})}),u.current.fitBounds(I)}},children:[c("i",{className:"bi bi-arrows-angle-contract me-1"}),"Tmn Gster"]}),m("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>{o(l2),A(12),u.current&&(u.current.setCenter(l2),u.current.setZoom(12))},children:[c("i",{className:"bi bi-geo-alt me-1"}),"Elaz Merkez"]}),m("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>d("/sites"),children:[c("i",{className:"bi bi-building me-1"}),"Siteler"]}),(h==null?void 0:h.role)==="personnel"&&m("button",{className:"btn btn-sm btn-primary",onClick:()=>d("/dashboard"),children:[c("i",{className:"bi bi-arrow-left me-1"}),"Personel Paneli"]})]})]})}),c(Rw,{googleMapsApiKey:f,children:m(LE,{mapContainerStyle:p1e,center:s,zoom:l,options:g1e,onLoad:p,children:[t.map(I=>c(of,{position:{lat:parseFloat(I.locationLat),lng:parseFloat(I.locationLng)},onClick:()=>g(I),icon:window.google&&window.google.maps?{url:I.siteType==="business_center"?"http://maps.google.com/mapfiles/ms/icons/blue-dot.png":"http://maps.google.com/mapfiles/ms/icons/red-dot.png",scaledSize:new window.google.maps.Size(32,32)}:void 0},I.id)),i&&c(Uw,{position:{lat:parseFloat(i.locationLat),lng:parseFloat(i.locationLng)},onCloseClick:v,children:m("div",{style:{maxWidth:"250px"},children:[m("h6",{className:"fw-bold mb-2",children:[c("i",{className:`bi ${i.siteType==="business_center"?"bi-briefcase":"bi-building"} me-1`}),i.name]}),i.neighborhood&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-geo-alt me-1"}),c("strong",{children:"Mahalle:"})," ",i.neighborhood]}),i.manager&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-person me-1"}),c("strong",{children:"Ynetici:"})," ",i.manager]}),i.phone&&m("p",{className:"mb-1 small",children:[c("i",{className:"bi bi-telephone me-1"}),c("strong",{children:"Telefon:"})," ",i.phone]}),i.location&&c("p",{className:"mb-2 small text-muted",children:i.location}),m("div",{className:"d-flex gap-2 mt-2",children:[m("button",{className:"btn btn-sm btn-primary",onClick:()=>C(i),children:[c("i",{className:"bi bi-map me-1"}),"Yol Tarifi"]}),i.blocks&&m("span",{className:"badge bg-info",children:[i.blocks," Blok"]}),i.panels&&m("span",{className:"badge bg-success",children:[i.panels," Panel"]})]})]})})]})}),m("div",{className:"bg-white shadow-sm p-3 rounded",style:{position:"absolute",bottom:"20px",left:"20px",zIndex:1e3,maxWidth:"250px"},children:[m("h6",{className:"fw-bold mb-2",children:[c("i",{className:"bi bi-info-circle me-1"}),"Aklama"]}),m("div",{className:"d-flex align-items-center mb-2",children:[c("img",{src:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",alt:"Site",style:{width:"20px",height:"20px",marginRight:"8px"}}),c("span",{className:"small",children:"Site"})]}),m("div",{className:"d-flex align-items-center",children:[c("img",{src:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",alt:" Merkezi",style:{width:"20px",height:"20px",marginRight:"8px"}}),c("span",{className:"small",children:" Merkezi"})]})]})]})},ko=({children:t})=>{const e=D.useRef(null);return e.current===null&&(e.current=Bq()),e.current?t:c(wQ,{to:"/",replace:!0})},w1e=({show:t,title:e,message:r,type:n="info",onClose:i,onConfirm:a,confirmText:s="Tamam",cancelText:o="ptal",showCancel:l=!1})=>{if(!t)return null;const A=()=>{switch(n){case"success":return"alert-success";case"warning":return"alert-warning";case"error":return"alert-danger";case"info":default:return"alert-info"}};return c("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:1050},onClick:i,children:c("div",{className:"modal-dialog modal-dialog-centered",onClick:d=>d.stopPropagation(),children:m("div",{className:"modal-content",children:[m("div",{className:"modal-header",children:[m("h5",{className:"modal-title d-flex align-items-center",children:[c("i",{className:`bi ${(()=>{switch(n){case"success":return"bi-check-circle-fill";case"warning":return"bi-exclamation-triangle-fill";case"error":return"bi-x-circle-fill";case"info":default:return"bi-info-circle-fill"}})()} me-2`}),e]}),c("button",{type:"button",className:"btn-close",onClick:i})]}),c("div",{className:"modal-body",children:c("div",{className:`alert ${A()} mb-0`,children:typeof r=="string"?c("div",{dangerouslySetInnerHTML:{__html:r}}):r})}),m("div",{className:"modal-footer",children:[l&&c("button",{type:"button",className:"btn btn-secondary",onClick:i,children:o}),c("button",{type:"button",className:`btn ${n==="warning"||n==="error"?"btn-danger":"btn-primary"}`,onClick:a||i,children:s})]})]})})})},b1e=()=>{const[t,e]=D.useState({show:!1,title:"",message:"",type:"info",onConfirm:null,showCancel:!1,confirmText:"Tamam",cancelText:"ptal"});return{alertState:t,showAlert:(a,s,o="info")=>new Promise(l=>{e({show:!0,title:a,message:s,type:o,onConfirm:()=>{e(A=>({...A,show:!1})),l(!0)},showCancel:!1})}),showConfirm:(a,s,o="warning",l="Tamam",A="ptal")=>new Promise(u=>{e({show:!0,title:a,message:s,type:o,onConfirm:()=>{e(d=>({...d,show:!1})),u(!0)},showCancel:!0,confirmText:l,cancelText:A,onCancel:()=>{e(d=>({...d,show:!1})),u(!1)}})}),hideAlert:()=>{e(a=>({...a,show:!1}))}}},nl=({children:t})=>{const e=Yv(),r=DA(),[n,i]=D.useState(!1),{alertState:a,showAlert:s,showConfirm:o,hideAlert:l}=b1e(),A=cc(),u=A&&A.role==="site_user",d=A&&A.role==="observer",h=A&&A.role==="company",f=A&&A.role==="personnel";A&&(A.role==="administrator"||A.role),window.showAlert=s,window.showConfirm=o;const p=()=>{PE(),r("/")},g=()=>u?"Site Panosu":d?"Gzlemci Panosu":h?`${(A==null?void 0:A.name)||(A==null?void 0:A.id)||"Firma"} - Firma Panosu`:f?"Personel Panosu":{"/dashboard":"Ana Sayfa","/sites":"Siteler","/companies":"Firmalar","/agreements":"Anlamalar","/cashier":"Kasa","/partner-shares":"Ortak Paylar","/current-status":"Gncel Durum","/settings":"Ayarlar","/settings/archive":"Ariv"}[e.pathname]||"Apart Mecra",v=h?[{name:"Firma Panosu",path:"/company-dashboard",icon:"bi-building"}]:f?[{name:"Personel Panosu",path:"/dashboard",icon:"bi-person-badge"}]:[{name:"Ana Sayfa",path:"/dashboard",icon:"bi-house-door"},...u?[]:[{name:"Siteler",path:"/sites",icon:"bi-building"},{name:"Firmalar",path:"/companies",icon:"bi-building-add"},{name:"Anlamalar",path:"/agreements",icon:"bi-handshake"},{name:"Kasa",path:"/cashier",icon:"bi-wallet2"},{name:"Ortak Paylar",path:"/partner-shares",icon:"bi-people"},{name:"Gncel Durum",path:"/current-status",icon:"bi-graph-up-arrow"},...d?[]:[{name:"Ayarlar",path:"/settings",icon:"bi-gear"}]]],C=I=>e.pathname===I;return m("div",{className:"d-flex flex-column min-vh-100",children:[c("header",{className:"navbar navbar-expand-lg navbar-light bg-white border-bottom shadow-sm fixed-top",children:m("div",{className:"container-fluid",children:[m("div",{className:"d-flex align-items-center",children:[c("div",{className:"bg-gradient rounded me-2",style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #0A66C2, #2ECC71)",display:"flex",alignItems:"center",justifyContent:"center"},children:c("span",{className:"text-white fw-bold",children:h?"F":f?"P":"A"})}),c("span",{className:"navbar-brand mb-0 h1 d-none d-md-block",children:h?"Firma Paneli":f?"Personel Paneli":"Apart Mecra Ynetim Paneli"})]}),c("div",{className:"d-flex align-items-center",children:c("h2",{className:"mb-0 fs-4 fw-semibold text-dark",children:g()})}),m("div",{className:"d-flex align-items-center",children:[m("div",{className:"dropdown",children:[c("button",{className:"btn btn-sm rounded-circle bg-primary text-white dropdown-toggle",type:"button",id:"userDropdown","data-bs-toggle":"dropdown","aria-expanded":"false",children:h?"F":f?"P":"A"}),m("ul",{className:"dropdown-menu dropdown-menu-end",children:[c("li",{children:m("a",{className:"dropdown-item",href:"#",children:[c("i",{className:"bi bi-person me-2"}),"Profil"]})}),c("li",{children:c("hr",{className:"dropdown-divider"})}),c("li",{children:m("button",{className:"dropdown-item text-danger",onClick:p,children:[c("i",{className:"bi bi-box-arrow-right me-2"}),"k Yap"]})})]})]}),c("button",{className:"btn btn-primary d-lg-none ms-2",type:"button",onClick:()=>i(!n),children:c("i",{className:"bi bi-list"})})]})]})}),c("div",{className:"container-fluid flex-grow-1 mt-5 pt-3",children:m("div",{className:"row h-100",children:[m("nav",{className:"col-lg-2 d-none d-lg-block bg-white border-end vh-100 position-fixed",children:[c("div",{className:"pt-3",children:c("ul",{className:"nav flex-column",children:v.map(I=>c("li",{className:"nav-item",children:m("a",{href:I.path,className:`nav-link ${C(I.path)?"text-white bg-primary":"text-dark"}`,style:C(I.path)?{borderRadius:"0.5rem"}:{},children:[c("i",{className:`bi ${I.icon} me-2`}),c("span",{children:I.name})]})},I.path))})}),c("div",{className:"position-absolute bottom-0 w-100 p-3 border-top",children:m("button",{onClick:p,className:"btn btn-danger w-100 d-flex align-items-center justify-content-center",children:[c("i",{className:"bi bi-box-arrow-right me-2"}),c("span",{children:"k Yap"})]})})]}),n&&m(kr,{children:[c("div",{className:"offcanvas-backdrop show d-lg-none",onClick:()=>i(!1)}),m("div",{className:"offcanvas offcanvas-end d-lg-none show",style:{visibility:"visible"},children:[m("div",{className:"offcanvas-header",children:[c("h5",{className:"offcanvas-title",children:h?"Firma Paneli":f?"Personel Paneli":"Apart Mecra Ynetim Paneli"}),c("button",{type:"button",className:"btn-close",onClick:()=>i(!1)})]}),m("div",{className:"offcanvas-body",children:[c("ul",{className:"nav flex-column",children:v.map(I=>c("li",{className:"nav-item",children:m("a",{href:I.path,className:`nav-link ${C(I.path)?"text-white bg-primary":"text-dark"}`,style:C(I.path)?{borderRadius:"0.5rem"}:{},onClick:()=>i(!1),children:[c("i",{className:`bi ${I.icon} me-2`}),c("span",{children:I.name})]})},I.path))}),c("div",{className:"mt-4",children:m("button",{onClick:()=>{p(),i(!1)},className:"btn btn-danger w-100 d-flex align-items-center justify-content-center",children:[c("i",{className:"bi bi-box-arrow-right me-2"}),c("span",{children:"k Yap"})]})})]})]})]}),c("main",{className:"col-lg-10 ms-lg-auto px-3 py-3",children:t})]})}),c(w1e,{show:a.show,title:a.title,message:a.message,type:a.type,onConfirm:a.onConfirm,onClose:l,showCancel:a.showCancel,confirmText:a.confirmText,cancelText:a.cancelText})]})},Bd=t=>function(r){const n=Nq();return m(kr,{children:[n&&m(kr,{children:[c("div",{dangerouslySetInnerHTML:{__html:n?`
      <style>
        .btn-primary-gradient,
        .btn-primary:not(.btn-outline-primary),
        .btn-success,
        .btn-danger,
        .btn-warning,
        .btn[type="submit"],
        .btn-icon:not(.btn-info):not(.btn-secondary),
        button[onclick],
        .btn[data-bs-toggle="modal"]:not(.btn-info):not(.btn-secondary),
        .btn-close,
        .dropdown-toggle {
          display: none !important;
        }
        
        .observer-warning {
          background: linear-gradient(135deg, #ffc107, #fd7e14);
          color: white;
          padding: 10px 15px;
          border-radius: 8px;
          margin-bottom: 20px;
          border: none;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .observer-warning i {
          margin-right: 8px;
        }
        
        /* Allow specific read-only buttons */
        .btn-info,
        .btn-secondary,
        .btn-outline-secondary {
          display: inline-block !important;
        }
        
        /* Hide edit/delete action buttons */
        .btn-sm.btn-outline-secondary,
        .btn-sm.btn-outline-warning,
        .btn-sm.btn-outline-danger {
          display: none !important;
        }
        
        /* Disable panel interactions for observers */
        [style*="cursor: pointer"] {
          cursor: default !important;
          pointer-events: none !important;
        }
        
        /* Hide form inputs and make them read-only */
        input:not([type="search"]):not([type="date"]):not([type="text"][readonly]),
        select:not([readonly]),
        textarea:not([readonly]) {
          pointer-events: none;
          background-color: #f8f9fa !important;
          opacity: 0.7;
        }
        
        /* Keep search and filter inputs functional */
        input[type="search"],
        input[type="date"][name*="filter"],
        input[type="date"][name*="dateFrom"],
        input[type="date"][name*="dateTo"],
        select[name*="filter"],
        select[name*="type"] {
          pointer-events: auto !important;
          background-color: white !important;
          opacity: 1 !important;
        }
      </style>
    `:""}}),m("div",{className:"alert observer-warning d-flex align-items-center",role:"alert",children:[c("i",{className:"bi bi-eye-fill"}),m("div",{children:[c("strong",{children:"Gzlemci Modu:"})," Bu sayfay sadece grntleme yetkisi ile kullanyorsunuz. Herhangi bir deiiklik yapma yetkiniz bulunmamaktadr."]})]})]}),c(t,{...r})]})},y1e=Bd(Jge),x1e=Bd(Zge),_1e=Bd(A1e),E1e=Bd(u1e),B1e=Bd(d1e),C1e=Bd(m1e),N1e=Bd(B6),S1e=()=>{const t=D.useRef(null);t.current===null&&(t.current=cc());const e=t.current;return e&&e.role==="site_user"?c(B6,{}):e&&e.role==="observer"?e.siteId?c(N1e,{}):c(Vse,{}):e&&e.role==="company"?c(C6,{}):e&&e.role==="personnel"?c(jse,{}):c(dY,{})};function k1e(){return c(EQ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c("div",{className:"App",children:m(yQ,{children:[c(as,{path:"/",element:c(mk,{})}),c(as,{path:"/login",element:c(mk,{})}),c(as,{path:"/dashboard",element:c(ko,{children:c(nl,{children:c(S1e,{})})})}),c(as,{path:"/company-dashboard",element:c(ko,{children:c(nl,{children:c(C6,{})})})}),c(as,{path:"/company-orders",element:c(ko,{children:c(nl,{children:c(Hse,{})})})}),c(as,{path:"/sites",element:c(ko,{children:c(nl,{children:c(y1e,{})})})}),c(as,{path:"/companies",element:c(ko,{children:c(nl,{children:c(x1e,{})})})}),c(as,{path:"/agreements",element:c(ko,{children:c(nl,{children:c(_1e,{})})})}),c(as,{path:"/cashier",element:c(ko,{children:c(nl,{children:c(E1e,{})})})}),c(as,{path:"/partner-shares",element:c(ko,{children:c(nl,{children:c(B1e,{})})})}),c(as,{path:"/settings",element:c(ko,{children:c(nl,{children:c(f1e,{})})})}),c(as,{path:"/current-status",element:c(ko,{children:c(nl,{children:c(C1e,{})})})}),c(as,{path:"/sites-map",element:c(ko,{children:c(v1e,{})})})]})})})}const T1e=async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("/sw.js");return console.log("Service Worker registered successfully:",t),t.addEventListener("updatefound",()=>{const e=t.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&I1e()})}),t}catch(t){console.error("Service Worker registration failed:",t)}},I1e=()=>{confirm("Yeni gncelleme mevcut! Sayfay yenilemek ister misiniz?")&&window.location.reload()},F1e=()=>{let t;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),t=e,P1e()}),window.addEventListener("installButtonClick",async()=>{if(t){t.prompt();const{outcome:e}=await t.userChoice;console.log(`User response to the install prompt: ${e}`),t=null}})},P1e=()=>{const t=document.createElement("button");t.textContent="Uygulamay Ykle",t.className="btn btn-primary position-fixed",t.style.cssText=`
    bottom: 20px;
    right: 20px;
    z-index: 9999;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  `,t.addEventListener("click",()=>{window.dispatchEvent(new Event("installButtonClick")),t.remove()}),document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.remove()},1e4)},L1e=()=>{window.addEventListener("appinstalled",t=>{console.log("PWA was installed"),typeof gtag<"u"&&gtag("event","pwa_install",{event_category:"PWA",event_label:"App Installed"})})},D1e=async()=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.getRegistrations();await Promise.all(t.map(e=>e.unregister())),await T1e(),console.log("PWA Service Worker registered")}catch(t){console.error("Error registering service worker:",t)}F1e(),L1e(),console.log("PWA initialized")};D1e();c2.createRoot(document.getElementById("root")).render(c(k1e,{}));export{W1e as $,oD as A,Rs as B,bl as C,wn as D,nwe as E,hd as F,yl as G,rwe as H,G1e as I,fo as J,TV as K,Qz as L,Lve as M,bve as N,yve as O,c$ as P,Ji as Q,Ave as R,rA as S,hn as T,Gve as U,Do as V,s$ as W,$ve as X,wve as Y,tve as Z,d_ as _,I0 as a,lve as a$,q1e as a0,Oz as a1,qz as a2,twe as a3,Pve as a4,jve as a5,ive as a6,ewe as a7,Mz as a8,sve as a9,Mve as aA,Vz as aB,jS as aC,Dve as aD,Rve as aE,cve as aF,uve as aG,Hve as aH,Vve as aI,i$ as aJ,ove as aK,GL as aL,_ve as aM,X1e as aN,Kve as aO,zve as aP,Ive as aQ,Yve as aR,K1e as aS,Eve as aT,mve as aU,fve as aV,vve as aW,ave as aX,Fve as aY,qve as aZ,rve as a_,xve as aa,Z1e as ab,eve as ac,nve as ad,Zve as ae,gve as af,pve as ag,Jn as ah,Bp as ai,Yz as aj,Uve as ak,Bve as al,Cve as am,Nve as an,Sve as ao,kve as ap,Tve as aq,Hz as ar,Jve as as,Wve as at,J1e as au,dve as av,hve as aw,HS as ax,Ove as ay,Qve as az,Kz as b,Xve as b0,xh as b1,go as b2,Bl as b3,Tr as b4,kF as b5,tw as b6,dc as b7,Zv as b8,e_ as b9,Oo as ba,ho as bb,ds as bc,Ds as bd,Awe as be,YW as bf,awe as bg,lwe as bh,XW as bi,cwe as bj,owe as bk,swe as bl,X2 as bm,H1e as bn,Q1e as bo,V1e as bp,M1e as bq,dn as br,uwe as bs,Hs as c,fd as d,Cn as e,vt as f,Cf as g,_p as h,E1 as i,Iw as j,Ep as k,Y1e as l,kw as m,fE as n,Vs as o,Tw as p,l$ as q,ii as r,Ou as s,Lt as t,z1e as u,bV as v,$n as w,iwe as x,Dr as y,j1e as z};
